package com.webnowbr.siscoat.cobranca.mb;

import java.awt.image.BufferedImage;
import java.io.BufferedInputStream;
import java.io.BufferedOutputStream;
import java.io.BufferedReader;
import java.io.ByteArrayInputStream;
import java.io.ByteArrayOutputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.OutputStream;
import java.io.UnsupportedEncodingException;
import java.math.BigDecimal;
import java.math.BigInteger;
import java.math.MathContext;
import java.math.RoundingMode;
import java.net.HttpURLConnection;
import java.net.MalformedURLException;
import java.net.URL;
import java.sql.SQLException;
import java.text.DecimalFormat;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Base64;
import java.util.Calendar;
import java.util.Collection;
import java.util.Collections;
import java.util.Comparator;
import java.util.Date;
import java.util.GregorianCalendar;
import java.util.HashMap;
import java.util.HashSet;
import java.util.List;
import java.util.Locale;
import java.util.Map;
import java.util.Set;
import java.util.TimeZone;
import java.util.stream.Collectors;
import java.util.zip.ZipEntry;
import java.util.zip.ZipOutputStream;

import javax.faces.application.FacesMessage;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.ManagedProperty;
import javax.faces.bean.SessionScoped;
import javax.faces.component.UIComponent;
import javax.faces.context.ExternalContext;
import javax.faces.context.FacesContext;
import javax.imageio.ImageIO;
import javax.servlet.http.HttpServletResponse;

import org.apache.commons.io.IOUtils;
import org.apache.pdfbox.pdmodel.PDDocument;
import org.apache.poi.ss.formula.functions.FinanceLib;
import org.apache.poi.ss.usermodel.BorderStyle;
import org.apache.poi.ss.usermodel.BuiltinFormats;
import org.apache.poi.ss.usermodel.CellStyle;
import org.apache.poi.ss.usermodel.CellType;
import org.apache.poi.ss.usermodel.CreationHelper;
import org.apache.poi.ss.usermodel.FillPatternType;
import org.apache.poi.ss.usermodel.HorizontalAlignment;
import org.apache.poi.ss.usermodel.IndexedColors;
import org.apache.poi.ss.usermodel.VerticalAlignment;
import org.apache.poi.ss.util.CellRangeAddress;
import org.apache.poi.xssf.usermodel.XSSFCell;
import org.apache.poi.xssf.usermodel.XSSFCellStyle;
import org.apache.poi.xssf.usermodel.XSSFFont;
import org.apache.poi.xssf.usermodel.XSSFRow;
import org.apache.poi.xssf.usermodel.XSSFSheet;
import org.apache.poi.xssf.usermodel.XSSFWorkbook;
import org.apache.poi.xwpf.usermodel.XWPFDocument;
import org.apache.poi.xwpf.usermodel.XWPFTable;
import org.hibernate.JDBCException;
import org.json.JSONArray;
import org.json.JSONObject;
import org.primefaces.PrimeFaces;
import org.primefaces.component.datatable.DataTable;
import org.primefaces.event.FileUploadEvent;
import org.primefaces.event.RowEditEvent;
import org.primefaces.event.SelectEvent;
import org.primefaces.event.ToggleSelectEvent;
import org.primefaces.event.UnselectEvent;
import org.primefaces.model.DefaultStreamedContent;
import org.primefaces.model.DualListModel;
import org.primefaces.model.LazyDataModel;
import org.primefaces.model.SortOrder;
import org.primefaces.model.StreamedContent;
import org.primefaces.model.charts.ChartData;
import org.primefaces.model.charts.axes.cartesian.CartesianScales;
import org.primefaces.model.charts.axes.cartesian.linear.CartesianLinearAxes;
import org.primefaces.model.charts.bar.BarChartDataSet;
import org.primefaces.model.charts.bar.BarChartModel;
import org.primefaces.model.charts.bar.BarChartOptions;
import org.primefaces.model.charts.optionconfig.title.Title;
import org.primefaces.model.charts.optionconfig.tooltip.Tooltip;
import org.quartz.JobBuilder;
import org.quartz.JobDetail;
import org.quartz.JobKey;
import org.quartz.Scheduler;
import org.quartz.SchedulerException;
import org.quartz.SchedulerFactory;
import org.quartz.Trigger;
import org.quartz.TriggerBuilder;
import org.quartz.impl.StdSchedulerFactory;

import com.itextpdf.text.BaseColor;
import com.itextpdf.text.Document;
import com.itextpdf.text.Element;
import com.itextpdf.text.Font;
import com.itextpdf.text.Font.FontFamily;
import com.itextpdf.text.Image;
import com.itextpdf.text.PageSize;
import com.itextpdf.text.Paragraph;
import com.itextpdf.text.Phrase;
import com.itextpdf.text.Rectangle;
import com.itextpdf.text.pdf.PdfPCell;
import com.itextpdf.text.pdf.PdfPTable;
import com.itextpdf.text.pdf.PdfWriter;
import com.webnowbr.siscoat.auxiliar.BigDecimalConverter;
import com.webnowbr.siscoat.auxiliar.CompactadorUtil;
import com.webnowbr.siscoat.auxiliar.EnviaEmail;
import com.webnowbr.siscoat.cobranca.auxiliar.RelatorioFinanceiroCobranca;
import com.webnowbr.siscoat.cobranca.auxiliar.RelatorioFinanceiroCobrancaResumo;
import com.webnowbr.siscoat.cobranca.db.model.AnaliseComite;
import com.webnowbr.siscoat.cobranca.db.model.Averbacao;
import com.webnowbr.siscoat.cobranca.db.model.BoletoKobana;
import com.webnowbr.siscoat.cobranca.db.model.Cartorio;
import com.webnowbr.siscoat.cobranca.db.model.CcbContrato;
import com.webnowbr.siscoat.cobranca.db.model.CcbParticipantes;
import com.webnowbr.siscoat.cobranca.db.model.CcbProcessosJudiciais;
import com.webnowbr.siscoat.cobranca.db.model.ContasPagar;
import com.webnowbr.siscoat.cobranca.db.model.ContratoCobranca;
import com.webnowbr.siscoat.cobranca.db.model.ContratoCobrancaBRLLiquidacao;
import com.webnowbr.siscoat.cobranca.db.model.ContratoCobrancaDetalhes;
import com.webnowbr.siscoat.cobranca.db.model.ContratoCobrancaDetalhesObservacoes;
import com.webnowbr.siscoat.cobranca.db.model.ContratoCobrancaDetalhesParcial;
import com.webnowbr.siscoat.cobranca.db.model.ContratoCobrancaFavorecidos;
import com.webnowbr.siscoat.cobranca.db.model.ContratoCobrancaFinanceiroDiaConsultaDetalhesParcialVO;
import com.webnowbr.siscoat.cobranca.db.model.ContratoCobrancaFinanceiroDiaConsultaDetalhesVO;
import com.webnowbr.siscoat.cobranca.db.model.ContratoCobrancaFinancerioDiaConsultaVO;
import com.webnowbr.siscoat.cobranca.db.model.ContratoCobrancaObservacoes;
import com.webnowbr.siscoat.cobranca.db.model.ContratoCobrancaParcelasInvestidor;
import com.webnowbr.siscoat.cobranca.db.model.ContratoCobrancaStatus;
import com.webnowbr.siscoat.cobranca.db.model.DataVistoria;
import com.webnowbr.siscoat.cobranca.db.model.DocketConsulta;
import com.webnowbr.siscoat.cobranca.db.model.DocumentoAnalise;
import com.webnowbr.siscoat.cobranca.db.model.FilaInvestidores;
import com.webnowbr.siscoat.cobranca.db.model.GravamesRea;
import com.webnowbr.siscoat.cobranca.db.model.GruposFavorecidos;
import com.webnowbr.siscoat.cobranca.db.model.GruposPagadores;
import com.webnowbr.siscoat.cobranca.db.model.IPCA;
import com.webnowbr.siscoat.cobranca.db.model.ImovelCobranca;
import com.webnowbr.siscoat.cobranca.db.model.ImovelCobrancaAdicionais;
import com.webnowbr.siscoat.cobranca.db.model.ImovelEstoque;
import com.webnowbr.siscoat.cobranca.db.model.PagadorRecebedor;
import com.webnowbr.siscoat.cobranca.db.model.PagadorRecebedorAdicionais;
import com.webnowbr.siscoat.cobranca.db.model.PagadorRecebedorConsulta;
import com.webnowbr.siscoat.cobranca.db.model.PagadorRecebedorSocio;
import com.webnowbr.siscoat.cobranca.db.model.PesquisaObservacoes;
import com.webnowbr.siscoat.cobranca.db.model.PreAprovadoPDF;
import com.webnowbr.siscoat.cobranca.db.model.QuitacaoPDF;
import com.webnowbr.siscoat.cobranca.db.model.QuitacaoParcelasPDF;
import com.webnowbr.siscoat.cobranca.db.model.RelatorioB3;
import com.webnowbr.siscoat.cobranca.db.model.Responsavel;
import com.webnowbr.siscoat.cobranca.db.model.Segurado;
import com.webnowbr.siscoat.cobranca.db.model.StarkBankBaixa;
import com.webnowbr.siscoat.cobranca.db.model.StarkBankBoleto;
import com.webnowbr.siscoat.cobranca.db.model.StarkBankPix;
import com.webnowbr.siscoat.cobranca.db.model.directd.PorcentagemImovel;
import com.webnowbr.siscoat.cobranca.db.op.CartorioDao;
import com.webnowbr.siscoat.cobranca.db.op.CcbDao;
import com.webnowbr.siscoat.cobranca.db.op.CcbParticipantesDao;
import com.webnowbr.siscoat.cobranca.db.op.CcbProcessosJudiciaisDao;
import com.webnowbr.siscoat.cobranca.db.op.ContasPagarDao;
import com.webnowbr.siscoat.cobranca.db.op.ContratoCobrancaDao;
import com.webnowbr.siscoat.cobranca.db.op.ContratoCobrancaDetalhesDao;
import com.webnowbr.siscoat.cobranca.db.op.ContratoCobrancaParcelasInvestidorDao;
import com.webnowbr.siscoat.cobranca.db.op.DashboardDao;
import com.webnowbr.siscoat.cobranca.db.op.DocketConsultaDao;
import com.webnowbr.siscoat.cobranca.db.op.DocketDao;
import com.webnowbr.siscoat.cobranca.db.op.DocumentoAnaliseDao;
import com.webnowbr.siscoat.cobranca.db.op.FilaInvestidoresDao;
import com.webnowbr.siscoat.cobranca.db.op.GruposFavorecidosDao;
import com.webnowbr.siscoat.cobranca.db.op.GruposPagadoresDao;
import com.webnowbr.siscoat.cobranca.db.op.IPCADao;
import com.webnowbr.siscoat.cobranca.db.op.ImovelCobrancaAdicionaisDao;
import com.webnowbr.siscoat.cobranca.db.op.ImovelCobrancaDao;
import com.webnowbr.siscoat.cobranca.db.op.PagadorRecebedorConsultaDao;
import com.webnowbr.siscoat.cobranca.db.op.PagadorRecebedorDao;
import com.webnowbr.siscoat.cobranca.db.op.RegistroImovelTabelaDao;
import com.webnowbr.siscoat.cobranca.db.op.ResponsavelDao;
import com.webnowbr.siscoat.cobranca.db.op.SeguradoDAO;
import com.webnowbr.siscoat.cobranca.db.op.StarkBankBaixaDAO;
import com.webnowbr.siscoat.cobranca.model.bmpdigital.ScrResult;
import com.webnowbr.siscoat.cobranca.model.cep.CepResult;
import com.webnowbr.siscoat.cobranca.service.BigDataService;
import com.webnowbr.siscoat.cobranca.service.CepService;
import com.webnowbr.siscoat.cobranca.service.DocketService;
import com.webnowbr.siscoat.cobranca.service.DocumentoAnaliseService;
import com.webnowbr.siscoat.cobranca.service.DrCalcService;
import com.webnowbr.siscoat.cobranca.service.EngineService;
import com.webnowbr.siscoat.cobranca.service.FileService;
import com.webnowbr.siscoat.cobranca.service.ImovelCobrancaRestricaoService;
import com.webnowbr.siscoat.cobranca.service.LaudoImovelService;
import com.webnowbr.siscoat.cobranca.service.NetrinService;
import com.webnowbr.siscoat.cobranca.service.PagadorRecebedorService;
import com.webnowbr.siscoat.cobranca.service.PajuService;
import com.webnowbr.siscoat.cobranca.service.RelatoriosService;
import com.webnowbr.siscoat.cobranca.service.ScrService;
import com.webnowbr.siscoat.cobranca.service.SerasaService;
import com.webnowbr.siscoat.cobranca.vo.ContratosPagadorAnalisadoVO;
import com.webnowbr.siscoat.cobranca.vo.FileGenerator;
import com.webnowbr.siscoat.cobranca.vo.FileUploaded;
import com.webnowbr.siscoat.cobranca.ws.netrin.NetrinConsulta;
import com.webnowbr.siscoat.cobranca.ws.netrin.NetrinConsultaDao;
import com.webnowbr.siscoat.cobranca.ws.plexi.PlexiConsulta;
import com.webnowbr.siscoat.cobranca.ws.plexi.PlexiConsultaDao;
import com.webnowbr.siscoat.common.CommonsUtil;
import com.webnowbr.siscoat.common.DateUtil;
import com.webnowbr.siscoat.common.DocumentosAnaliseEnum;
import com.webnowbr.siscoat.common.GeracaoBoletoMB;
import com.webnowbr.siscoat.common.GeradorRelatorioDownloadCliente;
import com.webnowbr.siscoat.common.GsonUtil;
import com.webnowbr.siscoat.common.ReportUtil;
import com.webnowbr.siscoat.common.SiscoatConstants;
import com.webnowbr.siscoat.common.ValidaCNPJ;
import com.webnowbr.siscoat.common.ValidaCPF;
import com.webnowbr.siscoat.db.dao.DAOException;
import com.webnowbr.siscoat.db.dao.DBConnectionException;
import com.webnowbr.siscoat.exception.SiscoatException;
import com.webnowbr.siscoat.infra.db.dao.ParametrosDao;
import com.webnowbr.siscoat.infra.db.dao.UserDao;
import com.webnowbr.siscoat.infra.db.model.User;
import com.webnowbr.siscoat.job.CertidoesJob;
import com.webnowbr.siscoat.security.LoginBean;
import com.webnowbr.siscoat.simulador.SimulacaoDetalheVO;
import com.webnowbr.siscoat.simulador.SimulacaoIPCACalculoV2;
import com.webnowbr.siscoat.simulador.SimulacaoIPCADadosV2;
import com.webnowbr.siscoat.simulador.SimulacaoVO;
import com.webnowbr.siscoat.simulador.SimuladorMB;

import br.com.galleriabank.drcalc.cliente.model.DebitosJudiciais;
import br.com.galleriabank.drcalc.cliente.model.DebitosJudiciaisRequest;
import br.com.galleriabank.drcalc.cliente.model.DebitosJudiciaisRequestValor;
import br.com.galleriabank.drcalc.cliente.model.DebitosJudiciaisValores;
import net.sf.jasperreports.engine.JRException;
import net.sf.jasperreports.engine.JasperFillManager;
import net.sf.jasperreports.engine.JasperPrint;
import net.sf.jasperreports.engine.JasperReport;
import net.sf.jasperreports.engine.data.JRBeanCollectionDataSource;

/** ManagedBean. */
@ManagedBean(name = "contratoCobrancaMB")
@SessionScoped
public class ContratoCobrancaMB {
	/** Controle dos dados da Paginação. */
	private LazyDataModel<ContratoCobranca> lazyModel;
	private LazyDataModel<Responsavel> responsaveisLazy;
	/** Variavel. */
	private DocumentoAnalise objetoDocumentoAnalise;
	private ContratoCobranca objetoContratoCobranca;
	private String numeroContratoObjetoContratoCobranca;
	private List<FileUploaded> documentoConsultarTodos;
	private boolean verificaReaProcessado;
	private Cartorio objetoCartorio = new Cartorio();
	private BigDecimal valorMercaoImovelPorcento;
	private BigDecimal valorMercadoImovelDez;
	private BigDecimal valorMercadoImovelVinte;
	private BigDecimal valorMercadoImovelTrinta;
	private BigDecimal valorMercadoImovelQuarenta;
	private BigDecimal valorMercadoImovelCinquenta;
	 private boolean apagaListaCartorio;

	private boolean updateMode = false;
	private boolean deleteMode = false;
	private boolean crmMode = false;
	private boolean baixarMode = false;
	private boolean blockForm = false;
	private List<String> restricaoOperacao = new ArrayList<String>();
	private List<String> restricaoImovel = new ArrayList<String>();
	private String tituloPainel = null;
	private String origemTelaBaixar;
	private String empresa;

	private String tipoParametroConsultaContrato;
	private String parametroConsultaContrato;

	private String tituloTelaConsultaPreStatus;
	private String tituloTelaLead = "";

	private Date dataHoje;
	private Date filtroDataCorteRelatorioDia;
	private boolean consideraDataCorteRelatorioDia;

	SimulacaoIPCACalculoV2 simulacaoIPCACalculoV2 = new SimulacaoIPCACalculoV2();

	private String tipoContratoCobrancaFinanceiroDia;

	private boolean contratoGerado = false;

	private boolean controleWhatsAppAgAssintura = false;
	private boolean controleWhatsAppAssinado = false;
	private boolean controleWhatsAppPajuLaudoRecebido = false;
	private boolean controleWhatsAppPreAprovado = false;
	private boolean controleWhatsAppComite = false;

	private boolean baixaMultiParcelasComTxADM = true;

	private boolean controleWhatsAlteracaoAvaliadorLaudo = false;
	private boolean controleWhatsAlteracaoAvaliadorLaudoGalache = false;
	private boolean controleWhatsAlteracaoGeracaoPAJU = false;

	private boolean callMetodoPorDialogBaixaParcial = false;

	private boolean baixaCustasDiversas = false;
	private boolean inserirImovelDisable = false;
	private boolean inserirImovelOcultarValorMercadoImovel = false;

	private long idAnalistaGeracaoPAJU = 0;

	private List<BoletoKobana> selectedBoletosKobana = new ArrayList<BoletoKobana>();
	private List<DocumentoAnalise> listaDocumentoAnalise;
	private List<DocumentoAnalise> listaDocumentoAnaliseRea;
	private List<DocumentoAnalise> listaDeleteAnalise = new ArrayList<DocumentoAnalise>();

	private BoletoKobana selectedBoletosKobanaBaixa = null;

	/************************************************************
	 * Objetos para antecipacao de parcela
	 ************************************************************/
	private int idAntecipacaoInvestidor;

	/************************************************************
	 * Objetos para Reparcelamento
	 ************************************************************/
	private BigInteger numeroParcelaReparcelamento;
	private BigDecimal saldoDevedorReparcelamento;
	private BigInteger carenciaReparcelamento;
	private Date dataParcela;
	/************************************************************
	 * Objetos para docket
	 ************************************************************/
	EngineService engineService;

	/************************************************************
	 * Objetos utilizados pelas LoVs
	 ***********************************************************/
	/************************************************************
	 * Objetos utilizados pelas fileService
	 ***********************************************************/
	FileService fileService = new FileService();

	/** Objeto selecionado na LoV - Pagador. */
	private GruposFavorecidos selectedGrupoFavorecido;

	/** Lista dos Pagadores utilizada pela LOV. */
	private List<GruposFavorecidos> listGrupoFavorecido;

	/** Nome do Pagador selecionado pela LoV. */
	private String nomeGrupoFavorecido;

	/** Id Objeto selecionado na LoV - Pagador. */
	private long idGrupoFavorecido;

	/** Objeto selecionado na LoV - Pagador. */
	private PagadorRecebedor selectedPagador;

	/** Objeto selecionado no popup do pesquisa. */
	private PagadorRecebedor selectedPagadorGenerico;

	String tipoPesquisaPagadorRecebedor = "";
	Segurado seguradoSelecionado;
	DocumentoAnalise documentoAnaliseAdicionar;
	PagadorRecebedorSocio socioSelecionado;
	PagadorRecebedorAdicionais pagadorSecundarioSelecionado;
	ImovelCobrancaAdicionais imovelAdicional;
	String updatePagadorRecebedor = "";
	String updateResponsavel = "";
	String tituloPagadorRecebedorDialog = "";
	AnaliseComite objetoAnaliseComite;
	DataVistoria dataVistoriaSelecionada = new DataVistoria();
	Averbacao averbacaoSelecionada = new Averbacao();

	ContasPagar contasPagarSelecionada;
	ContasPagar contasPagarArquivos;
	CcbProcessosJudiciais processoSelecionado;
	private List<CcbProcessosJudiciais> listProcessosSelecionado = new ArrayList<CcbProcessosJudiciais>();
	PagadorRecebedor pagadorProcesso;
	private boolean tipoPagadorProcesso;
	private boolean mostrarTodosProcessos;
	private List<PagadorRecebedor> pessoasProcessos = new ArrayList<PagadorRecebedor>();

	private boolean addSegurador;
	private boolean addSocio;
	private boolean addPagador;
	private boolean addContasPagar;
	private boolean gerenciaStatus;
	private boolean addPessoaAnalise;
	private DocumentoAnalise documentoAnalisePopup;
	private GravamesRea gravamePopup;
	private String estadoConsultaAdd;

	/** Lista dos Pagadores utilizada pela LOV. */
	private List<PagadorRecebedor> listPagadores;

	/** Nome do Pagador selecionado pela LoV. */
	private String nomePagador;

	/** Id Objeto selecionado na LoV - Pagador. */
	private long idPagador;

	/** Objeto selecionado na LoV - Pagador. */
	private GruposPagadores selectedGrupoPagadores;

	/** Lista dos Pagadores utilizada pela LOV. */
	private List<GruposPagadores> listGrupoPagadores;

	/** Nome do Pagador selecionado pela LoV. */
	private String nomeGrupoPagador;

	/** Id Objeto selecionado na LoV - Pagador. */
	private long idGrupoPagador;

	/** Nome do Pagador selecionado pela LoV. */
	private boolean grupoPagadores;

	/** Objeto selecionado na LoV - Recebedor. */
	private PagadorRecebedor selectedRecebedor;

	/** Objeto selecionado na LoV - Recebedor. */
	private PagadorRecebedor selectedRecebedor2;

	/** Objeto selecionado na LoV - Recebedor. */
	private PagadorRecebedor selectedRecebedor3;

	/** Objeto selecionado na LoV - Recebedor. */
	private PagadorRecebedor selectedRecebedor4;

	/** Objeto selecionado na LoV - Recebedor. */
	private PagadorRecebedor selectedRecebedor5;

	/** Objeto selecionado na LoV - Recebedor. */
	private PagadorRecebedor selectedRecebedor6;

	/** Objeto selecionado na LoV - Recebedor. */
	private PagadorRecebedor selectedRecebedor7;

	/** Objeto selecionado na LoV - Recebedor. */
	private PagadorRecebedor selectedRecebedor8;

	/** Objeto selecionado na LoV - Recebedor. */
	private PagadorRecebedor selectedRecebedor9;

	/** Objeto selecionado na LoV - Recebedor. */
	private PagadorRecebedor selectedRecebedor10;

	/** Lista dos Recebedores utilizada pela LOV. */
	private List<PagadorRecebedor> listRecebedores;

	/** Nome do Recebedor selecionado pela LoV. */
	private String nomeRecebedor;

	/** Id Objeto selecionado na LoV - Recebedor. */
	private long idRecebedor;

	/** Nome do Recebedor selecionado pela LoV. */
	private String nomeRecebedor2;

	/** Id Objeto selecionado na LoV - Recebedor. */
	private long idRecebedor2;

	/** Nome do Recebedor selecionado pela LoV. */
	private String nomeRecebedor3;

	/** Id Objeto selecionado na LoV - Recebedor. */
	private long idRecebedor3;

	/** Nome do Recebedor selecionado pela LoV. */
	private String nomeRecebedor4;

	/** Id Objeto selecionado na LoV - Recebedor. */
	private long idRecebedor4;

	/** Nome do Recebedor selecionado pela LoV. */
	private String nomeRecebedor5;

	/** Id Objeto selecionado na LoV - Recebedor. */
	private long idRecebedor5;

	/** Nome do Recebedor selecionado pela LoV. */
	private String nomeRecebedor6;

	/** Id Objeto selecionado na LoV - Recebedor. */
	private long idRecebedor6;

	/** Nome do Recebedor selecionado pela LoV. */
	private String nomeRecebedor7;

	/** Id Objeto selecionado na LoV - Recebedor. */
	private long idRecebedor7;

	/** Nome do Recebedor selecionado pela LoV. */
	private String nomeRecebedor8;

	/** Id Objeto selecionado na LoV - Recebedor. */
	private long idRecebedor8;

	/** Nome do Recebedor selecionado pela LoV. */
	private String nomeRecebedor9;

	/** Id Objeto selecionado na LoV - Recebedor. */
	private long idRecebedor9;

	/** Nome do Recebedor selecionado pela LoV. */
	private String nomeRecebedor10;

	/** Id Objeto selecionado na LoV - Recebedor. */
	private long idRecebedor10;

	private PagadorRecebedor selectedRecebedorFinal1;
	/** Nome do Recebedor selecionado pela LoV. */
	private String nomeRecebedorFinal1;
	/** Id Objeto selecionado na LoV - Recebedor. */
	private long idRecebedorFinal1;

	private PagadorRecebedor selectedRecebedorFinal2;
	/** Nome do Recebedor selecionado pela LoV. */
	private String nomeRecebedorFinal2;
	/** Id Objeto selecionado na LoV - Recebedor. */
	private long idRecebedorFinal2;

	private PagadorRecebedor selectedRecebedorFinal3;
	/** Nome do Recebedor selecionado pela LoV. */
	private String nomeRecebedorFinal3;
	/** Id Objeto selecionado na LoV - Recebedor. */
	private long idRecebedorFinal3;

	private PagadorRecebedor selectedRecebedorFinal4;
	/** Nome do Recebedor selecionado pela LoV. */
	private String nomeRecebedorFinal4;
	/** Id Objeto selecionado na LoV - Recebedor. */
	private long idRecebedorFinal4;

	private PagadorRecebedor selectedRecebedorFinal5;
	/** Nome do Recebedor selecionado pela LoV. */
	private String nomeRecebedorFinal5;
	/** Id Objeto selecionado na LoV - Recebedor. */
	private long idRecebedorFinal5;

	private PagadorRecebedor selectedRecebedorFinal6;
	/** Nome do Recebedor selecionado pela LoV. */
	private String nomeRecebedorFinal6;
	/** Id Objeto selecionado na LoV - Recebedor. */
	private long idRecebedorFinal6;

	private PagadorRecebedor selectedRecebedorFinal7;
	/** Nome do Recebedor selecionado pela LoV. */
	private String nomeRecebedorFinal7;
	/** Id Objeto selecionado na LoV - Recebedor. */
	private long idRecebedorFinal7;

	private PagadorRecebedor selectedRecebedorFinal8;
	/** Nome do Recebedor selecionado pela LoV. */
	private String nomeRecebedorFinal8;
	/** Id Objeto selecionado na LoV - Recebedor. */
	private long idRecebedorFinal8;

	private PagadorRecebedor selectedRecebedorFinal9;
	/** Nome do Recebedor selecionado pela LoV. */
	private String nomeRecebedorFinal9;
	/** Id Objeto selecionado na LoV - Recebedor. */
	private long idRecebedorFinal9;

	private PagadorRecebedor selectedRecebedorFinal10;
	/** Nome do Recebedor selecionado pela LoV. */
	private String nomeRecebedorFinal10;
	/** Id Objeto selecionado na LoV - Recebedor. */
	private long idRecebedorFinal10;

	/** Objeto selecionado na LoV - Responsavel. */
	private Responsavel selectedResponsavel;

	/** Lista dos Recebedores utilizada pela LOV. */
	private List<Responsavel> listResponsaveis;

	/** Nome do Recebedor selecionado pela LoV. */
	private String nomeResponsavel;

	/** Id Objeto selecionado na LoV - Responsavel. */
	private long idResponsavel;

	// private boolean tipoResponsavelIsFisica = false;
	private String cpfCCResp;
	private String cnpjCCResp;
	private String cpfCnpjCCResp;
	private String nomeCCResp;
	private String bancoResp;
	private String agenciaResp;
	private String contaResp;
	private String pixResp;

	/** Objeto selecionado na LoV - Imovel. */
	private ImovelCobranca selectedImovel;

	/** Lista dos Recebedores utilizada pela LOV. */
	private List<ImovelCobranca> listImoveis;

	/** Nome do Imovel selecionado pela LoV. */
	private String nomeImovel;

	/** Id Objeto selecionado na LoV - Imovel. */
	private long idImovel;

	private String qtdeParcelas;

	private String vlrTotal;
	private String vlrParcelas;
	private String vlrParcelaAtualizada;
	private BigDecimal vlrRecebido;

	private BigDecimal vlrParcelaNew;

	private BigDecimal vlrParcelaAtualizadaNew;

	private BigDecimal vlrRepasse;

	private BigDecimal vlrRetencao;

	private BigDecimal vlrComissao;

	private BigDecimal vlrRepasseFinal;

	private BigDecimal vlrRetencaoFinal;

	private BigDecimal vlrParcelaFinal;

	private BigDecimal vlrComissaoFinal;
	private ContratoCobrancaDetalhesParcial contratoCobrancaDetalhesParcialTemp;

	/** Atributos relatórios */
	private Date relDataContratoInicioAtraso;
	private Date relDataContratoFimAtraso;

	private Date relDataContratoInicio;
	private Date relDataContratoFim;
	private List<RelatorioFinanceiroCobranca> relObjetoContratoCobranca;
	private RelatorioFinanceiroCobranca relSelectedObjetoContratoCobranca;
	private ContratoCobrancaDetalhes selectedContratoCobrancaDetalhes;
	private RelatorioFinanceiroCobrancaResumo relatorioFinanceiroCobrancaResumo;

	private boolean relIsRelAtraso = false;
	private boolean relIsCompleto = true;
	private boolean relIsParcial = false;
	private String relParcial = "";
	private String filtrarDataVencimento = "Atualizada";

	private boolean tipoPessoaIsFisica = false;
	private boolean tipoPessoaIsFisicaCC = false;

	private String nomeFavorecido = null;
	private String cpfcnpjFavorecido = null;

	private StreamedContent file;
	private StreamedContent fileBoleto;

	private StreamedContent fileRecibo;

	private SimulacaoVO simuladorParcelas;

	private String pathContrato;
	private String nomeContrato;

	private List<ContratoCobrancaFavorecidos> listContratoCobrancaFavorecidos;

	private Date dataPagamentoFinalTmp;

	private List<ContratoCobrancaDetalhes> selectedListContratoCobrancaDetalhes;

	private List<ContratoCobrancaParcelasInvestidor> selectedListContratoCobrancaParcelasInvestidor;
	private List<ContratoCobrancaParcelasInvestidor> selectedListContratoCobrancaParcelasInvestidor2;
	private List<ContratoCobrancaParcelasInvestidor> selectedListContratoCobrancaParcelasInvestidor3;
	private List<ContratoCobrancaParcelasInvestidor> selectedListContratoCobrancaParcelasInvestidor4;
	private List<ContratoCobrancaParcelasInvestidor> selectedListContratoCobrancaParcelasInvestidor5;
	private List<ContratoCobrancaParcelasInvestidor> selectedListContratoCobrancaParcelasInvestidor6;
	private List<ContratoCobrancaParcelasInvestidor> selectedListContratoCobrancaParcelasInvestidor7;
	private List<ContratoCobrancaParcelasInvestidor> selectedListContratoCobrancaParcelasInvestidor8;
	private List<ContratoCobrancaParcelasInvestidor> selectedListContratoCobrancaParcelasInvestidor9;
	private List<ContratoCobrancaParcelasInvestidor> selectedListContratoCobrancaParcelasInvestidor10;

	private ContratoCobrancaDetalhes bpContratoCobrancaDetalhes;

	private ContratoCobrancaParcelasInvestidor baixaContratoCobrancaParcelasInvestidor;

	private boolean renderRecebedor2;
	private boolean renderRecebedor3;
	private boolean renderRecebedor4;
	private boolean renderRecebedor5;
	private boolean renderRecebedor6;
	private boolean renderRecebedor7;
	private boolean renderRecebedor8;
	private boolean renderRecebedor9;
	private boolean renderRecebedor10;

	private boolean renderRecebedorFinais;
	private boolean renderRecebedorFinal2;
	private boolean renderRecebedorFinal3;
	private boolean renderRecebedorFinal4;
	private boolean renderRecebedorFinal5;
	private boolean renderRecebedorFinal6;
	private boolean renderRecebedorFinal7;
	private boolean renderRecebedorFinal8;
	private boolean renderRecebedorFinal9;
	private boolean renderRecebedorFinal10;

	private Date dataPagamentoInvestidor;

	private String numContrato;

	private boolean tipoFiltros;

	@ManagedProperty(value = "#{loginBean}")
	protected LoginBean loginBean;

	@ManagedProperty(value = "#{kobanaMB}")
	protected KobanaMB kobanaMB;

	@ManagedProperty(value = "#{crmmb}")
	protected CRMMB crmmb;

	private String exibeSomenteFavorecidosFiltrados;

	private String filtroRelBaixado;

	private Collection<ContratoCobranca> contratosPendentes;
	private Collection<ContratoCobranca> contratos;
	private Collection<ContratosPagadorAnalisadoVO> contratosPagadorAnalisado;
	private Collection<ContratoCobranca> contratosImovelAnalisado;
	private List<ContratoCobranca> selectedContratos = new ArrayList<ContratoCobranca>();
	private String contratosLaudo;

	private Date rowEditNewDate;
	private boolean grupoFavorecidos = true;

	private String observacao;

	private Date dataPromessaPagamento;

	/***
	 * Campos utilizados na composicao do pre-cadastro
	 */
	private String codigoResponsavel;
	@ManagedProperty(value = "#{pagadorRecebedorMB}")
	protected PagadorRecebedorMB pagadorRecebedorMB;
	@ManagedProperty(value = "#{imovelCobrancaMB}")
	protected ImovelCobrancaMB imovelCobrancaMB;
	@ManagedProperty(value = "#{investidorMB}")
	protected InvestidorMB investidorMB;

	private ImovelCobranca objetoImovelCobranca;
	private ImovelEstoque objetoImovelEstoque;
	private PagadorRecebedor objetoPagadorRecebedor;
	private PagadorRecebedorSocio objetoSocio;
	private CcbContrato objetoCcb;

	private boolean geraBoletoInclusaoContrato;

	private Date dataVencimentoBoleto;
	private BigDecimal valorBoleto;
	private String valorBoletoStr;

	private Date dataObservacao;

	private String observacaoContrato;

	private ContratoCobrancaObservacoes contratoCobrancaObservacoes;
	private List<ContratoCobrancaObservacoes> listContratoCobrancaObservacoes;

	private boolean reciboGerado;

	private String pathRecibo;
	private String nomeRecibo;

	private boolean hasBaixaParcial;

	private boolean txZero;
	private boolean preContratoCustom;

	private String pesquisaObservacao;
	private List<PesquisaObservacoes> listPesquisaObservacoes;

	private Date dtReparcela;
	private BigDecimal vlrReparcela;
	private String qtdeReparcela;
	private String totalQtedParcelas;
	private BigDecimal totalVlrParcelas;

	private BigDecimal vlrCustosDiversosBaixa;

	private boolean baixaCustosDiversos;

	private boolean splitBoletoIugu;

	private List<PagadorRecebedor> cedentesIugu;
	private PagadorRecebedor cedente;
	private long cedenteSelecionado;

	private ContratoCobrancaDetalhes contratoCobrancaDetalhes;

	private List<ContratoCobrancaDetalhesObservacoes> listContratoCobrancaDetalhesObservacoes = new ArrayList<ContratoCobrancaDetalhesObservacoes>();
	private String observacaoContratoDetalhes;
	private ContratoCobrancaDetalhesObservacoes contratoCobrancaDetalhesObservacoes;

	public IuguMB iuguMb = new IuguMB();

	// public KobanaMB kobanaMB = new KobanaMB();

	private List<FilaInvestidores> listFilaInvestidores;
	private FilaInvestidores selectedInvestidor;
	private FilaInvestidores objetoFilaInvestidores;

	private ContratoCobranca contratoCobrancaCheckList;

	private BigDecimal vlrRepasseNew;
	private BigDecimal vlrRetencaoNew;
	private BigDecimal vlrComissaoNew;

	private BigDecimal vlrRepasseFinalNew;
	private BigDecimal vlrRetencaoFinalNew;
	private BigDecimal vlrComissaoFinalNew;

	private List<StarkBankBaixa> pagamentosStarkBankPendentes = new ArrayList<StarkBankBaixa>();
	private List<StarkBankBaixa> pagamentosStarkBankPendentesCartaSplit = new ArrayList<StarkBankBaixa>();
	private StarkBankBaixa objetoBaixaPagamentoStarkBank = new StarkBankBaixa();

	private DualListModel<PagadorRecebedor> dualListModelRecebedores;
	private List<PagadorRecebedor> listRecebedoresSeleciodados;

	List<ContratoCobrancaParcelasInvestidor> selectedParcelasInvestidorCorrespondente;
	List<ContratoCobrancaParcelasInvestidor> selectedParcelasInvestidorSA;
	List<ContratoCobrancaParcelasInvestidor> selectedParcelasInvestidorEnvelope;

	List<ContratoCobrancaFinancerioDiaConsultaVO> contratoCobrancaFinanceiroDia;

	private List<ContratoCobrancaFinancerioDiaConsultaVO> selectedContratoCobrancaFinanceiroDia;

	ContratoCobrancaParcelasInvestidor antecipacao;
	ContratoCobrancaDetalhes amortizacao;

	private int indexStepsStatusContrato;

	private Date dataPrevistaVistoria;
	private BigDecimal valorBoletoPreContrato;
	private BigDecimal taxaPreAprovada;
	private BigInteger prazoMaxPreAprovado;
	private BigDecimal valorMercadoImovel;
	private BigDecimal valorVendaForçadaImóvel;
	private String comentarioJuridico;

	private Date dataInicio;
	private Date dataFim;
	private Collection<ContratoCobranca> listaContratos = new ArrayList<ContratoCobranca>();
	private List<Responsavel> listResponsavel;

	private boolean financeiroGalleria = false;

	private Boolean addPagadorPreContrato;

	private List<ContratoCobrancaDetalhes> selectedParcelas = new ArrayList<ContratoCobrancaDetalhes>();

	private BigDecimal imovelCobrancaLatitude;
	private BigDecimal imovelCobrancaLongitude;
	private String laudoEndereco = "";
	private boolean laudoDone = false;
	private boolean erroPedidoLaudo = false;
	private boolean engineProcessados = false;
	private List<DocumentoAnalise> docList = new ArrayList<DocumentoAnalise>();

	public String rowSelected() {
		return null;
	}
	
	private	List<Cartorio> listaCartorio = new ArrayList<>();
	
	public void consultaCartorio(){
		CartorioDao dao = new CartorioDao();
		listaCartorio = dao.consultaCartorio(objetoContratoCobranca);
		if(listaCartorio.isEmpty()) {
			listaCartorio = null;
		}
		
	}

	public void excluiLista() {
		CartorioDao dao = new CartorioDao();
		List<Cartorio> cartorioExcluir = dao.consultaCartorio(objetoContratoCobranca);
		for (Cartorio cartorioItem : cartorioExcluir) {
			dao.delete(cartorioItem);
		}
		listaCartorio = dao.consultaCartorio(objetoContratoCobranca);
		consultaCartorio();
	}

	public void salvaCartorio() {
		User usuarioLogado = getUsuarioLogado();
		CartorioDao dao = new CartorioDao();

		if (objetoCartorio.getStatus() == null) {
			objetoCartorio.setStatus("Enviado Para cartório");
		}
		if (objetoCartorio.getDataStatus() == null) {
			objetoCartorio.setDataStatus(DateUtil.getDataHoje());
		}
		if (usuarioLogado != null && objetoCartorio != null) {
			this.objetoCartorio.setNomeUsuario(usuarioLogado.getName());
			this.objetoCartorio.setIdContrato(objetoContratoCobranca);
		}
		dao.create(objetoCartorio);
		objetoCartorio = new Cartorio();
		if (objetoContratoCobranca.isContratoEmCartorio()) {
			listaCartorio = dao.consultaCartorio(objetoContratoCobranca);
		}
	}
	public void saveContratoEmCartorio() {
		FacesContext context = FacesContext.getCurrentInstance();

		if (this.objetoContratoCobranca.isContratoEmCartorio()) {
			User usuarioLogado = getUsuarioLogado();

			if (usuarioLogado != null) {
				this.objetoContratoCobranca.setContratoEmCartorioUsuario(usuarioLogado.getName());
			}

			this.objetoContratoCobranca.setContratoEmCartorioData(DateUtil.gerarDataHoje());
		} else {
			this.objetoContratoCobranca.setContratoEmCartorioUsuario("");
			this.objetoContratoCobranca.setContratoEmCartorioData(null);
		}

		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();
		contratoCobrancaDao.merge(this.objetoContratoCobranca);

		geraConsultaContratosPerformance();

		context.addMessage(null,
				new FacesMessage(FacesMessage.SEVERITY_INFO,
						"Contrato " + this.objetoContratoCobranca.getNumeroContrato()
								+ " - Status contrato em cartório alterado com sucesso!!!",
						""));
	}

	public void alterarEmpresa() {
		FacesContext context = FacesContext.getCurrentInstance();

		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();
		contratoCobrancaDao.merge(this.objetoContratoCobranca);

		context.addMessage(null,
				new FacesMessage(FacesMessage.SEVERITY_INFO,
						"Contrato " + this.objetoContratoCobranca.getNumeroContrato()
								+ " - Alteração da empresa salva com sucesso!!!",
						""));
	}

	/**
	 * 
	 * Construtor.
	 */
	public ContratoCobrancaMB() {

		objetoContratoCobranca = new ContratoCobranca();

		engineService = new EngineService();

		lazyModel = new LazyDataModel<ContratoCobranca>() {

			/** Serial. */
			private static final long serialVersionUID = 1L;

			@Override
			public List<ContratoCobranca> load(final int first, final int pageSize, final String sortField,
					final SortOrder sortOrder, final Map<String, Object> filters) {

				/*
				 * Busca usuário logado para restringir retorno dos dados.
				 */

				filters.put("status", "Aprovado");
				if (loginBean != null) {
					User usuarioLogado = new User();
					UserDao u = new UserDao();
					usuarioLogado = u.findByFilter("login", loginBean.getUsername()).get(0);

					if (usuarioLogado != null) {
						if (!usuarioLogado.isAdministrador()) {
							filters.put("contratoRestritoAdm", "false");
						}

					}
				}

				ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();

				setRowCount(contratoCobrancaDao.count(filters));
				return contratoCobrancaDao.findByFilter(first, pageSize, sortField, sortOrder.toString(), filters);
			}
		};

		// TODO FILTER
		responsaveisLazy = new LazyDataModel<Responsavel>() {

			/** Serial. */
			private static final long serialVersionUID = 1L;

			@Override
			public List<Responsavel> load(final int first, final int pageSize, final String sortField,
					final SortOrder sortOrder, final Map<String, Object> filters) {

				ResponsavelDao responsavelDao = new ResponsavelDao();

				setRowCount(responsavelDao.count(filters));
				return responsavelDao.findByFilter(first, pageSize, sortField, sortOrder.toString(), filters);
			}
		};

		// INICIO - Tratamento para Pré-Contrato
		this.objetoContratoCobranca = new ContratoCobranca();
		this.objetoContratoCobranca.setDataContrato(new Date());
		loadLovs();
		clearSelectedLovs();
		this.contratoGerado = false;
		this.qtdeParcelas = null;
		clearSelectedRecebedores();
		this.seguradoSelecionado = new Segurado();
		this.seguradoSelecionado.setPessoa(new PagadorRecebedor());
		this.pagadorSecundarioSelecionado = new PagadorRecebedorAdicionais();
		this.pagadorSecundarioSelecionado.setPessoa(new PagadorRecebedor());
		this.socioSelecionado = new PagadorRecebedorSocio();
		this.socioSelecionado.setPessoa(new PagadorRecebedor());
		this.tituloPagadorRecebedorDialog = "";
		this.addSegurador = false;
		this.addSocio = false;
		this.addPagador = false;
		this.mostrarTodosProcessos = false;

		this.contasPagarSelecionada = new ContasPagar();
		this.contasPagarSelecionada.setPagadorRecebedor(new PagadorRecebedor());
		this.contasPagarSelecionada.setResponsavel(new Responsavel());
		this.processoSelecionado = new CcbProcessosJudiciais();
		this.pagadorProcesso = new PagadorRecebedor();

		this.addContasPagar = false;
		this.vlrParcelaFinal = null;
		this.vlrRepasse = null;
		this.vlrRepasseFinal = null;
		this.vlrRetencao = null;
		this.vlrRetencaoFinal = null;
		this.vlrComissao = null;
		this.vlrComissaoFinal = null;
		this.objetoContratoCobranca.setGeraParcelaFinal(false);
		this.objetoContratoCobranca.setNumeroContrato(null);
		this.codigoResponsavel = null;
		files = new ArrayList<FileUploaded>();
		filesInterno = new ArrayList<FileUploaded>();
		filesFaltante = new ArrayList<FileUploaded>();
		filesJuridico = new ArrayList<FileUploaded>();
		filesComite = new ArrayList<FileUploaded>();

		this.hasBaixaParcial = false;

		this.objetoImovelCobranca = new ImovelCobranca();
		this.objetoPagadorRecebedor = new PagadorRecebedor();
		this.tipoPessoaIsFisica = true;
		// FIM - Tratamento para Pré-Contrato
	}

	public String consultarContratoCobranca() {
		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();
		this.contratos = new ArrayList<ContratoCobranca>();

		if (loginBean != null) {
			User usuarioLogado = new User();
			UserDao u = new UserDao();
			usuarioLogado = u.findByFilter("login", loginBean.getUsername()).get(0);

			if (usuarioLogado != null) {
				if (usuarioLogado.isAdministrador()) {
					this.contratos = contratoCobrancaDao.consultaContratosAprovados(null);
				} else {
					this.contratos = contratoCobrancaDao
							.consultaContratosAprovados(usuarioLogado.getCodigoResponsavel());
				}
			}
		}

		return "/Atendimento/Cobranca/ContratoCobrancaConsultar.xhtml";
	}

	public String consultarContratoCobrancaGalleria() {
		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();
		this.contratos = new ArrayList<ContratoCobranca>();

		if (loginBean != null) {
			User usuarioLogado = new User();
			UserDao u = new UserDao();
			usuarioLogado = u.findByFilter("login", loginBean.getUsername()).get(0);

			if (usuarioLogado != null) {
				if (usuarioLogado.isAdministrador()) {
					this.contratos = contratoCobrancaDao.consultaContratosAprovadosGalleria(null);
				} else {
					this.contratos = contratoCobrancaDao
							.consultaContratosAprovadosGalleria(usuarioLogado.getCodigoResponsavel());
				}
			}
		}

		return "/Atendimento/Cobranca/ContratoCobrancaDebenturistasConsultar.xhtml";
	}

	/**
	 * USADO NA TELA DE FILA DE INVESTIDORES
	 * 
	 * @return
	 */
	public String clearFieldFilaInvestidores() {
		this.listFilaInvestidores = new ArrayList<FilaInvestidores>();
		this.objetoFilaInvestidores = new FilaInvestidores();

		FilaInvestidoresDao fDao = new FilaInvestidoresDao();
		this.listFilaInvestidores = fDao.findAll();

		clearRecebedor();
		PagadorRecebedorDao pagadorRecebedorDao = new PagadorRecebedorDao();
		this.listRecebedores = pagadorRecebedorDao.findAll();

		this.selectedInvestidor = new FilaInvestidores();

		return "/Atendimento/Cobranca/FilaInvestidores.xhtml";
	}

	public String clearFieldADDFilaInvestidores() {
		this.objetoFilaInvestidores = new FilaInvestidores();
		this.objetoFilaInvestidores.setDataInsercao(DateUtil.gerarDataHoje());

		clearRecebedor();

		this.selectedInvestidor = new FilaInvestidores();

		return "/Atendimento/Cobranca/FilaInvestidoresInserir.xhtml";
	}

	public String clearFieldEDITFilaInvestidores() {

		this.idRecebedor = this.objetoFilaInvestidores.getInvestidor().getId();
		this.nomeRecebedor = this.objetoFilaInvestidores.getInvestidor().getNome();

		this.selectedRecebedor = this.objetoFilaInvestidores.getInvestidor();

		return "/Atendimento/Cobranca/FilaInvestidoresInserir.xhtml";
	}

	public String addInvestidorNaFila() {
		FacesContext context = FacesContext.getCurrentInstance();
		FilaInvestidoresDao fDao = new FilaInvestidoresDao();

		if (this.selectedRecebedor.getId() > 0) {
			this.objetoFilaInvestidores.setInvestidor(this.selectedRecebedor);

			if (this.objetoFilaInvestidores.getId() > 0) {
				fDao.merge(this.objetoFilaInvestidores);
			} else {
				fDao.create(this.objetoFilaInvestidores);
			}

			context.addMessage(null,
					new FacesMessage(FacesMessage.SEVERITY_INFO,
							"Contrato Cobrança - Fila de Investidores: Investidor inserido com sucesso! (Investidor: "
									+ this.selectedRecebedor.getNome() + ")",
							""));

			return clearFieldFilaInvestidores();
		} else {
			context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR,
					"Contrato Cobrança - Fila de Investidores: Para inserir um investidor na fila é necessária a pré-seleção do mesmo!",
					""));

			return "";
		}
	}

	public String deleteInvestidorFila() {
		FacesContext context = FacesContext.getCurrentInstance();

		FilaInvestidoresDao fDao = new FilaInvestidoresDao();
		fDao.delete(this.objetoFilaInvestidores);

		context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_INFO,
				"Contrato Cobrança - Fila de Investidores: Investidor excluído com sucesso!", ""));

		return clearFieldFilaInvestidores();
	}

	/**
	 * FIM - USADO NA TELA DE FILA DE INVESTIDORES
	 * 
	 * @return
	 */

	public void geraBoletoDaParcela(ContratoCobranca contrato, String parcela, long idParcela, Date vencimento,
			BigDecimal valor, boolean splitBoletoIugu, long cedente) {
		this.iuguMb.geraBoletoDaParcela(contrato, parcela, idParcela, vencimento, valor, splitBoletoIugu, cedente);

		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();
		this.objetoContratoCobranca = contratoCobrancaDao.findById(this.objetoContratoCobranca.getId());
	}

	/**
	 * FIM - USADO NA TELA DE FILA DE INVESTIDORES
	 * 
	 * @return
	 */

	public void geraBoletoDaParcelaGalleria(ContratoCobranca contrato, String parcela, long idParcela, Date vencimento,
			BigDecimal valor, boolean splitBoletoIugu, long cedente) {
		this.iuguMb.geraBoletoDaParcela(contrato, parcela, idParcela, vencimento, valor, splitBoletoIugu, cedente);

		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();
		this.objetoContratoCobranca = contratoCobrancaDao.findById(this.objetoContratoCobranca.getId());
	}

	public void geraBoletoDaParcelaKobana(ContratoCobranca contrato, ContratoCobrancaDetalhes parcela, Date vencimento,
			BigDecimal valor) {

		this.kobanaMB.gerarBoletoSimplesTela(contrato, parcela, vencimento, valor);

		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();
		this.objetoContratoCobranca = contratoCobrancaDao.findById(this.objetoContratoCobranca.getId());
	}

	public void geraBoletoMaisParcelasKobana(ContratoCobranca contrato,
			List<ContratoCobrancaDetalhes> parcelasSelecionadas, Date vencimento, BigDecimal valor) {

		FacesContext context = FacesContext.getCurrentInstance();

		if (parcelasSelecionadas.size() > 0) {
			this.kobanaMB.gerarBoletoMaisParcelasKobana(contrato, parcelasSelecionadas, vencimento, valor);

			ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();
			this.objetoContratoCobranca = contratoCobrancaDao.findById(this.objetoContratoCobranca.getId());
		} else {
			context.addMessage(null,
					new FacesMessage(FacesMessage.SEVERITY_ERROR, "Boleto Kobana - Nenhuma parcela selecionada!", ""));
		}
	}

	public void emitirCCB() {
		CcbMB ccbMb = new CcbMB();
		ccbMb.clearFieldsInserirCcb();
		this.objetoContratoCobranca = getContratoById(this.objetoContratoCobranca.getId());
		this.objetoImovelCobranca = this.objetoContratoCobranca.getImovel();
		this.objetoPagadorRecebedor = this.objetoContratoCobranca.getPagador();
		ccbMb.setSelectedPagadorGenerico(this.objetoPagadorRecebedor);
		ccbMb.setTipoPesquisa("Emitente");
		ccbMb.EmitirCcbPreContrato();
	}

	public void geraBoletoLaudoPAJU(ContratoCobranca contrato, Date vencimento, String valorBoletoStr) {
		ContratoCobrancaDao cDao = new ContratoCobrancaDao();

		this.objetoContratoCobranca = cDao.findById(contrato.getId());

		// carrega pagador
		if (this.objetoContratoCobranca.getPagador().getEndereco().equals("")
				|| this.objetoContratoCobranca.getPagador().getCep().equals("")) {
			this.objetoContratoCobranca.getPagador().setEndereco(this.objetoContratoCobranca.getImovel().getEndereco());
			this.objetoContratoCobranca.getPagador().setCep(this.objetoContratoCobranca.getImovel().getCep());
		}
		this.iuguMb.setSelectedRecebedor(this.objetoContratoCobranca.getPagador());

		this.iuguMb.setDataVencimento(vencimento);

		// Armazena na Fatura para dar match no retorno do gatilho do splitter
		this.iuguMb.setIdContrato(String.valueOf(this.objetoContratoCobranca.getId()));
		this.iuguMb.setIdParcela("1");

		BigDecimal valorItem = new BigDecimal(valorBoletoStr.replace(".", "").replace(",", "."));
		this.iuguMb.setValorItem(valorItem);
		this.objetoContratoCobranca.setValorBoletoPreContrato(valorItem);

		this.iuguMb.setContratoCobranca(this.objetoContratoCobranca);

		this.iuguMb.geraCobrancaSimplesContrato("bd88479c57011124c25638b26572e453", 34);
	}

	public void calcularValorLaudoPaju() {
		this.objetoContratoCobranca.setValorLaudoPajuFaltante(this.objetoContratoCobranca.getValorLaudoPajuTotal()
				.subtract(this.objetoContratoCobranca.getValorLaudoPajuPago()));
	}

	/******************************************************************
	 * ******************************************************** CODIFICAÇÃO DO
	 * TRATAMENTO DE OBSERVAÇÕES - INICIO
	 * 
	 * ********************************************************
	 */

	/**
	 * @param observacaoContrato the observacaoContrato to set
	 */
	public void setObservacaoContrato(String observacaoContrato) {
		this.objetoContratoCobranca = objetoContratoCobranca;

		TimeZone zone = TimeZone.getDefault();
		Locale locale = new Locale("pt", "BR");
		Calendar dataHoje = Calendar.getInstance(zone, locale);

		this.dataObservacao = dataHoje.getTime();

		this.observacao = null;

		this.listContratoCobrancaObservacoes = new ArrayList<ContratoCobrancaObservacoes>();

		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();

		this.listContratoCobrancaObservacoes = contratoCobrancaDao
				.listaObservacoesOrdenadas(this.objetoContratoCobranca.getId());
	}

	public String clearFieldsAlteraParcelasInvestidor() {

		this.relObjetoContratoCobranca = new ArrayList<RelatorioFinanceiroCobranca>();
		this.selectedContratoCobrancaDetalhes = new ContratoCobrancaDetalhes();

		this.numContrato = null;

		this.dtReparcela = null;
		this.vlrReparcela = null;
		this.qtdeReparcela = null;
		this.totalQtedParcelas = null;
		this.totalVlrParcelas = null;

		return "/Atendimento/Cobranca/AlteraParcelasInvestidor.xhtml";
	}

	public String clearFieldsReParcelar() {

		this.relObjetoContratoCobranca = new ArrayList<RelatorioFinanceiroCobranca>();
		this.selectedContratoCobrancaDetalhes = new ContratoCobrancaDetalhes();

		this.numContrato = null;

		this.dtReparcela = null;
		this.vlrReparcela = null;
		this.qtdeReparcela = null;
		this.totalQtedParcelas = null;
		this.totalVlrParcelas = null;

		return "/Atendimento/Cobranca/ContratoCobrancaReParcelar.xhtml";
	}

	public void geraRelReParcela() {
		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();
		this.relObjetoContratoCobranca = new ArrayList<RelatorioFinanceiroCobranca>();

		/* Se filtro somente por numero do contrato */
		this.relObjetoContratoCobranca = contratoCobrancaDao
				.relatorioRegerarParcela(CommonsUtil.strZero(this.numContrato, 5));

		int totalQtedParcelas = 0;
		this.totalVlrParcelas = BigDecimal.ZERO;

		for (RelatorioFinanceiroCobranca rfc : this.relObjetoContratoCobranca) {
			this.objetoContratoCobranca = rfc.getContratoCobranca();
			// verifica se tem baixa parcial e se a parcela é diferente de paga
			for (ContratoCobrancaDetalhes ccd : rfc.getContratoCobranca().getListContratoCobrancaDetalhes()) {
				if (rfc.getIdParcela() == ccd.getId()) {
					if (CommonsUtil.mesmoValor(ccd.getNumeroParcela(), "0") || ccd.isAmortizacao())
						continue;
					if (ccd.getListContratoCobrancaDetalhesParcial().size() == 0 && !ccd.isParcelaPaga()) {
						totalQtedParcelas = totalQtedParcelas + 1;
						this.totalVlrParcelas = totalVlrParcelas.add(ccd.getVlrParcela());
					}
				}
			}
		}

		this.totalQtedParcelas = String.valueOf(totalQtedParcelas);

		this.relSelectedObjetoContratoCobranca = new RelatorioFinanceiroCobranca();

		if (this.relObjetoContratoCobranca.size() == 0) {
			this.relObjetoContratoCobranca = new ArrayList<RelatorioFinanceiroCobranca>();
		}
	}

	public void onRowEditBaixaStarkBank(RowEditEvent event) {
		StarkBankBaixaDAO sbDao = new StarkBankBaixaDAO();

		StarkBankBaixa starkBankBaixaTmp = (StarkBankBaixa) event.getObject();

		starkBankBaixaTmp.setStatusPagamento("Aguardando Aprovação");

		sbDao.merge(starkBankBaixaTmp);

		FacesContext context = FacesContext.getCurrentInstance();
		context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_INFO,
				"Stark Bank Baixa: Enviado novamente para aprovação!", ""));
	}

	public void onRowCancelBaixaStarkBank(RowEditEvent event) {

	}

	public void onRowEdit(RowEditEvent event) {
		ContratoCobrancaDetalhesDao cDao = new ContratoCobrancaDetalhesDao();
		ContratoCobrancaDetalhes contratoCobrancaDetalhesTmp = new ContratoCobrancaDetalhes();
		contratoCobrancaDetalhesTmp = (ContratoCobrancaDetalhes) event.getObject();

		cDao.merge(contratoCobrancaDetalhesTmp);

		FacesContext context = FacesContext.getCurrentInstance();
		context.addMessage(null,
				new FacesMessage(FacesMessage.SEVERITY_INFO, "Contrato Cobrança: Coluna(s) salva(s) com sucesso!", ""));
	}

	public void onRowEditInvestidor(RowEditEvent event) {
		ContratoCobrancaParcelasInvestidorDao cDao = new ContratoCobrancaParcelasInvestidorDao();
		ContratoCobrancaParcelasInvestidor ContratoCobrancaParcelasInvestidorTmp = new ContratoCobrancaParcelasInvestidor();
		ContratoCobrancaParcelasInvestidorTmp = (ContratoCobrancaParcelasInvestidor) event.getObject();

		cDao.merge(ContratoCobrancaParcelasInvestidorTmp);

		// Seta que o investidor teve alterações nas parcelas
		// Na próxima edição de contrato não deve-se gerar parcelas de investidor
		// novamente
		if (this.objetoContratoCobranca.getRecebedor() != null) {
			if (this.objetoContratoCobranca.getRecebedor().getId() == ContratoCobrancaParcelasInvestidorTmp
					.getInvestidor().getId()) {
				this.objetoContratoCobranca.setParcelasAlteradas1(true);
			}
		}

		if (this.objetoContratoCobranca.getRecebedor2() != null) {
			if (this.objetoContratoCobranca.getRecebedor2().getId() == ContratoCobrancaParcelasInvestidorTmp
					.getInvestidor().getId()) {
				this.objetoContratoCobranca.setParcelasAlteradas2(true);
			}
		}

		if (this.objetoContratoCobranca.getRecebedor3() != null) {
			if (this.objetoContratoCobranca.getRecebedor3().getId() == ContratoCobrancaParcelasInvestidorTmp
					.getInvestidor().getId()) {
				this.objetoContratoCobranca.setParcelasAlteradas3(true);
			}
		}

		if (this.objetoContratoCobranca.getRecebedor4() != null) {
			if (this.objetoContratoCobranca.getRecebedor4().getId() == ContratoCobrancaParcelasInvestidorTmp
					.getInvestidor().getId()) {
				this.objetoContratoCobranca.setParcelasAlteradas4(true);
			}
		}

		if (this.objetoContratoCobranca.getRecebedor5() != null) {
			if (this.objetoContratoCobranca.getRecebedor5().getId() == ContratoCobrancaParcelasInvestidorTmp
					.getInvestidor().getId()) {
				this.objetoContratoCobranca.setParcelasAlteradas5(true);
			}
		}

		if (this.objetoContratoCobranca.getRecebedor6() != null) {
			if (this.objetoContratoCobranca.getRecebedor6().getId() == ContratoCobrancaParcelasInvestidorTmp
					.getInvestidor().getId()) {
				this.objetoContratoCobranca.setParcelasAlteradas6(true);
			}
		}

		if (this.objetoContratoCobranca.getRecebedor7() != null) {
			if (this.objetoContratoCobranca.getRecebedor7().getId() == ContratoCobrancaParcelasInvestidorTmp
					.getInvestidor().getId()) {
				this.objetoContratoCobranca.setParcelasAlteradas7(true);
			}
		}

		if (this.objetoContratoCobranca.getRecebedor8() != null) {
			if (this.objetoContratoCobranca.getRecebedor8().getId() == ContratoCobrancaParcelasInvestidorTmp
					.getInvestidor().getId()) {
				this.objetoContratoCobranca.setParcelasAlteradas8(true);
			}
		}

		if (this.objetoContratoCobranca.getRecebedor9() != null) {
			if (this.objetoContratoCobranca.getRecebedor9().getId() == ContratoCobrancaParcelasInvestidorTmp
					.getInvestidor().getId()) {
				this.objetoContratoCobranca.setParcelasAlteradas9(true);
			}
		}

		if (this.objetoContratoCobranca.getRecebedor10() != null) {
			if (this.objetoContratoCobranca.getRecebedor10().getId() == ContratoCobrancaParcelasInvestidorTmp
					.getInvestidor().getId()) {
				this.objetoContratoCobranca.setParcelasAlteradas10(true);
			}
		}

		ContratoCobrancaDao contratoDao = new ContratoCobrancaDao();
		contratoDao.merge(this.objetoContratoCobranca);

		FacesContext context = FacesContext.getCurrentInstance();
		context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_INFO,
				"Parcelas do Investidor: Registro salvo com sucesso!", ""));
	}

	public void onRowCancelInvestidor(RowEditEvent event) {
		FacesContext context = FacesContext.getCurrentInstance();
		context.addMessage(null,
				new FacesMessage(FacesMessage.SEVERITY_INFO, "Parcelas do Investidor: Edição cancelada!", ""));
	}

	public void onRowCancelEditParcelaBaixa(RowEditEvent event) {
		FacesContext context = FacesContext.getCurrentInstance();
		context.addMessage(null,
				new FacesMessage(FacesMessage.SEVERITY_INFO, "Contrato Cobrança: Edição cancelada!", ""));
	}

	public void onRowEditParcelaBaixa(RowEditEvent event) {
		ContratoCobrancaDetalhesDao cDao = new ContratoCobrancaDetalhesDao();
		ContratoCobrancaDetalhes contratoCobrancaDetalhesTmp = new ContratoCobrancaDetalhes();
		contratoCobrancaDetalhesTmp = (ContratoCobrancaDetalhes) event.getObject();

		cDao.merge(contratoCobrancaDetalhesTmp);

		FacesContext context = FacesContext.getCurrentInstance();
		context.addMessage(null,
				new FacesMessage(FacesMessage.SEVERITY_INFO, "Contrato Cobrança: Coluna(s) salva(s) com sucesso!", ""));
	}

	public void onRowCancel(RowEditEvent event) {
		FacesContext context = FacesContext.getCurrentInstance();
		context.addMessage(null,
				new FacesMessage(FacesMessage.SEVERITY_INFO, "Contrato Cobrança: Edição cancelada!", ""));
	}

	public void excluirObservacao() {
		List<ContratoCobrancaObservacoes> listObservacoes = new ArrayList<ContratoCobrancaObservacoes>();
		for (int i = 0; i < this.objetoContratoCobranca.getListContratoCobrancaObservacoes().size(); i++) {
			if (this.objetoContratoCobranca.getListContratoCobrancaObservacoes().get(i)
					.getId() != this.contratoCobrancaObservacoes.getId()) {
				listObservacoes.add(this.objetoContratoCobranca.getListContratoCobrancaObservacoes().get(i));
			}
		}

		this.objetoContratoCobranca.setListContratoCobrancaObservacoes(listObservacoes);

		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();
		contratoCobrancaDao.merge(this.objetoContratoCobranca);
		contratoCobrancaDao.limpaObservacoesNaoUsadas();
	}

	public void salvaAlteraçõesDocumentoAnálise() {
		FacesContext context = FacesContext.getCurrentInstance();
		DocumentoAnaliseDao documentoDao = new DocumentoAnaliseDao();
		if (!CommonsUtil.semValor(objetoDocumentoAnalise.getId())) {
			documentoDao.merge(objetoDocumentoAnalise);

		} else {
			context.addMessage(null,
					new FacesMessage(FacesMessage.SEVERITY_ERROR, "Ocorreu um erro ao salvar o documento", ""));

		}
	}

	public void excluirObservacaoDetalhes() {
		List<ContratoCobrancaDetalhesObservacoes> listObservacoes = new ArrayList<ContratoCobrancaDetalhesObservacoes>();
		for (int i = 0; i < this.contratoCobrancaDetalhes.getListContratoCobrancaDetalhesObservacoes().size(); i++) {
			if (this.contratoCobrancaDetalhes.getListContratoCobrancaDetalhesObservacoes().get(i)
					.getId() != this.contratoCobrancaDetalhesObservacoes.getId()) {
				listObservacoes.add(this.contratoCobrancaDetalhes.getListContratoCobrancaDetalhesObservacoes().get(i));
			}
		}

		this.contratoCobrancaDetalhes.setListContratoCobrancaDetalhesObservacoes(listObservacoes);

		ContratoCobrancaDetalhesDao contratoCobrancaDetalhesDao = new ContratoCobrancaDetalhesDao();
		contratoCobrancaDetalhesDao.merge(this.contratoCobrancaDetalhes);
		contratoCobrancaDetalhesDao.limpaObservacoesNaoUsadas();
	}

	public void addObservacao() {
		ContratoCobrancaObservacoes contratoCobrancaObservacoes = new ContratoCobrancaObservacoes();
		contratoCobrancaObservacoes.setData(this.dataObservacao);
		contratoCobrancaObservacoes.setObservacao(this.observacao);

		if (this.loginBean != null) {
			contratoCobrancaObservacoes.setUsuario(loginBean.getUsername());
		}

		this.objetoContratoCobranca.getListContratoCobrancaObservacoes().add(contratoCobrancaObservacoes);

		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();
		contratoCobrancaDao.merge(this.objetoContratoCobranca);
	}

	public void addObservacaoDetalhes() {
		ContratoCobrancaDetalhesObservacoes contratoCobrancaDetalhesObservacoes = new ContratoCobrancaDetalhesObservacoes();
		contratoCobrancaDetalhesObservacoes.setData(this.dataObservacao);
		contratoCobrancaDetalhesObservacoes.setObservacao(this.observacao);

		if (this.loginBean != null) {
			contratoCobrancaDetalhesObservacoes.setUsuario(loginBean.getUsername());
		}

		this.contratoCobrancaDetalhes.getListContratoCobrancaDetalhesObservacoes()
				.add(contratoCobrancaDetalhesObservacoes);

		ContratoCobrancaDetalhesDao contratoCobrancaDetalhesDao = new ContratoCobrancaDetalhesDao();
		contratoCobrancaDetalhesDao.merge(this.contratoCobrancaDetalhes);
	}

	public void cancelObservacaoDetalhes() {
		ContratoCobrancaDetalhesObservacoes contratoCobrancaDetalhesObservacoes = new ContratoCobrancaDetalhesObservacoes();
		contratoCobrancaDetalhesObservacoes.setData(this.dataObservacao);
		contratoCobrancaDetalhesObservacoes.setObservacao(this.observacao);
		this.objetoContratoCobranca = null;
		this.contratoCobrancaDetalhes = null;
	}

	public String clearObservacoes() {
		this.pesquisaObservacao = null;
		this.listPesquisaObservacoes = new ArrayList<PesquisaObservacoes>();

		return "/Atendimento/Cobranca/ContratoCobrancaPesquisaObservacoes.xhtml";
	}

	public void pesquisarObservacoes() {
		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();
		this.listPesquisaObservacoes = contratoCobrancaDao.pesquisaObservacoes(this.pesquisaObservacao);
	}

	public void addPromessaDePagamentoDetalhes() {
		ContratoCobrancaDetalhesDao cDao = new ContratoCobrancaDetalhesDao();
		this.contratoCobrancaDetalhes.setPromessaPagamento(this.dataPromessaPagamento);

		cDao.merge(this.contratoCobrancaDetalhes);

		this.dataPromessaPagamento = null;

		FacesContext context = FacesContext.getCurrentInstance();
		context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_INFO,
				"Contrato Cobrança: Data Promessa de Pagamento salva com sucesso!", ""));
	}

	/**
	 * @return the listContratoCobrancaObservacoes
	 */
	public List<ContratoCobrancaObservacoes> getListContratoCobrancaObservacoes() {
		return listContratoCobrancaObservacoes;
	}

	/**
	 * @return the contratoCobrancaDetalhesParcialTemp
	 */
	public ContratoCobrancaDetalhesParcial getContratoCobrancaDetalhesParcialTemp() {
		return contratoCobrancaDetalhesParcialTemp;
	}

	/**
	 * @param contratoCobrancaDetalhesParcialTemp the
	 *                                            contratoCobrancaDetalhesParcialTemp
	 *                                            to set
	 */
	public void setContratoCobrancaDetalhesParcialTemp(
			ContratoCobrancaDetalhesParcial contratoCobrancaDetalhesParcialTemp) {
		this.contratoCobrancaDetalhesParcialTemp = contratoCobrancaDetalhesParcialTemp;
	}

	/**
	 * @param listContratoCobrancaObservacoes the listContratoCobrancaObservacoes to
	 *                                        set
	 */
	public void setListContratoCobrancaObservacoes(List<ContratoCobrancaObservacoes> listContratoCobrancaObservacoes) {
		this.listContratoCobrancaObservacoes = listContratoCobrancaObservacoes;
	}

	/**
	 * @return the dataObservacao
	 */
	public Date getDataObservacao() {
		return dataObservacao;
	}

	/**
	 * @param dataObservacao the dataObservacao to set
	 */
	public void setDataObservacao(Date dataObservacao) {
		this.dataObservacao = dataObservacao;
	}

	/**
	 * @return the observacaoContrato
	 */
	public String getObservacaoContrato() {
		return observacaoContrato;
	}

	/**
	 * @return the contratoCobrancaObservacoes
	 */
	public ContratoCobrancaObservacoes getContratoCobrancaObservacoes() {
		return contratoCobrancaObservacoes;
	}

	/**
	 * @param contratoCobrancaObservacoes the contratoCobrancaObservacoes to set
	 */
	public void setContratoCobrancaObservacoes(ContratoCobrancaObservacoes contratoCobrancaObservacoes) {
		this.contratoCobrancaObservacoes = contratoCobrancaObservacoes;
	}

	/******************************************************************
	 * ******************************************************** CODIFICAÇÃO DO
	 * TRATAMENTO DE OBSERVAÇÕES - FIM
	 * 
	 * ********************************************************
	 */

	public String clearPreContratoCustomizado() {
		// INICIO - Tratamento para Pré-Contrato

		this.codigoResponsavel = "";
		this.objetoContratoCobranca = new ContratoCobranca();
		this.objetoContratoCobranca.setDataContrato(new Date());
		this.objetoContratoCobranca.setDataCadastro(new Date());
		this.objetoContratoCobranca.setUserCadastro(getNomeUsuarioLogado());
		loadLovs();
		clearSelectedLovs();
		this.contratoGerado = false;
		this.qtdeParcelas = null;
		clearSelectedRecebedores();
		this.seguradoSelecionado = new Segurado();
		this.seguradoSelecionado.setPessoa(new PagadorRecebedor());
		this.socioSelecionado = new PagadorRecebedorSocio();
		this.socioSelecionado.setPessoa(new PagadorRecebedor());
		this.pagadorSecundarioSelecionado = new PagadorRecebedorAdicionais();
		this.pagadorSecundarioSelecionado.setPessoa(new PagadorRecebedor());
		this.tituloPagadorRecebedorDialog = "";
		this.addSegurador = false;
		this.addSocio = false;
		this.addPagador = false;
		this.mostrarTodosProcessos = false;

		this.contasPagarSelecionada = new ContasPagar();
		this.contasPagarSelecionada.setPagadorRecebedor(new PagadorRecebedor());
		this.contasPagarSelecionada.setResponsavel(new Responsavel());
		this.processoSelecionado = new CcbProcessosJudiciais();
		this.pagadorProcesso = new PagadorRecebedor();

		this.addContasPagar = false;
		this.vlrParcelaFinal = null;
		this.vlrRepasse = null;
		this.vlrRepasseFinal = null;
		this.vlrRetencao = null;
		this.vlrRetencaoFinal = null;
		this.vlrComissao = null;
		this.vlrComissaoFinal = null;
		this.objetoContratoCobranca.setGeraParcelaFinal(false);
		this.objetoContratoCobranca.setNumeroContrato(geraNumeroContrato());
		// this.codigoResponsavel = null;
		files = new ArrayList<FileUploaded>();
		filesInterno = new ArrayList<FileUploaded>();
		filesFaltante = new ArrayList<FileUploaded>();
		filesJuridico = new ArrayList<FileUploaded>();
		filesComite = new ArrayList<FileUploaded>();
		this.hasBaixaParcial = false;

		this.objetoImovelCobranca = new ImovelCobranca();
		this.objetoPagadorRecebedor = new PagadorRecebedor();
		this.objetoPagadorRecebedor.setEstado("SP");
		clearRecebedor();
		this.tipoPessoaIsFisica = true;
		this.tipoPessoaIsFisicaCC = false;
		this.tituloPainel = "Adicionar";
		this.objetoContratoCobranca.setStatus("Ag. Análise");
		this.objetoContratoCobranca.setAgAssinatura(true);
		this.objetoContratoCobranca.setAgEnvioCartorio(true);
		this.objetoContratoCobranca.setAgRegistro(true);

		this.qtdeParcelas = null;
		// FIM - Tratamento para Pré-Contrato

		if (loginBean != null) {
			User usuarioLogado = new User();
			UserDao u = new UserDao();
			usuarioLogado = u.findByFilter("login", loginBean.getUsername()).get(0);

			if (usuarioLogado != null) {
				this.codigoResponsavel = usuarioLogado.getCodigoResponsavel();
				ResponsavelDao responsavelDao = new ResponsavelDao();
				if (responsavelDao.findByFilter("codigo", this.codigoResponsavel).size() > 0) {
					Responsavel responsavel = responsavelDao.findByFilter("codigo", this.codigoResponsavel).get(0);
					/*
					 * if (responsavel.getCpf() != null) { this.tipoResponsavelIsFisica = true; }
					 * else { this.tipoResponsavelIsFisica = false; }
					 */

					this.objetoContratoCobranca.setResponsavel(responsavel);
				}
			}
		}

		ParametrosDao pDao = new ParametrosDao();
		this.objetoContratoCobranca
				.setTxJuros(pDao.findByFilter("nome", "COBRANCA_REC_TX_JUROS").get(0).getValorBigDecimal());
		this.objetoContratoCobranca
				.setTxMulta(pDao.findByFilter("nome", "COBRANCA_REC_MULTA").get(0).getValorBigDecimal());

		this.objetoContratoCobranca.setStatusContrato("Em Análise");
		this.inserirImovelDisable = false;
		this.inserirImovelOcultarValorMercadoImovel = true;
		return "/Atendimento/Cobranca/ContratoCobrancaPreCustomizadoInserir.xhtml";
	}

	public String clearPreContrato() {
		// INICIO - Tratamento para Pré-Contrato
		this.objetoContratoCobranca = new ContratoCobranca();
		this.objetoContratoCobranca.setDataContrato(new Date());
		this.objetoContratoCobranca.setDataCadastro(new Date());
		this.objetoContratoCobranca.setUserCadastro(getNomeUsuarioLogado());
		loadLovs();
		clearSelectedLovs();
		this.contratoGerado = false;
		this.qtdeParcelas = null;
		clearSelectedRecebedores();
		this.seguradoSelecionado = new Segurado();
		this.seguradoSelecionado.setPessoa(new PagadorRecebedor());
		this.socioSelecionado = new PagadorRecebedorSocio();
		this.socioSelecionado.setPessoa(new PagadorRecebedor());
		this.pagadorSecundarioSelecionado = new PagadorRecebedorAdicionais();
		this.pagadorSecundarioSelecionado.setPessoa(new PagadorRecebedor());
		this.addSegurador = false;
		this.addSocio = false;
		this.addPagador = false;
		this.mostrarTodosProcessos = false;

		this.contasPagarSelecionada = new ContasPagar();
		this.contasPagarSelecionada.setPagadorRecebedor(new PagadorRecebedor());
		this.contasPagarSelecionada.setResponsavel(new Responsavel());
		this.processoSelecionado = new CcbProcessosJudiciais();
		this.pagadorProcesso = new PagadorRecebedor();

		this.vlrParcelaFinal = null;
		this.vlrRepasse = null;
		this.vlrRepasseFinal = null;
		this.vlrRetencao = null;
		this.vlrRetencaoFinal = null;
		this.vlrComissao = null;
		this.vlrComissaoFinal = null;
		this.objetoContratoCobranca.setGeraParcelaFinal(false);
		this.objetoContratoCobranca.setNumeroContrato(geraNumeroContrato());
		this.codigoResponsavel = null;
		files = new ArrayList<FileUploaded>();
		filesInterno = new ArrayList<FileUploaded>();
		filesFaltante = new ArrayList<FileUploaded>();
		filesJuridico = new ArrayList<FileUploaded>();
		filesComite = new ArrayList<FileUploaded>();

		this.objetoImovelCobranca = new ImovelCobranca();
		this.objetoPagadorRecebedor = new PagadorRecebedor();
		this.objetoPagadorRecebedor.setEstado("SP");
		clearRecebedor();
		this.tipoPessoaIsFisica = true;
		this.tipoPessoaIsFisicaCC = false;
		this.tituloPainel = "Adicionar";
		this.objetoContratoCobranca.setStatus("Ag. Análise");
		this.objetoContratoCobranca.setAgAssinatura(true);
		this.objetoContratoCobranca.setAgEnvioCartorio(true);
		this.objetoContratoCobranca.setAgRegistro(true);

		this.qtdeParcelas = null;
		// FIM - Tratamento para Pré-Contrato

		if (loginBean != null) {
			User usuarioLogado = new User();
			UserDao u = new UserDao();
			usuarioLogado = u.findByFilter("login", loginBean.getUsername()).get(0);

			if (usuarioLogado != null) {
				this.codigoResponsavel = usuarioLogado.getCodigoResponsavel();
			}
		}

		ParametrosDao pDao = new ParametrosDao();
		this.objetoContratoCobranca
				.setTxJuros(pDao.findByFilter("nome", "COBRANCA_REC_TX_JUROS").get(0).getValorBigDecimal());
		this.objetoContratoCobranca
				.setTxMulta(pDao.findByFilter("nome", "COBRANCA_REC_MULTA").get(0).getValorBigDecimal());

		this.objetoContratoCobranca.setStatusContrato("Em Análise");

		return "/Atendimento/Cobranca/ContratoCobrancaInserirPendente.xhtml";
	}

	/******
	 * método para envio de emails
	 */
	public void enviaEmailCriacaoPreContrato() {
		Locale locale = new Locale("pt", "BR");
		SimpleDateFormat sdfDataRelComHoras = new SimpleDateFormat("dd/MM/yyyy HH:mm", locale);
		Date dataHoje = DateUtil.gerarDataHoje();

		String mensagemHtmlTeste = "<html>\n" + "<head>\n" + "<meta charset=\"UTF-8\">\n"
				+ "<meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\" />\n"
				+ "<link href='https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;700&display=swap' rel='stylesheet'>\n"
				+ "</head>\n" + "<body>\n"
				+ "<div bgcolor='#f9f7f7' marginwidth='0' marginheight='0' style='background-color:#f9f7f7'>\n"
				+ "<div class='adM'> </div>\n"
				+ "<div style='background-color:#fff;margin-top:0px;margin-right:auto;margin-bottom:0px;margin-left:auto;width:650px!important;color:#fff;font-size:30px'>\n"
				+ "<div class='adM'> </div>\n" + "<div align='center'>\n" + "<div class='adM'> </div>\n"
				+ "<table width='100%' border='0' cellspacing='0' cellpadding='0'>\n" + "<tbody>\n" + "<tr>\n"
				+ "<td style='background-color:#f0f0f0;height:75px; padding: 15px;' align='center'> <img src='http://siscoatimagens.galleriabank.com.br/logo-galleria.png' height='65' width='300'> </td>\n"
				+ "</tr>\n" + "</tbody>\n" + "</table>\n" + "<br>\n" + "<table>\n" + "<tbody>\n" + "<tr>\n"
				+ "<td width='20'> </td>\n" + "<td>\n" + "<table>\n" + "<tbody>\n" + "<tr>\n"
				+ "<td style='font-family:Arial,sans-serif;color:#bb7e17;font-size:20px'>Olá\n"
				+ "<span style='font-weight:bold'>" + this.objetoContratoCobranca.getResponsavel().getNome()
				+ "</span>, </td>\n" + "</tr>\n" + "<tr>\n"
				+ "<td style='font-family:Arial,sans-serif;color:#58585a;font-size:14px;line-height:20px;padding-top:7px'> O pré-contrato <b>"
				+ this.objetoContratoCobranca.getNumeroContrato() + "</b> acaba de ser criado. </td>\n" + "</tr>\n"
				+ "</tbody>\n" + "</table>\n"
				+ "<div style='height:1px;background-color:#e8e8ed;margin-top:10px;margin-bottom:25px'> </div>\n"
				+ "<table width='100%' style='border-left:3px solid #bb7e17'>\n" + "<tbody>\n" + "<tr>\n"
				+ "<td style='font-family:Arial,sans-serif;color:#58585a;font-size:14px;padding-left:18px;line-height:16px'> <span style='font-size:10px;'>DATA DA CRIAÇÃO\n"
				+ "</span>\n" + "<br><b>" + sdfDataRelComHoras.format(dataHoje) + "\n" + "</b> </td>\n" + "</tr>\n"
				+ "<tr>\n"
				+ "<td style='font-family:Arial,sans-serif;color:#58585a;font-size:14px;padding-left:18px;line-height:16px'> <span style='font-size:10px;'>DADOS CONTRATO\n"
				+ "</span>\n";

		mensagemHtmlTeste = mensagemHtmlTeste + "<br>Responsável: <b>"
				+ this.objetoContratoCobranca.getResponsavel().getNome() + "</b>\n";

		mensagemHtmlTeste = mensagemHtmlTeste + "<br>Pagador: <b>" + this.objetoContratoCobranca.getPagador().getNome()
				+ "</b>\n";

		mensagemHtmlTeste = mensagemHtmlTeste + " </td> </tr> </tbody> " + " </table>" + " </td>"
				+ " <td width='20'> </td>" + " </tr>" + " </tbod>" + " </table>" + " <br>"
				+ " <table width='100%' border='0' cellspacing='0' cellpadding='0'>" + " <tbody>"
				+ " <tr style='background-color:#f0f0f0;height:61px;font-family:Arial,sans-serif;font-size:10px;color:#fff'>"
				+ " <td style='color:#16243f;padding-left:20px; font-size: 12px;'> © Todos direitos reservados. </td>"
				+ " <td style='text-align: right;padding-right: 20px;'><a style='color:#16243f;font-size: 12px; text-decoration: none;'  target=' '>Galleria Bank</a> </td>"
				+ " </tr>" + " </tbody>" + " </table>" + " <div class='yj6qo'></div>" + " <div class='adL'> </div>"
				+ " </div>" + " <div class='adL'> </div>" + " <div class='adL'> </div>" + " </div>" + " </body>"
				+ " </html>";

		try {
			ResponsavelDao rDao = new ResponsavelDao();
			EnviaEmail eec = new EnviaEmail();
			// eec.enviarEmailHtmlResponsavelAdms(rDao.getGuardaChuvaCompletoResponsavelString(this.objetoContratoCobranca.getResponsavel().getId()),
			eec.enviarEmailHtmlResponsavelAdms(this.objetoContratoCobranca.getResponsavel().getEmail(),
					"[siscoat] Criação do contrato " + this.objetoContratoCobranca.getNumeroContrato(),
					mensagemHtmlTeste);

		} catch (Exception ex) {
			System.out.println(ex.getMessage());
		}
	}

	/******
	 * método para envio de emails
	 */
	public void enviaEmailAtualizacaoPreContrato() {
		Locale locale = new Locale("pt", "BR");
		SimpleDateFormat sdfDataRelComHoras = new SimpleDateFormat("dd/MM/yyyy HH:mm", locale);
		Date dataHoje = DateUtil.gerarDataHoje();

		String mensagemHtmlTeste = "<html>\n" + "<head>\n" + "<meta charset=\"UTF-8\">\n"
				+ "<meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\" />\n"
				+ "<link href='https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;700&display=swap' rel='stylesheet'>\n"
				+ "</head>\n" + "<body>\n"
				+ "<div bgcolor='#f9f7f7' marginwidth='0' marginheight='0' style=' :#f9f7f7'>\n"
				+ "<div class='adM'> </div>\n"
				+ "<div style='background-color:#fff;margin-top:0px;margin-right:auto;margin-bottom:0px;margin-left:auto;width:650px!important;color:#fff;font-size:30px'>\n"
				+ "<div class='adM'> </div>\n" + "<div align='center'>\n" + "<div class='adM'> </div>\n"
				+ "<table width='100%' border='0' cellspacing='0' cellpadding='0'>\n" + "<tbody>\n" + "<tr>\n"
				+ "<td style='background-color:#f0f0f0;height:75px; padding: 15px;' align='center'> <img src='http://siscoatimagens.galleriabank.com.br/logo-galleria.png' height='65' width='300'> </td>\n"
				+ "</tr>\n" + "</tbody>\n" + "</table>\n" + "<br>\n" + "<table>\n" + "<tbody>\n" + "<tr>\n"
				+ "<td width='20'> </td>\n" + "<td>\n" + "<table>\n" + "<tbody>\n" + "<tr>\n"
				+ "<td style='font-family:Arial,sans-serif;color:#bb7e17;font-size:20px'>Olá\n"
				+ "<span style='font-weight:bold'>" + this.objetoContratoCobranca.getResponsavel().getNome()
				+ "</span>, </td>\n" + "</tr>\n" + "<tr>\n"
				+ "<td style='font-family:Arial,sans-serif;color:#58585a;font-size:14px;line-height:20px;padding-top:7px'> O contrato <b>"
				+ this.objetoContratoCobranca.getNumeroContrato() + "</b> (Pagador: <b>"
				+ this.objetoContratoCobranca.getPagador().getNome() + "</b>) teve atualização. </td>\n" + "</tr>\n"
				+ "</tbody>\n" + "</table>\n"
				+ "<div style='height:1px;background-color:#e8e8ed;margin-top:10px;margin-bottom:25px'> </div>\n"
				+ "<table width='100%' style='border-left:3px solid #bb7e17'>\n" + "<tbody>\n" + "<tr>\n"
				+ "<td style='font-family:Arial,sans-serif;color:#58585a;font-size:14px;padding-left:18px;line-height:16px'> <span style='font-size:10px;'>DATA DA ATUALIZAÇÃO\n"
				+ "</span>\n" + "<br><b>" + sdfDataRelComHoras.format(dataHoje) + "\n" + "</b> </td>\n"
				+ "</tr> </tbody> </table>";

		mensagemHtmlTeste = mensagemHtmlTeste + "<table width='100%' style='border-left:3px solid #bb7e17'>" + "<tbody>"
				+ "<tr>";

		// "Em Analise"
		if (this.objetoContratoCobranca.isInicioAnalise()
		// && this.objetoContratoCobranca.getCadastroAprovadoValor().equals("Aprovado")
		/*
		 * && (this.objetoContratoCobranca.getMatriculaAprovadaValor().equals("") ||
		 * this.objetoContratoCobranca.getMatriculaAprovadaValor() == null)
		 */) {

			mensagemHtmlTeste = mensagemHtmlTeste + " <td> "
					+ "<img src='http://siscoatimagens.galleriabank.com.br/EmAnaliseOk.png' height='57' width='120'>"
					+ "</td>";
		} else {
			mensagemHtmlTeste = mensagemHtmlTeste + " <td> "
					+ "<img src='http://siscoatimagens.galleriabank.com.br/EmAnaliseNOk.png' height='57' width='120'>"
					+ "</td>";
		}

		// "Em Analise"
		if (this.objetoContratoCobranca.getCadastroAprovadoValor() != null) {
			if (this.objetoContratoCobranca.getCadastroAprovadoValor().equals("Aprovado")) {
				mensagemHtmlTeste = mensagemHtmlTeste + " <td> "
						+ "<img src='http://siscoatimagens.galleriabank.com.br/PreCadastroAprovadoOk.png' height='57' width='120'>"
						+ "</td>";
			} else {
				mensagemHtmlTeste = mensagemHtmlTeste + " <td> "
						+ "<img src='http://siscoatimagens.galleriabank.com.br/PreCadastroAprovadoNOk.png' height='57' width='120'>"
						+ "</td>";
			}
		} else {
			mensagemHtmlTeste = mensagemHtmlTeste + " <td> "
					+ "<img src='http://siscoatimagens.galleriabank.com.br/PreCadastroAprovadoNOk.png' height='57' width='120'>"
					+ "</td>";
		}

		// "Análise Reprovada"
		if (this.objetoContratoCobranca.getCadastroAprovadoValor() != null) {
			if (this.objetoContratoCobranca.getCadastroAprovadoValor().equals("Reprovado")) {
				mensagemHtmlTeste = mensagemHtmlTeste + " <td> "
						+ "<img src='http://siscoatimagens.galleriabank.com.br/PreCadastroReprovadoOk.png' height='57' width='120'>"
						+ "</td>";
			}
		}

		// "Ag. Pagto. Laudo"
		if (// this.objetoContratoCobranca.isInicioAnalise() &&
		this.objetoContratoCobranca.getCadastroAprovadoValor() != null
				&& this.objetoContratoCobranca.getMatriculaAprovadaValor() != null) {
			if (// this.objetoContratoCobranca.isInicioAnalise() &&
			this.objetoContratoCobranca.getCadastroAprovadoValor().equals("Aprovado")
					&& this.objetoContratoCobranca.getMatriculaAprovadaValor().equals("Aprovado")
					&& this.objetoContratoCobranca.isPagtoLaudoConfirmada()) {

				mensagemHtmlTeste = mensagemHtmlTeste + " <td> "
						+ "<img src='http://siscoatimagens.galleriabank.com.br/AgPagtoBoletoOk.png' height='57' width='120'>"
						+ "</td>";
			} else {
				mensagemHtmlTeste = mensagemHtmlTeste + " <td> "
						+ "<img src='http://siscoatimagens.galleriabank.com.br/AgPagtoBoletoNOk.png' height='57' width='120'>"
						+ "</td>";
			}
		} else {
			mensagemHtmlTeste = mensagemHtmlTeste + " <td> "
					+ "<img src='http://siscoatimagens.galleriabank.com.br/AgPagtoBoletoNOk.png' height='57' width='120'>"
					+ "</td>";
		}

		// "Ag. PAJU e Laudo"
		if (/*
			 * this.objetoContratoCobranca.isInicioAnalise() &&
			 * this.objetoContratoCobranca.getCadastroAprovadoValor().equals("Aprovado") &&
			 * this.objetoContratoCobranca.getMatriculaAprovadaValor().equals("Aprovado") &&
			 */
		// this.objetoContratoCobranca.isPagtoLaudoConfirmada()
		this.objetoContratoCobranca.isLaudoRecebido() || this.objetoContratoCobranca.isPajurFavoravel()) {

			mensagemHtmlTeste = mensagemHtmlTeste + " <td> "
					+ "<img src='http://siscoatimagens.galleriabank.com.br/AgPAJULaudoOk.png' height='57' width='120'>"
					+ "</td>";
		} else {
			mensagemHtmlTeste = mensagemHtmlTeste + " <td> "
					+ "<img src='http://siscoatimagens.galleriabank.com.br/AgPAJULaudoNOk.png' height='57' width='120'>"
					+ "</td>";
		}

		// "Ag. DOC"
		if (/*
			 * this.objetoContratoCobranca.isInicioAnalise() &&
			 * this.objetoContratoCobranca.getCadastroAprovadoValor().equals("Aprovado") &&
			 * this.objetoContratoCobranca.getMatriculaAprovadaValor().equals("Aprovado") &&
			 * this.objetoContratoCobranca.isPagtoLaudoConfirmada() &&
			 */
		// this.objetoContratoCobranca.isLaudoRecebido() &&
		// this.objetoContratoCobranca.isPajurFavoravel() &&
		this.objetoContratoCobranca.isDocumentosCompletos()) {

			mensagemHtmlTeste = mensagemHtmlTeste + " <td> "
					+ "<img src='http://siscoatimagens.galleriabank.com.br/AgDOCOk.png' height='57' width='120'>"
					+ "</td>";
		} else {
			mensagemHtmlTeste = mensagemHtmlTeste + " <td> "
					+ "<img src='http://siscoatimagens.galleriabank.com.br/AgDOCNOk.png' height='57' width='120'>"
					+ "</td>";
		}

		mensagemHtmlTeste = mensagemHtmlTeste + " </tr> <tr>";

		// "Ag. CCB"
		if (/*
			 * this.objetoContratoCobranca.isInicioAnalise() &&
			 * this.objetoContratoCobranca.getCadastroAprovadoValor().equals("Aprovado") &&
			 * this.objetoContratoCobranca.getMatriculaAprovadaValor().equals("Aprovado") &&
			 * this.objetoContratoCobranca.isPagtoLaudoConfirmada() &&
			 * this.objetoContratoCobranca.isLaudoRecebido() &&
			 * this.objetoContratoCobranca.isPajurFavoravel() &&
			 * this.objetoContratoCobranca.isDocumentosCompletos() &&
			 */
		this.objetoContratoCobranca.isCcbPronta()) {

			mensagemHtmlTeste = mensagemHtmlTeste + " <td> "
					+ "<img src='http://siscoatimagens.galleriabank.com.br/AgCCBOk.png' height='57' width='120'>"
					+ "</td>";
		} else {
			mensagemHtmlTeste = mensagemHtmlTeste + " <td> "
					+ "<img src='http://siscoatimagens.galleriabank.com.br/AgCCBNOk.png' height='57' width='120'>"
					+ "</td>";
		}

		// "Ag. Assinatura"
		if (this.objetoContratoCobranca.getCadastroAprovadoValor() != null
				&& this.objetoContratoCobranca.getMatriculaAprovadaValor() != null) {
			if (this.objetoContratoCobranca.isInicioAnalise()
					&& this.objetoContratoCobranca.getCadastroAprovadoValor().equals("Aprovado")
					&& this.objetoContratoCobranca.getMatriculaAprovadaValor().equals("Aprovado")
					&& this.objetoContratoCobranca.isPagtoLaudoConfirmada()
					&& this.objetoContratoCobranca.isLaudoRecebido() && this.objetoContratoCobranca.isPajurFavoravel()
					&& this.objetoContratoCobranca.isDocumentosCompletos()
					&& this.objetoContratoCobranca.isCcbPronta()) {

				mensagemHtmlTeste = mensagemHtmlTeste + " <td> "
						+ "<img src='http://siscoatimagens.galleriabank.com.br/AgAssinaturaOk.png' height='57' width='120'>"
						+ "</td>";
			} else {
				mensagemHtmlTeste = mensagemHtmlTeste + " <td> "
						+ "<img src='http://siscoatimagens.galleriabank.com.br/AgAssinaturaNOk.png' height='57' width='120'>"
						+ "</td>";
			}
		} else {
			mensagemHtmlTeste = mensagemHtmlTeste + " <td> "
					+ "<img src='http://siscoatimagens.galleriabank.com.br/AgAssinaturaNOk.png' height='57' width='120'>"
					+ "</td>";
		}

		// "Ag. Registro"
		if (this.objetoContratoCobranca.getCadastroAprovadoValor() != null
				&& this.objetoContratoCobranca.getMatriculaAprovadaValor() != null) {
			if (this.objetoContratoCobranca.isInicioAnalise()
					&& this.objetoContratoCobranca.getCadastroAprovadoValor().equals("Aprovado")
					&& this.objetoContratoCobranca.getMatriculaAprovadaValor().equals("Aprovado")
					&& this.objetoContratoCobranca.isPagtoLaudoConfirmada()
					&& this.objetoContratoCobranca.isLaudoRecebido() && this.objetoContratoCobranca.isPajurFavoravel()
					&& this.objetoContratoCobranca.isDocumentosCompletos()
					&& this.objetoContratoCobranca.isCcbPronta()) {

				mensagemHtmlTeste = mensagemHtmlTeste + " <td> "
						+ "<img src='http://siscoatimagens.galleriabank.com.br/AgRegistroOk.png' height='57' width='120'>"
						+ "</td>";
			} else {
				mensagemHtmlTeste = mensagemHtmlTeste + " <td> "
						+ "<img src='http://siscoatimagens.galleriabank.com.br/AgRegistroNOk.png' height='57' width='120'>"
						+ "</td>";
			}
		} else {
			mensagemHtmlTeste = mensagemHtmlTeste + " <td> "
					+ "<img src='http://siscoatimagens.galleriabank.com.br/AgRegistroNOk.png' height='57' width='120'>"
					+ "</td>";
		}

		// "Contrato Aprovado"
		/*
		 * if (this.objetoContratoCobranca.getStatus().equals("Aprovado")) {
		 * mensagemHtmlTeste = mensagemHtmlTeste + " <td> " +
		 * "<img src='http://siscoatimagens.galleriabank.com.br/ContratoAprovadoOk.png' height='57' width='120'>"
		 * + "</td>"; } else { mensagemHtmlTeste = mensagemHtmlTeste + " <td> " +
		 * "<img src='http://siscoatimagens.galleriabank.com.br/ContratoAprovadoNOk.png' height='57' width='120'>"
		 * + "</td>"; }
		 */
		/*
		 * String status = "";
		 * 
		 * if (this.objetoContratoCobranca.getStatusContrato() == null) { status =
		 * "Não informado"; } else { if
		 * (this.objetoContratoCobranca.getStatusContrato().equals("")) { status =
		 * "Não informado"; } else { status =
		 * this.objetoContratoCobranca.getStatusContrato(); } }
		 * 
		 * mensagemHtmlTeste = mensagemHtmlTeste + "<br>Status: <b>" + status +
		 * "</b>\n";
		 */
		mensagemHtmlTeste = mensagemHtmlTeste + " </tr> ";

		mensagemHtmlTeste = mensagemHtmlTeste + " </tbody> " + " </table>" + " </td>" + " <td width='20'> </td>"
				+ " </tr>" + " </tbod>" + " </table>" + " <br>"
				+ " <table width='100%' border='0' cellspacing='0' cellpadding='0'>" + " <tbody>"
				+ " <tr style='background-color:#f0f0f0;height:61px;font-family:Arial,sans-serif;font-size:10px;color:#fff'>"
				+ " <td style='color:#16243f;padding-left:20px; font-size: 12px;'> © Todos direitos reservados. </td>"
				+ " <td style='text-align: right;padding-right: 20px;'><a style='color:#16243f;font-size: 12px; text-decoration: none;'  target='_blank'>Galleria Bank</a> </td>"
				+ " </tr>" + " </tbody>" + " </table>" + " <div class='yj6qo'></div>" + " <div class='adL'> </div>"
				+ " </div>" + " <div class='adL'> </div>" + " <div class='adL'> </div>" + " </div>" + " </body>"
				+ " </html>";

		try {
			ResponsavelDao rDao = new ResponsavelDao();
			EnviaEmail eec = new EnviaEmail();
			eec.enviarEmailHtmlResponsavelAdms(this.objetoContratoCobranca.getResponsavel().getEmail(),
					"[siscoat] Atualização do contrato " + this.objetoContratoCobranca.getNumeroContrato(),
					mensagemHtmlTeste);

		} catch (Exception ex) {
			System.out.println(ex.getMessage());
		}
	}

	/******
	 * novo método para envio de emails
	 */
	public void enviaEmailCriacaoPreContratoNovo() {
		if (this.objetoContratoCobranca.getResponsavel().isDesativado()) {
			return;
		}
		Locale locale = new Locale("pt", "BR");
		SimpleDateFormat sdfDataRelComHoras = new SimpleDateFormat("dd/MM/yyyy HH:mm", locale);
		Date dataHoje = DateUtil.gerarDataHoje();

		// ContratoCobranca contrato = new ContratoCobranca();
		// contrato = populaStatusUnitario(this.objetoContratoCobranca);
		// ContratoCobranca c = contrato;

		String mensagemHtmlTeste = "<html>\n" + "<head>\n" + "<meta charset=\"UTF-8\">\n"
				+ "<meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\" />\n"
				+ "<link href='https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;700&display=swap' rel='stylesheet'>\n"
				+ "</head>\n" + "<body>\n"
				+ "<div bgcolor='#f9f7f7' marginwidth='0' marginheight='0' style=' :#f9f7f7'>\n"
				+ "<div class='adM'> </div>\n"
				+ "<div style='background-color:#fff;margin-top:0px;margin-right:auto;margin-bottom:0px;margin-left:auto;width:650px!important;color:#fff;font-size:30px'>\n"
				+ "<div class='adM'> </div>\n" + "<div align='center'>\n" + "<div class='adM'> </div>\n"
				+ "<table width='100%' border='0' cellspacing='0' cellpadding='0'>\n" + "<tbody>\n" + "<tr>\n"
				+ "<td style='background-color:#f0f0f0;height:75px; padding: 15px;' align='center'> <img src='http://siscoatimagens.galleriabank.com.br/logo-galleria.png' height='65' width='300'> </td>\n"
				+ "</tr>\n" + "</tbody>\n" + "</table>\n" + "<br>\n" + "<table>\n" + "<tbody>\n" + "<tr>\n"
				+ "<td width='20'> </td>\n" + "<td>\n" + "<table>\n" + "<tbody>\n" + "<tr>\n"
				+ "<td style='font-family:Arial,sans-serif;color:#71A241;font-size:20px'>Olá\n"
				+ "<span style='font-weight:bold'>" + this.objetoContratoCobranca.getResponsavel().getNome()
				+ "</span>, </td>\n" + "</tr>\n" + "<tr>\n"
				+ "<td style='font-family:Arial,sans-serif;color:#58585a;font-size:14px;line-height:20px;padding-top:7px'> O contrato <b>"
				+ this.objetoContratoCobranca.getNumeroContrato() + "</b> do <b>"
				+ this.objetoContratoCobranca.getPagador().getNome()
				+ "</b> teve atualização para <b>Operação Cadastrada</b>. </td>\n" + "</tr>\n" + "</tbody>\n"
				+ "</table>\n"
				+ "<div style='height:1px;background-color:#e8e8ed;margin-top:10px;margin-bottom:25px'> </div>\n"
				+ "<table width='100%' style='border-left:3px solid #71A241'>\n" + "<tbody>\n" + "<tr>\n"
				+ "<td style='font-family:Arial,sans-serif;color:#58585a;font-size:14px;padding-left:18px;line-height:16px'> <span style='font-size:10px;'>DATA DA ATUALIZAÇÃO\n"
				+ "</span>\n" + "<br><b>" + sdfDataRelComHoras.format(dataHoje) + "\n" + "</b> </td>\n"
				+ "</tr> </tbody> </table>";

		mensagemHtmlTeste = mensagemHtmlTeste + "<table width='100%' style='border-left:3px solid #71A241'>" + "<tbody>"
				+ "<tr>";

		mensagemHtmlTeste = mensagemHtmlTeste + " <td> "
				+ "<img src='http://siscoatimagens.galleriabank.com.br/StepCadastrado.png' height='467.8' width='330.6'>"
				+ "</td>";

		mensagemHtmlTeste = mensagemHtmlTeste + " </tr> ";

		mensagemHtmlTeste = mensagemHtmlTeste + " </tbody> " + " </table>" + " </td>" + " <td width='20'> </td>"
				+ " </tr>" + " </tbod>" + " </table>" + " <br>"
				+ " <table width='100%' border='0' cellspacing='0' cellpadding='0'>" + " <tbody>"
				+ " <tr style='background-color:#f0f0f0;height:61px;font-family:Arial,sans-serif;font-size:10px;color:#fff'>"
				+ " <td style='color:#16243f;padding-left:20px; font-size: 12px;'> © Todos direitos reservados. </td>"
				+ " <td style='text-align: right;padding-right: 20px;'><a style='color:#16243f;font-size: 12px; text-decoration: none;'  target='_blank'>Galleria Bank</a> </td>"
				+ " </tr>" + " </tbody>" + " </table>" + " <div class='yj6qo'></div>" + " <div class='adL'> </div>"
				+ " </div>" + " <div class='adL'> </div>" + " <div class='adL'> </div>" + " </div>" + " </body>"
				+ " </html>";

		try {
			ResponsavelDao rDao = new ResponsavelDao();
			EnviaEmail eec = new EnviaEmail();
			eec.enviarEmailHtmlResponsavelAdms(this.objetoContratoCobranca.getResponsavel().getEmail(),
					"[siscoat] Atualização do contrato " + this.objetoContratoCobranca.getNumeroContrato(),
					mensagemHtmlTeste);

		} catch (Exception ex) {
			System.out.println(ex.getMessage());
		}

	}

	public void enviaEmailAtualizacaoPreContratoNovo() {
		if (this.objetoContratoCobranca.getResponsavel().isDesativado()) {
			return;
		}
		Locale locale = new Locale("pt", "BR");
		SimpleDateFormat sdfDataRelComHoras = new SimpleDateFormat("dd/MM/yyyy HH:mm", locale);
		Date dataHoje = DateUtil.gerarDataHoje();

		ContratoCobranca contrato = new ContratoCobranca();
		contrato = populaStatusUnitario(this.objetoContratoCobranca);
		if (CommonsUtil.semValor(contrato)) {
			return;
		}
		ContratoCobranca c = contrato;

		String mensagemHtmlTeste = "<html>\n" + "<head>\n" + "<meta charset=\"UTF-8\">\n"
				+ "<meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\" />\n"
				+ "<link href='https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;700&display=swap' rel='stylesheet'>\n"
				+ "</head>\n" + "<body>\n"
				+ "<div bgcolor='#f9f7f7' marginwidth='0' marginheight='0' style=' :#f9f7f7'>\n"
				+ "<div class='adM'> </div>\n"
				+ "<div style='background-color:#fff;margin-top:0px;margin-right:auto;margin-bottom:0px;margin-left:auto;width:650px!important;color:#fff;font-size:30px'>\n"
				+ "<div class='adM'> </div>\n" + "<div align='center'>\n" + "<div class='adM'> </div>\n"
				+ "<table width='100%' border='0' cellspacing='0' cellpadding='0'>\n" + "<tbody>\n" + "<tr>\n"
				+ "<td style='background-color:#f0f0f0;height:75px; padding: 15px;' align='center'> <img src='http://siscoatimagens.galleriabank.com.br/logo-galleria.png' height='65' width='300'> </td>\n"
				+ "</tr>\n" + "</tbody>\n" + "</table>\n" + "<br>\n" + "<table>\n" + "<tbody>\n" + "<tr>\n"
				+ "<td width='20'> </td>\n" + "<td>\n" + "<table>\n" + "<tbody>\n" + "<tr>\n"
				+ "<td style='font-family:Arial,sans-serif;color:#71A241;font-size:20px'>Olá\n"
				+ "<span style='font-weight:bold'>" + this.objetoContratoCobranca.getResponsavel().getNome()
				+ "</span>, </td>\n" + "</tr>\n" + "<tr>\n"
				+ "<td style='font-family:Arial,sans-serif;color:#58585a;font-size:14px;line-height:20px;padding-top:7px'> O contrato <b>"
				+ this.objetoContratoCobranca.getNumeroContrato() + "</b> do <b>"
				+ this.objetoContratoCobranca.getPagador().getNome() + "</b> teve atualização para <b>" + c.getStatus()
				+ "</b>. </td>\n" + "</tr>\n" + "</tbody>\n" + "</table>\n"
				+ "<div style='height:1px;background-color:#e8e8ed;margin-top:10px;margin-bottom:25px'> </div>\n"
				+ "<table width='100%' style='border-left:3px solid #71A241'>\n" + "<tbody>\n" + "<tr>\n"
				+ "<td style='font-family:Arial,sans-serif;color:#58585a;font-size:14px;padding-left:18px;line-height:16px'> <span style='font-size:10px;'>DATA DA ATUALIZAÇÃO\n"
				+ "</span>\n" + "<br><b>" + sdfDataRelComHoras.format(dataHoje) + "\n" + "</b> </td>\n"
				+ "</tr> </tbody> </table>";

		mensagemHtmlTeste = mensagemHtmlTeste + "<table width='100%' style='border-left:3px solid #71A241'>" + "<tbody>"
				+ "<tr>";

		if (CommonsUtil.mesmoValor(c.getStatus(), "Operação Pré-Aprovada")) {
			mensagemHtmlTeste = mensagemHtmlTeste + " <td> "
					+ "<img src='http://siscoatimagens.galleriabank.com.br/StepPreAprovado.png' height='467.8' width='330.6'>"
					+ "</td>";
		} else if (CommonsUtil.mesmoValor(c.getStatus(), "Laudo e Paju Recebidos")) {
			mensagemHtmlTeste = mensagemHtmlTeste + " <td> "
					+ "<img src='http://siscoatimagens.galleriabank.com.br/StepLaudoPaju.png' height='467.8' width='330.6'>"
					+ "</td>";
		} else if (CommonsUtil.mesmoValor(c.getStatus(), "Aprovado no Comitê")) {
			mensagemHtmlTeste = mensagemHtmlTeste + " <td> "
					+ "<img src='http://siscoatimagens.galleriabank.com.br/StepComite.png' height='467.8' width='330.6'>"
					+ "</td>";
		} else if (CommonsUtil.mesmoValor(c.getStatus(), "Contrato Assinado")) {
			mensagemHtmlTeste = mensagemHtmlTeste + " <td> "
					+ "<img src='http://siscoatimagens.galleriabank.com.br/StepAssinado.png' height='467.8' width='330.6'>"
					+ "</td>";
		} else if (CommonsUtil.mesmoValor(c.getStatus(), "Contrato Registrado")) {
			mensagemHtmlTeste = mensagemHtmlTeste + " <td> "
					+ "<img src='http://siscoatimagens.galleriabank.com.br/StepRegistrado.png' height='467.8' width='330.6'>"
					+ "</td>";
		} else {
			return;
		}

		mensagemHtmlTeste = mensagemHtmlTeste + " </tr> ";

		mensagemHtmlTeste = mensagemHtmlTeste + " </tbody> " + " </table>" + " </td>" + " <td width='20'> </td>"
				+ " </tr>" + " </tbod>" + " </table>" + " <br>"
				+ " <table width='100%' border='0' cellspacing='0' cellpadding='0'>" + " <tbody>"
				+ " <tr style='background-color:#f0f0f0;height:61px;font-family:Arial,sans-serif;font-size:10px;color:#fff'>"
				+ " <td style='color:#16243f;padding-left:20px; font-size: 12px;'> © Todos direitos reservados. </td>"
				+ " <td style='text-align: right;padding-right: 20px;'><a style='color:#16243f;font-size: 12px; text-decoration: none;' target='_blank'>Galleria Bank</a> </td>"
				+ " </tr>" + " </tbody>" + " </table>" + " <div class='yj6qo'></div>" + " <div class='adL'> </div>"
				+ " </div>" + " <div class='adL'> </div>" + " <div class='adL'> </div>" + " </div>" + " </body>"
				+ " </html>";

		try {
			ResponsavelDao rDao = new ResponsavelDao();
			EnviaEmail eec = new EnviaEmail();
			eec.enviarEmailHtmlResponsavelAdms(this.objetoContratoCobranca.getResponsavel().getEmail(),
					"[siscoat] Atualização do contrato " + this.objetoContratoCobranca.getNumeroContrato(),
					mensagemHtmlTeste);

		} catch (Exception ex) {
			System.out.println(ex.getMessage());
		}

	}

	/**
	 * SERVICO PARA PEGAR O ENDEREÇO AUTOMATICAMENTE
	 * 
	 * vianet.com.br
	 */
	public void getEnderecoByViaNet() {

		try {
			CepService cepService = new CepService();
			CepResult consultaCep = cepService.consultaCep(this.objetoPagadorRecebedor.getCep());

			if (CommonsUtil.semValor(consultaCep) || !CommonsUtil.semValor(consultaCep.getErro())) {
				this.objetoPagadorRecebedor.setEndereco("");
				this.objetoPagadorRecebedor.setBairro("");
				this.objetoPagadorRecebedor.setCidade("");
				this.objetoPagadorRecebedor.setEstado("");
			} else {

				if (!CommonsUtil.semValor(consultaCep.getEndereco())) {
					this.objetoPagadorRecebedor.setEndereco(consultaCep.getEndereco());
				}
				if (!CommonsUtil.semValor(consultaCep.getBairro())) {
					this.objetoPagadorRecebedor.setBairro(consultaCep.getBairro());
				}
				if (!CommonsUtil.semValor(consultaCep.getCidade())) {
					this.objetoPagadorRecebedor.setCidade(consultaCep.getCidade());
				}
				if (!CommonsUtil.semValor(consultaCep.getEstado())) {
					this.objetoPagadorRecebedor.setEstado(consultaCep.getEstado());
				}
			}
		} catch (Exception e) {
			e.printStackTrace();
		}

	}

	public void getEnderecoByViaNetPagador(PagadorRecebedor pagador) {

		try {
			CepService cepService = new CepService();
			CepResult consultaCep = cepService.consultaCep(pagador.getCep());

			if (CommonsUtil.semValor(consultaCep) || !CommonsUtil.semValor(consultaCep.getErro())) {
				pagador.setEndereco("");
				pagador.setBairro("");
				pagador.setCidade("");
				pagador.setEstado("");
			} else {

				if (!CommonsUtil.semValor(consultaCep.getEndereco())) {
					pagador.setEndereco(consultaCep.getEndereco());
				}
				if (!CommonsUtil.semValor(consultaCep.getBairro())) {
					pagador.setBairro(consultaCep.getBairro());
				}
				if (!CommonsUtil.semValor(consultaCep.getCidade())) {
					pagador.setCidade(consultaCep.getCidade());
				}
				if (!CommonsUtil.semValor(consultaCep.getEstado())) {
					pagador.setEstado(consultaCep.getEstado());
				}
			}
		} catch (Exception e) {
			e.printStackTrace();
		}
	}

	public void getEnderecoByViaNetImovelCobranca() {

		try {
			CepService cepService = new CepService();
			CepResult consultaCep = cepService.consultaCep(this.objetoImovelCobranca.getCep());

			if (CommonsUtil.semValor(consultaCep) || !CommonsUtil.semValor(consultaCep.getErro())) {
				this.objetoImovelCobranca.setEndereco("");
				this.objetoImovelCobranca.setBairro("");
				this.objetoImovelCobranca.setCidade("");
				this.objetoImovelCobranca.setEstado("");
			} else {

				if (!CommonsUtil.semValor(consultaCep.getEndereco())) {
					this.objetoImovelCobranca.setEndereco(consultaCep.getEndereco());
				}
				if (!CommonsUtil.semValor(consultaCep.getBairro())) {
					this.objetoImovelCobranca.setBairro(consultaCep.getBairro());
				}
				if (!CommonsUtil.semValor(consultaCep.getCidade())) {
					this.objetoImovelCobranca.setCidade(consultaCep.getCidade());
				}
				if (!CommonsUtil.semValor(consultaCep.getEstado())) {
					this.objetoImovelCobranca.setEstado(consultaCep.getEstado());
				}
			}
		} catch (Exception e) {
			e.printStackTrace();
		}
	}

	public void getLinkMaps() {
		if (!CommonsUtil.semValor(this.objetoImovelCobranca.getLinkGMaps())) {
			return;
		}
		String linkImovel = "";
		linkImovel = this.objetoImovelCobranca.getEndereco() + "," + this.objetoImovelCobranca.getCidade()
				+ this.objetoImovelCobranca.getEstado();
		linkImovel = linkImovel.replaceAll(" ", "+");
		linkImovel = linkImovel.replaceAll(",", "%2C");
		this.objetoImovelCobranca.setLinkGMaps("https://www.google.com/maps/search/?api=1&query=" + linkImovel);
	}

	public void getEnderecoByViaNetConjuge() {

		try {
			CepService cepService = new CepService();
			CepResult consultaCep = cepService.consultaCep(this.objetoPagadorRecebedor.getCepConjuge());

			if (CommonsUtil.semValor(consultaCep) || !CommonsUtil.semValor(consultaCep.getErro())) {
				this.objetoPagadorRecebedor.setEnderecoConjuge("");
				this.objetoPagadorRecebedor.setBairroConjuge("");
				this.objetoPagadorRecebedor.setCidadeConjuge("");
				this.objetoPagadorRecebedor.setEstadoConjuge("");
			} else {

				if (!CommonsUtil.semValor(consultaCep.getEndereco())) {
					this.objetoPagadorRecebedor.setEnderecoConjuge(consultaCep.getEndereco());
				}
				if (!CommonsUtil.semValor(consultaCep.getBairro())) {
					this.objetoPagadorRecebedor.setBairroConjuge(consultaCep.getBairro());
				}
				if (!CommonsUtil.semValor(consultaCep.getCidade())) {
					this.objetoPagadorRecebedor.setCidadeConjuge(consultaCep.getCidade());
				}
				if (!CommonsUtil.semValor(consultaCep.getEstado())) {
					this.objetoPagadorRecebedor.setEstadoConjuge(consultaCep.getEstado());
				}
			}
		} catch (Exception e) {
			e.printStackTrace();
		}
	}

	public void getEnderecoByViaNetCoobrigado() {

		try {
			CepService cepService = new CepService();
			CepResult consultaCep = cepService.consultaCep(this.objetoPagadorRecebedor.getCep());

			if (CommonsUtil.semValor(consultaCep) || !CommonsUtil.semValor(consultaCep.getErro())) {
				this.objetoPagadorRecebedor.setEndereco("");
				this.objetoPagadorRecebedor.setBairro("");
				this.objetoPagadorRecebedor.setCidade("");
				this.objetoPagadorRecebedor.setEstado("");
			} else {

				if (!CommonsUtil.semValor(consultaCep.getEndereco())) {
					this.objetoPagadorRecebedor.setEnderecoConjuge(consultaCep.getEndereco());
				}
				if (!CommonsUtil.semValor(consultaCep.getBairro())) {
					this.objetoPagadorRecebedor.setBairroConjuge(consultaCep.getBairro());
				}
				if (!CommonsUtil.semValor(consultaCep.getCidade())) {
					this.objetoPagadorRecebedor.setCidadeConjuge(consultaCep.getCidade());
				}
				if (!CommonsUtil.semValor(consultaCep.getEstado())) {
					this.objetoPagadorRecebedor.setEstadoConjuge(consultaCep.getEstado());
				}
			}
		} catch (Exception e) {
			e.printStackTrace();
		}

	}

	public void getEnderecoByViaNetCoobrigadoCasado() {

		try {
			CepService cepService = new CepService();
			CepResult consultaCep = cepService.consultaCep(this.objetoPagadorRecebedor.getCep());

			if (CommonsUtil.semValor(consultaCep) || !CommonsUtil.semValor(consultaCep.getErro())) {
				this.objetoPagadorRecebedor.setEndereco("");
				this.objetoPagadorRecebedor.setBairro("");
				this.objetoPagadorRecebedor.setCidade("");
				this.objetoPagadorRecebedor.setEstado("");
			} else {

				if (!CommonsUtil.semValor(consultaCep.getEndereco())) {
					this.objetoPagadorRecebedor.setEnderecoCoobrigadoCasado(consultaCep.getEndereco());
				}
				if (!CommonsUtil.semValor(consultaCep.getBairro())) {
					this.objetoPagadorRecebedor.setBairroCoobrigadoCasado(consultaCep.getBairro());
				}
				if (!CommonsUtil.semValor(consultaCep.getCidade())) {
					this.objetoPagadorRecebedor.setCidadeCoobrigadoCasado(consultaCep.getCidade());
				}
				if (!CommonsUtil.semValor(consultaCep.getEstado())) {
					this.objetoPagadorRecebedor.setEstadoCoobrigadoCasado(consultaCep.getEstado());
				}
			}
		} catch (Exception e) {
			e.printStackTrace();
		}

	}

	/***
	 * 
	 * PARSE DO RETORNO SUCESSO
	 * 
	 * @param inputStream
	 * @return
	 */
	public JSONObject getJsonSucesso(InputStream inputStream) {
		BufferedReader in;
		try {
			in = new BufferedReader(new InputStreamReader(inputStream, "UTF-8"));

			String inputLine;
			StringBuffer response = new StringBuffer();

			while ((inputLine = in.readLine()) != null) {
				response.append(inputLine);
			}
			in.close();

			// READ JSON response and print
			JSONObject myResponse = new JSONObject(response.toString());

			return myResponse;

		} catch (UnsupportedEncodingException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		} catch (IOException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
		return null;
	}

	public void populaReferenciaBancariaCPF() {
		FacesContext context = FacesContext.getCurrentInstance();
		boolean validaCPF = ValidaCPF.isCPFOnly(this.objetoPagadorRecebedor.getCpf());

		if (!validaCPF) {
			context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR,
					"Pré-Contrato: O CPF inserido é inválido ou está incorreto!", ""));
		} else {
			this.objetoPagadorRecebedor.setCpfCC(this.objetoPagadorRecebedor.getCpf());
			this.objetoPagadorRecebedor.setNomeCC(this.objetoPagadorRecebedor.getNome());
		}
	}

	public void populaReferenciaBancariaCNPJ() {
		FacesContext context = FacesContext.getCurrentInstance();
		boolean validaCNPJ = ValidaCNPJ.isCNPJOnly(this.objetoPagadorRecebedor.getCnpj());

		if (!validaCNPJ) {
			context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR,
					"Pré-Contrato: O CNPJ inserido é inválido ou está incorreto!", ""));
		} else {
			this.objetoPagadorRecebedor.setCnpjCC(this.objetoPagadorRecebedor.getCnpj());
			this.objetoPagadorRecebedor.setNomeCC(this.objetoPagadorRecebedor.getNome());
		}
	}

	public void populaReferenciaBancariaConjuge() {
		this.objetoPagadorRecebedor.setCpfCCConjuge(this.objetoPagadorRecebedor.getCpfConjuge());
		this.objetoPagadorRecebedor.setNomeCCConjuge(this.objetoPagadorRecebedor.getNomeConjuge());
	}

	public void populaReferenciaBancariaCoobrigado() {
		FacesContext context = FacesContext.getCurrentInstance();
		boolean validaCPF = ValidaCPF.isCPFOnly(this.objetoPagadorRecebedor.getCpfCoobrigado());

		if (!validaCPF) {
			context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR,
					"Pré-Contrato: O CPF inserido é inválido ou está incorreto!", ""));
		} else {
			this.objetoPagadorRecebedor.setCpfCCCoobrigado(this.objetoPagadorRecebedor.getCpfCoobrigado());
			this.objetoPagadorRecebedor.setNomeCCCoobrigado(this.objetoPagadorRecebedor.getNomeCoobrigado());
		}
	}

	public void populaReferenciaBancariaCoobrigadoCasado() {
		FacesContext context = FacesContext.getCurrentInstance();
		boolean validaCPF = ValidaCPF.isCPFOnly(this.objetoPagadorRecebedor.getCpfCoobrigadoCasado());

		if (!validaCPF) {
			context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR,
					"Pré-Contrato: O CPF inserido é inválido ou está incorreto!", ""));
		} else {
			this.objetoPagadorRecebedor.setCpfCCCoobrigadoCasado(this.objetoPagadorRecebedor.getCpfCoobrigadoCasado());
			this.objetoPagadorRecebedor
					.setNomeCCCoobrigadoCasado(this.objetoPagadorRecebedor.getNomeCoobrigadoCasado());
		}
	}

	public void populaReferenciaBancariaCPFPagador(PagadorRecebedor pagador) {
		FacesContext context = FacesContext.getCurrentInstance();
		boolean validaCPF = ValidaCPF.isCPFOnly(pagador.getCpf());

		if (!validaCPF) {
			context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR,
					"Pré-Contrato: O CPF inserido é inválido ou está incorreto!", ""));
		} else {
			pagador.setCpfCC(pagador.getCpf());
			pagador.setNomeCC(pagador.getNome());
		}
	}

	/**
	 * 
	 * @param origem os valores são publico ou aprovado
	 * @return
	 */
	public String addPreContratoLeadSite() {
		ResponsavelDao responsavelDao = new ResponsavelDao();
		FacesContext context = FacesContext.getCurrentInstance();
		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();

		// verifica se o responsavel informado existe
		if (responsavelDao.findByFilter("codigo", this.codigoResponsavel).size() > 0) {
			Responsavel responsavel = responsavelDao.findByFilter("codigo", this.codigoResponsavel).get(0);

			this.objetoContratoCobranca.setResponsavel(responsavel);

			if (CommonsUtil.mesmoValor(responsavel.getId(), CommonsUtil.longValue("46"))) {
				this.objetoContratoCobranca.setContratoLead(true);
			} else if (CommonsUtil.mesmoValor(this.objetoContratoCobranca.isContratoLead(), null)) {
				this.objetoContratoCobranca.setContratoLead(true);
			}

			PagadorRecebedor pagadorRecebedor = null;
			PagadorRecebedorDao pagadorRecebedorDao = new PagadorRecebedorDao();

			if (this.objetoPagadorRecebedor.getId() <= 0) {
				List<PagadorRecebedor> pagadorRecebedorBD = new ArrayList<PagadorRecebedor>();
				boolean registraPagador = false;
				Long idPagador = (long) 0;

				if (this.objetoPagadorRecebedor.getCpf() != null) {
					pagadorRecebedorBD = pagadorRecebedorDao.findByFilter("cpf", this.objetoPagadorRecebedor.getCpf());
					if (pagadorRecebedorBD.size() > 0) {
						pagadorRecebedor = pagadorRecebedorBD.get(0);
					} else {
						pagadorRecebedor = this.objetoPagadorRecebedor;
						registraPagador = true;
					}
				}

				if (this.objetoPagadorRecebedor.getCnpj() != null) {
					pagadorRecebedorBD = pagadorRecebedorDao.findByFilter("cnpj",
							this.objetoPagadorRecebedor.getCnpj());
					if (pagadorRecebedorBD.size() > 0) {
						pagadorRecebedor = pagadorRecebedorBD.get(0);
					} else {
						pagadorRecebedor = this.objetoPagadorRecebedor;
						registraPagador = true;
					}
				}

				registraPagador = true;

				if (pagadorRecebedor == null) {
					pagadorRecebedor = this.objetoPagadorRecebedor;
				}

				if (this.objetoPagadorRecebedor.getSite() != null && this.objetoPagadorRecebedor.getSite().equals("")) {
					if (!this.objetoPagadorRecebedor.getSite().contains("http")) {
						this.objetoPagadorRecebedor
								.setSite("HTTP://" + this.objetoPagadorRecebedor.getSite().toLowerCase());
					}
				}

				if (registraPagador) {
					idPagador = pagadorRecebedorDao.create(pagadorRecebedor);
					pagadorRecebedor = pagadorRecebedorDao.findById(idPagador);
				}
			} else {
				pagadorRecebedorDao.merge(this.objetoPagadorRecebedor);
				pagadorRecebedor = this.objetoPagadorRecebedor;
			}

			// INSERE AQUI

			ImovelCobrancaDao imovelCobrancaDao = new ImovelCobrancaDao();
			ImovelCobranca imovelCobranca = new ImovelCobranca();

			// if (imovelCobrancaDao.findByFilter("numeroMatricula",
			// this.objetoImovelCobranca.getNumeroMatricula()).size() > 0) {
			// imovelCobranca = imovelCobrancaDao.findByFilter("numeroMatricula",
			// this.objetoImovelCobranca.getNumeroMatricula()).get(0);
			// } else {
			long idIm = imovelCobrancaDao.create(this.objetoImovelCobranca);
			imovelCobranca = imovelCobrancaDao.findById(idIm);
			// }

			this.objetoContratoCobranca.setPagador(pagadorRecebedor);
			this.objetoContratoCobranca.setImovel(imovelCobranca);

			this.objetoContratoCobranca.setRecebedor(null);

			if (this.qtdeParcelas != null && !this.qtdeParcelas.equals("")) {
				this.objetoContratoCobranca.setQtdeParcelas(Integer.valueOf(this.qtdeParcelas));
			}

			BigDecimalConverter bigDecimalConverter = new BigDecimalConverter();

			if (this.objetoContratoCobranca.getVlrParcela() != null) {
				this.objetoContratoCobranca.setVlrParcelaStr(
						bigDecimalConverter.getAsString(null, null, this.objetoContratoCobranca.getVlrParcela()));
			}

			updateCheckList();

			this.objetoContratoCobranca.setStatusLead("Novo Lead");
			this.objetoContratoCobranca.populaStatusEsteira(getUsuarioLogadoNull());
			contratoCobrancaDao.create(this.objetoContratoCobranca);

			enviaEmailCriacaoPreContratoNovo();

			if (context != null) {
				context.addMessage(null,
						new FacesMessage(FacesMessage.SEVERITY_INFO,
								"Contrato Cobrança: Pré-Contrato adicionado com sucesso! (Contrato: "
										+ this.objetoContratoCobranca.getNumeroContrato() + ")!",
								""));

				return geraConsultaContratosPendentes();
			} else {
				return "";
			}
		} else {
			if (context != null) {
				context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR,
						"Contrato Cobrança: Erro de validação: O código do responsável digitado não foi encontrado ("
								+ this.codigoResponsavel + ")!",
						""));
			}

			return null;
		}
	}

	/**
	 * 
	 * @param origem os valores são publico ou aprovado
	 * @return
	 */
	public String addPreContrato() {
		ResponsavelDao responsavelDao = new ResponsavelDao();
		FacesContext context = FacesContext.getCurrentInstance();
		String msgRetorno = null;
		boolean erroValidacaoLov = false;
		boolean erroValidacaoBaixa = false;
		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();

		try {
			// verifica se o responsavel informado existe
			if (responsavelDao.findByFilter("codigo", this.codigoResponsavel).size() > 0) {
				Responsavel responsavel = responsavelDao.findByFilter("codigo", this.codigoResponsavel).get(0);
				responsavelDao.merge(responsavel);

				this.objetoContratoCobranca.setResponsavel(responsavel);

				if (CommonsUtil.mesmoValor(responsavel.getId(), CommonsUtil.longValue("46"))) {
					this.objetoContratoCobranca.setContratoLead(true);
				} else if (CommonsUtil.mesmoValor(this.objetoContratoCobranca.isContratoLead(), null)) {
					this.objetoContratoCobranca.setContratoLead(false);
				}

				PagadorRecebedor pagadorRecebedor = null;
				PagadorRecebedorDao pagadorRecebedorDao = new PagadorRecebedorDao();

				if (this.objetoPagadorRecebedor.getId() <= 0) {
					List<PagadorRecebedor> pagadorRecebedorBD = new ArrayList<PagadorRecebedor>();
					boolean registraPagador = false;
					Long idPagador = (long) 0;

					if (this.objetoPagadorRecebedor.getCpf() != null) {
						pagadorRecebedorBD = pagadorRecebedorDao.findByFilter("cpf",
								this.objetoPagadorRecebedor.getCpf());
						if (pagadorRecebedorBD.size() > 0) {
							pagadorRecebedor = pagadorRecebedorBD.get(0);
						} else {
							pagadorRecebedor = this.objetoPagadorRecebedor;
							registraPagador = true;
						}
					}

					if (this.objetoPagadorRecebedor.getCnpj() != null) {
						pagadorRecebedorBD = pagadorRecebedorDao.findByFilter("cnpj",
								this.objetoPagadorRecebedor.getCnpj());
						if (pagadorRecebedorBD.size() > 0) {
							pagadorRecebedor = pagadorRecebedorBD.get(0);
						} else {
							pagadorRecebedor = this.objetoPagadorRecebedor;
							registraPagador = true;
						}
					}

					registraPagador = true;

					if (pagadorRecebedor == null) {
						pagadorRecebedor = this.objetoPagadorRecebedor;
					}

					if (this.objetoPagadorRecebedor.getSite() != null
							&& this.objetoPagadorRecebedor.getSite().equals("")) {
						if (!this.objetoPagadorRecebedor.getSite().contains("http")) {
							this.objetoPagadorRecebedor
									.setSite("HTTP://" + this.objetoPagadorRecebedor.getSite().toLowerCase());
						}
					}

					if (registraPagador) {
						idPagador = pagadorRecebedorDao.create(pagadorRecebedor);
						pagadorRecebedor = pagadorRecebedorDao.findById(idPagador);
					}
				} else {
					pagadorRecebedorDao.merge(this.objetoPagadorRecebedor);
					pagadorRecebedor = this.objetoPagadorRecebedor;
				}

				this.objetoPagadorRecebedor.criarConjugeNoSistema();

				if (this.objetoContratoCobranca.getQuantoPrecisa().compareTo(BigDecimal.valueOf(4000000)) == 1) {
					context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR,
							"Contrato Cobrança: Erro de validação: Valor Acima do limite atual de R$4.000.000,00. !",
							""));

					return "";
				}

				// VALIDA IMOVEL
				String imovelValido = null;
				String matriculaLimpa = CommonsUtil.somenteNumeros(this.objetoImovelCobranca.getNumeroMatricula());
				String cepLimpo = CommonsUtil
						.somenteNumeros(this.objetoImovelCobranca.getCep().replace(".", "").replace("-", ""));

				imovelValido = contratoCobrancaDao.validaImovelNovoContrato(matriculaLimpa, cepLimpo);

				// valida imovel
				if (imovelValido == null) {
					ImovelCobrancaDao imovelCobrancaDao = new ImovelCobrancaDao();
					ImovelCobranca imovelCobranca = new ImovelCobranca();

					// if (imovelCobrancaDao.findByFilter("numeroMatricula",
					// this.objetoImovelCobranca.getNumeroMatricula()).size() > 0) {
					// imovelCobranca = imovelCobrancaDao.findByFilter("numeroMatricula",
					// this.objetoImovelCobranca.getNumeroMatricula()).get(0);
					// } else {
					long idIm = imovelCobrancaDao.create(this.objetoImovelCobranca);
					imovelCobranca = imovelCobrancaDao.findById(idIm);
					// }

					this.objetoContratoCobranca.setPagador(pagadorRecebedor);
					this.objetoContratoCobranca.setImovel(imovelCobranca);

					this.objetoContratoCobranca.setRecebedor(null);

					if (this.qtdeParcelas != null && !this.qtdeParcelas.equals("")) {
						this.objetoContratoCobranca.setQtdeParcelas(Integer.valueOf(this.qtdeParcelas));
					}

					BigDecimalConverter bigDecimalConverter = new BigDecimalConverter();

					if (this.objetoContratoCobranca.getVlrParcela() != null) {
						this.objetoContratoCobranca.setVlrParcelaStr(bigDecimalConverter.getAsString(null, null,
								this.objetoContratoCobranca.getVlrParcela()));
					}

					updateCheckList();

					this.objetoContratoCobranca.setStatusLead("Completo");
					this.objetoContratoCobranca.setInicioAnalise(false);
					this.objetoContratoCobranca.populaStatusEsteira(getUsuarioLogadoNull());
					contratoCobrancaDao.create(this.objetoContratoCobranca);

					if (!this.objetoContratoCobranca.isAgRegistro()) {
						/*
						 * this.vlrRepasse = this.vlrRepasseNew; this.vlrRetencao = this.vlrRetencaoNew;
						 * this.vlrComissao = this.vlrComissaoNew;
						 * 
						 * this.vlrRepasseFinal = this.vlrRepasseFinalNew; this.vlrRetencaoFinal =
						 * this.vlrRetencaoFinalNew; this.vlrComissaoFinal = this.vlrComissaoFinalNew;
						 * 
						 * if (!this.validarProcentagensSeguro()) { context.addMessage(null, new
						 * FacesMessage(FacesMessage.SEVERITY_ERROR,
						 * "A soma das porcentagens dos segurados não é 100%", "")); erroValidacaoLov =
						 * true; }
						 * 
						 * if (this.selectedImovel == null) { context.addMessage(null, new
						 * FacesMessage(FacesMessage.SEVERITY_ERROR,
						 * "Contrato Cobrança: Erro de validação: é obrigatória a seleção do Imóvel.",
						 * "")); erroValidacaoLov = true; } else { imovelCobrancaDao = new
						 * ImovelCobrancaDao();
						 * this.objetoContratoCobranca.setImovel(imovelCobrancaDao.findById(this.
						 * selectedImovel.getId())); }
						 * 
						 * if (this.selectedResponsavel == null) { context.addMessage(null, new
						 * FacesMessage(FacesMessage.SEVERITY_ERROR,
						 * "Contrato Cobrança: Erro de validação: é obrigatória a seleção do Responsável."
						 * , "")); erroValidacaoLov = true; } else { responsavelDao = new
						 * ResponsavelDao(); this.objetoContratoCobranca
						 * .setResponsavel(responsavelDao.findById(this.selectedResponsavel.getId())); }
						 * 
						 * // se houve erro(s) na validações acima, retorna nulo e mensagem de erro if
						 * (erroValidacaoLov || erroValidacaoBaixa) { return ""; } // FIM - Validacao
						 * das LoVs
						 * 
						 * if (this.objetoContratoCobranca.getListContratoCobrancaDetalhes().size() <=
						 * 0) { // se esta editando pela primeira vez o contrato aprovado // gera
						 * remuneracao responsaveis
						 * geraContasPagarRemuneracao(this.objetoContratoCobranca);
						 * 
						 * TimeZone zone = TimeZone.getDefault(); Locale locale = new Locale("pt",
						 * "BR"); Calendar dataInicio = Calendar.getInstance(zone, locale);
						 * dataInicio.setTime(this.objetoContratoCobranca.getDataInicio());
						 * 
						 * // Adiciona parcelas de pagamento
						 * 
						 * GeracaoBoletoMB geracaoBoletoMB = new GeracaoBoletoMB();
						 * 
						 * if (this.isGeraBoletoInclusaoContrato()) { geracaoBoletoMB.geraPDFBoletos(
						 * "Boletos Bradesco - Contrato: " +
						 * this.objetoContratoCobranca.getNumeroContrato());
						 * 
						 * this.fileBoleto = geracaoBoletoMB.getFile(); } } else { // se a quantidade de
						 * parcelas for igual, atualiza os valores e refaz as datas // de vencimento if
						 * (Integer.valueOf(this.qtdeParcelas) ==
						 * this.objetoContratoCobranca.getQtdeParcelas()) { // atualiza Repasse /
						 * Retenção / Comissão caso seja diferente for (ContratoCobrancaDetalhes ccd :
						 * this.objetoContratoCobranca .getListContratoCobrancaDetalhes()) { if
						 * (!ccd.isParcelaPaga()) { if (ccd.getVlrRepasse() != this.vlrRepasse ||
						 * ccd.getVlrRetencao() != this.vlrRetencao || ccd.getVlrComissao() !=
						 * this.vlrComissao) { ccd.setVlrRepasse(this.vlrRepasse);
						 * ccd.setVlrRetencao(this.vlrRetencao); ccd.setVlrComissao(this.vlrComissao); }
						 * else { break; } } } } }
						 * 
						 * try { if (objetoContratoCobranca.getId() <= 0) {
						 * contratoCobrancaDao.create(objetoContratoCobranca); msgRetorno = "inserido";
						 * } else { if (this.objetoContratoCobranca.isGeraParcelaFinal()) { if
						 * (!this.objetoContratoCobranca.getListContratoCobrancaDetalhes()
						 * .get(this.objetoContratoCobranca.getListContratoCobrancaDetalhes().size() -
						 * 1) .isParcelaPaga()) {
						 * this.objetoContratoCobranca.getListContratoCobrancaDetalhes().get(
						 * this.objetoContratoCobranca.getListContratoCobrancaDetalhes().size() - 1)
						 * .setVlrComissao(this.vlrComissaoFinal);
						 * this.objetoContratoCobranca.getListContratoCobrancaDetalhes().get(
						 * this.objetoContratoCobranca.getListContratoCobrancaDetalhes().size() - 1)
						 * .setVlrRepasse(this.vlrRepasseFinal);
						 * this.objetoContratoCobranca.getListContratoCobrancaDetalhes().get(
						 * this.objetoContratoCobranca.getListContratoCobrancaDetalhes().size() - 1)
						 * .setVlrRetencao(this.vlrRetencaoFinal); } }
						 * 
						 * contratoCobrancaDao.merge(objetoContratoCobranca); msgRetorno = "atualizado";
						 * }
						 * 
						 * context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_INFO,
						 * "Contrato Cobrança: Registro " + msgRetorno + " com sucesso!", ""));
						 * 
						 * } catch (DAOException e) {
						 * 
						 * context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR,
						 * "Contrato Cobrança: " + e, ""));
						 * 
						 * return ""; } catch (DBConnectionException e) { context.addMessage(null, new
						 * FacesMessage(FacesMessage.SEVERITY_ERROR, "Contrato Cobrança: " + e, ""));
						 * 
						 * return ""; }
						 * 
						 * this.contratoGerado = true;
						 */
					}

					if (context != null) {
						context.addMessage(null,
								new FacesMessage(FacesMessage.SEVERITY_INFO,
										"Contrato Cobrança: Pré-Contrato adicionado com sucesso! (Contrato: "
												+ this.objetoContratoCobranca.getNumeroContrato() + ")!",
										""));

						CRMMB crmMb = new CRMMB();
						enviaEmailCriacaoPreContratoNovo();

						return crmMb.clearFieldsDetalhado();
					} else {
						return "";
					}
				} else {
					context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR,
							"Contrato Cobrança: Erro de validação: A matrícula informada já está vinculada a um contrato no sistema.  (Contrato: "
									+ imovelValido + ")!",
							""));

					return "";
				}

			} else {
				if (context != null) {
					context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR,
							"Contrato Cobrança: Erro de validação: O código do responsável digitado não foi encontrado ("
									+ this.codigoResponsavel + ")!",
							""));
				}

				return null;
			}
		} catch (JDBCException t) {
			System.out.println("================ {{{");
			SQLException current = t.getSQLException();
			do {
				current.printStackTrace();
			} while ((current = current.getNextException()) != null);
			System.out.println("================ }}}");
			throw t;
		} catch (Throwable e) {
			e.getCause().printStackTrace();
			context.addMessage(null,
					new FacesMessage(FacesMessage.SEVERITY_ERROR, "Contrato Cobrança: " + e.getCause(), ""));
		}

		// enviaEmailCriacaoPreContratoNovo();
		return null;
	}

	public void updatePagadorRecebedorDados() {
		FacesContext context = FacesContext.getCurrentInstance();

		PagadorRecebedorDao pagadorRecebedorDao = new PagadorRecebedorDao();
		pagadorRecebedorDao.merge(this.objetoContratoCobranca.getPagador());

		context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_INFO,
				"Contrato Cobrança: Os dados do pagador foram atualizados com sucesso!", ""));
	}

	public void updateResponsavelDados() {
		FacesContext context = FacesContext.getCurrentInstance();

		ResponsavelDao responsavelDao = new ResponsavelDao();
		responsavelDao.merge(this.objetoContratoCobranca.getResponsavel());

		context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_INFO,
				"Contrato Cobrança: Os dados do responsável foram atualizados com sucesso!", ""));
	}

	public String saveLeadTerceiros() {
		ResponsavelDao responsavelDao = new ResponsavelDao();
		FacesContext context = FacesContext.getCurrentInstance();
		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();

		if (responsavelDao.findByFilter("codigo", this.codigoResponsavel).size() > 0) {
			Responsavel responsavel = responsavelDao.findByFilter("codigo", this.codigoResponsavel).get(0);

			this.objetoContratoCobranca.setResponsavel(responsavel);

			if (CommonsUtil.mesmoValor(responsavel.getId(), CommonsUtil.longValue("46"))) {
				this.objetoContratoCobranca.setContratoLead(true);
			} else if (CommonsUtil.mesmoValor(this.objetoContratoCobranca.isContratoLead(), null)) {
				this.objetoContratoCobranca.setContratoLead(false);
			}

			if (this.objetoPagadorRecebedor.getSite() != null) {
				if (!this.objetoPagadorRecebedor.getSite().contains("http")
						&& !this.objetoPagadorRecebedor.getSite().contains("HTTP")) {
					this.objetoPagadorRecebedor
							.setSite("http://" + this.objetoPagadorRecebedor.getSite().toLowerCase());
				}
			}

			PagadorRecebedorDao pagadorRecebedorDao = new PagadorRecebedorDao();
			pagadorRecebedorDao.merge(this.objetoPagadorRecebedor);
			ImovelCobrancaDao imovelCobrancaDao = new ImovelCobrancaDao();
			imovelCobrancaDao.merge(this.objetoImovelCobranca);

			// this.objetoContratoCobranca.setPagador(this.objetoPagadorRecebedor);
			// this.objetoContratoCobranca.setImovel(this.objetoImovelCobranca);

			if (this.qtdeParcelas != null && !this.qtdeParcelas.equals("")) {
				this.objetoContratoCobranca.setQtdeParcelas(Integer.valueOf(this.qtdeParcelas));
			}

			if (this.objetoContratoCobranca.getVlrParcela() != null) {
				BigDecimalConverter bigDecimalConverter = new BigDecimalConverter();

				this.objetoContratoCobranca.setVlrParcelaStr(
						bigDecimalConverter.getAsString(null, null, this.objetoContratoCobranca.getVlrParcela()));
			}

			if (this.objetoContratoCobranca.getQuantoPrecisa().compareTo(BigDecimal.valueOf(4000000)) == 1) {
				context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR,
						"Contrato Cobrança: Erro de validação: Valor Acima do limite atual de R$4.000.000,00. !", ""));

				return "";
			}

			updateCheckList();

			// gerando parcelas quando contrato esta em ag registro
			if (!this.objetoContratoCobranca.isAgEnvioCartorio()
					&& this.objetoContratoCobranca.getListContratoCobrancaDetalhes().size() <= 0
					&& !CommonsUtil.semValor(this.objetoContratoCobranca.getValorCCB())) {
				geraContratoCobrancaDetalhes(contratoCobrancaDao);
			}
			this.objetoContratoCobranca.populaStatusEsteira(getUsuarioLogadoNull());
			contratoCobrancaDao.merge(this.objetoContratoCobranca);

			// verifica se o contrato for aprovado, manda um tipo de email..
			// senao valida se houve alteração no checklist para envio de email.
			if (!SiscoatConstants.DEV && !CommonsUtil.sistemaWindows()) {
				enviaEmailAtualizacaoPreContratoNovo();
				// System.out.println("saveLeadTerceiros");
			}
			contratoCobrancaCheckList = null;

			context.addMessage(null,
					new FacesMessage(FacesMessage.SEVERITY_INFO,
							"Contrato Cobrança: Pré-Contrato editado com sucesso! (Contrato: "
									+ this.objetoContratoCobranca.getNumeroContrato() + ")!",
							""));

			return geraConsultaLeadsTerceiros();
		} else {
			if (context != null) {
				context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR,
						"Contrato Cobrança: Erro de validação: O código do responsável digitado não foi encontrado ("
								+ this.codigoResponsavel + ")!",
						""));
			}

			return null;
		}
	}

	public String editPreContrato() {
		ResponsavelDao responsavelDao = new ResponsavelDao();
		FacesContext context = FacesContext.getCurrentInstance();
		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();

		try {
			if (!SiscoatConstants.DEV && !CommonsUtil.sistemaWindows()) {
				notificaStatusWhatsApp(this.objetoContratoCobranca.getId());
			}
		} catch (Exception e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
			context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR, "Contrato Cobrança: " + e, ""));
			return "";
		}

		/*
		 * if (responsavelDao.findByFilter("codigo", this.codigoResponsavel).size() > 0)
		 * { Responsavel responsavel = responsavelDao.findByFilter("codigo",
		 * this.codigoResponsavel).get(0);
		 * if(!CommonsUtil.mesmoValor(responsavel.getId(),
		 * this.objetoContratoCobranca.getResponsavel().getId())) {
		 * this.objetoContratoCobranca.setResponsavel(responsavel); } }
		 */

		Responsavel responsavel = this.objetoContratoCobranca.getResponsavel();
		responsavelDao.merge(responsavel);

		if (CommonsUtil.mesmoValor(responsavel.getId(), CommonsUtil.longValue("46"))) {
			this.objetoContratoCobranca.setContratoLead(true);
		} else if (CommonsUtil.mesmoValor(this.objetoContratoCobranca.isContratoLead(), null)) {
			this.objetoContratoCobranca.setContratoLead(false);
		}

		if (this.objetoPagadorRecebedor.getSite() != null) {
			if (!this.objetoPagadorRecebedor.getSite().contains("http")
					&& !this.objetoPagadorRecebedor.getSite().contains("HTTP")) {
				this.objetoPagadorRecebedor.setSite("http://" + this.objetoPagadorRecebedor.getSite().toLowerCase());
			}
		}

		PagadorRecebedorDao pagadorRecebedorDao = new PagadorRecebedorDao();
		pagadorRecebedorDao.merge(this.objetoPagadorRecebedor);
		this.objetoPagadorRecebedor.criarConjugeNoSistema();
		ImovelCobrancaDao imovelCobrancaDao = new ImovelCobrancaDao();
		objetoImovelCobranca.popularObjetoCidade();
		imovelCobrancaDao.merge(this.objetoImovelCobranca);

		this.objetoContratoCobranca.setPagador(this.objetoPagadorRecebedor);
		// this.objetoContratoCobranca.setImovel(this.objetoImovelCobranca);

		if (this.qtdeParcelas != null && !this.qtdeParcelas.equals("")) {
			this.objetoContratoCobranca.setQtdeParcelas(Integer.valueOf(this.qtdeParcelas));
		}

		if (this.objetoContratoCobranca.getVlrParcela() != null) {
			BigDecimalConverter bigDecimalConverter = new BigDecimalConverter();

			this.objetoContratoCobranca.setVlrParcelaStr(
					bigDecimalConverter.getAsString(null, null, this.objetoContratoCobranca.getVlrParcela()));
		}

		if (this.objetoContratoCobranca.getQuantoPrecisa().compareTo(BigDecimal.valueOf(4000000)) == 1) {
			context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR,
					"Contrato Cobrança: Erro de validação: Valor Acima do limite atual de R$4.000.000,00. !", ""));

			return "";
		}

		updateCheckList();

		// gerando parcelas quando contrato esta em ag registro
		if (!this.objetoContratoCobranca.isAgEnvioCartorio()
				&& this.objetoContratoCobranca.getListContratoCobrancaDetalhes().size() <= 0
				&& !CommonsUtil.semValor(this.objetoContratoCobranca.getValorCCB())) {
			geraContratoCobrancaDetalhes(contratoCobrancaDao);
		}

		ContasPagarDao cpDao = new ContasPagarDao();
		if (!CommonsUtil.semValor(objetoContratoCobranca.getListProcessos())) {
			for (CcbProcessosJudiciais processo : objetoContratoCobranca.getListProcessos()) {
				if (!CommonsUtil.semValor(processo.getContaPagar())) {
					if (processo.getContaPagar().getId() <= 0) {
						cpDao.create(processo.getContaPagar());
					}
				}
			}
		}

		this.objetoContratoCobranca.populaStatusEsteira(getUsuarioLogadoNull());
		contratoCobrancaDao.merge(this.objetoContratoCobranca);

		// verifica se o contrato for aprovado, manda um tipo de email..
		// senao valida se houve alteração no checklist para envio de email.
		if (!SiscoatConstants.DEV && !CommonsUtil.sistemaWindows()) {
			enviaEmailAtualizacaoPreContratoNovo();
		}
		contratoCobrancaCheckList = null;

		this.objetoCcb = null;

		context.addMessage(null,
				new FacesMessage(FacesMessage.SEVERITY_INFO,
						"Contrato Cobrança: Pré-Contrato editado com sucesso! (Contrato: "
								+ this.objetoContratoCobranca.getNumeroContrato() + ")!",
						""));
		CRMMB crmMb = new CRMMB();
		return crmMb.clearFieldsDetalhado();
	}

	public void atualizaResponsavel() {
		FacesContext context = FacesContext.getCurrentInstance();
		ResponsavelDao responsavelDao = new ResponsavelDao();
		try {
			if (!CommonsUtil.mesmoValor(this.codigoResponsavel,
					this.objetoContratoCobranca.getResponsavel().getCodigo())) {
				if (responsavelDao.findByFilter("codigo", this.codigoResponsavel).size() > 0) {
					Responsavel responsavel = responsavelDao.findByFilter("codigo", this.codigoResponsavel).get(0);
					this.objetoContratoCobranca.setResponsavel(responsavel);
				} else {
					context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR,
							"Contrato Cobrança: " + "Responsável não encontrado", ""));
					this.codigoResponsavel = this.objetoContratoCobranca.getResponsavel().getCodigo();
				}
			}
		} catch (Exception e) {
			e.printStackTrace();
			context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR, "Contrato Cobrança: " + e, ""));
		}
	}

	public String atualizaContratoAvaliacaoImovel() {
		FacesContext context = FacesContext.getCurrentInstance();
		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();

		try {
			this.objetoContratoCobranca.populaStatusEsteira(getUsuarioLogadoNull());
			contratoCobrancaDao.merge(this.objetoContratoCobranca);

			context.addMessage(null,
					new FacesMessage(FacesMessage.SEVERITY_INFO,
							"Contrato Cobrança: Pré-Contrato editado com sucesso! (Contrato: "
									+ this.objetoContratoCobranca.getNumeroContrato() + ")!",
							""));

			return clearFieldsAvaliacaoCompass();
		} catch (Exception e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
			context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR, "Contrato Cobrança: " + e, ""));
			return "";
		}
	}

	public String atualizaContratoAvaliacaoImovelGalache() {
		FacesContext context = FacesContext.getCurrentInstance();
		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();

		try {
			this.objetoContratoCobranca.populaStatusEsteira(getUsuarioLogadoNull());
			contratoCobrancaDao.merge(this.objetoContratoCobranca);

			context.addMessage(null,
					new FacesMessage(FacesMessage.SEVERITY_INFO,
							"Contrato Cobrança: Pré-Contrato editado com sucesso! (Contrato: "
									+ this.objetoContratoCobranca.getNumeroContrato() + ")!",
							""));

			return clearFieldsAvaliacaoGalache();
		} catch (Exception e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
			context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR, "Contrato Cobrança: " + e, ""));
			return "";
		}
	}

	public String atualizaContratoGeracaoPAJU() {
		FacesContext context = FacesContext.getCurrentInstance();
		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();

		try {
			updateCheckList();
			this.objetoContratoCobranca.populaStatusEsteira(getUsuarioLogadoNull());
			contratoCobrancaDao.merge(this.objetoContratoCobranca);

			context.addMessage(null,
					new FacesMessage(FacesMessage.SEVERITY_INFO,
							"Contrato Cobrança: Pré-Contrato editado com sucesso! (Contrato: "
									+ this.objetoContratoCobranca.getNumeroContrato() + ")!",
							""));

			return clearFieldsGeracaoPAJU(objetoContratoCobranca.getAvaliacaoPaju());
		} catch (Exception e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
			context.addMessage(null,
					new FacesMessage(FacesMessage.SEVERITY_ERROR, "Contrato Cobrança: " + e + "/" + e.getCause(), ""));
			return "";
		}
	}

	public void verificaPagamentoAntecipado() {
		if (objetoContratoCobranca.isApenasPagamentoAntecipado()) {
			return;
		}

		if (CommonsUtil.mesmoValor(objetoContratoCobranca.getTipoOperacao(), "Emprestimo")) {
			objetoContratoCobranca.setApenasPagamentoAntecipado(true);
		} else if (CommonsUtil.mesmoValor(objetoImovelCobranca.getTipo(), "Apartamento")
				|| CommonsUtil.mesmoValor(objetoImovelCobranca.getTipo(), "Casa")
				|| CommonsUtil.mesmoValor(objetoImovelCobranca.getTipo(), "Casa de Condomínio")
				|| CommonsUtil.mesmoValor(objetoImovelCobranca.getTipo(), "Casa de Condomínio acima1000")) {
			objetoContratoCobranca.setApenasPagamentoAntecipado(false);
		} else {
			objetoContratoCobranca.setApenasPagamentoAntecipado(true);
		}
	}

	public void verificaPagamentoIntegral() {
		if (objetoContratoCobranca.isApenasPagamentoIntegral()) {
			return;
		}

		if (CommonsUtil.mesmoValor(objetoImovelCobranca.getTipo(), "Apartamento")
				|| CommonsUtil.mesmoValor(objetoImovelCobranca.getTipo(), "Casa")
				|| CommonsUtil.mesmoValor(objetoImovelCobranca.getTipo(), "Casa de Condomínio")
				|| CommonsUtil.mesmoValor(objetoImovelCobranca.getTipo(), "Casa de Condomínio acima1000")
				|| CommonsUtil.mesmoValor(objetoImovelCobranca.getTipo(), "Casa em construção")) {
			objetoContratoCobranca.setApenasPagamentoIntegral(false);
		} else {
			objetoContratoCobranca.setApenasPagamentoIntegral(true);
		}
	}

	public void changeAvaliadorLaudo() {
		if (!CommonsUtil.semValor(this.objetoContratoCobranca.getAvaliacaoLaudo())) {
			if (this.objetoContratoCobranca.getAvaliacaoLaudo().equals("Galache")) {
				controleWhatsAlteracaoAvaliadorLaudoGalache = true;
				this.controleWhatsAlteracaoAvaliadorLaudo = false;
			}

			if (this.objetoContratoCobranca.getAvaliacaoLaudo().equals("Compass")) {
				controleWhatsAlteracaoAvaliadorLaudoGalache = false;
				this.controleWhatsAlteracaoAvaliadorLaudo = true;
			}
			this.objetoContratoCobranca.setPedidoLaudo(true);
		} else {
			this.objetoContratoCobranca.setPedidoLaudo(false);
		}
	}

	public void changeGeracaoPAJU() {
		if (!CommonsUtil.semValor(this.objetoContratoCobranca.getAvaliacaoPaju())) {
			this.objetoContratoCobranca.setPagtoLaudoConfirmada(true);
			this.controleWhatsAlteracaoGeracaoPAJU = this.objetoContratoCobranca.isPagtoLaudoConfirmada();
		} else {
			this.objetoContratoCobranca.setPagtoLaudoConfirmada(false);
		}

	}

	public void changeLaudoRecebido() {
		this.objetoContratoCobranca.setLaudoRecebido(!this.objetoContratoCobranca.isPedidoLaudo());
		// contrario pois o metodo é chamado antes de efetivar a mudança no botao (n tem
		// update)
	}

	public void notificaCompassWhatsApp() {
		Responsavel responsavel = new Responsavel();
		ResponsavelDao rDao = new ResponsavelDao();

		responsavel = rDao.findById((long) 774);

		TakeBlipMB takeBlipMB = new TakeBlipMB();
		takeBlipMB.sendWhatsAppMessage(responsavel, "avaliacao_laudo", "Compass",
				this.objetoContratoCobranca.getNumeroContrato(), this.objetoContratoCobranca.getPagador().getNome(),
				"");
	}

	public void notificaPAJUWhatsApp() {
		Responsavel responsavel = new Responsavel();
		ResponsavelDao rDao = new ResponsavelDao();
		TakeBlipMB takeBlipMB = new TakeBlipMB();

		if (CommonsUtil.mesmoValor(this.objetoContratoCobranca.getAvaliacaoPaju(), "Neves")) {
			// "João Paulo Gomes Massaro" (Neves)
			responsavel = rDao.findById((long) 797);
			takeBlipMB = new TakeBlipMB();
			takeBlipMB.sendWhatsAppMessage(responsavel, "geracao_paju", "Neves e Maggioni",
					this.objetoContratoCobranca.getNumeroContrato(), this.objetoContratoCobranca.getPagador().getNome(),
					"");

		} else if (CommonsUtil.mesmoValor(this.objetoContratoCobranca.getAvaliacaoPaju(), "Luvison")) {
			// Paola de Góes Carvalho Spinola
			responsavel = rDao.findById((long) 1639);
			takeBlipMB = new TakeBlipMB();
			takeBlipMB.sendWhatsAppMessage(responsavel, "geracao_paju", "Luvison",
					this.objetoContratoCobranca.getNumeroContrato(), this.objetoContratoCobranca.getPagador().getNome(),
					"");

			Responsavel responsavel2 = new Responsavel();
			// Fábio Augusto Emílio
			responsavel2 = rDao.findById((long) 1640);
			takeBlipMB = new TakeBlipMB();
			takeBlipMB.sendWhatsAppMessage(responsavel2, "geracao_paju", "Luvison",
					this.objetoContratoCobranca.getNumeroContrato(), this.objetoContratoCobranca.getPagador().getNome(),
					"");

			Responsavel responsavel3 = new Responsavel();
			// Angélica Cintra Isquierdo
			responsavel3 = rDao.findById((long) 1641);
			takeBlipMB = new TakeBlipMB();
			takeBlipMB.sendWhatsAppMessage(responsavel3, "geracao_paju", "Luvison",
					this.objetoContratoCobranca.getNumeroContrato(), this.objetoContratoCobranca.getPagador().getNome(),
					"");

			Responsavel responsavel4 = new Responsavel();
			// Rafael Borges de Oliveira Soalheiro Gonzalez
			responsavel4 = rDao.findById((long) 1642);
			takeBlipMB = new TakeBlipMB();
			takeBlipMB.sendWhatsAppMessage(responsavel4, "geracao_paju", "Luvison",
					this.objetoContratoCobranca.getNumeroContrato(), this.objetoContratoCobranca.getPagador().getNome(),
					"");

			Responsavel responsavel5 = new Responsavel();
			// Gabriel Fortunato Mancio de Camargo
			responsavel5 = rDao.findById((long) 1643);
			takeBlipMB = new TakeBlipMB();
			takeBlipMB.sendWhatsAppMessage(responsavel5, "geracao_paju", "Luvison",
					this.objetoContratoCobranca.getNumeroContrato(), this.objetoContratoCobranca.getPagador().getNome(),
					"");

			Responsavel responsavel6 = new Responsavel();
			// Raí Vitor Sudário
			responsavel6 = rDao.findById((long) 1709);
			takeBlipMB = new TakeBlipMB();
			takeBlipMB.sendWhatsAppMessage(responsavel6, "geracao_paju", "Luvison",
					this.objetoContratoCobranca.getNumeroContrato(), this.objetoContratoCobranca.getPagador().getNome(),
					"");
		}
	}

	public void notificaGalacheWhatsApp() {
		Responsavel responsavel = new Responsavel();
		ResponsavelDao rDao = new ResponsavelDao();

		// "Anderson Trindade Cavalcanti Porto"
		responsavel = rDao.findById((long) 787);

		TakeBlipMB takeBlipMB = new TakeBlipMB();
		takeBlipMB.sendWhatsAppMessage(responsavel, "avaliacao_laudo", "Galache",
				this.objetoContratoCobranca.getNumeroContrato(), this.objetoContratoCobranca.getPagador().getNome(),
				"");

		// "Edson Rodrigues Bravin Junior"
		responsavel = rDao.findById((long) 788);

		takeBlipMB = new TakeBlipMB();
		takeBlipMB.sendWhatsAppMessage(responsavel, "avaliacao_laudo", "Galache",
				this.objetoContratoCobranca.getNumeroContrato(), this.objetoContratoCobranca.getPagador().getNome(),
				"");

		// "Thainá Monteiro Alves Costa"
		responsavel = rDao.findById((long) 789);

		takeBlipMB = new TakeBlipMB();
		takeBlipMB.sendWhatsAppMessage(responsavel, "avaliacao_laudo", "Galache",
				this.objetoContratoCobranca.getNumeroContrato(), this.objetoContratoCobranca.getPagador().getNome(),
				"");

		// "Jair Tadeu da Silva Junior"
		responsavel = rDao.findById((long) 790);

		takeBlipMB = new TakeBlipMB();
		takeBlipMB.sendWhatsAppMessage(responsavel, "avaliacao_laudo", "Galache",
				this.objetoContratoCobranca.getNumeroContrato(), this.objetoContratoCobranca.getPagador().getNome(),
				"");
	}

	/******
	 * método para envio de emails
	 */
	public void notificaCompassEmail() {
		Locale locale = new Locale("pt", "BR");
		SimpleDateFormat sdfDataRelComHoras = new SimpleDateFormat("dd/MM/yyyy HH:mm", locale);
		Date dataHoje = DateUtil.gerarDataHoje();

		String mensagemHtmlTeste = "<html> " + "<head> " + "<meta charset='UTF-8'> "
				+ "<meta http-equiv='Content-Type' content='text/html; charset=utf-8' /> "
				+ "<link href='https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;700&display=swap' rel='stylesheet'> "
				+ "</head> " + "<body> " + "<div bgcolor='#f9f7f7' marginwidth='0' marginheight='0' style=' :#f9f7f7'> "
				+ "<div class='adM'> </div> "
				+ "<div style='background-color:#fff;margin-top:0px;margin-right:auto;margin-bottom:0px;margin-left:auto;width:650px!important;color:#fff;font-size:30px'> "
				+ "<div class='adM'> </div> " + "<div align='center'> " + "<div class='adM'> </div> "
				+ "<table width='100%' border='0' cellspacing='0' cellpadding='0'> " + "<tbody> " + "<tr> "
				+ "<td style='background-color:#f0f0f0;height:75px; padding: 15px;' align='center'> <img src='http://siscoatimagens.galleriabank.com.br/logo-galleria.png' height='65' width='300'> </td> "
				+ "</tr> " + "</tbody> " + "</table> " + "<br> " + "<table> " + "<tbody> " + "<tr> "
				+ "<td width='20'> </td> " + "<td> " + "<table> " + "<tbody> " + "<tr> "
				+ "<td style='font-family:Arial,sans-serif;color:#bb7e17;font-size:20px'>Olá "
				+ " <span style='font-weight:bold'>Compass</span>,  " + "</td> " + "</tr> " + "<tr> "
				+ "   <td style='font-family:Arial,sans-serif;color:#58585a;font-size:14px;line-height:20px;padding-top:7px'> a operação <b>"
				+ this.objetoContratoCobranca.getNumeroContrato() + "</b> do cliente "
				+ this.objetoContratoCobranca.getPagador().getNome() + " já está disponível para fazer o laudo. </td> "
				+ " </tr> " + "  </tbody> " + " </table> " + "</td> " + " </tr> " + " </tbody> " + " </body> "
				+ "</html> ";

		try {
			ResponsavelDao rDao = new ResponsavelDao();
			EnviaEmail eec = new EnviaEmail();
			eec.enviarEmailHtmlResponsavelAdms(
					"solicitacoes.galleria@gmail.com", "[siscoat] Operação "
							+ this.objetoContratoCobranca.getNumeroContrato() + " disponível para fazer o laudo",
					mensagemHtmlTeste);

		} catch (Exception ex) {
			System.out.println(ex.getMessage());
		}
	}

	public void notificaPAJUEmail() {
		Locale locale = new Locale("pt", "BR");
		SimpleDateFormat sdfDataRelComHoras = new SimpleDateFormat("dd/MM/yyyy HH:mm", locale);
		Date dataHoje = DateUtil.gerarDataHoje();

		String mensagemHtmlTeste = "<html> " + "<head> " + "<meta charset='UTF-8'> "
				+ "<meta http-equiv='Content-Type' content='text/html; charset=utf-8' /> "
				+ "<link href='https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;700&display=swap' rel='stylesheet'> "
				+ "</head> " + "<body> " + "<div bgcolor='#f9f7f7' marginwidth='0' marginheight='0' style=' :#f9f7f7'> "
				+ "<div class='adM'> </div> "
				+ "<div style='background-color:#fff;margin-top:0px;margin-right:auto;margin-bottom:0px;margin-left:auto;width:650px!important;color:#fff;font-size:30px'> "
				+ "<div class='adM'> </div> " + "<div align='center'> " + "<div class='adM'> </div> "
				+ "<table width='100%' border='0' cellspacing='0' cellpadding='0'> " + "<tbody> " + "<tr> "
				+ "<td style='background-color:#f0f0f0;height:75px; padding: 15px;' align='center'> <img src='http://siscoatimagens.galleriabank.com.br/logo-galleria.png' height='65' width='300'> </td> "
				+ "</tr> " + "</tbody> " + "</table> " + "<br> " + "<table> " + "<tbody> " + "<tr> "
				+ "<td width='20'> </td> " + "<td> " + "<table> " + "<tbody> " + "<tr> "
				+ "<td style='font-family:Arial,sans-serif;color:#bb7e17;font-size:20px'>Olá "
				+ " <span style='font-weight:bold'>Compass</span>,  " + "</td> " + "</tr> " + "<tr> "
				+ "   <td style='font-family:Arial,sans-serif;color:#58585a;font-size:14px;line-height:20px;padding-top:7px'> a operação <b>"
				+ this.objetoContratoCobranca.getNumeroContrato() + "</b> do cliente "
				+ this.objetoContratoCobranca.getPagador().getNome()
				+ " já está disponível para geração do PAJU. </td> " + " </tr> " + "  </tbody> " + " </table> "
				+ "</td> " + " </tr> " + " </tbody> " + " </body> " + "</html> ";

		try {
			ResponsavelDao rDao = new ResponsavelDao();
			EnviaEmail eec = new EnviaEmail();
			if (CommonsUtil.mesmoValor(this.objetoContratoCobranca.getAvaliacaoPaju(), "Neves")) {
				eec.enviarEmailHtmlResponsavelAdms(
						"a.fornari@nevesemaggioni.com.br", "[siscoat] Operação "
								+ this.objetoContratoCobranca.getNumeroContrato() + " disponível para geração do PAJU",
						mensagemHtmlTeste);
				eec.enviarEmailHtmlResponsavelAdms(
						"m.pazin@nevesemaggioni.com.br", "[siscoat] Operação "
								+ this.objetoContratoCobranca.getNumeroContrato() + " disponível para geração do PAJU",
						mensagemHtmlTeste);
				eec.enviarEmailHtmlResponsavelAdms(
						"p.demuci@nevesemaggioni.com.br", "[siscoat] Operação "
								+ this.objetoContratoCobranca.getNumeroContrato() + " disponível para geração do PAJU",
						mensagemHtmlTeste);
				eec.enviarEmailHtmlResponsavelAdms(
						"l.melara@nevesemaggioni.com.br", "[siscoat] Operação "
								+ this.objetoContratoCobranca.getNumeroContrato() + " disponível para geração do PAJU",
						mensagemHtmlTeste);
				eec.enviarEmailHtmlResponsavelAdms(
						"j.massaro@nevesemaggioni.com.br", "[siscoat] Operação "
								+ this.objetoContratoCobranca.getNumeroContrato() + " disponível para geração do PAJU",
						mensagemHtmlTeste);
			} else if (CommonsUtil.mesmoValor(this.objetoContratoCobranca.getAvaliacaoPaju(), "Luvison")) {
				eec.enviarEmailHtmlResponsavelAdms(
						"paola@luvisoncarvalho.com.br", "[siscoat] Operação "
								+ this.objetoContratoCobranca.getNumeroContrato() + " disponível para geração do PAJU",
						mensagemHtmlTeste);
				eec.enviarEmailHtmlResponsavelAdms(
						"fabio@luvisoncarvalho.com.br", "[siscoat] Operação "
								+ this.objetoContratoCobranca.getNumeroContrato() + " disponível para geração do PAJU",
						mensagemHtmlTeste);
				eec.enviarEmailHtmlResponsavelAdms(
						"angelica@luvisoncarvalho.com.br", "[siscoat] Operação "
								+ this.objetoContratoCobranca.getNumeroContrato() + " disponível para geração do PAJU",
						mensagemHtmlTeste);
				eec.enviarEmailHtmlResponsavelAdms(
						"rafael@luvisoncarvalho.com.br", "[siscoat] Operação "
								+ this.objetoContratoCobranca.getNumeroContrato() + " disponível para geração do PAJU",
						mensagemHtmlTeste);
				eec.enviarEmailHtmlResponsavelAdms(
						"gabriel@luvisoncarvalho.com.br", "[siscoat] Operação "
								+ this.objetoContratoCobranca.getNumeroContrato() + " disponível para geração do PAJU",
						mensagemHtmlTeste);
				eec.enviarEmailHtmlResponsavelAdms(
						"raisudario@luvisoncarvalho.com.br", "[siscoat] Operação "
								+ this.objetoContratoCobranca.getNumeroContrato() + " disponível para geração do PAJU",
						mensagemHtmlTeste);
			}

		} catch (Exception ex) {
			System.out.println(ex.getMessage());
		}
	}

	public void notificaGalacheEmail() {
		Locale locale = new Locale("pt", "BR");
		SimpleDateFormat sdfDataRelComHoras = new SimpleDateFormat("dd/MM/yyyy HH:mm", locale);
		Date dataHoje = DateUtil.gerarDataHoje();

		String mensagemHtmlTeste = "<html> " + "<head> " + "<meta charset='UTF-8'> "
				+ "<meta http-equiv='Content-Type' content='text/html; charset=utf-8' /> "
				+ "<link href='https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;700&display=swap' rel='stylesheet'> "
				+ "</head> " + "<body> " + "<div bgcolor='#f9f7f7' marginwidth='0' marginheight='0' style=' :#f9f7f7'> "
				+ "<div class='adM'> </div> "
				+ "<div style='background-color:#fff;margin-top:0px;margin-right:auto;margin-bottom:0px;margin-left:auto;width:650px!important;color:#fff;font-size:30px'> "
				+ "<div class='adM'> </div> " + "<div align='center'> " + "<div class='adM'> </div> "
				+ "<table width='100%' border='0' cellspacing='0' cellpadding='0'> " + "<tbody> " + "<tr> "
				+ "<td style='background-color:#f0f0f0;height:75px; padding: 15px;' align='center'> <img src='http://siscoatimagens.galleriabank.com.br/logo-galleria.png' height='65' width='300'> </td> "
				+ "</tr> " + "</tbody> " + "</table> " + "<br> " + "<table> " + "<tbody> " + "<tr> "
				+ "<td width='20'> </td> " + "<td> " + "<table> " + "<tbody> " + "<tr> "
				+ "<td style='font-family:Arial,sans-serif;color:#bb7e17;font-size:20px'>Olá "
				+ " <span style='font-weight:bold'>Compass</span>,  " + "</td> " + "</tr> " + "<tr> "
				+ "   <td style='font-family:Arial,sans-serif;color:#58585a;font-size:14px;line-height:20px;padding-top:7px'> a operação <b>"
				+ this.objetoContratoCobranca.getNumeroContrato() + "</b> do cliente "
				+ this.objetoContratoCobranca.getPagador().getNome() + " já está disponível para fazer o laudo. </td> "
				+ " </tr> " + "  </tbody> " + " </table> " + "</td> " + " </tr> " + " </tbody> " + " </body> "
				+ "</html> ";

		try {
			ResponsavelDao rDao = new ResponsavelDao();
			EnviaEmail eec = new EnviaEmail();
			eec.enviarEmailHtmlResponsavelAdms(
					"anderson.trindade@galache.com.br", "[siscoat] Operação "
							+ this.objetoContratoCobranca.getNumeroContrato() + " disponível para geração do PAJU",
					mensagemHtmlTeste);
			eec.enviarEmailHtmlResponsavelAdms(
					"edson.bravin@galache.com.br", "[siscoat] Operação "
							+ this.objetoContratoCobranca.getNumeroContrato() + " disponível para geração do PAJU",
					mensagemHtmlTeste);
			eec.enviarEmailHtmlResponsavelAdms(
					"thaina.monteiro@galache.com.br", "[siscoat] Operação "
							+ this.objetoContratoCobranca.getNumeroContrato() + " disponível para geração do PAJU",
					mensagemHtmlTeste);
			eec.enviarEmailHtmlResponsavelAdms("jair.tadeu@galache.com.br", "[siscoat] Operação "
					+ this.objetoContratoCobranca.getNumeroContrato() + " disponível para geração do PAJU",
					mensagemHtmlTeste);

		} catch (Exception ex) {
			System.out.println(ex.getMessage());
		}
	}

	public String editPreContratoPorStatus() {
		ResponsavelDao responsavelDao = new ResponsavelDao();
		FacesContext context = FacesContext.getCurrentInstance();
		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();

		boolean continuar = verificaCamposStatus(context);
		if (!continuar) {
			return "";
		}

		try {

			if (!SiscoatConstants.DEV && !CommonsUtil.sistemaWindows()) {
				// envia WhatsApp
				notificaStatusWhatsApp(this.objetoContratoCobranca.getId());

				// notifica a Compass caso for setado contrato para eles
				if (this.controleWhatsAlteracaoAvaliadorLaudo
						&& this.objetoContratoCobranca.getAvaliacaoLaudo().equals("Compass")) {
					notificaCompassWhatsApp();
					notificaCompassEmail();
				}

				if (this.controleWhatsAlteracaoAvaliadorLaudoGalache
						&& this.objetoContratoCobranca.getAvaliacaoLaudo().equals("Galache")) {
					notificaGalacheWhatsApp();
					notificaGalacheEmail();
				}

				// notifica a Compass caso for setado contrato para eles
				if (this.controleWhatsAlteracaoGeracaoPAJU) {
					if (CommonsUtil.mesmoValor(this.objetoContratoCobranca.getAvaliacaoPaju(), "Neves")) {
						this.objetoContratoCobranca.setAnalistaGeracaoPAJU(responsavelDao.findById((long) 797));
					} else if (CommonsUtil.mesmoValor(this.objetoContratoCobranca.getAvaliacaoPaju(), "Luvison")) {
						this.objetoContratoCobranca.setAnalistaGeracaoPAJU(responsavelDao.findById((long) 1639));
					}
					notificaPAJUWhatsApp();
					notificaPAJUEmail();
				} else {
					this.objetoContratoCobranca
							.setAnalistaGeracaoPAJU(responsavelDao.findById(this.idAnalistaGeracaoPAJU));
				}
			}

			/*
			 * if (responsavelDao.findByFilter("codigo", this.codigoResponsavel).size() > 0)
			 * { Responsavel responsavel = responsavelDao.findByFilter("codigo",
			 * this.codigoResponsavel).get(0);
			 * if(!CommonsUtil.mesmoValor(responsavel.getId(),
			 * this.objetoContratoCobranca.getResponsavel().getId())) {
			 * this.objetoContratoCobranca.setResponsavel(responsavel); } }
			 */

			Responsavel responsavel = this.objetoContratoCobranca.getResponsavel();
			responsavelDao.merge(responsavel);

			if (CommonsUtil.mesmoValor(responsavel.getId(), CommonsUtil.longValue("46"))) {
				this.objetoContratoCobranca.setContratoLead(true);
			} else if (CommonsUtil.mesmoValor(this.objetoContratoCobranca.isContratoLead(), null)) {
				this.objetoContratoCobranca.setContratoLead(false);
			}

			if (this.objetoPagadorRecebedor.getSite() != null) {
				if (!this.objetoPagadorRecebedor.getSite().contains("http")
						&& !this.objetoPagadorRecebedor.getSite().contains("HTTP")) {
					this.objetoPagadorRecebedor
							.setSite("http://" + this.objetoPagadorRecebedor.getSite().toLowerCase());
				}
			}

			PagadorRecebedorDao pagadorRecebedorDao = new PagadorRecebedorDao();
			pagadorRecebedorDao.merge(this.objetoPagadorRecebedor);
			this.objetoPagadorRecebedor.criarConjugeNoSistema();
			ImovelCobrancaDao imovelCobrancaDao = new ImovelCobrancaDao();
			objetoImovelCobranca.popularObjetoCidade();
			imovelCobrancaDao.merge(this.objetoImovelCobranca);

			// teste para ver se para de sobrescrever pagador

			this.objetoContratoCobranca.setPagador(objetoPagadorRecebedor);
			// this.objetoContratoCobranca.setImovel(objetoImovelCobranca);

			if (this.qtdeParcelas != null && !this.qtdeParcelas.equals("")) {
				this.objetoContratoCobranca.setQtdeParcelas(Integer.valueOf(this.qtdeParcelas));
			}

			if (this.objetoContratoCobranca.getVlrParcela() != null) {
				BigDecimalConverter bigDecimalConverter = new BigDecimalConverter();

				this.objetoContratoCobranca.setVlrParcelaStr(
						bigDecimalConverter.getAsString(null, null, this.objetoContratoCobranca.getVlrParcela()));
			}


			// gerando parcelas quando contrato esta em ag registro
			if (this.objetoContratoCobranca.getResolucaoExigenciaCartorioData() != null
					&& this.objetoContratoCobranca.getListContratoCobrancaDetalhes().size() <= 0
					&& !CommonsUtil.semValor(this.objetoContratoCobranca.getValorCCB())) {
				geraContratoCobrancaDetalhes(contratoCobrancaDao);
			}
			
			if (this.objetoAnaliseComite != null) {
				if (!(CommonsUtil.semValor(this.objetoAnaliseComite.getVotoAnaliseComite())
						|| CommonsUtil.mesmoValor(this.objetoAnaliseComite.getVotoAnaliseComite(), ""))) {
					this.objetoAnaliseComite.setDataComite(DateUtil.gerarDataHoje());
					this.objetoAnaliseComite.setUsuarioComite(getNomeUsuarioLogado());
					this.objetoContratoCobranca.getListaAnaliseComite().add(this.objetoAnaliseComite);
					this.objetoAnaliseComite = new AnaliseComite();

					this.objetoContratoCobranca.setQtdeVotosAprovadosComite(BigInteger.ZERO);
					this.objetoContratoCobranca.setQtdeVotosReprovadosComite(BigInteger.ZERO);

					if (!this.objetoContratoCobranca.getListaAnaliseComite().isEmpty()) {
						for (AnaliseComite comite : this.objetoContratoCobranca.getListaAnaliseComite()) {
							if (CommonsUtil.mesmoValor(comite.getVotoAnaliseComite(), "Aprovado")) {
								this.objetoContratoCobranca.setQtdeVotosAprovadosComite(
										this.objetoContratoCobranca.getQtdeVotosAprovadosComite().add(BigInteger.ONE));
								if (CommonsUtil.mesmoValor(this.objetoContratoCobranca.getQtdeVotosAprovadosComite(),
										BigInteger.valueOf(2))) {
									this.objetoContratoCobranca.setAprovadoComite(true);
									if (!SiscoatConstants.DEV && !CommonsUtil.sistemaWindows()) {
										notificaStatusWhatsApp(this.objetoContratoCobranca.getId());
									}
								}
							} else if (CommonsUtil.mesmoValor(comite.getVotoAnaliseComite(), "Reprovado")) {
								this.objetoContratoCobranca.setQtdeVotosReprovadosComite(
										this.objetoContratoCobranca.getQtdeVotosReprovadosComite().add(BigInteger.ONE));
								comite.setValorComite(BigDecimal.ZERO);
							}
						}
					}
				}
			}
			/*
			 * if(CommonsUtil.mesmoValor(this.objetoContratoCobranca.getSolicitarNota(),
			 * "Solicitado")) { if(!this.objetoContratoCobranca.isNotaSolicitadaWhatsapp())
			 * { this.objetoContratoCobranca.setNotaSolicitadaWhatsapp(true);
			 * //if(!SiscoatConstants.DEV) { TakeBlipMB takeBlipMB = new TakeBlipMB();
			 * takeBlipMB.sendWhatsAppEmitirNota(this.objetoContratoCobranca); //} } }
			 */

			ContasPagarDao cpDao = new ContasPagarDao();
			if (!CommonsUtil.semValor(objetoContratoCobranca.getListProcessos())) {
				for (CcbProcessosJudiciais processo : objetoContratoCobranca.getListProcessos()) {
					if (!CommonsUtil.semValor(processo.getContaPagar())) {
						if (processo.getContaPagar().getId() <= 0) {
							cpDao.create(processo.getContaPagar());
						}
					}
				}
			}

			if (!objetoContratoCobranca.isAgAssinatura()
					&& CommonsUtil.mesmoValor(this.tituloTelaConsultaPreStatus, "Ag. Assinatura")) {
				if (objetoContratoCobranca.isPajuVencido() || objetoContratoCobranca.isComentarioJuricoComPajuVencido())
					objetoContratoCobranca.setReanalise(true);
				if ("RJ;PR".contains(objetoContratoCobranca.getImovel().getEstado())
						&& !objetoContratoCobranca.isReanaliseJuridico())
					objetoContratoCobranca.setReanalise(true);
				if (objetoContratoCobranca.isComentarioJuricoApenasComConsultas())
					objetoContratoCobranca.setReanalise(true);
			}

			updateCheckList();
			this.objetoContratoCobranca.populaStatusEsteira(getUsuarioLogadoNull());
			contratoCobrancaDao.merge(this.objetoContratoCobranca);

			// verifica se o contrato for aprovado, manda um tipo de email..
			// senao valida se houve alteração no checklist para envio de email.
			if (!SiscoatConstants.DEV && !CommonsUtil.sistemaWindows()) {
				enviaEmailAtualizacaoPreContratoNovo();
				// System.out.println("editPreContratoPorStatus");
			}
			contratoCobrancaCheckList = null;

			context.addMessage(null,
					new FacesMessage(FacesMessage.SEVERITY_INFO,
							"Contrato Cobrança: Pré-Contrato editado com sucesso! (Contrato: "
									+ this.objetoContratoCobranca.getNumeroContrato() + ")!",
							""));
			User usuarioLogado = new User();
			UserDao u = new UserDao();
			usuarioLogado = u.findByFilter("login", loginBean.getUsername()).get(0);

			this.objetoCcb = null;

			if (usuarioLogado.isComiteConsultar()) {
				return "/Atendimento/Cobranca/ContratoCobrancaCRMConsultar.xhtml";
			}

			if (this.tituloTelaConsultaPreStatus.equals("Geração de PAJU")) {
				return clearFieldsGeracaoPAJU(objetoContratoCobranca.getAvaliacaoPaju());
			}
			if (this.tituloTelaConsultaPreStatus.equals("Aguardando Análise")) {
				return geraConsultaContratosPorStatus("Aguardando Análise");
			}
			if (this.tituloTelaConsultaPreStatus.equals("Análise Reprovada")) {
				return geraConsultaContratosPorStatus("Análise Reprovada");
			}
			if (this.tituloTelaConsultaPreStatus.equals("Em Análise")) {
				return geraConsultaContratosPorStatus("Em Analise");
			}
			if (this.tituloTelaConsultaPreStatus.equals("Ag. Pagto. Laudo")) {
				return geraConsultaContratosPorStatus("Ag. Pagto. Laudo");
			}
			if (this.tituloTelaConsultaPreStatus.equals("Análise Pré-Aprovada")) {
				return geraConsultaContratosPorStatus("Análise Aprovada");
			}
			if (this.tituloTelaConsultaPreStatus.equals("Ag. DOC")) {
				return geraConsultaContratosPorStatus("Ag. DOC");
			}
			if (this.tituloTelaConsultaPreStatus.equals("Pré-Comite")) {
				return geraConsultaContratosPorStatus("Pré-Comite");
			}
			if (this.tituloTelaConsultaPreStatus.equals("Ag. Comite")) {
				loginBean.setNumeroContratosComite(contratoCobrancaDao.getQuantidadeContratosComite());
				return geraConsultaContratosPorStatus("Ag. Comite");
			}
			if (this.tituloTelaConsultaPreStatus.equals("Ag. CCB")) {
				return geraConsultaContratosPorStatus("Ag. CCB");
			}
			if (this.tituloTelaConsultaPreStatus.equals("Ag. Assinatura")) {
				return geraConsultaContratosPorStatus("Ag. Assinatura");
			}
			if (this.tituloTelaConsultaPreStatus.equals("Ag. Envio Cartório")) {
				return geraConsultaContratosPorStatus("Ag. Envio Cartorio");
			}
			if (this.tituloTelaConsultaPreStatus.equals("Ag. Registro")) {
				return geraConsultaContratosPorStatus("Ag. Registro");
			}
			if (this.tituloTelaConsultaPreStatus.equals("PreContratos")) {
				return geraConsultaContratosPendentes();
			}

			return "/Atendimento/Cobranca/ContratoCobrancaConsultarPreStatus.xhtml";

		} catch (Exception e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
			context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR, "Contrato Cobrança: " + e, ""));
			return "";
		}
	}

	private boolean verificaCamposStatus(FacesContext context) {
		if (this.tituloTelaConsultaPreStatus.contains("Pedir")) {
			if (CommonsUtil.mesmoValor(objetoContratoCobranca.getFormaDePagamentoLaudoPAJU(), "Antecipado")
					&& CommonsUtil.semValor(objetoContratoCobranca.getValorLaudoPajuPago())) {
				context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR,
						"Contrato Cobrança: Falta Valor PAGO de Laudo + Paju!", ""));
				return false;
			}
			if (CommonsUtil.semValor(objetoContratoCobranca.getValorLaudoPajuTotal())) {
				context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR,
						"Contrato Cobrança: Falta Valor TOTAL de Laudo + Paju!", ""));
				return false;
			}
		}

		if (CommonsUtil.mesmoValor(this.tituloTelaConsultaPreStatus, "Comentario Jurídico")) {
			if (CommonsUtil.semValor(objetoContratoCobranca.getDataPajuComentado())
					&& objetoContratoCobranca.isComentarioJuridicoEsteira()) {
				context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR,
						"Contrato Cobrança: Falta Data do PAJU Comentado!", ""));
				return false;
			}
		}
		return true;
	}

	public void notificaStatusWhatsApp(long idContrato) {
		if (this.objetoContratoCobranca.getResponsavel().isDesativado()) {
			return;
		}
		FacesContext context = FacesContext.getCurrentInstance();
		try {
			ContratoCobrancaDao cDao = new ContratoCobrancaDao();
			ContratoCobrancaStatus statusContrato = cDao.consultaStatusContratos(idContrato);

			// 1 - Verifica se teve alteração de status
			// 2 - Se sim, e o valor for true envia mensagem

			// Mensagem CONTRATO PRE APROVADO
			if (!CommonsUtil.semValor(this.objetoContratoCobranca.getCadastroAprovadoValor())) {
				if (!this.objetoContratoCobranca.getCadastroAprovadoValor()
						.equals(statusContrato.getContratoPreAprovado())) {
					if (this.objetoContratoCobranca.getCadastroAprovadoValor().equals("Aprovado")
							&& this.objetoContratoCobranca.getTaxaPreAprovadaMaior() != null
							&& this.objetoContratoCobranca.getPrazoMaxPreAprovado() != null) {
						// if (this.objetoContratoCobranca.getTaxaPreAprovada() != null &&
						// this.objetoContratoCobranca.getPrazoMaxPreAprovado() != null) {
						TakeBlipMB takeBlipMB = new TakeBlipMB();
						takeBlipMB.sendWhatsAppMessage(this.objetoContratoCobranca.getResponsavel(),
								"contrato_pre_aprovado", this.objetoContratoCobranca.getPagador().getNome(),
								this.objetoContratoCobranca.getNumeroContrato(),
								this.objetoContratoCobranca.getTaxaPreAprovadaMaior().toString(),
								this.objetoContratoCobranca.getPrazoMaxPreAprovado().toString());
						// }

						// envia para o gerente do responsável se o cadastro nao estiver ok
						if (CommonsUtil.semValor(this.objetoContratoCobranca.getResponsavel().getDonoResponsavel())
								|| CommonsUtil.semValor(this.objetoContratoCobranca.getResponsavel()
										.getDonoResponsavel().getResponsavelAssistenteComercial())) {
							takeBlipMB = new TakeBlipMB();
							takeBlipMB.sendWhatsAppMessage(
									this.objetoContratoCobranca.getResponsavel().getDonoResponsavel(),
									"contrato_pre_aprovado", this.objetoContratoCobranca.getPagador().getNome(),
									this.objetoContratoCobranca.getNumeroContrato(),
									this.objetoContratoCobranca.getTaxaPreAprovadaMaior().toString(),
									this.objetoContratoCobranca.getPrazoMaxPreAprovado().toString());

							enviarWhatsappGislaine("contrato_pre_aprovado",
									this.objetoContratoCobranca.getPagador().getNome(),
									this.objetoContratoCobranca.getNumeroContrato(),
									this.objetoContratoCobranca.getTaxaPreAprovadaMaior().toString(),
									this.objetoContratoCobranca.getPrazoMaxPreAprovado().toString());
							enviarWhatsappLuis("contrato_pre_aprovado",
									this.objetoContratoCobranca.getPagador().getNome(),
									this.objetoContratoCobranca.getNumeroContrato(),
									this.objetoContratoCobranca.getTaxaPreAprovadaMaior().toString(),
									this.objetoContratoCobranca.getPrazoMaxPreAprovado().toString());
							enviarWhatsappEric("contrato_pre_aprovado",
									this.objetoContratoCobranca.getPagador().getNome(),
									this.objetoContratoCobranca.getNumeroContrato(),
									this.objetoContratoCobranca.getTaxaPreAprovadaMaior().toString(),
									this.objetoContratoCobranca.getPrazoMaxPreAprovado().toString());

							enviarWhatsappJoaoAntonio("contrato_pre_aprovado",
									this.objetoContratoCobranca.getPagador().getNome(),
									this.objetoContratoCobranca.getNumeroContrato(),
									this.objetoContratoCobranca.getTaxaPreAprovadaMaior().toString(),
									this.objetoContratoCobranca.getPrazoMaxPreAprovado().toString());
							enviarWhatsappAline("contrato_pre_aprovado",
									this.objetoContratoCobranca.getPagador().getNome(),
									this.objetoContratoCobranca.getNumeroContrato(),
									this.objetoContratoCobranca.getTaxaPreAprovadaMaior().toString(),
									this.objetoContratoCobranca.getPrazoMaxPreAprovado().toString());
							enviarWhatsaPaula("contrato_pre_aprovado",
									this.objetoContratoCobranca.getPagador().getNome(),
									this.objetoContratoCobranca.getNumeroContrato(),
									this.objetoContratoCobranca.getTaxaPreAprovadaMaior().toString(),
									this.objetoContratoCobranca.getPrazoMaxPreAprovado().toString());

						} else {
							takeBlipMB = new TakeBlipMB();
							takeBlipMB.sendWhatsAppMessage(
									this.objetoContratoCobranca.getResponsavel().getDonoResponsavel(),
									"contrato_pre_aprovado", this.objetoContratoCobranca.getPagador().getNome(),
									this.objetoContratoCobranca.getNumeroContrato(),
									this.objetoContratoCobranca.getTaxaPreAprovadaMaior().toString(),
									this.objetoContratoCobranca.getPrazoMaxPreAprovado().toString());
						}
					}
				}
			}

			// Mensagem APROVACAO CREDITO COMPASS / GALACHE
			if (this.objetoContratoCobranca.isPedidoLaudo() != statusContrato.isPedidoLaudo()) {
				if (this.objetoContratoCobranca.isPedidoLaudo()) {
					TakeBlipMB tkblpMb = new TakeBlipMB();
					PagadorRecebedor pagador;
					pagador = this.objetoContratoCobranca.getPagador();
					// pagador = new PagadorRecebedorDao().findById(10737l);
					if (CommonsUtil.mesmoValor(this.objetoContratoCobranca.getAvaliacaoLaudo(), "Compass")) {
						tkblpMb.sendWhatsAppMessagePagadorRecebedor(pagador, "aprovacao_credito_compass_v2",
								pagador.getNome(), "", "", "");
					} else if (CommonsUtil.mesmoValor(this.objetoContratoCobranca.getAvaliacaoLaudo(), "Galache")) {
						tkblpMb.sendWhatsAppMessagePagadorRecebedor(pagador, "aprovacao_credito_galache",
								pagador.getNome(), "", "", "");
					}
				}
			}

			// Mensagem DATA VISTORIA
			if (!CommonsUtil.semValor(this.objetoContratoCobranca.getDataPrevistaVistoria())) {
				if (!CommonsUtil.mesmoValor(this.objetoContratoCobranca.getAvaliacaoLaudo(), "Galache")) {
					if (!this.objetoContratoCobranca.isEnviadoWhatsappVistoria()) {
						TakeBlipMB tkblpMb = new TakeBlipMB();
						PagadorRecebedor pagador;
						pagador = this.objetoContratoCobranca.getPagador();
						// pagador = new PagadorRecebedorDao().findById(32396);
						tkblpMb.sendWhatsAppMessageVistoria(pagador,
								this.objetoContratoCobranca.getDataPrevistaVistoria(),
								this.objetoContratoCobranca.getNomeVistoriador());

						ResponsavelDao rDao = new ResponsavelDao();
						Responsavel rVistoria1 = new Responsavel();
						Responsavel rVistoria2 = new Responsavel();
						Responsavel rVistoria3 = new Responsavel();
						Responsavel rVistoria4 = new Responsavel();

						// Tatiane
						rVistoria1 = rDao.findById((long) 643);
						tkblpMb.sendWhatsAppMessageVistoria(rVistoria1,
								this.objetoContratoCobranca.getDataPrevistaVistoria(),
								this.objetoContratoCobranca.getNomeVistoriador());

						this.objetoContratoCobranca.setEnviadoWhatsappVistoria(true);

						// Mariana
						rVistoria2 = rDao.findById((long) 1126);
						tkblpMb.sendWhatsAppMessageVistoria(rVistoria2,
								this.objetoContratoCobranca.getDataPrevistaVistoria(),
								this.objetoContratoCobranca.getNomeVistoriador());

						// Leticia
						rVistoria3 = rDao.findById((long) 1127);
						tkblpMb.sendWhatsAppMessageVistoria(rVistoria3,
								this.objetoContratoCobranca.getDataPrevistaVistoria(),
								this.objetoContratoCobranca.getNomeVistoriador());

						this.objetoContratoCobranca.setEnviadoWhatsappVistoria(true);
					}
				}
			}

			// Mensagem PAJU RECEBIDO
			if (this.objetoContratoCobranca.isPajurFavoravel() != statusContrato.isPajuFavoravel()) {
				if (this.objetoContratoCobranca.isPajurFavoravel()) {
					TakeBlipMB takeBlipMB = new TakeBlipMB();
					takeBlipMB.sendWhatsAppMessage(this.objetoContratoCobranca.getResponsavel(),
							"contrato_recebido_paju", this.objetoContratoCobranca.getPagador().getNome(),
							this.objetoContratoCobranca.getNumeroContrato(), "", "");

					// envia para o gerente do responsável se o cadastro nao estiver ok
					if (CommonsUtil.semValor(this.objetoContratoCobranca.getResponsavel().getDonoResponsavel())
							|| CommonsUtil.semValor(this.objetoContratoCobranca.getResponsavel().getDonoResponsavel()
									.getResponsavelAssistenteComercial())) {
						takeBlipMB = new TakeBlipMB();
						takeBlipMB.sendWhatsAppMessage(
								this.objetoContratoCobranca.getResponsavel().getDonoResponsavel(),
								"contrato_recebido_paju", this.objetoContratoCobranca.getPagador().getNome(),
								this.objetoContratoCobranca.getNumeroContrato(), "", "");

						enviarWhatsappGislaine("contrato_recebido_paju",
								this.objetoContratoCobranca.getPagador().getNome(),
								this.objetoContratoCobranca.getNumeroContrato(), "", "");
						enviarWhatsappLuis("contrato_recebido_paju", this.objetoContratoCobranca.getPagador().getNome(),
								this.objetoContratoCobranca.getNumeroContrato(), "", "");
						enviarWhatsappEric("contrato_recebido_paju", this.objetoContratoCobranca.getPagador().getNome(),
								this.objetoContratoCobranca.getNumeroContrato(), "", "");

						enviarWhatsappJoaoAntonio("contrato_recebido_paju",
								this.objetoContratoCobranca.getPagador().getNome(),
								this.objetoContratoCobranca.getNumeroContrato(),
								this.objetoContratoCobranca.getTaxaPreAprovadaMaior().toString(),
								this.objetoContratoCobranca.getPrazoMaxPreAprovado().toString());
						enviarWhatsappAline("contrato_recebido_paju",
								this.objetoContratoCobranca.getPagador().getNome(),
								this.objetoContratoCobranca.getNumeroContrato(),
								this.objetoContratoCobranca.getTaxaPreAprovadaMaior().toString(),
								this.objetoContratoCobranca.getPrazoMaxPreAprovado().toString());
						enviarWhatsaPaula("contrato_recebido_paju", this.objetoContratoCobranca.getPagador().getNome(),
								this.objetoContratoCobranca.getNumeroContrato(),
								this.objetoContratoCobranca.getTaxaPreAprovadaMaior().toString(),
								this.objetoContratoCobranca.getPrazoMaxPreAprovado().toString());

					} else {
						takeBlipMB = new TakeBlipMB();
						takeBlipMB.sendWhatsAppMessage(
								this.objetoContratoCobranca.getResponsavel().getDonoResponsavel(),
								"contrato_recebido_paju", this.objetoContratoCobranca.getPagador().getNome(),
								this.objetoContratoCobranca.getNumeroContrato(), "", "");
					}

					ResponsavelDao rDao = new ResponsavelDao();
					Responsavel rValidaDocs1 = new Responsavel();
					Responsavel rValidaDocs2 = new Responsavel();
					Responsavel rValidaDocs3 = new Responsavel();
					Responsavel rValidaDocs4 = new Responsavel();
					Responsavel rValidaDocs5 = new Responsavel();

					// teste
					// takeBlipMB.sendWhatsAppMessage(this.objetoContratoCobranca.getResponsavel(),
					// "chegada_paju",
					// this.objetoContratoCobranca.getPagador().getNome(),
					// this.objetoContratoCobranca.getNumeroContrato(), "", "");

					// Iris
					rValidaDocs3 = rDao.findById((long) 828);
					takeBlipMB.sendWhatsAppMessage(rValidaDocs3, "contrato_recebido_paju",
							this.objetoContratoCobranca.getPagador().getNome(),
							this.objetoContratoCobranca.getNumeroContrato(), "", "");

					// Tatiane
					rValidaDocs4 = rDao.findById((long) 643);

					takeBlipMB.sendWhatsAppMessage(rValidaDocs4, "contrato_recebido_paju",
							this.objetoContratoCobranca.getPagador().getNome(),
							this.objetoContratoCobranca.getNumeroContrato(), "", "");

					// Leticia
					rValidaDocs5 = rDao.findById((long) 1127);

					takeBlipMB.sendWhatsAppMessage(rValidaDocs5, "contrato_recebido_paju",
							this.objetoContratoCobranca.getPagador().getNome(),
							this.objetoContratoCobranca.getNumeroContrato(), "", "");
				}
			}

			// Mensagem LAUDO RECEBIDO
			if (this.objetoContratoCobranca.isLaudoRecebido() != statusContrato.isLaudoRecebido()) {
				if (this.objetoContratoCobranca.isLaudoRecebido()) {
					TakeBlipMB takeBlipMB = new TakeBlipMB();
					takeBlipMB.sendWhatsAppMessage(this.objetoContratoCobranca.getResponsavel(),
							"contrato_recebido_laudo", this.objetoContratoCobranca.getPagador().getNome(),
							this.objetoContratoCobranca.getNumeroContrato(), "", "");

					// envia para o gerente do responsável se o cadastro nao estiver ok
					if (CommonsUtil.semValor(this.objetoContratoCobranca.getResponsavel().getDonoResponsavel())
							|| CommonsUtil.semValor(this.objetoContratoCobranca.getResponsavel().getDonoResponsavel()
									.getResponsavelAssistenteComercial())) {
						takeBlipMB = new TakeBlipMB();
						takeBlipMB.sendWhatsAppMessage(
								this.objetoContratoCobranca.getResponsavel().getDonoResponsavel(),
								"contrato_recebido_laudo", this.objetoContratoCobranca.getPagador().getNome(),
								this.objetoContratoCobranca.getNumeroContrato(), "", "");

						enviarWhatsappGislaine("contrato_recebido_laudo",
								this.objetoContratoCobranca.getPagador().getNome(),
								this.objetoContratoCobranca.getNumeroContrato(), "", "");
						enviarWhatsappLuis("contrato_recebido_laudo",
								this.objetoContratoCobranca.getPagador().getNome(),
								this.objetoContratoCobranca.getNumeroContrato(), "", "");
						enviarWhatsappEric("contrato_recebido_laudo",
								this.objetoContratoCobranca.getPagador().getNome(),
								this.objetoContratoCobranca.getNumeroContrato(), "", "");

						enviarWhatsappJoaoAntonio("contrato_recebido_laudo",
								this.objetoContratoCobranca.getPagador().getNome(),
								this.objetoContratoCobranca.getNumeroContrato(),
								this.objetoContratoCobranca.getTaxaPreAprovadaMaior().toString(),
								this.objetoContratoCobranca.getPrazoMaxPreAprovado().toString());
						enviarWhatsappAline("contrato_recebido_laudo",
								this.objetoContratoCobranca.getPagador().getNome(),
								this.objetoContratoCobranca.getNumeroContrato(),
								this.objetoContratoCobranca.getTaxaPreAprovadaMaior().toString(),
								this.objetoContratoCobranca.getPrazoMaxPreAprovado().toString());
						enviarWhatsaPaula("contrato_recebido_laudo", this.objetoContratoCobranca.getPagador().getNome(),
								this.objetoContratoCobranca.getNumeroContrato(),
								this.objetoContratoCobranca.getTaxaPreAprovadaMaior().toString(),
								this.objetoContratoCobranca.getPrazoMaxPreAprovado().toString());

					} else {
						takeBlipMB = new TakeBlipMB();
						takeBlipMB.sendWhatsAppMessage(
								this.objetoContratoCobranca.getResponsavel().getDonoResponsavel(),
								"contrato_recebido_laudo", this.objetoContratoCobranca.getPagador().getNome(),
								this.objetoContratoCobranca.getNumeroContrato(), "", "");
					}

					ResponsavelDao rDao = new ResponsavelDao();
					Responsavel rValidaDocs1 = new Responsavel();
					Responsavel rValidaDocs2 = new Responsavel();
					Responsavel rValidaDocs3 = new Responsavel();
					Responsavel rValidaDocs4 = new Responsavel();
					Responsavel rValidaDocs5 = new Responsavel();

					// teste
					// takeBlipMB.sendWhatsAppMessage(this.objetoContratoCobranca.getResponsavel(),
					// "chegada_laudo",
					// this.objetoContratoCobranca.getPagador().getNome(),
					// this.objetoContratoCobranca.getNumeroContrato(), "", "");

					// Iris
					rValidaDocs3 = rDao.findById((long) 828);
					takeBlipMB.sendWhatsAppMessage(rValidaDocs3, "contrato_recebido_laudo",
							this.objetoContratoCobranca.getPagador().getNome(),
							this.objetoContratoCobranca.getNumeroContrato(), "", "");

					// Tatiane
					rValidaDocs4 = rDao.findById((long) 643);
					takeBlipMB.sendWhatsAppMessage(rValidaDocs4, "contrato_recebido_laudo",
							this.objetoContratoCobranca.getPagador().getNome(),
							this.objetoContratoCobranca.getNumeroContrato(), "", "");

					// Leticia
					rValidaDocs5 = rDao.findById((long) 1127);

					takeBlipMB.sendWhatsAppMessage(rValidaDocs5, "contrato_recebido_laudo",
							this.objetoContratoCobranca.getPagador().getNome(),
							this.objetoContratoCobranca.getNumeroContrato(), "", "");
				}
			}

			// Mensagem Ag Comentario Juridico
			if (this.objetoContratoCobranca.isAnaliseComercial() != statusContrato.isAnaliseComercial()) {
				if (this.objetoContratoCobranca.isAnaliseComercial()) {
					TakeBlipMB takeBlipMB = new TakeBlipMB();

					ResponsavelDao rDao = new ResponsavelDao();
					Responsavel rJuridico1 = new Responsavel();
					Responsavel rJuridico2 = new Responsavel();

					// JP
					rJuridico1 = rDao.findById((long) 617);

					takeBlipMB.sendWhatsAppMessage(rJuridico1, "ag_comentarios_juridico",
							this.objetoContratoCobranca.getPagador().getNome(),
							this.objetoContratoCobranca.getNumeroContrato(), "", "");

					// Ale dos Paju
					rJuridico2 = rDao.findById((long) 618);

					takeBlipMB.sendWhatsAppMessage(rJuridico2, "ag_comentarios_juridico",
							this.objetoContratoCobranca.getPagador().getNome(),
							this.objetoContratoCobranca.getNumeroContrato(), "", "");

				}
			}

			// Mensagem Comentado Juridico Interno
			if (this.objetoContratoCobranca.isComentarioJuridicoEsteira() != statusContrato
					.isComentarioJuridicoEsteira()) {
				if (this.objetoContratoCobranca.isComentarioJuridicoEsteira()) {
					TakeBlipMB takeBlipMB = new TakeBlipMB();
					// envia para o gerente do responsável se o cadastro nao estiver ok
					if (CommonsUtil.semValor(this.objetoContratoCobranca.getResponsavel().getDonoResponsavel())
							|| CommonsUtil.semValor(this.objetoContratoCobranca.getResponsavel().getDonoResponsavel()
									.getResponsavelAssistenteComercial())) {
						takeBlipMB = new TakeBlipMB();
						takeBlipMB.sendWhatsAppMessage(
								this.objetoContratoCobranca.getResponsavel().getDonoResponsavel(),
								"comentado_juridico_interno", this.objetoContratoCobranca.getPagador().getNome(),
								this.objetoContratoCobranca.getNumeroContrato(), "", "");

						enviarWhatsappGislaine("comentado_juridico_interno",
								this.objetoContratoCobranca.getPagador().getNome(),
								this.objetoContratoCobranca.getNumeroContrato(), "", "");
						enviarWhatsappLuis("comentado_juridico_interno",
								this.objetoContratoCobranca.getPagador().getNome(),
								this.objetoContratoCobranca.getNumeroContrato(), "", "");
						enviarWhatsappEric("comentado_juridico_interno",
								this.objetoContratoCobranca.getPagador().getNome(),
								this.objetoContratoCobranca.getNumeroContrato(), "", "");

						enviarWhatsappJoaoAntonio("comentado_juridico_interno",
								this.objetoContratoCobranca.getPagador().getNome(),
								this.objetoContratoCobranca.getNumeroContrato(),
								this.objetoContratoCobranca.getTaxaPreAprovadaMaior().toString(),
								this.objetoContratoCobranca.getPrazoMaxPreAprovado().toString());
						enviarWhatsappAline("comentado_juridico_interno",
								this.objetoContratoCobranca.getPagador().getNome(),
								this.objetoContratoCobranca.getNumeroContrato(),
								this.objetoContratoCobranca.getTaxaPreAprovadaMaior().toString(),
								this.objetoContratoCobranca.getPrazoMaxPreAprovado().toString());
						enviarWhatsaPaula("comentado_juridico_interno",
								this.objetoContratoCobranca.getPagador().getNome(),
								this.objetoContratoCobranca.getNumeroContrato(),
								this.objetoContratoCobranca.getTaxaPreAprovadaMaior().toString(),
								this.objetoContratoCobranca.getPrazoMaxPreAprovado().toString());

					} else {
						takeBlipMB = new TakeBlipMB();
						takeBlipMB.sendWhatsAppMessage(
								this.objetoContratoCobranca.getResponsavel().getDonoResponsavel(),
								"comentado_juridico_interno", this.objetoContratoCobranca.getPagador().getNome(),
								this.objetoContratoCobranca.getNumeroContrato(), "", "");
					}
				}
			}

			// Mensagem Ag Validacao Documentos
			if (this.objetoContratoCobranca.isPreAprovadoComite() != statusContrato.isPreAprovadoComite()) {
				if (this.objetoContratoCobranca.isPreAprovadoComite()) {
					TakeBlipMB takeBlipMB = new TakeBlipMB();
					ResponsavelDao rDao = new ResponsavelDao();
					Responsavel rValidaDocs1 = new Responsavel();
					Responsavel rValidaDocs2 = new Responsavel();
					Responsavel rValidaDocs3 = new Responsavel();
					Responsavel rValidaDocs4 = new Responsavel();

					// Valdir ()
					// rValidaDocs1 = rDao.findById((long) 619);
					// takeBlipMB.sendWhatsAppMessage(rValidaDocs1,
					// "ag_validacao_documentos",
					// this.objetoContratoCobranca.getPagador().getNome(),
					// this.objetoContratoCobranca.getNumeroContrato(),
					// "", "");

					// Thiago (Removido a pedido da Tati)
					// rValidaDocs2 = rDao.findById((long) 620);

					// takeBlipMB.sendWhatsAppMessage(rValidaDocs2,
					// "ag_validacao_documentos",
					// this.objetoContratoCobranca.getPagador().getNome(),
					// this.objetoContratoCobranca.getNumeroContrato(),
					// "", "");

					// Tati
					rValidaDocs3 = rDao.findById((long) 643);

					takeBlipMB.sendWhatsAppMessage(rValidaDocs3, "ag_validacao_documentos",
							this.objetoContratoCobranca.getPagador().getNome(),
							this.objetoContratoCobranca.getNumeroContrato(), "", "");

					// Mariana
					rValidaDocs4 = rDao.findById((long) 1126);

					takeBlipMB.sendWhatsAppMessage(rValidaDocs4, "ag_validacao_documentos",
							this.objetoContratoCobranca.getPagador().getNome(),
							this.objetoContratoCobranca.getNumeroContrato(), "", "");
				}
			}

			// Mensagem PRE APROVADO COMITE
			if (this.objetoContratoCobranca.isDocumentosComite() != statusContrato.isDocumentosComite()) {
				if (this.objetoContratoCobranca.isDocumentosComite()) {
					TakeBlipMB takeBlipMB = new TakeBlipMB();

					ResponsavelDao rDao = new ResponsavelDao();
					Responsavel rComite1 = new Responsavel();
					Responsavel rComite2 = new Responsavel();
					Responsavel rComite3 = new Responsavel();

					// Fabricio
					rComite1 = rDao.findById((long) 4);

					takeBlipMB.sendWhatsAppMessage(rComite1, "contrato_comite", "",
							this.objetoContratoCobranca.getNumeroContrato(), "", "");

					// João
					rComite2 = rDao.findById((long) 380);

					takeBlipMB.sendWhatsAppMessage(rComite2, "contrato_comite", "",
							this.objetoContratoCobranca.getNumeroContrato(), "", "");

					// Sandro
					rComite3 = rDao.findById((long) 2);

					takeBlipMB.sendWhatsAppMessage(rComite3, "contrato_comite", "",
							this.objetoContratoCobranca.getNumeroContrato(), "", "");
				}
			}

			// Mensagem Aprovado Comite Ag Ccb
			if (this.objetoContratoCobranca.isAprovadoComite() != statusContrato.isAprovadoComite()) {
				if (this.objetoContratoCobranca.isAprovadoComite()) {
					TakeBlipMB takeBlipMB = new TakeBlipMB();
					ResponsavelDao rDao = new ResponsavelDao();

					Responsavel rCcb1 = new Responsavel();
					Responsavel rCcb2 = new Responsavel();
					Responsavel rCcb3 = new Responsavel();
					Responsavel rCcb4 = new Responsavel();

					// Tati
					rCcb1 = rDao.findById((long) 643);
					takeBlipMB.sendWhatsAppMessage(rCcb1, "aprovado_comite_ag_ccb",
							this.objetoContratoCobranca.getPagador().getNome(),
							this.objetoContratoCobranca.getNumeroContrato(), "", "");

					// Juliana
					rCcb2 = rDao.findById((long) 624);
					takeBlipMB.sendWhatsAppMessage(rCcb2, "aprovado_comite_ag_ccb",
							this.objetoContratoCobranca.getPagador().getNome(),
							this.objetoContratoCobranca.getNumeroContrato(), "", "");

					// Beatriz
					rCcb3 = rDao.findById((long) 1477);
					takeBlipMB.sendWhatsAppMessage(rCcb3, "aprovado_comite_ag_ccb",
							this.objetoContratoCobranca.getPagador().getNome(),
							this.objetoContratoCobranca.getNumeroContrato(), "", "");

					// Alice
					rCcb4 = rDao.findById((long) 619);
					takeBlipMB.sendWhatsAppMessage(rCcb4, "aprovado_comite_ag_ccb",
							this.objetoContratoCobranca.getPagador().getNome(),
							this.objetoContratoCobranca.getNumeroContrato(), "", "");

					// envia para o gerente do responsável se o cadastro nao estiver ok
					if (CommonsUtil.semValor(this.objetoContratoCobranca.getResponsavel().getDonoResponsavel())
							|| CommonsUtil.semValor(this.objetoContratoCobranca.getResponsavel().getDonoResponsavel()
									.getResponsavelAssistenteComercial())) {
						takeBlipMB = new TakeBlipMB();
						takeBlipMB.sendWhatsAppMessage(
								this.objetoContratoCobranca.getResponsavel().getDonoResponsavel(),
								"aprovado_comite_ag_ccb", this.objetoContratoCobranca.getPagador().getNome(),
								this.objetoContratoCobranca.getNumeroContrato(), "", "");

						enviarWhatsappGislaine("aprovado_comite_ag_ccb",
								this.objetoContratoCobranca.getPagador().getNome(),
								this.objetoContratoCobranca.getNumeroContrato(), "", "");
						enviarWhatsappLuis("aprovado_comite_ag_ccb", this.objetoContratoCobranca.getPagador().getNome(),
								this.objetoContratoCobranca.getNumeroContrato(), "", "");
						enviarWhatsappEric("aprovado_comite_ag_ccb", this.objetoContratoCobranca.getPagador().getNome(),
								this.objetoContratoCobranca.getNumeroContrato(), "", "");

						enviarWhatsappJoaoAntonio("aprovado_comite_ag_ccb",
								this.objetoContratoCobranca.getPagador().getNome(),
								this.objetoContratoCobranca.getNumeroContrato(),
								this.objetoContratoCobranca.getTaxaPreAprovadaMaior().toString(),
								this.objetoContratoCobranca.getPrazoMaxPreAprovado().toString());
						enviarWhatsappAline("aprovado_comite_ag_ccb",
								this.objetoContratoCobranca.getPagador().getNome(),
								this.objetoContratoCobranca.getNumeroContrato(),
								this.objetoContratoCobranca.getTaxaPreAprovadaMaior().toString(),
								this.objetoContratoCobranca.getPrazoMaxPreAprovado().toString());
						enviarWhatsaPaula("aprovado_comite_ag_ccb", this.objetoContratoCobranca.getPagador().getNome(),
								this.objetoContratoCobranca.getNumeroContrato(),
								this.objetoContratoCobranca.getTaxaPreAprovadaMaior().toString(),
								this.objetoContratoCobranca.getPrazoMaxPreAprovado().toString());

					} else {
						takeBlipMB = new TakeBlipMB();
						takeBlipMB.sendWhatsAppMessage(
								this.objetoContratoCobranca.getResponsavel().getDonoResponsavel(),
								"aprovado_comite_ag_ccb", this.objetoContratoCobranca.getPagador().getNome(),
								this.objetoContratoCobranca.getNumeroContrato(), "", "");
					}
				}
			}

			// Mensagem Documentos pronto Ag CCB
			if (this.objetoContratoCobranca.isDocumentosCompletos() != statusContrato.isDocumentosCompletos()) {
				if (this.objetoContratoCobranca.isDocumentosCompletos() && !this.objetoContratoCobranca.isReanalise()) {
					TakeBlipMB takeBlipMB = new TakeBlipMB();
					ResponsavelDao rDao = new ResponsavelDao();

					Responsavel rCcb1 = new Responsavel();
					Responsavel rCcb2 = new Responsavel();
					Responsavel rCcb3 = new Responsavel();
					Responsavel rCcb4 = new Responsavel();
					Responsavel rCcb5 = new Responsavel();
					Responsavel rCcb6 = new Responsavel();

					// Tati
					rCcb1 = rDao.findById((long) 643);
					takeBlipMB.sendWhatsAppMessage(rCcb1, "aprovado_comite_ag_ccb",
							this.objetoContratoCobranca.getPagador().getNome(),
							this.objetoContratoCobranca.getNumeroContrato(), "", "");

					// Anna Flavia
					rCcb2 = rDao.findById((long) 622);
					takeBlipMB.sendWhatsAppMessage(rCcb2, "aprovado_comite_ag_ccb",
							this.objetoContratoCobranca.getPagador().getNome(),
							this.objetoContratoCobranca.getNumeroContrato(), "", "");

					// Beatriz
					// rCcb4 = rDao.findById((long) 000000);
					// takeBlipMB.sendWhatsAppMessage(rCcb4,
					// "aprovado_comite_ag_ccb",
					// this.objetoContratoCobranca.getPagador().getNome(),
					// this.objetoContratoCobranca.getNumeroContrato(),
					// "", "");

					// Luana
					rCcb5 = rDao.findById((long) 625);
					takeBlipMB.sendWhatsAppMessage(rCcb5, "aprovado_comite_ag_ccb",
							this.objetoContratoCobranca.getPagador().getNome(),
							this.objetoContratoCobranca.getNumeroContrato(), "", "");

					// Mauricio
					rCcb6 = rDao.findById((long) 626);
					takeBlipMB.sendWhatsAppMessage(rCcb6, "aprovado_comite_ag_ccb",
							this.objetoContratoCobranca.getPagador().getNome(),
							this.objetoContratoCobranca.getNumeroContrato(), "", "");

				}
			}

			// Mensagem Documentos pronto Ag Reanalise Juridico
			if (this.objetoContratoCobranca.isReanalisePronta() != statusContrato.isReanalisePronta()
					|| this.objetoContratoCobranca.isPajuAtualizado() != statusContrato.isPajuAtualizado()) {
				if (this.objetoContratoCobranca.isReanalisePronta() && this.objetoContratoCobranca.isPajuAtualizado()) {
					TakeBlipMB takeBlipMB = new TakeBlipMB();
					ResponsavelDao rDao = new ResponsavelDao();
					Responsavel rJuridico1 = new Responsavel();
					Responsavel rJuridico2 = new Responsavel();

					// JP
					rJuridico1 = rDao.findById((long) 617);

					takeBlipMB.sendWhatsAppMessage(rJuridico1, "ag_comentarios_juridico",
							this.objetoContratoCobranca.getPagador().getNome(),
							"REANALISE - " + this.objetoContratoCobranca.getNumeroContrato(), "", "");

					// Ale dos Paju
					rJuridico2 = rDao.findById((long) 618);

					takeBlipMB.sendWhatsAppMessage(rJuridico2, "ag_comentarios_juridico",
							this.objetoContratoCobranca.getPagador().getNome(),
							"REANALISE - " + this.objetoContratoCobranca.getNumeroContrato(), "", "");
				}
			}

			// Mensagem AG ASSINATURA
			if (this.objetoContratoCobranca.isContratoConferido() != statusContrato.isContratoConferido()) {
				if (this.objetoContratoCobranca.isContratoConferido()) {
					TakeBlipMB takeBlipMB = new TakeBlipMB();
					takeBlipMB.sendWhatsAppMessage(this.objetoContratoCobranca.getResponsavel(),
							"contrato_pronto_para_assinatura_operacao",
							this.objetoContratoCobranca.getPagador().getNome(),
							this.objetoContratoCobranca.getNumeroContrato(), "", "");

					// envia para o gerente do responsável se o cadastro nao estiver ok
					if (CommonsUtil.semValor(this.objetoContratoCobranca.getResponsavel().getDonoResponsavel())
							|| CommonsUtil.semValor(this.objetoContratoCobranca.getResponsavel().getDonoResponsavel()
									.getResponsavelAssistenteComercial())) {
						takeBlipMB = new TakeBlipMB();
						takeBlipMB.sendWhatsAppMessage(
								this.objetoContratoCobranca.getResponsavel().getDonoResponsavel(),
								"contrato_pronto_para_assinatura_operacao",
								this.objetoContratoCobranca.getPagador().getNome(),
								this.objetoContratoCobranca.getNumeroContrato(), "", "");

						enviarWhatsappGislaine("contrato_pronto_para_assinatura_operacao",
								this.objetoContratoCobranca.getPagador().getNome(),
								this.objetoContratoCobranca.getNumeroContrato(), "", "");
						enviarWhatsappLuis("contrato_pronto_para_assinatura_operacao",
								this.objetoContratoCobranca.getPagador().getNome(),
								this.objetoContratoCobranca.getNumeroContrato(), "", "");
						enviarWhatsappEric("contrato_pronto_para_assinatura_operacao",
								this.objetoContratoCobranca.getPagador().getNome(),
								this.objetoContratoCobranca.getNumeroContrato(), "", "");

						enviarWhatsappJoaoAntonio("contrato_pronto_para_assinatura_operacao",
								this.objetoContratoCobranca.getPagador().getNome(),
								this.objetoContratoCobranca.getNumeroContrato(),
								this.objetoContratoCobranca.getTaxaPreAprovadaMaior().toString(),
								this.objetoContratoCobranca.getPrazoMaxPreAprovado().toString());
						enviarWhatsappAline("contrato_pronto_para_assinatura_operacao",
								this.objetoContratoCobranca.getPagador().getNome(),
								this.objetoContratoCobranca.getNumeroContrato(),
								this.objetoContratoCobranca.getTaxaPreAprovadaMaior().toString(),
								this.objetoContratoCobranca.getPrazoMaxPreAprovado().toString());
						enviarWhatsaPaula("contrato_pronto_para_assinatura_operacao",
								this.objetoContratoCobranca.getPagador().getNome(),
								this.objetoContratoCobranca.getNumeroContrato(),
								this.objetoContratoCobranca.getTaxaPreAprovadaMaior().toString(),
								this.objetoContratoCobranca.getPrazoMaxPreAprovado().toString());
					} else {
						takeBlipMB = new TakeBlipMB();
						takeBlipMB.sendWhatsAppMessage(
								this.objetoContratoCobranca.getResponsavel().getDonoResponsavel(),
								"contrato_pronto_para_assinatura_operacao",
								this.objetoContratoCobranca.getPagador().getNome(),
								this.objetoContratoCobranca.getNumeroContrato(), "", "");
					}
				}
			}

			// Mensagem ASSINADO / AG REGISTRO
			if (this.objetoContratoCobranca.isAgAssinatura() != statusContrato.isAgAssinatura()) {
				if (!this.objetoContratoCobranca.isAgAssinatura()) {
					if (statusContrato.isAgRegistro()) {
						TakeBlipMB takeBlipMB = new TakeBlipMB();
						takeBlipMB.sendWhatsAppMessage(this.objetoContratoCobranca.getResponsavel(),
								"contrato_dado_entrada_cartorio", this.objetoContratoCobranca.getPagador().getNome(),
								this.objetoContratoCobranca.getNumeroContrato(), "", "");

						// envia para o gerente do responsável
						// envia para o gerente do responsável se o cadastro nao estiver ok
						if (CommonsUtil.semValor(this.objetoContratoCobranca.getResponsavel().getDonoResponsavel())
								|| CommonsUtil.semValor(this.objetoContratoCobranca.getResponsavel()
										.getDonoResponsavel().getResponsavelAssistenteComercial())) {
							takeBlipMB = new TakeBlipMB();
							takeBlipMB.sendWhatsAppMessage(
									this.objetoContratoCobranca.getResponsavel().getDonoResponsavel(),
									"contrato_dado_entrada_cartorio",
									this.objetoContratoCobranca.getPagador().getNome(),
									this.objetoContratoCobranca.getNumeroContrato(), "", "");

							enviarWhatsappGislaine("contrato_dado_entrada_cartorio",
									this.objetoContratoCobranca.getPagador().getNome(),
									this.objetoContratoCobranca.getNumeroContrato(), "", "");
							enviarWhatsappLuis("contrato_dado_entrada_cartorio",
									this.objetoContratoCobranca.getPagador().getNome(),
									this.objetoContratoCobranca.getNumeroContrato(), "", "");
							enviarWhatsappEric("contrato_dado_entrada_cartorio",
									this.objetoContratoCobranca.getPagador().getNome(),
									this.objetoContratoCobranca.getNumeroContrato(), "", "");

							enviarWhatsappJoaoAntonio("contrato_dado_entrada_cartorio",
									this.objetoContratoCobranca.getPagador().getNome(),
									this.objetoContratoCobranca.getNumeroContrato(),
									this.objetoContratoCobranca.getTaxaPreAprovadaMaior().toString(),
									this.objetoContratoCobranca.getPrazoMaxPreAprovado().toString());
							enviarWhatsappAline("contrato_dado_entrada_cartorio",
									this.objetoContratoCobranca.getPagador().getNome(),
									this.objetoContratoCobranca.getNumeroContrato(),
									this.objetoContratoCobranca.getTaxaPreAprovadaMaior().toString(),
									this.objetoContratoCobranca.getPrazoMaxPreAprovado().toString());
							enviarWhatsaPaula("contrato_dado_entrada_cartorio",
									this.objetoContratoCobranca.getPagador().getNome(),
									this.objetoContratoCobranca.getNumeroContrato(),
									this.objetoContratoCobranca.getTaxaPreAprovadaMaior().toString(),
									this.objetoContratoCobranca.getPrazoMaxPreAprovado().toString());
						} else {
							takeBlipMB = new TakeBlipMB();
							takeBlipMB.sendWhatsAppMessage(
									this.objetoContratoCobranca.getResponsavel().getDonoResponsavel(),
									"contrato_dado_entrada_cartorio",
									this.objetoContratoCobranca.getPagador().getNome(),
									this.objetoContratoCobranca.getNumeroContrato(), "", "");
						}
					}
				}
			}
		} catch (Exception e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
			context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR, "WhatsApp: " + e, ""));
		}
	}

	public void enviarWhatsappGislaine(String template, String nomeCliente, String numeroContrato, String taxaAprovada,
			String prazoAprovado) {
		if (CommonsUtil.mesmoValor(this.objetoContratoCobranca.getResponsavel().getDonoResponsavel().getId(),
				SiscoatConstants.COMMERCIAL_GIS) // gislaine
		// ||
		// CommonsUtil.mesmoValor(this.objetoContratoCobranca.getResponsavel().getDonoResponsavel().getId(),(long)
		// 60)//Ana Cecilia
		) {
			TakeBlipMB takeBlipMB = new TakeBlipMB();
			ResponsavelDao rDao = new ResponsavelDao();
			/*
			 * if(!CommonsUtil.mesmoValor(this.objetoContratoCobranca.getResponsavel().
			 * getDonoResponsavel().getId(), (long) 5)) { Responsavel rGerente = new
			 * Responsavel(); rGerente = rDao.findById(SiscoatConstants.COMMERCIAL_GIS);
			 * takeBlipMB.sendWhatsAppMessage(rGerente, template, nomeCliente,
			 * numeroContrato, taxaAprovada, prazoAprovado); }
			 */
			// comentado pois dono responsavel já envia mensagem e gislaine não tem mais
			// pessoas na equipe

			// Isa (assistente Gislaine)
			Responsavel rAssistente = new Responsavel();
			rAssistente = rDao.findById(SiscoatConstants.ASSISTENTE_ISA);
			takeBlipMB.sendWhatsAppMessage(rAssistente, template, nomeCliente, numeroContrato, taxaAprovada,
					prazoAprovado);
		}
	}

	public void enviarWhatsappLuis(String template, String nomeCliente, String numeroContrato, String taxaAprovada,
			String prazoAprovado) {
		if (CommonsUtil.mesmoValor(this.objetoContratoCobranca.getResponsavel().getDonoResponsavel().getId(),
				SiscoatConstants.COMMERCIAL_LUIS) // luis
				|| CommonsUtil.mesmoValor(this.objetoContratoCobranca.getResponsavel().getDonoResponsavel().getId(),
						(long) 81)
				|| CommonsUtil.mesmoValor(this.objetoContratoCobranca.getResponsavel().getDonoResponsavel().getId(),
						(long) 458)
				|| CommonsUtil.mesmoValor(this.objetoContratoCobranca.getResponsavel().getDonoResponsavel().getId(),
						(long) 249)
				|| CommonsUtil.mesmoValor(this.objetoContratoCobranca.getResponsavel().getDonoResponsavel().getId(),
						(long) 506)) {
			TakeBlipMB takeBlipMB = new TakeBlipMB();
			ResponsavelDao rDao = new ResponsavelDao();
			if (!CommonsUtil.mesmoValor(this.objetoContratoCobranca.getResponsavel().getDonoResponsavel().getId(),
					(long) 6)
					&& !CommonsUtil.mesmoValor(this.objetoContratoCobranca.getResponsavel().getId(), (long) 81)
					&& !CommonsUtil.mesmoValor(this.objetoContratoCobranca.getResponsavel().getId(), (long) 458)
					&& !CommonsUtil.mesmoValor(this.objetoContratoCobranca.getResponsavel().getId(), (long) 249)
					&& !CommonsUtil.mesmoValor(this.objetoContratoCobranca.getResponsavel().getId(), (long) 506)) {
				Responsavel rGerente = new Responsavel();
				rGerente = rDao.findById(SiscoatConstants.COMMERCIAL_LUIS);
				takeBlipMB.sendWhatsAppMessage(rGerente, template, nomeCliente, numeroContrato, taxaAprovada,
						prazoAprovado);
			}

			// Jaque (assistente Luis) (agr é de novo)
			Responsavel rAssistente = new Responsavel();
			rAssistente = rDao.findById((long) 689);
			takeBlipMB.sendWhatsAppMessage(rAssistente, template, nomeCliente, numeroContrato, taxaAprovada,
					prazoAprovado);

			// Fernanda (assistente Luis) (agr é de novo)
			Responsavel rAssistente2 = new Responsavel();
			rAssistente2 = rDao.findById((long) 689);
			takeBlipMB.sendWhatsAppMessage(rAssistente2, template, nomeCliente, numeroContrato, taxaAprovada,
					prazoAprovado);
		}
	}

	public void enviarWhatsappEric(String template, String nomeCliente, String numeroContrato, String taxaAprovada,
			String prazoAprovado) {
		if (CommonsUtil.mesmoValor(this.objetoContratoCobranca.getResponsavel().getDonoResponsavel().getId(),
				SiscoatConstants.COMMERCIAL_ERIK)
				|| CommonsUtil.mesmoValor(this.objetoContratoCobranca.getResponsavel().getDonoResponsavel().getId(),
						(long) 34)
				|| CommonsUtil.mesmoValor(this.objetoContratoCobranca.getResponsavel().getDonoResponsavel().getId(),
						(long) 71)
				|| CommonsUtil.mesmoValor(this.objetoContratoCobranca.getResponsavel().getDonoResponsavel().getId(),
						(long) 376)
				|| CommonsUtil.mesmoValor(this.objetoContratoCobranca.getResponsavel().getDonoResponsavel().getId(),
						(long) 18)) {
			TakeBlipMB takeBlipMB = new TakeBlipMB();
			ResponsavelDao rDao = new ResponsavelDao();
			if (!CommonsUtil.mesmoValor(this.objetoContratoCobranca.getResponsavel().getDonoResponsavel().getId(),
					SiscoatConstants.COMMERCIAL_ERIK)
					&& !CommonsUtil.mesmoValor(this.objetoContratoCobranca.getResponsavel().getId(), (long) 34)
					&& !CommonsUtil.mesmoValor(this.objetoContratoCobranca.getResponsavel().getId(), (long) 71)
					&& !CommonsUtil.mesmoValor(this.objetoContratoCobranca.getResponsavel().getId(), (long) 376)
					&& !CommonsUtil.mesmoValor(this.objetoContratoCobranca.getResponsavel().getId(), (long) 18)) {
				Responsavel rGerente = new Responsavel();
				rGerente = rDao.findById((long) 35);
				takeBlipMB.sendWhatsAppMessage(rGerente, template, nomeCliente, numeroContrato, taxaAprovada,
						prazoAprovado);
			}

			// Lennara (assistente Eric e Fabio Moron)
			Responsavel rAssistente = new Responsavel();
			rAssistente = rDao.findById((long) 102);

			takeBlipMB.sendWhatsAppMessage(rAssistente, template, nomeCliente, numeroContrato, taxaAprovada,
					prazoAprovado);
		}
	}

	public void enviarWhatsappJoaoAntonio(String template, String nomeCliente, String numeroContrato,
			String taxaAprovada, String prazoAprovado) {

		if (CommonsUtil.mesmoValor(this.objetoContratoCobranca.getResponsavel().getDonoResponsavel().getId(),
				SiscoatConstants.COMMERCIAL_JOAO_ANTONIO)) {
			TakeBlipMB takeBlipMB = new TakeBlipMB();
			ResponsavelDao rDao = new ResponsavelDao();
//			if (!CommonsUtil.mesmoValor(this.objetoContratoCobranca.getResponsavel().getDonoResponsavel().getId(),
//					(long) 35)
//					&& !CommonsUtil.mesmoValor(this.objetoContratoCobranca.getResponsavel().getId(), (long) 34)
//					&& !CommonsUtil.mesmoValor(this.objetoContratoCobranca.getResponsavel().getId(), (long) 71)
//					&& !CommonsUtil.mesmoValor(this.objetoContratoCobranca.getResponsavel().getId(), (long) 376)
//					&& !CommonsUtil.mesmoValor(this.objetoContratoCobranca.getResponsavel().getId(), (long) 18)) {
			Responsavel rGerente = new Responsavel();
			rGerente = rDao.findById(SiscoatConstants.COMMERCIAL_JOAO_ANTONIO);
			takeBlipMB.sendWhatsAppMessage(rGerente, template, nomeCliente, numeroContrato, taxaAprovada,
					prazoAprovado);
//			}

			// Lennara (assistente Eric e Fabio Moron)
			Responsavel rAssistente = new Responsavel();
			rAssistente = rDao.findById((long) SiscoatConstants.ASSISTENTE_JAQUE);

			takeBlipMB.sendWhatsAppMessage(rAssistente, template, nomeCliente, numeroContrato, taxaAprovada,
					prazoAprovado);
		}
	}

	public void enviarWhatsappAline(String template, String nomeCliente, String numeroContrato, String taxaAprovada,
			String prazoAprovado) {
		if (CommonsUtil.mesmoValor(this.objetoContratoCobranca.getResponsavel().getDonoResponsavel().getId(),
				SiscoatConstants.COMMERCIAL_ALINE)) {
			TakeBlipMB takeBlipMB = new TakeBlipMB();
			ResponsavelDao rDao = new ResponsavelDao();
//			if (!CommonsUtil.mesmoValor(this.objetoContratoCobranca.getResponsavel().getDonoResponsavel().getId(),
//					(long) 35)
//					&& !CommonsUtil.mesmoValor(this.objetoContratoCobranca.getResponsavel().getId(), (long) 34)
//					&& !CommonsUtil.mesmoValor(this.objetoContratoCobranca.getResponsavel().getId(), (long) 71)
//					&& !CommonsUtil.mesmoValor(this.objetoContratoCobranca.getResponsavel().getId(), (long) 376)
//					&& !CommonsUtil.mesmoValor(this.objetoContratoCobranca.getResponsavel().getId(), (long) 18)) {
			Responsavel rGerente = new Responsavel();
			rGerente = rDao.findById((long) 1191);
			takeBlipMB.sendWhatsAppMessage(rGerente, template, nomeCliente, numeroContrato, taxaAprovada,
					prazoAprovado);
//			}

			// Lennara (assistente Eric e Fabio Moron)
			Responsavel rAssistente = new Responsavel();
			rAssistente = rDao.findById((long) SiscoatConstants.ASSISTENTE_BIA);

			takeBlipMB.sendWhatsAppMessage(rAssistente, template, nomeCliente, numeroContrato, taxaAprovada,
					prazoAprovado);
		}
	}

	public void enviarWhatsaPaula(String template, String nomeCliente, String numeroContrato, String taxaAprovada,
			String prazoAprovado) {
		if (CommonsUtil.mesmoValor(this.objetoContratoCobranca.getResponsavel().getDonoResponsavel().getId(),
				SiscoatConstants.COMMERCIAL_PAULA)) {
			TakeBlipMB takeBlipMB = new TakeBlipMB();
			ResponsavelDao rDao = new ResponsavelDao();
//			if (!CommonsUtil.mesmoValor(this.objetoContratoCobranca.getResponsavel().getDonoResponsavel().getId(),
//					(long) 35)
//					&& !CommonsUtil.mesmoValor(this.objetoContratoCobranca.getResponsavel().getId(), (long) 34)
//					&& !CommonsUtil.mesmoValor(this.objetoContratoCobranca.getResponsavel().getId(), (long) 71)
//					&& !CommonsUtil.mesmoValor(this.objetoContratoCobranca.getResponsavel().getId(), (long) 376)
//					&& !CommonsUtil.mesmoValor(this.objetoContratoCobranca.getResponsavel().getId(), (long) 18)) {
			Responsavel rGerente = new Responsavel();
			rGerente = rDao.findById((long) 826);
			takeBlipMB.sendWhatsAppMessage(rGerente, template, nomeCliente, numeroContrato, taxaAprovada,
					prazoAprovado);
//			}

			// Lennara (assistente Eric e Fabio Moron)
			Responsavel rAssistente = new Responsavel();
			rAssistente = rDao.findById((long) SiscoatConstants.ASSISTENTE_BIA);

			takeBlipMB.sendWhatsAppMessage(rAssistente, template, nomeCliente, numeroContrato, taxaAprovada,
					prazoAprovado);
		}
	}

	/*******
	 * Chamadas do docket
	 * 
	 * senão nada
	 * 
	 * @return
	 */

	public void baixarEngineDocumento(DocumentoAnalise documentoAnalise) {
		FacesContext facesContext = FacesContext.getCurrentInstance();
		ExternalContext externalContext = facesContext.getExternalContext();
		HttpServletResponse response = (HttpServletResponse) externalContext.getResponse();
		BufferedInputStream input = null;
		BufferedOutputStream output = null;
		try {
			if (engineService == null)
				engineService = new EngineService();
			engineService.baixarDocumentoEngine(documentoAnalise.getEngine());
			engineService.salvarDetalheDocumentoEngine(documentoAnalise);

			byte[] pdfBytes = java.util.Base64.getDecoder().decode(documentoAnalise.getEngine().getPdfBase64());
			String mineFile = "application/pdf";
			input = new BufferedInputStream(new ByteArrayInputStream(pdfBytes));
			response.reset();
			// lire un fichier pdf
			response.setHeader("Content-type", mineFile);

			response.setContentLength(pdfBytes.length);

			response.setHeader("Content-disposition", "inline; FileName=" + objetoContratoCobranca.getNumeroContrato()
					+ " Engine " + documentoAnalise.getPagador().getNome().replace(",", "_") + ".pdf");
			output = new BufferedOutputStream(response.getOutputStream(), 10240);
			byte[] buffer = new byte[pdfBytes.length];
			int length;
			while ((length = input.read(buffer)) > 0) {
				output.write(buffer, 0, length);
			}

			// Finalize task.
			output.flush();
			output.close();
			facesContext.responseComplete();
		} catch (Exception e) {
			e.printStackTrace();
		}
	}

	public void baixarDocumentoSerasa(DocumentoAnalise documentoAnalise) {
		SerasaService serasa = new SerasaService();
		// DocumentoAnalise docAnalise = new DocumentoAnalise();
		FacesContext facesContext = FacesContext.getCurrentInstance();
		ExternalContext externalContext = facesContext.getExternalContext();
		HttpServletResponse response = (HttpServletResponse) externalContext.getResponse();
		BufferedInputStream input = null;
		BufferedOutputStream output = null;
		try {
			String documentoBase64 = serasa.baixarDocumento(documentoAnalise);
			if (CommonsUtil.semValor(documentoBase64)) {
				facesContext.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR,
						"Serasa: Ocorreu um problema ao gerar o PDF!", ""));
				return;
			} else {
				byte[] pdfBytes = java.util.Base64.getDecoder().decode(documentoBase64);
				String mineFile = "application/pdf";
				input = new BufferedInputStream(new ByteArrayInputStream(pdfBytes));
				response.reset();
				// lire un fichier pdf
				response.setHeader("Content-type", mineFile);

				response.setContentLength(pdfBytes.length);

				response.setHeader("Content-disposition",
						"inline; FileName=" + this.objetoContratoCobranca.getNumeroContrato() + " Serasa "
								+ documentoAnalise.getPagador().getNome().replace(",", "_") + ".pdf");
				output = new BufferedOutputStream(response.getOutputStream(), 10240);
				byte[] buffer = new byte[pdfBytes.length];
				int length;
				while ((length = input.read(buffer)) > 0) {
					output.write(buffer, 0, length);
				}

				// Finalize task.
				output.flush();
				output.close();
				facesContext.responseComplete();
			}
		} catch (Exception e) {
			e.printStackTrace();
		}
	}

	public void baixarMatricula(Long id) {
		FileUploaded fileRea = new FileUploaded();

		FileService fileService = new FileService();
		DocumentoAnaliseDao docAnaliseDao = new DocumentoAnaliseDao();
		FacesContext facesContext = FacesContext.getCurrentInstance();
		ExternalContext externalContext = facesContext.getExternalContext();
		HttpServletResponse response = (HttpServletResponse) externalContext.getResponse();
		BufferedInputStream input = null;
		BufferedOutputStream output = null;
		ParametrosDao pDao = new ParametrosDao();
		DocumentoAnalise documentoAnalise = docAnaliseDao.findById(id);
		fileRea.setName(documentoAnalise.getIdentificacao());
		fileRea.setPath("/home/webnowbr/Siscoat/GalleriaFinancas/DocumentosCobranca/"
				+ this.objetoContratoCobranca.getNumeroContrato() + "/analise/");
		fileRea.setFile(null);

		try {
			if (CommonsUtil.semValor(fileRea.getName())) {
				facesContext.addMessage(null,
						new FacesMessage(FacesMessage.SEVERITY_ERROR, "REA: Ocorreu um problema ao gerar o PDF!", ""));
				return;
			} else {
				byte[] bytesArquivo = fileService.abrirDocumentos(fileRea,
						this.objetoContratoCobranca.getNumeroContrato(), getUsuarioLogado());
				if (CommonsUtil.semValor(bytesArquivo)) {
					facesContext.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR,
							"REA: Ocorreu um problema ao gerar o PDF!", ""));
					return;
				} else {
					String mineFile = "application/pdf";
					input = new BufferedInputStream(new ByteArrayInputStream(bytesArquivo));
					response.reset();
					// lire un fichier pdf
					response.setHeader("Content-type", mineFile);

					response.setContentLength(bytesArquivo.length);

					response.setHeader("Content-disposition",
							"inline; FileName=" + this.objetoContratoCobranca.getNumeroContrato() + " "
									+ documentoAnalise.getIdentificacao() + ".pdf");
					output = new BufferedOutputStream(response.getOutputStream(), 10240);
					byte[] buffer = new byte[bytesArquivo.length];
					int length;
					while ((length = input.read(buffer)) > 0) {
						output.write(buffer, 0, length);
					}

					// Finalize task.
					output.flush();
					output.close();
					facesContext.responseComplete();
				}
			}
		} catch (Exception e) {
			e.printStackTrace();
		}

	}

	public void baixarDocumentoPpe(DocumentoAnalise documentoAnalise) {
		NetrinService netrin = new NetrinService();
		FacesContext facesContext = FacesContext.getCurrentInstance();
		ExternalContext externalContext = facesContext.getExternalContext();
		HttpServletResponse response = (HttpServletResponse) externalContext.getResponse();
		BufferedInputStream input = null;
		BufferedOutputStream output = null;
		try {
			String documentoBase64 = netrin.baixarDocumentoPpe(documentoAnalise);
			if (CommonsUtil.semValor(documentoBase64)) {
				facesContext.addMessage(null,
						new FacesMessage(FacesMessage.SEVERITY_ERROR, "PPE: Ocorreu um problema ao gerar o PDF!", ""));
				return;
			} else {
				byte[] pdfBytes = java.util.Base64.getDecoder().decode(documentoBase64);
				String mineFile = "application/pdf";
				input = new BufferedInputStream(new ByteArrayInputStream(pdfBytes));
				response.reset();
				// lire un fichier pdf
				response.setHeader("Content-type", mineFile);

				response.setContentLength(pdfBytes.length);

				response.setHeader("Content-disposition",
						"inline; FileName=" + objetoContratoCobranca.getNumeroContrato() + " PPE "
								+ documentoAnalise.getPagador().getNome().replace(",", "_") + ".pdf");
				output = new BufferedOutputStream(response.getOutputStream(), 10240);
				byte[] buffer = new byte[pdfBytes.length];
				int length;
				while ((length = input.read(buffer)) > 0) {
					output.write(buffer, 0, length);
				}

				// Finalize task.
				output.flush();
				output.close();
				facesContext.responseComplete();
			}
		} catch (Exception e) {
			e.printStackTrace();
		}
	}

	public void baixarDocumentoDossie(DocumentoAnalise documentoAnalise) {
		NetrinService netrin = new NetrinService();
		FacesContext facesContext = FacesContext.getCurrentInstance();
		ExternalContext externalContext = facesContext.getExternalContext();
		HttpServletResponse response = (HttpServletResponse) externalContext.getResponse();
		BufferedInputStream input = null;
		BufferedOutputStream output = null;
		try {
			String documentoBase64 = netrin.baixarDocumentoDossie(documentoAnalise);
			if (CommonsUtil.semValor(documentoBase64)) {
				facesContext.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR,
						"Dossiê: Ocorreu um problema ao gerar o PDF!", ""));
				return;
			} else {
				byte[] pdfBytes = java.util.Base64.getDecoder().decode(documentoBase64);
				String mineFile = "application/pdf";
				input = new BufferedInputStream(new ByteArrayInputStream(pdfBytes));
				response.reset();
				// lire un fichier pdf
				response.setHeader("Content-type", mineFile);

				response.setContentLength(pdfBytes.length);

				response.setHeader("Content-disposition",
						"inline; FileName=" + objetoContratoCobranca.getNumeroContrato() + " Dossie "
								+ documentoAnalise.getPagador().getNome().replace(",", "_") + ".pdf");
				output = new BufferedOutputStream(response.getOutputStream(), 10240);
				byte[] buffer = new byte[pdfBytes.length];
				int length;
				while ((length = input.read(buffer)) > 0) {
					output.write(buffer, 0, length);
				}

				// Finalize task.
				output.flush();
				output.close();
				facesContext.responseComplete();
			}
		} catch (Exception e) {
			e.printStackTrace();
		}
	}

	public void baixarDocumentoCenprot(DocumentoAnalise documentoAnalise) {
		NetrinService netrin = new NetrinService();
		FacesContext facesContext = FacesContext.getCurrentInstance();
		ExternalContext externalContext = facesContext.getExternalContext();
		HttpServletResponse response = (HttpServletResponse) externalContext.getResponse();
		BufferedInputStream input = null;
		BufferedOutputStream output = null;
		try {
			String documentoBase64 = netrin.baixarDocumento(documentoAnalise);
			if (CommonsUtil.semValor(documentoBase64)) {
				facesContext.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR,
						"Cenprot: Ocorreu um problema ao gerar o PDF!", ""));
				return;
			} else {

				byte[] pdfBytes = java.util.Base64.getDecoder().decode(documentoBase64);
				String mineFile = "application/pdf";
				input = new BufferedInputStream(new ByteArrayInputStream(pdfBytes));
				response.reset();
				// lire un fichier pdf
				response.setHeader("Content-type", mineFile);

				response.setContentLength(pdfBytes.length);

				response.setHeader("Content-disposition",
						"inline; FileName=" + objetoContratoCobranca.getNumeroContrato() + " Cenprot "
								+ documentoAnalise.getPagador().getNome().replace(",", "_") + ".pdf");
				output = new BufferedOutputStream(response.getOutputStream(), 10240);
				byte[] buffer = new byte[pdfBytes.length];
				int length;
				while ((length = input.read(buffer)) > 0) {
					output.write(buffer, 0, length);
				}

				// Finalize task.
				output.flush();
				output.close();
				facesContext.responseComplete();
			}
		} catch (Exception e) {
			e.printStackTrace();
		}
	}

	public void baixarDocumentoProcesso(DocumentoAnalise documentoAnalise) {
		FacesContext facesContext = FacesContext.getCurrentInstance();
		BigDataService bigData = new BigDataService();
		try {

			String documentoBase64 = bigData.baixarDocumentoProcesso(documentoAnalise);
			if (CommonsUtil.semValor(documentoBase64)) {
				facesContext.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR,
						"Processos: Ocorreu um problema ao gerar o PDF!", ""));
				return;
			}

			byte[] pdfBytes = java.util.Base64.getDecoder().decode(documentoBase64);
			ExternalContext externalContext = facesContext.getExternalContext();
			HttpServletResponse response = (HttpServletResponse) externalContext.getResponse();
			BufferedInputStream input = null;
			BufferedOutputStream output = null;

			String mineFile = "application/pdf";
			input = new BufferedInputStream(new ByteArrayInputStream(pdfBytes));
			response.reset();
			// lire un fichier pdf
			response.setHeader("Content-type", mineFile);

			response.setContentLength(pdfBytes.length);

			response.setHeader("Content-disposition", "inline; FileName=" + objetoContratoCobranca.getNumeroContrato()
					+ " Processos " + documentoAnalise.getPagador().getNome().replace(",", "_") + ".pdf");
			output = new BufferedOutputStream(response.getOutputStream(), 10240);
			byte[] buffer = new byte[pdfBytes.length];
			int length;
			while ((length = input.read(buffer)) > 0) {
				output.write(buffer, 0, length);
			}
			output.flush();
			output.close();
			facesContext.responseComplete();
		} catch (NullPointerException e) {
			facesContext.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR,
					"Processos: Ocorreu um problema ao gerar o PDF!", ""));
		} catch (Exception e) {
			facesContext.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR,
					"Processos: Ocorreu um problema ao gerar o PDF!", ""));

		}
	}

	public void baixarDocumentoSCR(DocumentoAnalise documentoAnalise) {

		FileGenerator fileGenerator = new FileGenerator();
		fileGenerator.setDocumento(documentoAnalise.getCnpjcpf());

		ScrResult scrResult = GsonUtil.fromJson(documentoAnalise.getRetornoScr(), ScrResult.class);

		ScrService scrService = new ScrService();

		FacesContext facesContext = FacesContext.getCurrentInstance();
		ExternalContext externalContext = facesContext.getExternalContext();
		HttpServletResponse response = (HttpServletResponse) externalContext.getResponse();
		BufferedInputStream input = null;
		BufferedOutputStream output = null;
		try {
			byte[] contrato = scrService.geraContrato(scrResult, fileGenerator);
			if (CommonsUtil.semValor(contrato)) {
				facesContext.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR,
						"Processos: Ocorreu um problema ao gerar o PDF!", ""));
				return;
			} else {

				String mineFile = "application/pdf";
				input = new BufferedInputStream(new ByteArrayInputStream(contrato));
				response.reset();
				// lire un fichier pdf
				response.setHeader("Content-type", mineFile);

				response.setContentLength(contrato.length);

				response.setHeader("Content-disposition",
						"inline; FileName=" + objetoContratoCobranca.getNumeroContrato() + " SCR "
								+ documentoAnalise.getPagador().getNome().replace(",", "_") + ".pdf");
				output = new BufferedOutputStream(response.getOutputStream(), 10240);
				byte[] buffer = new byte[contrato.length];
				int length;
				while ((length = input.read(buffer)) > 0) {
					output.write(buffer, 0, length);
				}

				// Finalize task.
				output.flush();
				output.close();
				facesContext.responseComplete();
			}
		} catch (Exception e) {
			e.printStackTrace();
		}
	}

	public StreamedContent decodarBaixarArquivo(String base64) {
		if (CommonsUtil.semValor(base64)) {
			// System.out.println("Arquivo Base64 não existe");
			return null;
		}
		byte[] decoded = Base64.getDecoder().decode(base64);

		InputStream in = new ByteArrayInputStream(decoded);
		final GeradorRelatorioDownloadCliente gerador = new GeradorRelatorioDownloadCliente(
				FacesContext.getCurrentInstance());
		String nomeArquivoDownload = String.format("Galleria Bank - Data Engine %s.pdf", "");
		gerador.open(nomeArquivoDownload);
		gerador.feed(in);
		gerador.close();
		return null;
	}

	public String cancelarEdicaoPreContrato() {
		if (!this.preContratoCustom) {
			return geraConsultaContratosPendentes();
		} else {
			if (this.objetoContratoCobranca.getStatusLead().equals("Novo Lead")) {
				return geraConsultaLeads("Novo Lead");
			}
			if (this.objetoContratoCobranca.getStatusLead().equals("Em Tratamento")) {
				return geraConsultaLeads("Em Tratamento");
			}
			if (this.objetoContratoCobranca.getStatusLead().equals("Ag. Contato")) {
				return geraConsultaLeads("Ag. Contato");
			}
			if (this.objetoContratoCobranca.getStatusLead().equals("Ag. Doc.")) {
				return geraConsultaLeads("Ag. Doc.");
			}
			if (this.objetoContratoCobranca.getStatusLead().equals("Completo")) {
				return geraConsultaLeads("Completo");
			}
			if (this.objetoContratoCobranca.getStatusLead().equals("Reprovado")) {
				return geraConsultaLeads("Reprovado");
			}
			if (this.objetoContratoCobranca.getStatusLead().equals("Baixado")) {
				return geraConsultaLeads("Baixado");
			}

			return "";
		}
	}

	/*******
	 * Atualiza o check list com data e o usuário que setou se false limpa usuario e
	 * data se true verificar se data e usuario nulo preeencher dados
	 * 
	 * senão nada
	 * 
	 * @return
	 */
	public void updateCheckList() {

		if (this.objetoContratoCobranca.getStatusLead() != null) {
			if (this.objetoContratoCobranca.getStatusLead().equals("Em Tratamento")) {
				this.objetoContratoCobranca.setLeadCompleto(false);
				Responsavel responsavel = getResponsavelUsuarioLogado();
				if (responsavel != null
						&& CommonsUtil.mesmoValor(this.objetoContratoCobranca.getResponsavel().getCodigo(), "lead")) {
					this.objetoContratoCobranca.setResponsavel(responsavel);
				}
				if (this.objetoContratoCobranca.getLeadEmTratamentoData() == null) {
					this.objetoContratoCobranca.setLeadEmTratamentoData(DateUtil.gerarDataHoje());
				}
			} else if (this.objetoContratoCobranca.getStatusLead().equals("Ag. Contato")) {
				this.objetoContratoCobranca.setLeadCompleto(false);
				Responsavel responsavel = getResponsavelUsuarioLogado();
				if (responsavel != null
						&& CommonsUtil.mesmoValor(this.objetoContratoCobranca.getResponsavel().getCodigo(), "lead")) {
					this.objetoContratoCobranca.setResponsavel(responsavel);
				}
				if (CommonsUtil.semValor(this.objetoContratoCobranca.getLeadAgContatoData())) {
					this.objetoContratoCobranca.setLeadAgContatoData(DateUtil.gerarDataHoje());
				}
			} else if (this.objetoContratoCobranca.getStatusLead().equals("Ag. Doc.")) {
				this.objetoContratoCobranca.setLeadCompleto(false);
				if (CommonsUtil.semValor(this.objetoContratoCobranca.getLeadAgDocData())) {
					this.objetoContratoCobranca.setLeadAgDocData(DateUtil.gerarDataHoje());
				}
			} else if (this.objetoContratoCobranca.getStatusLead().equals("Novo Lead")) {
				this.objetoContratoCobranca.setLeadCompleto(false);
				if (!CommonsUtil.mesmoValor(this.objetoContratoCobranca.getResponsavel().getCodigo(), "lead")) {
					this.objetoContratoCobranca.setStatusLead("Ag. Contato");
				}
			} else if (this.objetoContratoCobranca.getStatusLead().equals("Reprovado")) {
				if (this.objetoContratoCobranca.getLeadReprovadoData() == null) {
					this.objetoContratoCobranca.setLeadReprovadoData(DateUtil.gerarDataHoje());
				}
			}
		} else {
			this.objetoContratoCobranca.setStatusLead("Completo");
		}

		if (this.objetoContratoCobranca.getStatusLead().equals("Completo")) {
			if (this.objetoContratoCobranca.getContratoResgatadoData() == null) {
				this.objetoContratoCobranca.setContratoResgatadoData(DateUtil.gerarDataHoje());
				this.objetoContratoCobranca.setContratoResgatadoBaixar(true);
			}
			this.objetoContratoCobranca.setLeadCompleto(true);
			if (this.objetoContratoCobranca.getLeadCompletoData() == null) {
				this.objetoContratoCobranca.setLeadCompletoData(DateUtil.gerarDataHoje());
				this.objetoContratoCobranca.setDataUltimaAtualizacao(this.objetoContratoCobranca.getLeadCompletoData());
				this.objetoContratoCobranca.setLeadCompletoUsuario(getNomeUsuarioLogado());
			}
		}

		if (!this.objetoContratoCobranca.isInicioAnalise()) {
			this.objetoContratoCobranca.setInicioAnaliseData(null);
			this.objetoContratoCobranca.setInicioAnaliseUsuario(null);
			this.objetoContratoCobranca.setDataUltimaAtualizacao(this.objetoContratoCobranca.getDataContrato());

		} else {
			if (this.objetoContratoCobranca.getInicioAnaliseData() == null) {
				this.objetoContratoCobranca.setStatus("Pendente");
				this.objetoContratoCobranca.setInicioAnaliseData(DateUtil.gerarDataHoje());
				this.objetoContratoCobranca
						.setDataUltimaAtualizacao(this.objetoContratoCobranca.getInicioAnaliseData());
				this.objetoContratoCobranca.setInicioAnaliseUsuario(getNomeUsuarioLogado());
			}
		}

		if (!this.objetoContratoCobranca.isAnaliseReprovada()) {
			this.objetoContratoCobranca.setAnaliseReprovadaData(null);
			this.objetoContratoCobranca.setAnaliseReprovadaUsuario(null);

		} else {
			if (this.objetoContratoCobranca.getAnaliseReprovadaData() == null) {
				this.objetoContratoCobranca.setStatus("Reprovado");
				this.objetoContratoCobranca.setAnaliseReprovadaData(DateUtil.gerarDataHoje());
				this.objetoContratoCobranca
						.setDataUltimaAtualizacao(this.objetoContratoCobranca.getAnaliseReprovadaData());
				this.objetoContratoCobranca.setAnaliseReprovadaUsuario(getNomeUsuarioLogado());
			}
		}

		if (CommonsUtil.semValor(this.objetoContratoCobranca.getCadastroAprovadoValor())) {
			this.objetoContratoCobranca.setCadastroAprovadoData(null);
			this.objetoContratoCobranca.setCadastroAprovadoUsuario(null);
		} else {
			if (this.objetoContratoCobranca.getCadastroAprovadoValor().equals("Aprovado")
					|| this.objetoContratoCobranca.getCadastroAprovadoValor().equals("Pendente")) {
				if (this.objetoContratoCobranca.getCadastroAprovadoData() == null) {
					this.objetoContratoCobranca.setStatus("Pendente");

					this.objetoContratoCobranca.setCadastroAprovadoData(DateUtil.gerarDataHoje());
					this.objetoContratoCobranca
							.setDataUltimaAtualizacao(this.objetoContratoCobranca.getCadastroAprovadoData());
					this.objetoContratoCobranca.setCadastroAprovadoUsuario(getNomeUsuarioLogado());
				}

				if (this.objetoContratoCobranca.getCadastroAprovadoValor().equals("Pendente")
						&& this.objetoContratoCobranca.getAnalisePendenciadaData() == null) {
					this.objetoContratoCobranca.setAnalisePendenciadaData(DateUtil.gerarDataHoje());
					this.objetoContratoCobranca.setAnalisePendenciadaUsuario(getNomeUsuarioLogado());
				}
			} else {
				if (this.objetoContratoCobranca.getCadastroAprovadoData() == null) {
					this.objetoContratoCobranca.setCadastroAprovadoData(DateUtil.gerarDataHoje());
					this.objetoContratoCobranca.setCadastroAprovadoUsuario(getNomeUsuarioLogado());
				}
				this.objetoContratoCobranca.setAnaliseReprovada(true);
				if (this.objetoContratoCobranca.getAnaliseReprovadaData() == null) {
					this.objetoContratoCobranca.setAnaliseReprovadaData(DateUtil.gerarDataHoje());
					this.objetoContratoCobranca.setAnaliseReprovadaUsuario(getNomeUsuarioLogado());
				}
				this.objetoContratoCobranca.setStatus("Reprovado");
			}

			/*
			 * if (!CommonsUtil.semValor(contratoCobrancaCheckList)) { if
			 * (!CommonsUtil.mesmoValor(contratoCobrancaCheckList.getCadastroAprovadoValor()
			 * , this.objetoContratoCobranca.getCadastroAprovadoValor())) {
			 * 
			 * CadastroStatus cadastroStatus = new CadastroStatus( "Cadastro " +
			 * this.objetoContratoCobranca.getCadastroAprovadoValor(), // Status "",
			 * objetoContratoCobranca); // cotrato
			 * 
			 * this.objetoContratoCobranca.getListCadastroStatus().add(cadastroStatus); } }
			 */
		}

		if (this.objetoContratoCobranca.getMatriculaAprovadaValor() != null) {
			if (this.objetoContratoCobranca.getMatriculaAprovadaValor().equals("")) {
				this.objetoContratoCobranca.setMatriculaAprovadaData(null);
				this.objetoContratoCobranca.setMatriculaAprovadaUsuario(null);

			} else {
				if (this.objetoContratoCobranca.getMatriculaAprovadaData() == null) {
					this.objetoContratoCobranca.setStatus("Pendente");
					this.objetoContratoCobranca.setMatriculaAprovadaData(DateUtil.gerarDataHoje());
					this.objetoContratoCobranca
							.setDataUltimaAtualizacao(this.objetoContratoCobranca.getMatriculaAprovadaData());
					this.objetoContratoCobranca.setMatriculaAprovadaUsuario(getNomeUsuarioLogado());
				}
			}
		}

		if (!this.objetoContratoCobranca.isPedidoPreLaudoComercial()) {
			this.objetoContratoCobranca.setPedidoPreLaudoComercialData(null);
			this.objetoContratoCobranca.setPedidoPreLaudoComercialUsuario(null);

		} else {
			if (this.objetoContratoCobranca.getPedidoPreLaudoComercialData() == null) {
				this.objetoContratoCobranca.setStatus("Pendente");
				this.objetoContratoCobranca.setPedidoPreLaudoComercialData(DateUtil.gerarDataHoje());
				this.objetoContratoCobranca
						.setDataUltimaAtualizacao(this.objetoContratoCobranca.getPedidoPreLaudoComercialData());
				this.objetoContratoCobranca.setPedidoPreLaudoComercialUsuario(getNomeUsuarioLogado());
			}
		}

		if (!this.objetoContratoCobranca.isPedidoPreLaudo()) {
			this.objetoContratoCobranca.setPedidoPreLaudoData(null);
			this.objetoContratoCobranca.setPedidoPreLaudoUsuario(null);

		} else {
			if (this.objetoContratoCobranca.getPedidoPreLaudoData() == null) {
				this.objetoContratoCobranca.setStatus("Pendente");
				this.objetoContratoCobranca.setPedidoPreLaudoData(DateUtil.gerarDataHoje());
				this.objetoContratoCobranca
						.setDataUltimaAtualizacao(this.objetoContratoCobranca.getPedidoPreLaudoData());
				this.objetoContratoCobranca.setPedidoPreLaudoUsuario(getNomeUsuarioLogado());
			}
		}

		if (!this.objetoContratoCobranca.isPedidoLaudoPajuComercial()) {
			this.objetoContratoCobranca.setPedidoLaudoPajuComercialData(null);
			this.objetoContratoCobranca.setPedidoLaudoPajuComercialUsuario(null);

		} else {
			if (this.objetoContratoCobranca.getPedidoLaudoPajuComercialData() == null) {
				this.objetoContratoCobranca.setStatus("Pendente");
				this.objetoContratoCobranca.setPedidoLaudoPajuComercialData(DateUtil.gerarDataHoje());
				this.objetoContratoCobranca
						.setDataUltimaAtualizacao(this.objetoContratoCobranca.getPedidoLaudoPajuComercialData());
				this.objetoContratoCobranca.setPedidoLaudoPajuComercialUsuario(getNomeUsuarioLogado());
			}
		}

		if (!this.objetoContratoCobranca.isPedidoLaudo()) {
			this.objetoContratoCobranca.setPedidoLaudoData(null);
			this.objetoContratoCobranca.setPedidoLaudoUsuario(null);

		} else {
			if (this.objetoContratoCobranca.getPedidoLaudoData() == null) {
				this.objetoContratoCobranca.setStatus("Pendente");
				this.objetoContratoCobranca.setPedidoLaudoData(DateUtil.gerarDataHoje());
				this.objetoContratoCobranca.setDataUltimaAtualizacao(this.objetoContratoCobranca.getPedidoLaudoData());
				this.objetoContratoCobranca.setPedidoLaudoUsuario(getNomeUsuarioLogado());
			}
		}

		if (!this.objetoContratoCobranca.isPagtoLaudoConfirmada()) {
			this.objetoContratoCobranca.setPagtoLaudoConfirmadaData(null);
			this.objetoContratoCobranca.setPagtoLaudoConfirmadaUsuario(null);

		} else {
			if (this.objetoContratoCobranca.getPagtoLaudoConfirmadaData() == null) {
				this.objetoContratoCobranca.setStatus("Pendente");
				this.objetoContratoCobranca.setPagtoLaudoConfirmadaData(DateUtil.gerarDataHoje());
				this.objetoContratoCobranca
						.setDataUltimaAtualizacao(this.objetoContratoCobranca.getPagtoLaudoConfirmadaData());
				this.objetoContratoCobranca.setPagtoLaudoConfirmadaUsuario(getNomeUsuarioLogado());
			}
		}

		if (!this.objetoContratoCobranca.isLaudoRecebido()) {
			this.objetoContratoCobranca.setLaudoRecebidoData(null);
			this.objetoContratoCobranca.setLaudoRecebidoUsuario(null);

		} else {
			if (this.objetoContratoCobranca.getLaudoRecebidoData() == null) {
				this.objetoContratoCobranca.setStatus("Pendente");
				this.objetoContratoCobranca.setLaudoRecebidoData(DateUtil.gerarDataHoje());
				this.objetoContratoCobranca
						.setDataUltimaAtualizacao(this.objetoContratoCobranca.getLaudoRecebidoData());
				this.objetoContratoCobranca.setLaudoRecebidoUsuario(getNomeUsuarioLogado());
			}
		}

		if (!this.objetoContratoCobranca.isPajurFavoravel()) {
			this.objetoContratoCobranca.setPajurFavoravelData(null);
			this.objetoContratoCobranca.setPajurFavoravelUsuario(null);

		} else {
			if (this.objetoContratoCobranca.getPajurFavoravelData() == null) {
				this.objetoContratoCobranca.setStatus("Pendente");
				this.objetoContratoCobranca.setPajurFavoravelData(DateUtil.gerarDataHoje());
				this.objetoContratoCobranca
						.setDataUltimaAtualizacao(this.objetoContratoCobranca.getPajurFavoravelData());
				this.objetoContratoCobranca.setPajurFavoravelUsuario(getNomeUsuarioLogado());
			}
		}

		if (!this.objetoContratoCobranca.isPendenciaLaudoPaju()) {
			this.objetoContratoCobranca.setPendenciaLaudoPajuData(null);
			this.objetoContratoCobranca.setPendenciaLaudoPajuUsuario(null);

		} else {
			if (this.objetoContratoCobranca.getPendenciaLaudoPajuData() == null) {
				this.objetoContratoCobranca.setStatus("Pendente");
				this.objetoContratoCobranca.setPendenciaLaudoPajuData(DateUtil.gerarDataHoje());
				this.objetoContratoCobranca
						.setDataUltimaAtualizacao(this.objetoContratoCobranca.getPendenciaLaudoPajuData());
				this.objetoContratoCobranca.setPendenciaLaudoPajuUsuario(getNomeUsuarioLogado());
			}
		}

		if (!this.objetoContratoCobranca.isAnaliseComercial()) {
			this.objetoContratoCobranca.setAnaliseComercialData(null);
			this.objetoContratoCobranca.setAnaliseComercialUsuario(null);
		} else {
			if (this.objetoContratoCobranca.getAnaliseComercialData() == null) {
				this.objetoContratoCobranca.setComentarioJuridicoPendente(false);
				this.objetoContratoCobranca.setStatus("Pendente");
				this.objetoContratoCobranca.setAnaliseComercialData(DateUtil.gerarDataHoje());
				this.objetoContratoCobranca
						.setDataUltimaAtualizacao(this.objetoContratoCobranca.getAnaliseComercialData());
				this.objetoContratoCobranca.setAnaliseComercialUsuario(getNomeUsuarioLogado());
			}
		}

		if (!this.objetoContratoCobranca.isComentarioJuridicoEsteira()) {
			this.objetoContratoCobranca.setComentarioJuridicoEsteiraData(null);
			this.objetoContratoCobranca.setComentarioJuridicoEsteiraUsuario(null);
		} else {
			if (this.objetoContratoCobranca.getComentarioJuridicoEsteiraData() == null) {
				this.objetoContratoCobranca.setStatus("Pendente");
				this.objetoContratoCobranca.setComentarioJuridicoEsteiraData(DateUtil.gerarDataHoje());
				this.objetoContratoCobranca
						.setDataUltimaAtualizacao(this.objetoContratoCobranca.getComentarioJuridicoEsteiraData());
				this.objetoContratoCobranca.setComentarioJuridicoEsteiraUsuario(getNomeUsuarioLogado());
			}
		}

		if (!this.objetoContratoCobranca.isComentarioJuridicoInterno()) {
			this.objetoContratoCobranca.setComentarioJuridicoInternoData(null);
			this.objetoContratoCobranca.setComentarioJuridicoInternoUsuario(null);
		} else {
			if (this.objetoContratoCobranca.getComentarioJuridicoInternoData() == null) {
				this.objetoContratoCobranca.setStatus("Pendente");
				this.objetoContratoCobranca.setComentarioJuridicoInternoData(DateUtil.gerarDataHoje());
				this.objetoContratoCobranca
						.setDataUltimaAtualizacao(this.objetoContratoCobranca.getComentarioJuridicoInternoData());
				this.objetoContratoCobranca.setComentarioJuridicoInternoUsuario(getNomeUsuarioLogado());
			}
		}

		if (!this.objetoContratoCobranca.isPreAprovadoComite()) {
			this.objetoContratoCobranca.setPreAprovadoComiteData(null);
			this.objetoContratoCobranca.setPreAprovadoComiteUsuario(null);
		} else {
			if (this.objetoContratoCobranca.getPreAprovadoComiteData() == null) {
				this.objetoContratoCobranca.setStatus("Pendente");
				this.objetoContratoCobranca.setPreAprovadoComiteData(DateUtil.gerarDataHoje());
				this.objetoContratoCobranca
						.setDataUltimaAtualizacao(this.objetoContratoCobranca.getPreAprovadoComiteData());
				this.objetoContratoCobranca.setPreAprovadoComiteUsuario(getNomeUsuarioLogado());
			}
		}

		if (!this.objetoContratoCobranca.isDocumentosComite()) {
			this.objetoContratoCobranca.setDocumentosComiteData(null);
			this.objetoContratoCobranca.setDocumentosComiteUsuario(null);

		} else {
			if (this.objetoContratoCobranca.getDocumentosComiteData() == null) {
				this.objetoContratoCobranca.setStatus("Pendente");
				this.objetoContratoCobranca.setDocumentosComiteData(DateUtil.gerarDataHoje());
				this.objetoContratoCobranca
						.setDataUltimaAtualizacao(this.objetoContratoCobranca.getDocumentosComiteData());
				this.objetoContratoCobranca.setDocumentosComiteUsuario(getNomeUsuarioLogado());
			}
		}

		if (!this.objetoContratoCobranca.isAprovadoComite()) {
			this.objetoContratoCobranca.setAprovadoComiteData(null);
			this.objetoContratoCobranca.setAprovadoComiteUsuario(null);

		} else {
			if (this.objetoContratoCobranca.getAprovadoComiteData() == null) {
				this.objetoContratoCobranca.setStatus("Pendente");
				this.objetoContratoCobranca.setAprovadoComiteData(DateUtil.gerarDataHoje());
				this.objetoContratoCobranca
						.setDataUltimaAtualizacao(this.objetoContratoCobranca.getAprovadoComiteData());
				concluirComite(this.objetoContratoCobranca);
				this.objetoContratoCobranca.setAprovadoComiteUsuario(getNomeUsuarioLogado());
			}
		}

		if (!this.objetoContratoCobranca.isOkCliente()) {
			this.objetoContratoCobranca.setOkClienteData(null);
			this.objetoContratoCobranca.setOkClienteUsuario(null);
		} else {
			if (this.objetoContratoCobranca.getOkClienteData() == null) {
				this.objetoContratoCobranca.setStatus("Pendente");
				this.objetoContratoCobranca.setOkClienteData(DateUtil.gerarDataHoje());
				this.objetoContratoCobranca.setDataUltimaAtualizacao(this.objetoContratoCobranca.getOkClienteData());
				this.objetoContratoCobranca.setOkClienteUsuario(getNomeUsuarioLogado());
			}
		}

		if (!this.objetoContratoCobranca.isDocumentosCompletos()) {
			this.objetoContratoCobranca.setDocumentosCompletosData(null);
			this.objetoContratoCobranca.setDocumentosCompletosUsuario(null);

		} else {
			if (this.objetoContratoCobranca.getDocumentosCompletosData() == null) {
				this.objetoContratoCobranca.setStatus("Pendente");
				this.objetoContratoCobranca.setDocumentosCompletosData(DateUtil.gerarDataHoje());
				this.objetoContratoCobranca
						.setDataUltimaAtualizacao(this.objetoContratoCobranca.getDocumentosCompletosData());
				this.objetoContratoCobranca.setDocumentosCompletosUsuario(getNomeUsuarioLogado());
			}
		}

		if (!this.objetoContratoCobranca.isReanalisePronta()) {
			this.objetoContratoCobranca.setReanaliseProntaData(null);
			this.objetoContratoCobranca.setReanaliseProntaUsuario(null);

		} else {
			if (this.objetoContratoCobranca.getReanaliseProntaData() == null) {
				this.objetoContratoCobranca.setStatus("Pendente");
				this.objetoContratoCobranca.setReanaliseProntaData(DateUtil.gerarDataHoje());
				this.objetoContratoCobranca
						.setDataUltimaAtualizacao(this.objetoContratoCobranca.getReanaliseProntaData());
				this.objetoContratoCobranca.setReanaliseProntaUsuario(getNomeUsuarioLogado());
			}
		}

		if (!this.objetoContratoCobranca.isPajuAtualizado()) {
			this.objetoContratoCobranca.setPajuAtualizadoData(null);
			this.objetoContratoCobranca.setPajuAtualizadoUsuario(null);

		} else {
			if (this.objetoContratoCobranca.getPajuAtualizadoData() == null) {
				this.objetoContratoCobranca.setStatus("Pendente");
				this.objetoContratoCobranca.setPajuAtualizadoData(DateUtil.gerarDataHoje());
				this.objetoContratoCobranca
						.setDataUltimaAtualizacao(this.objetoContratoCobranca.getPajuAtualizadoData());
				this.objetoContratoCobranca.setPajuAtualizadoUsuario(getNomeUsuarioLogado());
				this.objetoContratoCobranca.setDataPajuComentado(this.objetoContratoCobranca.getPajuAtualizadoData());
			}
		}

		if (!this.objetoContratoCobranca.isReanaliseJuridico()) {
			this.objetoContratoCobranca.setReanaliseJuridicoData(null);
			this.objetoContratoCobranca.setReanaliseJuridicoUsuario(null);

		} else {
			if (this.objetoContratoCobranca.getReanaliseJuridicoData() == null) {
				this.objetoContratoCobranca.setStatus("Pendente");
				this.objetoContratoCobranca.setReanaliseJuridicoData(DateUtil.gerarDataHoje());
				this.objetoContratoCobranca
						.setDataUltimaAtualizacao(this.objetoContratoCobranca.getReanaliseJuridicoData());
				this.objetoContratoCobranca.setReanaliseJuridicoUsuario(getNomeUsuarioLogado());
				this.objetoContratoCobranca.setReanalise(false);
			}
		}

		if (!this.objetoContratoCobranca.isCertificadoEmitido()) {
			this.objetoContratoCobranca.setCertificadoEmitidoData(null);
			this.objetoContratoCobranca.setCertificadoEmitidoUsuario(null);

		} else {
			if (this.objetoContratoCobranca.getCertificadoEmitidoData() == null) {
				this.objetoContratoCobranca.setStatus("Pendente");
				this.objetoContratoCobranca.setCertificadoEmitidoData(DateUtil.gerarDataHoje());
				this.objetoContratoCobranca
						.setDataUltimaAtualizacao(this.objetoContratoCobranca.getCertificadoEmitidoData());
				this.objetoContratoCobranca.setCertificadoEmitidoUsuario(getNomeUsuarioLogado());
			}
		}

		if (!this.objetoContratoCobranca.isCcbPronta()) {
			this.objetoContratoCobranca.setCcbProntaData(null);
			this.objetoContratoCobranca.setCcbProntaUsuario(null);

		} else {
			if (this.objetoContratoCobranca.getCcbProntaData() == null) {
				this.objetoContratoCobranca.setStatus("Pendente");
				this.objetoContratoCobranca.setCcbProntaData(DateUtil.gerarDataHoje());
				this.objetoContratoCobranca.setDataUltimaAtualizacao(this.objetoContratoCobranca.getCcbProntaData());
				this.objetoContratoCobranca.setCcbProntaUsuario(getNomeUsuarioLogado());
			}
		}

		if (!this.objetoContratoCobranca.isContratoConferido()) {
			this.objetoContratoCobranca.setContratoConferidoData(null);
			this.objetoContratoCobranca.setContratoConferidoUsuario(null);
		} else {
			if (this.objetoContratoCobranca.getContratoConferidoData() == null) {
				this.objetoContratoCobranca.setStatus("Pendente");
				this.objetoContratoCobranca.setContratoConferidoData(DateUtil.gerarDataHoje());
				this.objetoContratoCobranca
						.setDataUltimaAtualizacao(this.objetoContratoCobranca.getContratoConferidoData());
				this.objetoContratoCobranca.setContratoConferidoUsuario(getNomeUsuarioLogado());
			}
		}

		if (this.objetoContratoCobranca.isAgAssinatura()) {
			this.objetoContratoCobranca.setAgAssinaturaData(null);
			this.objetoContratoCobranca.setAgAssinaturaUsuario(null);
		} else {
			if (this.objetoContratoCobranca.getAgAssinaturaData() == null) {
				this.objetoContratoCobranca.setStatus("Pendente");
				this.objetoContratoCobranca.setAgAssinaturaData(DateUtil.gerarDataHoje());
				this.objetoContratoCobranca.setDataUltimaAtualizacao(this.objetoContratoCobranca.getAgAssinaturaData());
				this.objetoContratoCobranca.setAgAssinaturaUsuario(getNomeUsuarioLogado());
			}
		}

		if (this.objetoContratoCobranca.isAgEnvioCartorio()) {
			this.objetoContratoCobranca.setAgEnvioCartorioData(null);
			this.objetoContratoCobranca.setAgEnvioCartorioUsuario(null);
		} else {
			if (this.objetoContratoCobranca.getAgEnvioCartorioData() == null) {
				this.objetoContratoCobranca.setStatus("Pendente");
				this.objetoContratoCobranca.setAgEnvioCartorioData(DateUtil.gerarDataHoje());
				this.objetoContratoCobranca.setAgEnvioCartorioUsuario(getNomeUsuarioLogado());
				this.objetoContratoCobranca
						.setDataUltimaAtualizacao(this.objetoContratoCobranca.getAgEnvioCartorioData());
				this.objetoContratoCobranca
						.setNotificacaoCartorioData(DateUtil.adicionarDias(DateUtil.gerarDataHoje(), 5));
			}
		}
		
		if (!this.objetoContratoCobranca.isPendenciaResolvidaCartorio()) {
			this.objetoContratoCobranca.setPendenciaResolvidaCartorioData(null);
			this.objetoContratoCobranca.setPendenciaResolvidaCartorioUsuario(null);
		} else {
			if (this.objetoContratoCobranca.getPendenciaResolvidaCartorioData() == null) {
				this.objetoContratoCobranca.setStatus("Pendente");
				this.objetoContratoCobranca.setPendenciaResolvidaCartorioData(DateUtil.gerarDataHoje());
				this.objetoContratoCobranca.setPendenciaResolvidaCartorioUsuario(getNomeUsuarioLogado());
				this.objetoContratoCobranca
						.setDataUltimaAtualizacao(this.objetoContratoCobranca.getPendenciaResolvidaCartorioData());
				this.objetoContratoCobranca.setPendenciaExternaCartorio(false);
			}
		}
		
		if (!this.objetoContratoCobranca.isResolucaoExigenciaCartorio()) {
			this.objetoContratoCobranca.setResolucaoExigenciaCartorioData(null);
			this.objetoContratoCobranca.setResolucaoExigenciaCartorioUsuario(null);
		} else {
			if (this.objetoContratoCobranca.getResolucaoExigenciaCartorioData() == null) {
				this.objetoContratoCobranca.setStatus("Pendente");
				this.objetoContratoCobranca.setResolucaoExigenciaCartorioData(DateUtil.gerarDataHoje());
				this.objetoContratoCobranca.setResolucaoExigenciaCartorioUsuario(getNomeUsuarioLogado());
				this.objetoContratoCobranca
						.setDataUltimaAtualizacao(this.objetoContratoCobranca.getResolucaoExigenciaCartorioData());
			}
		}
		
		
		if (this.objetoContratoCobranca.isAgRegistro()) {
			this.objetoContratoCobranca.setAgRegistroData(null);
			this.objetoContratoCobranca.setAgRegistroUsuario(null);
		} else {
			if (this.objetoContratoCobranca.getAgRegistroData() == null) {
				this.objetoContratoCobranca.setStatus("Pendente");
				this.objetoContratoCobranca.setAgRegistroData(DateUtil.gerarDataHoje());
				this.objetoContratoCobranca.setDataUltimaAtualizacao(this.objetoContratoCobranca.getAgRegistroData());
				this.objetoContratoCobranca.setAgRegistroUsuario(getNomeUsuarioLogado());

				this.objetoContratoCobranca.setStatusContrato("Aprovado");
			}
		}

		if (!this.objetoContratoCobranca.isOperacaoPaga()) {
			this.objetoContratoCobranca.setOperacaoPagaData(null);
			this.objetoContratoCobranca.setOperacaoPagaUsuario(null);
		} else {
			if (this.objetoContratoCobranca.getOperacaoPagaData() == null) {
				this.objetoContratoCobranca.setOperacaoPagaData(DateUtil.gerarDataHoje());
				this.objetoContratoCobranca.setDataUltimaAtualizacao(this.objetoContratoCobranca.getOperacaoPagaData());
				this.objetoContratoCobranca.setOperacaoPagaUsuario(getNomeUsuarioLogado());
			}
		}

		this.objetoContratoCobranca.setStatusContratoData(DateUtil.gerarDataHoje());
		this.objetoContratoCobranca.setStatusContratoUsuario(getNomeUsuarioLogado());
		this.objetoContratoCobranca.setStatus("Pendente");

		if (this.objetoContratoCobranca.getStatusContrato().equals("Baixado")) {
			this.objetoContratoCobranca.setStatus("Baixado");
			this.objetoContratoCobranca.setReprovado(false);
			this.objetoContratoCobranca.setAprovado(false);
			this.objetoContratoCobranca.setReprovadoData(DateUtil.gerarDataHoje());
			this.objetoContratoCobranca.setReprovadoUsuario(getNomeUsuarioLogado());
		}

		if (!this.objetoContratoCobranca.getStatusContrato().equals("Em Análise")) {
			if (this.objetoContratoCobranca.getStatusContrato().equals("Aprovado")) {
				this.objetoContratoCobranca.setStatus("Aprovado");
				this.objetoContratoCobranca.setAprovado(true);
				this.objetoContratoCobranca.setAprovadoData(DateUtil.gerarDataHoje());
				this.objetoContratoCobranca.setAprovadoUsuario(getNomeUsuarioLogado());
			} else {
				if (this.objetoContratoCobranca.getStatusContrato().equals("Reprovado")) {
					this.objetoContratoCobranca.setStatus("Reprovado");
					this.objetoContratoCobranca.setReprovado(true);
					this.objetoContratoCobranca.setReprovadoData(DateUtil.gerarDataHoje());
					this.objetoContratoCobranca.setReprovadoUsuario(getNomeUsuarioLogado());
				} else {
					this.objetoContratoCobranca.setAprovado(false);
					this.objetoContratoCobranca.setAprovadoData(null);
					this.objetoContratoCobranca.setAprovadoUsuario("");
				}
			}
		}
	}

	public String voltarContratoParaComite() {
		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();
		FacesContext context = FacesContext.getCurrentInstance();
		this.objetoContratoCobranca.setAprovadoComite(false);
		this.objetoContratoCobranca.setDocumentosCompletos(false);
		this.objetoContratoCobranca.setCcbPronta(false);
		this.objetoContratoCobranca.setContratoConferido(false);
		this.objetoContratoCobranca.setOkCliente(false);
		if (!objetoContratoCobranca.getListaAnaliseComite().isEmpty()) {
			for (AnaliseComite comite : objetoContratoCobranca.getListaAnaliseComite()) {
				comite.setVotoAnaliseComite("");
			}
		}
		updateCheckList();
		this.objetoContratoCobranca.populaStatusEsteira(getUsuarioLogadoNull());
		contratoCobrancaDao.merge(this.objetoContratoCobranca);
		context.addMessage(null,
				new FacesMessage(FacesMessage.SEVERITY_INFO,
						"Contrato Cobrança: Pré-Contrato editado com sucesso! (Contrato: "
								+ this.objetoContratoCobranca.getNumeroContrato() + ")!",
						""));
		return geraConsultaContratosPorStatus("Ag. Comite");
	}

	public String voltarContratoParaOkCliente() {
		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();
		FacesContext context = FacesContext.getCurrentInstance();
//		this.objetoContratoCobranca.setAprovadoComite(false);
//		this.objetoContratoCobranca.setDocumentosCompletos(false);
//		this.objetoContratoCobranca.setCcbPronta(false);
//		this.objetoContratoCobranca.setContratoConferido(false);

		this.objetoContratoCobranca.setOkCliente(false);

//		if (!objetoContratoCobranca.getListaAnaliseComite().isEmpty()) {
//			for (AnaliseComite comite : objetoContratoCobranca.getListaAnaliseComite()) {
//				comite.setVotoAnaliseComite("");
//			}
//		}
		updateCheckList();
		this.objetoContratoCobranca.populaStatusEsteira(getUsuarioLogadoNull());
		contratoCobrancaDao.merge(this.objetoContratoCobranca);
		context.addMessage(null,
				new FacesMessage(FacesMessage.SEVERITY_INFO,
						"Contrato Cobrança: Pré-Contrato editado com sucesso! (Contrato: "
								+ this.objetoContratoCobranca.getNumeroContrato() + ")!",
						""));
		return geraConsultaContratosPorStatus("Ag. DOC");
	}

	public String voltarAnaliseComercial() {
		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();
		FacesContext context = FacesContext.getCurrentInstance();
		this.objetoContratoCobranca.setAnaliseComercial(false);
		this.objetoContratoCobranca.setComentarioJuridicoPendente(true);
		updateCheckList();
		this.objetoContratoCobranca.populaStatusEsteira(getUsuarioLogadoNull());
		contratoCobrancaDao.merge(this.objetoContratoCobranca);
		context.addMessage(null,
				new FacesMessage(FacesMessage.SEVERITY_INFO,
						"Contrato Cobrança: Pré-Contrato editado com sucesso! (Contrato: "
								+ this.objetoContratoCobranca.getNumeroContrato() + ")!",
						""));
		return geraConsultaContratosPorStatus("Comentario Jurídico");
	}

	public String enviarPreComiteJuridico() {
		this.objetoContratoCobranca.setComentarioJuridicoEsteira(true);
		return editPreContratoPorStatus();
	}

	public String voltarContratoParaDocumentosComite() {
		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();
		FacesContext context = FacesContext.getCurrentInstance();
		this.objetoContratoCobranca.setDocumentosComite(false);
		this.objetoAnaliseComite.setDataComite(DateUtil.gerarDataHoje());
		this.objetoAnaliseComite.setUsuarioComite(getNomeUsuarioLogado());
		this.objetoContratoCobranca.getListaAnaliseComite().add(this.objetoAnaliseComite);
		this.objetoAnaliseComite = new AnaliseComite();
		concluirComentarioComite(objetoContratoCobranca);
		updateCheckList();
		this.objetoContratoCobranca.populaStatusEsteira(getUsuarioLogadoNull());
		contratoCobrancaDao.merge(this.objetoContratoCobranca);
		context.addMessage(null,
				new FacesMessage(FacesMessage.SEVERITY_INFO,
						"Contrato Cobrança: Pré-Contrato editado com sucesso! (Contrato: "
								+ this.objetoContratoCobranca.getNumeroContrato() + ")!",
						""));
		return geraConsultaContratosPorStatus("Ag. Comite");
	}

	public String voltarContratoParaPreComite() {
		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();
		FacesContext context = FacesContext.getCurrentInstance();
		this.objetoContratoCobranca.setPreAprovadoComite(false);
		concluirComentarioComite(objetoContratoCobranca);
		updateCheckList();
		this.objetoContratoCobranca.populaStatusEsteira(getUsuarioLogadoNull());
		contratoCobrancaDao.merge(this.objetoContratoCobranca);
		context.addMessage(null,
				new FacesMessage(FacesMessage.SEVERITY_INFO,
						"Contrato Cobrança: Pré-Contrato editado com sucesso! (Contrato: "
								+ this.objetoContratoCobranca.getNumeroContrato() + ")!",
						""));
		return geraConsultaContratosPorStatus("Ag. Comite");
	}

	public String voltarContratoParaAnalisePreAprovada() {
		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();
		FacesContext context = FacesContext.getCurrentInstance();
		this.objetoContratoCobranca.setPedidoPreLaudoComercial(false);
		this.objetoContratoCobranca.setPedidoPreLaudo(false);
		this.objetoContratoCobranca.setPedidoLaudoPajuComercial(false);
		this.objetoContratoCobranca.setPedidoPajuComercial(false);
		this.objetoContratoCobranca.setPedidoLaudo(false);
		this.objetoContratoCobranca.setPagtoLaudoConfirmada(false);
		updateCheckList();
		this.objetoContratoCobranca.populaStatusEsteira(getUsuarioLogadoNull());
		contratoCobrancaDao.merge(this.objetoContratoCobranca);
		context.addMessage(null,
				new FacesMessage(FacesMessage.SEVERITY_INFO,
						"Contrato Cobrança: Pré-Contrato editado com sucesso! (Contrato: "
								+ this.objetoContratoCobranca.getNumeroContrato() + ")!",
						""));
		return geraConsultaContratosPorStatus("Análise Aprovada");
	}

	public String voltarContratoParaPagamentoNoFinal() {
		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();
		FacesContext context = FacesContext.getCurrentInstance();
		this.objetoContratoCobranca.setPedidoPreLaudoComercial(false);
		this.objetoContratoCobranca.setPedidoPreLaudo(false);
		this.objetoContratoCobranca.setPedidoLaudoPajuComercial(false);
		this.objetoContratoCobranca.setPedidoLaudo(false);
		this.objetoContratoCobranca.setPagtoLaudoConfirmada(false);
		this.objetoContratoCobranca.setFormaDePagamentoLaudoPAJU("No final");
		updateCheckList();
		this.objetoContratoCobranca.populaStatusEsteira(getUsuarioLogadoNull());
		contratoCobrancaDao.merge(this.objetoContratoCobranca);
		context.addMessage(null,
				new FacesMessage(FacesMessage.SEVERITY_INFO,
						"Contrato Cobrança: Pré-Contrato editado com sucesso! (Contrato: "
								+ this.objetoContratoCobranca.getNumeroContrato() + ")!",
						""));
		return geraConsultaContratosPorStatus("Análise Aprovada");
	}

	public String voltarContratoParaPagamentoAntecipado() {
		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();
		FacesContext context = FacesContext.getCurrentInstance();
		this.objetoContratoCobranca.setPedidoPreLaudoComercial(false);
		this.objetoContratoCobranca.setPedidoPreLaudo(false);
		this.objetoContratoCobranca.setPedidoLaudoPajuComercial(true);
		this.objetoContratoCobranca.setPedidoLaudo(false);
		this.objetoContratoCobranca.setPagtoLaudoConfirmada(false);
		this.objetoContratoCobranca.setFormaDePagamentoLaudoPAJU("Antecipado");
		updateCheckList();
		this.objetoContratoCobranca.populaStatusEsteira(getUsuarioLogadoNull());
		contratoCobrancaDao.merge(this.objetoContratoCobranca);
		context.addMessage(null,
				new FacesMessage(FacesMessage.SEVERITY_INFO,
						"Contrato Cobrança: Pré-Contrato editado com sucesso! (Contrato: "
								+ this.objetoContratoCobranca.getNumeroContrato() + ")!",
						""));
		return geraConsultaContratosPorStatus("Análise Aprovada");
	}
	
	public String enviarParaPendenciaExterna() {
		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();
		FacesContext context = FacesContext.getCurrentInstance();
		this.objetoContratoCobranca.setPendenciaExternaCartorio(true);
		this.objetoContratoCobranca.setAgEnvioCartorio(false);
		updateCheckList();
		this.objetoContratoCobranca.populaStatusEsteira(getUsuarioLogadoNull());
		contratoCobrancaDao.merge(this.objetoContratoCobranca);
		context.addMessage(null,
				new FacesMessage(FacesMessage.SEVERITY_INFO,
						"Contrato Cobrança: Pré-Contrato editado com sucesso! (Contrato: "
								+ this.objetoContratoCobranca.getNumeroContrato() + ")!",
						""));
		return geraConsultaContratosPorStatus("Ag. Envio Cartorio");
	}
	
	public String enviarParaExigenciasPagamentos() {
		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();
		FacesContext context = FacesContext.getCurrentInstance();
		this.objetoContratoCobranca.setPendenciaExternaCartorio(false);
		this.objetoContratoCobranca.setAgEnvioCartorio(false);
		this.objetoContratoCobranca.setPendenciaResolvidaCartorio(false);
		updateCheckList();
		this.objetoContratoCobranca.populaStatusEsteira(getUsuarioLogadoNull());
		contratoCobrancaDao.merge(this.objetoContratoCobranca);
		context.addMessage(null,
				new FacesMessage(FacesMessage.SEVERITY_INFO,
						"Contrato Cobrança: Pré-Contrato editado com sucesso! (Contrato: "
								+ this.objetoContratoCobranca.getNumeroContrato() + ")!",
						""));
		return geraConsultaContratosPorStatus("Ag. Envio Cartorio");
	}
	
	

	public void clearEnviarLeadParaComercial() {
		ResponsavelDao rdao = new ResponsavelDao();
		clearResponsavel();
		listResponsavel = rdao.getResponsaveisLead();
	}

	public String enviarLeadParaComercial() {
		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();
		ResponsavelDao rDao = new ResponsavelDao();
		FacesContext context = FacesContext.getCurrentInstance();
		this.objetoContratoCobranca = getContratoById(this.objetoContratoCobranca.getId());
		if (CommonsUtil.semValor(selectedResponsavel)) {
			if (context != null) {
				context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR, "Comercial não encontrado", ""));
			}
			return null;
		}
		Responsavel resp = new Responsavel();
		resp = rDao.findById(selectedResponsavel.getId());
		if (CommonsUtil.semValor(resp)) {
			if (context != null) {
				context.addMessage(null,
						new FacesMessage(FacesMessage.SEVERITY_ERROR, "Erro ao buscar comercial, tente novamente", ""));
			}
			return null;
		}
		this.objetoContratoCobranca.setResponsavel(resp);
		this.objetoContratoCobranca.populaStatusEsteira(getUsuarioLogadoNull());
		contratoCobrancaDao.merge(this.objetoContratoCobranca);
		clearResponsavel();
		this.updateResponsavel = "";
		try {
			if (!CommonsUtil.semValor(this.objetoContratoCobranca.getResponsavel().getTelCelular())) {
				// Mensagem PAJU RECEBIDO
				TakeBlipMB takeBlipMB = new TakeBlipMB();
				takeBlipMB.sendWhatsAppMessage(this.objetoContratoCobranca.getResponsavel(),
						"recebimento_lead_comercial", this.objetoContratoCobranca.getPagador().getNome(),
						this.objetoContratoCobranca.getNumeroContrato(), "", "");
			}

		} catch (Exception e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
			context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR, "WhatsApp: " + e, ""));
		}
		context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_INFO,
				"Lead editado com sucesso! (Contrato: " + this.objetoContratoCobranca.getNumeroContrato() + ")!", ""));
		return "/Atendimento/Cobranca/ContratoCobrancaConsultarLeads.xhtml";
	}

	public void geraContasPagarRemuneracao(ContratoCobranca contrato) {
		ResponsavelDao rDao = new ResponsavelDao();
		Responsavel responsavel = new Responsavel();

		if (contrato.getResponsavel() != null) {
			// nivel 1 - pega responsavel contrato
			responsavel = contrato.getResponsavel();
			geraContasPagarRemuneracaoResponsavel(contrato, responsavel);

			if (responsavel.getDonoResponsavel() != null) {
				// nivel 2 - pega responsavel hierarquico
				responsavel = responsavel.getDonoResponsavel();
				geraContasPagarRemuneracaoResponsavel(contrato, responsavel);

				if (responsavel.getDonoResponsavel() != null) {
					// nivel 3 - pega responsavel hierarquico
					responsavel = responsavel.getDonoResponsavel();
					geraContasPagarRemuneracaoResponsavel(contrato, responsavel);

					if (responsavel.getDonoResponsavel() != null) {
						// nivel 4 - pega responsavel hierarquico
						responsavel = responsavel.getDonoResponsavel();
						geraContasPagarRemuneracaoResponsavel(contrato, responsavel);

						if (responsavel.getDonoResponsavel() != null) {
							// nivel 5 - pega responsavel hierarquico
							responsavel = responsavel.getDonoResponsavel();
							geraContasPagarRemuneracaoResponsavel(contrato, responsavel);

							if (responsavel.getDonoResponsavel() != null) {
								// nivel 6 - pega responsavel hierarquico
								responsavel = responsavel.getDonoResponsavel();
								geraContasPagarRemuneracaoResponsavel(contrato, responsavel);

								if (responsavel.getDonoResponsavel() != null) {
									// nivel 7 - pega responsavel hierarquico
									responsavel = responsavel.getDonoResponsavel();
									geraContasPagarRemuneracaoResponsavel(contrato, responsavel);

									if (responsavel.getDonoResponsavel() != null) {
										// nivel 8 - pega responsavel hierarquico
										responsavel = responsavel.getDonoResponsavel();
										geraContasPagarRemuneracaoResponsavel(contrato, responsavel);

										if (responsavel.getDonoResponsavel() != null) {
											// nivel 9 - pega responsavel hierarquico
											responsavel = responsavel.getDonoResponsavel();
											geraContasPagarRemuneracaoResponsavel(contrato, responsavel);

											if (responsavel.getDonoResponsavel() != null) {
												// nivel 10 - pega responsavel hierarquico
												responsavel = responsavel.getDonoResponsavel();
												geraContasPagarRemuneracaoResponsavel(contrato, responsavel);
											}
										}
									}
								}
							}
						}
					}
				}
			}
		}
	}

	public void geraContasPagarRemuneracaoResponsavel(ContratoCobranca contrato, Responsavel responsavel) {
		BigDecimal valorPagar = BigDecimal.ZERO;
		BigDecimal taxaRemuneracao = BigDecimal.ZERO;

		if (responsavel.getTaxaRemuneracao() != null && contrato.getValorCCB() != null) {
			if (responsavel.getTaxaRemuneracao().compareTo(BigDecimal.ZERO) > 0) {
				taxaRemuneracao = responsavel.getTaxaRemuneracao().divide(BigDecimal.valueOf(100));
				valorPagar = contrato.getValorCCB().multiply(taxaRemuneracao);

				ContasPagarDao cDao = new ContasPagarDao();
				ContasPagar contaPagar = new ContasPagar();
				contaPagar.setTipoDespesa("E");
				contaPagar.setResponsavel(responsavel);
				contaPagar.setDataVencimento(getDataComMais15Dias(DateUtil.gerarDataHoje()));
				contaPagar.setNumeroDocumento(contrato.getNumeroContrato());
				contaPagar.setDescricao("Pagamento de remuneração por aprovação de contrato.");
				contaPagar.setValor(valorPagar);
				cDao.create(contaPagar);
			}
		}

	}

	public String downloadModeloPaju() throws SiscoatException {
		PajuService pajuService = new PajuService();
		String arquivoWord = "ModeloParecerJuridico.docx";
		byte[] modeloPaju = pajuService.generateModeloPaju(this.objetoContratoCobranca, arquivoWord);
		final GeradorRelatorioDownloadCliente gerador = new GeradorRelatorioDownloadCliente(
				FacesContext.getCurrentInstance());
		String identificacao = objetoContratoCobranca.getNumeroContrato();
		if (CommonsUtil.semValor(identificacao))
			gerador.open("Galleria Bank - ModeloPAJU.docx");
		else {
			String nomeArquivoDownload = String.format("Galleria Bank - ModeloPAJU %s.docx", "");
			gerador.open(nomeArquivoDownload);
		}
		gerador.feed(modeloPaju);
		gerador.close();

		return "";
	}

	public String downloadModeloPaju1() throws SiscoatException {
		PajuService pajuService = new PajuService();
		String arquivoWord = "ModeloParecerJuridico.docx";
		byte[] modeloPaju = pajuService.generateModeloPaju(this.objetoContratoCobranca, arquivoWord);
		final GeradorRelatorioDownloadCliente gerador = new GeradorRelatorioDownloadCliente(
				FacesContext.getCurrentInstance());
		String identificacao = objetoContratoCobranca.getNumeroContrato();
		if (CommonsUtil.semValor(identificacao))
			gerador.open("Galleria Bank - ModeloPAJU.docx");
		else
			gerador.open(String.format("Galleria Bank - ModeloPAJU %s.docx", identificacao));
		gerador.feed(modeloPaju);
		gerador.close();

		return "";
	}

	public StreamedContent downloadPreAprovadoPDF(long idContrato) throws JRException, IOException {

		JasperPrint jp = null;

		jp = geraPDFPreAprovacao(idContrato);

		ContratoCobrancaDao cDao = new ContratoCobrancaDao();
		ContratoCobranca con = cDao.findById(idContrato);

		final GeradorRelatorioDownloadCliente gerador = new GeradorRelatorioDownloadCliente(
				FacesContext.getCurrentInstance());

		SimpleDateFormat sdf = new SimpleDateFormat("ddMMyyyy");

		String nomeSemvirgula = con.getPagador().getNome();
		if (nomeSemvirgula.contains(",")) {
			nomeSemvirgula = nomeSemvirgula.replace(",", "");
		}

		if (nomeSemvirgula.contains("/")) {
			nomeSemvirgula = nomeSemvirgula.replace("/", "");
		}

		if (nomeSemvirgula.contains(".")) {
			nomeSemvirgula = nomeSemvirgula.replace(".", "");
		}

		gerador.open("Galleria Bank - " + nomeSemvirgula + ".pdf");

		gerador.feed(jp);
		gerador.close();

		return null;
	}

	public JasperPrint geraPDFPreAprovacao(long idContrato) throws JRException, IOException {
		ContratoCobrancaDao cDao = new ContratoCobrancaDao();
		final ReportUtil ReportUtil = new ReportUtil();
		JasperReport rptSimulacao = ReportUtil.getRelatorio("PreAprovadoPDF");
		InputStream logoStream = getClass().getResourceAsStream("/resource/imagem pdf preaprovado_PNG.png");

		Map<String, Object> parameters = new HashMap<String, Object>();
		parameters.put("REPORT_LOCALE", new Locale("pt", "BR"));
		parameters.put("IMAGEMFUNDO", IOUtils.toByteArray(logoStream));

		List<PreAprovadoPDF> list = new ArrayList<PreAprovadoPDF>();
		ContratoCobranca con = cDao.findById(idContrato);
		String cpf = "";
		if (!CommonsUtil.semValor(con.getPagador().getCpf())) {
			cpf = con.getPagador().getCpf();
		} else {
			cpf = con.getPagador().getCnpj();
		}
		BigDecimal parcelaPGTO = BigDecimal
				.valueOf(FinanceLib.pmt(con.getTaxaPreAprovadaMaior().divide(BigDecimal.valueOf(100)).doubleValue(), // taxa
						con.getPrazoMaxPreAprovado().intValue(), // prazo
						con.getQuantoPrecisa().negate().doubleValue(), // valor credito - VP
						Double.valueOf("0"), // VF
						false // pagamento no inico
				));
		SimulacaoVO simulador = new SimulacaoVO();
		BigDecimal tarifaIOFDiario = BigDecimal.ZERO;
		BigDecimal tarifaIOFAdicional = SiscoatConstants.TARIFA_IOF_ADICIONAL.divide(BigDecimal.valueOf(100));
		if (con.getPagador().getCpf() != null) {
			tarifaIOFDiario = SiscoatConstants.TARIFA_IOF_PF.divide(BigDecimal.valueOf(100));
			simulador.setTipoPessoa("PF");
		} else {
			tarifaIOFDiario = SiscoatConstants.TARIFA_IOF_PJ.divide(BigDecimal.valueOf(100));
			simulador.setTipoPessoa("PJ");
		}
		simulador.setDataSimulacao(DateUtil.getDataHoje());
		simulador.setTarifaIOFDiario(tarifaIOFDiario);
		simulador.setTarifaIOFAdicional(tarifaIOFAdicional);
		simulador.setSeguroMIP(SiscoatConstants.SEGURO_MIP);
		simulador.setSeguroDFI(SiscoatConstants.SEGURO_DFI);
		simulador.setValorCredito(con.getQuantoPrecisa());
		simulador.setTaxaJuros(con.getTaxaPreAprovadaMaior());
		simulador.setCarencia(BigInteger.ONE);
		simulador.setQtdParcelas(con.getPrazoMaxPreAprovado());
		simulador.setValorImovel(con.getImovel().getValoEstimado());
		simulador.setTipoCalculo("Price");
		simulador.setNaoCalcularDFI(false);
		simulador.setNaoCalcularMIP(false);
		simulador.setNaoCalcularTxAdm(false);
		simulador.calcular();
		parcelaPGTO = simulador.getParcelas().get(2).getValorParcela();

		// BigDecimal valorSeguroDFI =
		// con.getImovel().getValoEstimado().multiply(SiscoatConstants.SEGURO_DFI.divide(BigDecimal.valueOf(100)));
		// BigDecimal txAdm = SiscoatConstants.TAXA_ADM;
		// BigDecimal valorSeguroMIP =
		// con.getQuantoPrecisa().multiply(SiscoatConstants.SEGURO_MIP.divide(BigDecimal.valueOf(100)));
		// parcelaPGTO = parcelaPGTO.add(valorSeguroMIP).add(valorSeguroDFI).add(txAdm);

		BigDecimal rendaMinima = parcelaPGTO.divide(BigDecimal.valueOf(0.3), MathContext.DECIMAL128);
		PreAprovadoPDF documento = new PreAprovadoPDF(con.getPagador().getNome(), con.getDataContrato(),
				con.getNumeroContrato(), cpf, con.getTaxaPreAprovadaMaior(), con.getMatriculaRessalva(),
				con.getImovel().getCidade(), con.getImovel().getNumeroMatricula(), con.getImovel().getEstado(),
				con.getPrazoMaxPreAprovado().toString(), con.getQuantoPrecisa(), con.getImovel().getValoEstimado(),
				parcelaPGTO, rendaMinima);
		list.add(documento);
		final JRBeanCollectionDataSource dataSource = new JRBeanCollectionDataSource(list);
		return JasperFillManager.fillReport(rptSimulacao, parameters, dataSource);
	}

	public StreamedContent downloadAprovadoComitePDF(long idContrato) throws JRException, IOException {
		JasperPrint jp = null;
		RelatoriosService relatorioService = new RelatoriosService();
		jp = relatorioService.geraPDFPAprovadoComite(idContrato);
		ContratoCobrancaDao cDao = new ContratoCobrancaDao();
		ContratoCobranca con = cDao.findById(idContrato);
		final GeradorRelatorioDownloadCliente gerador = new GeradorRelatorioDownloadCliente(
				FacesContext.getCurrentInstance());
		SimpleDateFormat sdf = new SimpleDateFormat("ddMMyyyy");

		String nomeSemvirgula = con.getPagador().getNome();
		if (nomeSemvirgula.contains(",")) {
			nomeSemvirgula = nomeSemvirgula.replace(",", "");
		}

		if (nomeSemvirgula.contains("/")) {
			nomeSemvirgula = nomeSemvirgula.replace("/", "");
		}

		if (nomeSemvirgula.contains(".")) {
			nomeSemvirgula = nomeSemvirgula.replace(".", "");
		}

		gerador.open("Galleria Bank - " + nomeSemvirgula + ".pdf");
		gerador.feed(jp);
		gerador.close();
		return null;
	}

	public Date getDataComMais15Dias(Date dataOriginal) {
		Date dataRetorno = new Date();

		TimeZone zone = TimeZone.getDefault();
		Locale locale = new Locale("pt", "BR");

		Calendar calendar = Calendar.getInstance(zone, locale);

		calendar.setTime(dataOriginal);
		calendar.add(Calendar.DAY_OF_MONTH, 15);
		// calendar.set(Calendar.DAY_OF_MONTH, 14);
		calendar.set(Calendar.HOUR_OF_DAY, 0);
		calendar.set(Calendar.MINUTE, 0);
		calendar.set(Calendar.SECOND, 0);

		return calendar.getTime();
	}

	public User getUsuarioLogado() {
		User usuario = new User();
		if (loginBean != null) {
			List<User> usuarioLogado = new ArrayList<User>();
			UserDao u = new UserDao();

			usuarioLogado = u.findByFilter("login", loginBean.getUsername());

			if (usuarioLogado.size() > 0) {
				usuario = usuarioLogado.get(0);
			}
		}

		return usuario;
	}

	public User getUsuarioLogadoNull() {
		User user = getUsuarioLogado();
		if (user.getId() <= 0) {
			user = null;
		}
		return user;
	}

	public Responsavel getResponsavelUsuarioLogado() {
		User usuario = new User();
		if (loginBean != null) {
			List<User> usuarioLogado = new ArrayList<User>();
			UserDao u = new UserDao();

			usuarioLogado = u.findByFilter("login", loginBean.getUsername());

			if (usuarioLogado.size() > 0) {
				usuario = usuarioLogado.get(0);
			}
		}

		List<Responsavel> responsavel = new ArrayList<Responsavel>();
		ResponsavelDao rDao = new ResponsavelDao();
		responsavel = rDao.findByFilter("codigo", usuario.getCodigoResponsavel());

		if (responsavel.size() > 0) {
			return responsavel.get(0);
		} else {
			return null;
		}
	}

	public String getNomeUsuarioLogado() {
		User usuario = getUsuarioLogado();

		if (usuario.getLogin() != null) {
			if (!usuario.getLogin().equals("")) {
				return usuario.getLogin();
			} else {
				return "";
			}
		} else {
			return "";
		}
	}

	public String deletePreContrato() {
		FacesContext context = FacesContext.getCurrentInstance();
		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();

		contratoCobrancaDao.delete(this.objetoContratoCobranca);

		deleteFiles(this.files);

		context.addMessage(null,
				new FacesMessage(FacesMessage.SEVERITY_INFO,
						"Contrato Cobrança: Pré-Contrato excluído com sucesso! (Contrato: "
								+ this.objetoContratoCobranca.getNumeroContrato() + ")!",
						""));

		return geraConsultaContratosPendentes();
	}

	public void cancelContratoPublico() {
		this.objetoContratoCobranca = new ContratoCobranca();
		this.objetoContratoCobranca = new ContratoCobranca();

		// deleta arquivos caso tenha inserido
		this.deletefiles = (List<FileUploaded>) this.listaArquivos();
		this.deleteFile();
	}

	public void updateRender(int numero) {
		switch (numero) {
		case 2:
			if (!this.renderRecebedor2) {
				this.nomeRecebedor2 = null;
				this.idRecebedor2 = 0;
				this.selectedRecebedor2 = null;
			}
			break;
		case 3:
			if (!this.renderRecebedor3) {
				this.nomeRecebedor3 = null;
				this.idRecebedor3 = 0;
				this.selectedRecebedor3 = null;
			}
			break;
		case 4:
			if (!this.renderRecebedor4) {
				this.nomeRecebedor4 = null;
				this.idRecebedor4 = 0;
				this.selectedRecebedor4 = null;
			}
			break;
		case 5:
			if (!this.renderRecebedor5) {
				this.nomeRecebedor5 = null;
				this.idRecebedor5 = 0;
				this.selectedRecebedor5 = null;
			}
			break;
		case 6:
			if (!this.renderRecebedor6) {
				this.nomeRecebedor6 = null;
				this.idRecebedor6 = 0;
				this.selectedRecebedor6 = null;
			}
			break;
		case 7:
			if (!this.renderRecebedor7) {
				this.nomeRecebedor7 = null;
				this.idRecebedor7 = 0;
				this.selectedRecebedor7 = null;
			}
			break;
		case 8:
			if (!this.renderRecebedor8) {
				this.nomeRecebedor8 = null;
				this.idRecebedor8 = 0;
				this.selectedRecebedor8 = null;
			}
			break;
		case 9:
			if (!this.renderRecebedor9) {
				this.nomeRecebedor9 = null;
				this.idRecebedor9 = 0;
				this.selectedRecebedor9 = null;
			}
			break;
		case 10:
			if (!this.renderRecebedor10) {
				this.nomeRecebedor10 = null;
				this.idRecebedor10 = 0;
				this.selectedRecebedor10 = null;
			}
			break;
		default:
			this.renderRecebedor2 = false;
			this.renderRecebedor3 = false;
			this.renderRecebedor4 = false;
			this.renderRecebedor5 = false;
			this.renderRecebedor6 = false;
			this.renderRecebedor7 = false;
			this.renderRecebedor8 = false;
			this.renderRecebedor9 = false;
			this.renderRecebedor10 = false;
		}

	}

	public void updateRenderFinal(int numero) {
		switch (numero) {
		case 2:
			if (!this.renderRecebedorFinais) {
				this.nomeRecebedorFinal1 = null;
				this.idRecebedorFinal1 = 0;
				this.selectedRecebedorFinal1 = null;
				this.objetoContratoCobranca.setVlrFinalRecebedor1(null);

				this.nomeRecebedorFinal2 = null;
				this.idRecebedorFinal2 = 0;
				this.selectedRecebedorFinal2 = null;
				this.objetoContratoCobranca.setVlrFinalRecebedor2(null);

				this.nomeRecebedorFinal3 = null;
				this.idRecebedorFinal3 = 0;
				this.selectedRecebedorFinal3 = null;
				this.objetoContratoCobranca.setVlrFinalRecebedor3(null);

				this.nomeRecebedorFinal4 = null;
				this.idRecebedorFinal4 = 0;
				this.selectedRecebedorFinal4 = null;
				this.objetoContratoCobranca.setVlrFinalRecebedor4(null);

				this.nomeRecebedorFinal5 = null;
				this.idRecebedorFinal5 = 0;
				this.selectedRecebedorFinal5 = null;
				this.objetoContratoCobranca.setVlrFinalRecebedor5(null);

				this.nomeRecebedorFinal6 = null;
				this.idRecebedorFinal6 = 0;
				this.selectedRecebedorFinal6 = null;
				this.objetoContratoCobranca.setVlrFinalRecebedor6(null);

				this.nomeRecebedorFinal7 = null;
				this.idRecebedorFinal7 = 0;
				this.selectedRecebedorFinal7 = null;
				this.objetoContratoCobranca.setVlrFinalRecebedor7(null);

				this.nomeRecebedorFinal8 = null;
				this.idRecebedorFinal8 = 0;
				this.selectedRecebedorFinal8 = null;
				this.objetoContratoCobranca.setVlrFinalRecebedor8(null);

				this.nomeRecebedorFinal9 = null;
				this.idRecebedorFinal9 = 0;
				this.selectedRecebedorFinal9 = null;
				this.objetoContratoCobranca.setVlrFinalRecebedor9(null);

				this.nomeRecebedorFinal10 = null;
				this.idRecebedorFinal10 = 0;
				this.selectedRecebedorFinal10 = null;
				this.objetoContratoCobranca.setVlrFinalRecebedor10(null);
			}
			break;
		default:
		}

	}

	public void populateValorParcelaFinal() {
		this.vlrParcelaFinal = this.objetoContratoCobranca.getVlrInvestimento();
	}

	public void populateRetencaoParcela() {
		if (this.vlrRepasse != null && this.objetoContratoCobranca.getVlrParcela() != null) {
			this.vlrRetencao = this.objetoContratoCobranca.getVlrParcela().subtract(this.vlrRepasse);
		}
	}

	public void populateDataPagamentoFim() {
		if (Integer.valueOf(this.qtdeParcelas) > 0 && this.dataPagamentoFinalTmp != null) {
			ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();
			this.objetoContratoCobranca.setDataPagamentoFim(contratoCobrancaDao
					.geraDataParcela(Integer.valueOf(this.qtdeParcelas) + 1, this.dataPagamentoFinalTmp));
		}
	}

	public void populateDataPagamentoInicio() {
		this.dataPagamentoFinalTmp = this.objetoContratoCobranca.getDataInicio();
	}

	public void populateRetencaoParcelaFinal() {
		if (this.vlrRepasseFinal != null && this.getVlrParcelaFinal() != null) {
			this.vlrRetencaoFinal = this.getVlrParcelaFinal().subtract(this.vlrRepasseFinal);
		}
	}

	public void populateTaxaAdministracao() {
		if (this.getObjetoContratoCobranca().getTxAdministracao() != null
				&& this.getObjetoContratoCobranca().getVlrInvestimento() != null) {
			this.vlrParcelaFinal = this.getObjetoContratoCobranca().getVlrInvestimento()
					.add(this.getObjetoContratoCobranca().getTxAdministracao());
		}
	}

	/************************************************************
	 * INICIO - Métodos utilizados pelas LoVs
	 ***********************************************************/
	public void loadLovs() {
		PagadorRecebedorDao pagadorRecebedorDao = new PagadorRecebedorDao();
		// this.listPagadores = pagadorRecebedorDao.findAll();
		this.listPagadores = pagadorRecebedorDao.getPagadoresRecebedores();

		this.listRecebedores = this.listPagadores;

		ImovelCobrancaDao imovelCobrancaDao = new ImovelCobrancaDao();
		this.listImoveis = imovelCobrancaDao.findAll();

		ResponsavelDao responsavelDao = new ResponsavelDao();
		this.listResponsaveis = responsavelDao.findAll();
	}

	public final void populateSelectedGrupoFavorecido() {
		this.idGrupoFavorecido = this.selectedGrupoFavorecido.getId();
		this.nomeGrupoFavorecido = this.selectedGrupoFavorecido.getNomeGrupo();
	}

	public void clearGrupoFavorecido() {
		this.idGrupoFavorecido = 0;
		this.nomeGrupoFavorecido = null;
		this.selectedGrupoFavorecido = new GruposFavorecidos();
	}

	public final void populateSelectedPagador() {
		this.idPagador = this.selectedPagador.getId();
		this.nomePagador = this.selectedPagador.getNome();
		if (this.selectedPagador.getCpf() != null) {
			this.tipoPessoaIsFisica = true;
		} else {
			this.tipoPessoaIsFisica = false;
		}
	}

	public void clearPagador() {
		this.idPagador = 0;
		this.nomePagador = null;
		this.selectedPagador = new PagadorRecebedor();
	}

	public final void populateSelectedRecebedorFinal1() {
		this.idRecebedorFinal1 = this.selectedRecebedorFinal1.getId();
		this.nomeRecebedorFinal1 = this.selectedRecebedorFinal1.getNome();
	}

	public void clearRecebedorFinal1() {
		this.idRecebedorFinal1 = 0;
		this.nomeRecebedorFinal1 = null;
		this.selectedRecebedorFinal1 = new PagadorRecebedor();
	}

	public final void populateSelectedRecebedorFinal2() {
		this.idRecebedorFinal2 = this.selectedRecebedorFinal2.getId();
		this.nomeRecebedorFinal2 = this.selectedRecebedorFinal2.getNome();
	}

	public void clearRecebedorFinal2() {
		this.idRecebedorFinal2 = 0;
		this.nomeRecebedorFinal2 = null;
		this.selectedRecebedorFinal2 = new PagadorRecebedor();
	}

	public final void populateSelectedRecebedorFinal3() {
		this.idRecebedorFinal3 = this.selectedRecebedorFinal3.getId();
		this.nomeRecebedorFinal3 = this.selectedRecebedorFinal3.getNome();
	}

	public void clearRecebedorFinal3() {
		this.idRecebedorFinal3 = 0;
		this.nomeRecebedorFinal3 = null;
		this.selectedRecebedorFinal3 = new PagadorRecebedor();
	}

	public final void populateSelectedRecebedorFinal4() {
		this.idRecebedorFinal4 = this.selectedRecebedorFinal4.getId();
		this.nomeRecebedorFinal4 = this.selectedRecebedorFinal4.getNome();
	}

	public void clearRecebedorFinal4() {
		this.idRecebedorFinal4 = 0;
		this.nomeRecebedorFinal4 = null;
		this.selectedRecebedorFinal4 = new PagadorRecebedor();
	}

	public final void populateSelectedRecebedorFinal5() {
		this.idRecebedorFinal5 = this.selectedRecebedorFinal5.getId();
		this.nomeRecebedorFinal5 = this.selectedRecebedorFinal5.getNome();
	}

	public void clearRecebedorFinal5() {
		this.idRecebedorFinal5 = 0;
		this.nomeRecebedorFinal5 = null;
		this.selectedRecebedorFinal5 = new PagadorRecebedor();
	}

	public final void populateSelectedRecebedorFinal6() {
		this.idRecebedorFinal6 = this.selectedRecebedorFinal6.getId();
		this.nomeRecebedorFinal6 = this.selectedRecebedorFinal6.getNome();
	}

	public void clearRecebedorFinal6() {
		this.idRecebedorFinal6 = 0;
		this.nomeRecebedorFinal6 = null;
		this.selectedRecebedorFinal6 = new PagadorRecebedor();
	}

	public final void populateSelectedRecebedorFinal7() {
		this.idRecebedorFinal7 = this.selectedRecebedorFinal7.getId();
		this.nomeRecebedorFinal7 = this.selectedRecebedorFinal7.getNome();
	}

	public void clearRecebedorFinal7() {
		this.idRecebedorFinal7 = 0;
		this.nomeRecebedorFinal7 = null;
		this.selectedRecebedorFinal7 = new PagadorRecebedor();
	}

	public final void populateSelectedRecebedorFinal8() {
		this.idRecebedorFinal8 = this.selectedRecebedorFinal8.getId();
		this.nomeRecebedorFinal8 = this.selectedRecebedorFinal8.getNome();
	}

	public void clearRecebedorFinal8() {
		this.idRecebedorFinal8 = 0;
		this.nomeRecebedorFinal8 = null;
		this.selectedRecebedorFinal8 = new PagadorRecebedor();
	}

	public final void populateSelectedRecebedorFinal9() {
		this.idRecebedorFinal9 = this.selectedRecebedorFinal9.getId();
		this.nomeRecebedorFinal9 = this.selectedRecebedorFinal9.getNome();
	}

	public void clearRecebedorFinal9() {
		this.idRecebedorFinal9 = 0;
		this.nomeRecebedorFinal9 = null;
		this.selectedRecebedorFinal9 = new PagadorRecebedor();
	}

	public final void populateSelectedRecebedorFinal10() {
		this.idRecebedorFinal10 = this.selectedRecebedorFinal10.getId();
		this.nomeRecebedorFinal10 = this.selectedRecebedorFinal10.getNome();
	}

	public void clearRecebedorFinal10() {
		this.idRecebedorFinal10 = 0;
		this.nomeRecebedorFinal10 = null;
		this.selectedRecebedorFinal10 = new PagadorRecebedor();
	}

	public final void populateSelectedRecebedor() {
		this.idRecebedor = this.selectedRecebedor.getId();
		this.nomeRecebedor = this.selectedRecebedor.getNome();
	}

	public final void populateSelectedRecebedorPreContrato() {
		this.idRecebedor = this.selectedRecebedor.getId();
		this.nomeRecebedor = this.selectedRecebedor.getNome();

		this.objetoPagadorRecebedor = this.selectedRecebedor;

		if (this.objetoPagadorRecebedor.getCnpj() != null && !this.objetoPagadorRecebedor.getCnpj().equals("")) {
			this.tipoPessoaIsFisica = false;
		} else {
			this.tipoPessoaIsFisica = true;
		}
	}

	public void clearRecebedor() {
		this.idRecebedor = 0;
		this.nomeRecebedor = null;
		this.selectedRecebedor = new PagadorRecebedor();
	}

	public final void populateSelectedRecebedor2() {
		this.idRecebedor2 = this.selectedRecebedor2.getId();
		this.nomeRecebedor2 = this.selectedRecebedor2.getNome();
	}

	public void clearRecebedor2() {
		this.idRecebedor2 = 0;
		this.nomeRecebedor2 = null;
		this.selectedRecebedor2 = new PagadorRecebedor();
	}

	public final void populateSelectedRecebedor3() {
		this.idRecebedor3 = this.selectedRecebedor3.getId();
		this.nomeRecebedor3 = this.selectedRecebedor3.getNome();
	}

	public void clearRecebedor3() {
		this.idRecebedor3 = 0;
		this.nomeRecebedor3 = null;
		this.selectedRecebedor3 = new PagadorRecebedor();
	}

	public final void populateSelectedRecebedor4() {
		this.idRecebedor4 = this.selectedRecebedor4.getId();
		this.nomeRecebedor4 = this.selectedRecebedor4.getNome();
	}

	public void clearRecebedor4() {
		this.idRecebedor4 = 0;
		this.nomeRecebedor4 = null;
		this.selectedRecebedor4 = new PagadorRecebedor();
	}

	public final void populateSelectedRecebedor5() {
		this.idRecebedor5 = this.selectedRecebedor5.getId();
		this.nomeRecebedor5 = this.selectedRecebedor5.getNome();
	}

	public void clearRecebedor5() {
		this.idRecebedor5 = 0;
		this.nomeRecebedor5 = null;
		this.selectedRecebedor5 = new PagadorRecebedor();
	}

	public final void populateSelectedRecebedor6() {
		this.idRecebedor6 = this.selectedRecebedor6.getId();
		this.nomeRecebedor6 = this.selectedRecebedor6.getNome();
	}

	public void clearRecebedor6() {
		this.idRecebedor6 = 0;
		this.nomeRecebedor6 = null;
		this.selectedRecebedor6 = new PagadorRecebedor();
	}

	public final void populateSelectedRecebedor7() {
		this.idRecebedor7 = this.selectedRecebedor7.getId();
		this.nomeRecebedor7 = this.selectedRecebedor7.getNome();
	}

	public void clearRecebedor7() {
		this.idRecebedor7 = 0;
		this.nomeRecebedor7 = null;
		this.selectedRecebedor7 = new PagadorRecebedor();
	}

	public final void populateSelectedRecebedor8() {
		this.idRecebedor8 = this.selectedRecebedor8.getId();
		this.nomeRecebedor8 = this.selectedRecebedor8.getNome();
	}

	public void clearRecebedor8() {
		this.idRecebedor8 = 0;
		this.nomeRecebedor8 = null;
		this.selectedRecebedor8 = new PagadorRecebedor();
	}

	public final void populateSelectedRecebedor9() {
		this.idRecebedor9 = this.selectedRecebedor9.getId();
		this.nomeRecebedor9 = this.selectedRecebedor9.getNome();
	}

	public void clearRecebedor9() {
		this.idRecebedor9 = 0;
		this.nomeRecebedor9 = null;
		this.selectedRecebedor9 = new PagadorRecebedor();
	}

	public final void populateSelectedRecebedor10() {
		this.idRecebedor10 = this.selectedRecebedor10.getId();
		this.nomeRecebedor10 = this.selectedRecebedor10.getNome();
	}

	public void clearRecebedor10() {
		this.idRecebedor10 = 0;
		this.nomeRecebedor10 = null;
		this.selectedRecebedor10 = new PagadorRecebedor();
	}

	public final void populateSelectedResponsavel() {
		this.idResponsavel = this.selectedResponsavel.getId();
		this.nomeResponsavel = this.selectedResponsavel.getNome();
		/*
		 * if (this.selectedResponsavel.getCpf() != null) { this.tipoResponsavelIsFisica
		 * = true; } else { this.tipoResponsavelIsFisica = false; }
		 */
	}

	public void clearResponsavel() {
		this.idResponsavel = 0;
		this.nomeResponsavel = null;
		this.selectedResponsavel = new Responsavel();
	}

	public final void populateSelectedImovel() {
		this.idImovel = this.selectedImovel.getId();
		this.nomeImovel = this.selectedImovel.getNome();
	}

	public void clearImovel() {
		this.idImovel = 0;
		this.nomeImovel = null;
		this.selectedImovel = new ImovelCobranca();
	}

	public void gerarParcelaFinal() {
		if (this.objetoContratoCobranca.isGeraParcelaFinal()) {
			if (this.vlrParcelaFinal == null || this.vlrParcelaFinal == BigDecimal.ZERO) {
				this.vlrParcelaFinal = this.objetoContratoCobranca.getVlrInvestimento();
			}
		} else {
			this.vlrParcelaFinal = null;
			this.vlrRepasseFinal = null;
			this.vlrRetencaoFinal = null;

			clearRecebedorFinal1();
			clearRecebedorFinal2();
			clearRecebedorFinal3();
			clearRecebedorFinal4();
			clearRecebedorFinal5();
			clearRecebedorFinal6();
			clearRecebedorFinal7();
			clearRecebedorFinal8();
			clearRecebedorFinal9();
			clearRecebedorFinal10();

			this.objetoContratoCobranca.setVlrFinalRecebedor1(null);
			this.objetoContratoCobranca.setVlrFinalRecebedor2(null);
			this.objetoContratoCobranca.setVlrFinalRecebedor3(null);
			this.objetoContratoCobranca.setVlrFinalRecebedor4(null);
			this.objetoContratoCobranca.setVlrFinalRecebedor5(null);
			this.objetoContratoCobranca.setVlrFinalRecebedor6(null);
			this.objetoContratoCobranca.setVlrFinalRecebedor7(null);
			this.objetoContratoCobranca.setVlrFinalRecebedor8(null);
			this.objetoContratoCobranca.setVlrFinalRecebedor9(null);
			this.objetoContratoCobranca.setVlrFinalRecebedor10(null);
		}
	}

	/************************************************************
	 * FIM - Métodos utilizados pelas LoVs
	 ***********************************************************/

	public void loadRetencaoRepasse() {
		// recupera campo retenção e repasse
		if (this.objetoContratoCobranca.getListContratoCobrancaDetalhes().size() > 0) {
			if (this.objetoContratoCobranca.isGeraParcelaFinal()) {
				if (this.objetoContratoCobranca.getListContratoCobrancaDetalhes().size() >= 2) {
					this.vlrRepasse = this.objetoContratoCobranca.getListContratoCobrancaDetalhes()
							.get(this.objetoContratoCobranca.getListContratoCobrancaDetalhes().size() - 2)
							.getVlrRepasse();

					this.vlrRetencao = this.objetoContratoCobranca.getListContratoCobrancaDetalhes()
							.get(this.objetoContratoCobranca.getListContratoCobrancaDetalhes().size() - 2)
							.getVlrRetencao();
				}

				this.vlrParcelaFinal = this.objetoContratoCobranca.getListContratoCobrancaDetalhes()
						.get(this.objetoContratoCobranca.getListContratoCobrancaDetalhes().size() - 1).getVlrParcela();

				this.vlrRepasseFinal = this.objetoContratoCobranca.getListContratoCobrancaDetalhes()
						.get(this.objetoContratoCobranca.getListContratoCobrancaDetalhes().size() - 1).getVlrRepasse();

				this.vlrRetencaoFinal = this.objetoContratoCobranca.getListContratoCobrancaDetalhes()
						.get(this.objetoContratoCobranca.getListContratoCobrancaDetalhes().size() - 1).getVlrParcela();

				this.vlrComissaoFinal = this.objetoContratoCobranca.getListContratoCobrancaDetalhes()
						.get(this.objetoContratoCobranca.getListContratoCobrancaDetalhes().size() - 1).getVlrComissao();
			} else {
				if (this.objetoContratoCobranca.getListContratoCobrancaDetalhes().size() >= 2) {
					this.vlrRepasse = this.objetoContratoCobranca.getListContratoCobrancaDetalhes()
							.get(this.objetoContratoCobranca.getListContratoCobrancaDetalhes().size() - 2)
							.getVlrRepasse();
					this.vlrRetencao = this.objetoContratoCobranca.getListContratoCobrancaDetalhes()
							.get(this.objetoContratoCobranca.getListContratoCobrancaDetalhes().size() - 2)
							.getVlrRetencao();
				} else {
					this.vlrRepasse = this.objetoContratoCobranca.getListContratoCobrancaDetalhes()
							.get(this.objetoContratoCobranca.getListContratoCobrancaDetalhes().size() - 1)
							.getVlrRepasse();
					this.vlrRetencao = this.objetoContratoCobranca.getListContratoCobrancaDetalhes()
							.get(this.objetoContratoCobranca.getListContratoCobrancaDetalhes().size() - 1)
							.getVlrRetencao();
				}
			}

			this.vlrComissao = this.objetoContratoCobranca.getListContratoCobrancaDetalhes().get(0).getVlrComissao();
		} else {
			this.vlrParcelaFinal = this.objetoContratoCobranca.getVlrParcelaFinal();
		}
	}

	public String clearFields() {
		objetoContratoCobranca = new ContratoCobranca();
		this.tituloPainel = "Adicionar";

		this.objetoContratoCobranca.setDataContrato(new Date());
		this.objetoContratoCobranca.setDataCadastro(new Date());
		this.objetoContratoCobranca.setUserCadastro(getNomeUsuarioLogado());

		loadLovs();

		clearSelectedLovs();

		this.contratoGerado = false;

		this.qtdeParcelas = null;

		filesInterno = new ArrayList<FileUploaded>();
		filesFaltante = new ArrayList<FileUploaded>();
		filesJuridico = new ArrayList<FileUploaded>();
		filesComite = new ArrayList<FileUploaded>();
		this.files = new ArrayList<FileUploaded>();

		clearSelectedRecebedores();
		this.seguradoSelecionado = new Segurado();
		this.seguradoSelecionado.setPessoa(new PagadorRecebedor());
		this.socioSelecionado = new PagadorRecebedorSocio();
		this.socioSelecionado.setPessoa(new PagadorRecebedor());
		this.pagadorSecundarioSelecionado = new PagadorRecebedorAdicionais();
		this.pagadorSecundarioSelecionado.setPessoa(new PagadorRecebedor());
		this.addSegurador = false;
		this.addSocio = false;
		this.addPagador = false;
		this.mostrarTodosProcessos = false;

		this.contasPagarSelecionada = new ContasPagar();
		this.contasPagarSelecionada.setPagadorRecebedor(new PagadorRecebedor());
		this.contasPagarSelecionada.setResponsavel(new Responsavel());
		this.processoSelecionado = new CcbProcessosJudiciais();
		this.pagadorProcesso = new PagadorRecebedor();

		this.vlrParcelaFinal = null;
		this.vlrRepasse = null;
		this.vlrRepasseFinal = null;
		this.vlrRetencao = null;
		this.vlrRetencaoFinal = null;

		this.vlrComissao = null;
		this.vlrComissaoFinal = null;

		this.objetoContratoCobranca.setGeraParcelaFinal(false);

		this.objetoContratoCobranca.setNumeroContrato(geraNumeroContrato());

		this.objetoContratoCobranca.setStatus("Aprovado");

		this.objetoContratoCobranca.setEmpresa("GALLERIA FINANÇAS SECURITIZADORA S.A.");

		this.geraBoletoInclusaoContrato = false;
		this.fileBoleto = null;

		ParametrosDao pDao = new ParametrosDao();
		this.objetoContratoCobranca
				.setTxJuros(pDao.findByFilter("nome", "COBRANCA_REC_TX_JUROS").get(0).getValorBigDecimal());
		this.objetoContratoCobranca
				.setTxMulta(pDao.findByFilter("nome", "COBRANCA_REC_MULTA").get(0).getValorBigDecimal());

		return "/Atendimento/Cobranca/ContratoCobrancaInserir.xhtml";
	}

	public String clearFieldsNew() {
		objetoContratoCobranca = new ContratoCobranca();
		this.tituloPainel = "Adicionar";

		this.objetoContratoCobranca.setDataContrato(new Date());
		this.objetoContratoCobranca.setDataCadastro(new Date());
		this.objetoContratoCobranca.setUserCadastro(getNomeUsuarioLogado());

		loadLovs();

		clearSelectedLovs();

		this.contratoGerado = false;

		this.qtdeParcelas = null;

		this.files = new ArrayList<FileUploaded>();
		filesInterno = new ArrayList<FileUploaded>();
		filesFaltante = new ArrayList<FileUploaded>();
		filesJuridico = new ArrayList<FileUploaded>();
		filesComite = new ArrayList<FileUploaded>();

		clearSelectedRecebedores();

		this.seguradoSelecionado = new Segurado();
		this.seguradoSelecionado.setPessoa(new PagadorRecebedor());
		this.socioSelecionado = new PagadorRecebedorSocio();
		this.socioSelecionado.setPessoa(new PagadorRecebedor());
		this.pagadorSecundarioSelecionado = new PagadorRecebedorAdicionais();
		this.pagadorSecundarioSelecionado.setPessoa(new PagadorRecebedor());
		this.addSegurador = false;
		this.addSocio = false;
		this.addPagador = false;
		this.mostrarTodosProcessos = false;

		this.contasPagarSelecionada = new ContasPagar();
		this.contasPagarSelecionada.setPagadorRecebedor(new PagadorRecebedor());
		this.contasPagarSelecionada.setResponsavel(new Responsavel());
		this.processoSelecionado = new CcbProcessosJudiciais();
		this.pagadorProcesso = new PagadorRecebedor();

		this.vlrParcelaFinal = null;
		this.vlrRepasse = null;
		this.vlrRepasseFinal = null;
		this.vlrRetencao = null;
		this.vlrRetencaoFinal = null;

		this.vlrComissao = null;
		this.vlrComissaoFinal = null;

		this.objetoContratoCobranca.setGeraParcelaFinal(false);

		this.objetoContratoCobranca.setNumeroContrato(geraNumeroContrato());

		this.objetoContratoCobranca.setStatus("Aprovado");
		this.objetoContratoCobranca.setOperacaoPaga(true);
		this.objetoContratoCobranca.setStatusLead("Completo");

		this.objetoContratoCobranca.setEmpresa("GALLERIA FINANÇAS SECURITIZADORA S.A.");

		this.geraBoletoInclusaoContrato = false;
		this.fileBoleto = null;

		ParametrosDao pDao = new ParametrosDao();
		this.objetoContratoCobranca
				.setTxJuros(pDao.findByFilter("nome", "COBRANCA_REC_TX_JUROS").get(0).getValorBigDecimal());
		this.objetoContratoCobranca
				.setTxMulta(pDao.findByFilter("nome", "COBRANCA_REC_MULTA").get(0).getValorBigDecimal());

		return "/Atendimento/Cobranca/ContratoCobrancaInserir.xhtml";
	}

	public void clearSelectedRecebedores() {
		this.renderRecebedor2 = false;
		this.renderRecebedor3 = false;
		this.renderRecebedor4 = false;
		this.renderRecebedor5 = false;
		this.renderRecebedor6 = false;
		this.renderRecebedor7 = false;
		this.renderRecebedor8 = false;
		this.renderRecebedor9 = false;
		this.renderRecebedor10 = false;

		this.selectedRecebedor = null;
		this.idRecebedor = 0;
		this.nomeRecebedor = null;

		this.selectedRecebedor2 = null;
		this.idRecebedor2 = 0;
		this.nomeRecebedor2 = null;

		this.selectedRecebedor3 = null;
		this.idRecebedor3 = 0;
		this.nomeRecebedor3 = null;

		this.selectedRecebedor4 = null;
		this.idRecebedor4 = 0;
		this.nomeRecebedor4 = null;

		this.selectedRecebedor5 = null;
		this.idRecebedor5 = 0;
		this.nomeRecebedor5 = null;

		this.selectedRecebedor6 = null;
		this.idRecebedor6 = 0;
		this.nomeRecebedor6 = null;

		this.selectedRecebedor7 = null;
		this.idRecebedor7 = 0;
		this.nomeRecebedor7 = null;

		this.selectedRecebedor8 = null;
		this.idRecebedor8 = 0;
		this.nomeRecebedor8 = null;

		this.selectedRecebedor9 = null;
		this.idRecebedor9 = 0;
		this.nomeRecebedor9 = null;

		this.selectedRecebedor10 = null;
		this.idRecebedor10 = 0;
		this.nomeRecebedor10 = null;

		clearRecebedorFinal1();
		clearRecebedorFinal2();
		clearRecebedorFinal3();
		clearRecebedorFinal4();
		clearRecebedorFinal5();
		clearRecebedorFinal6();
		clearRecebedorFinal7();
		clearRecebedorFinal8();
		clearRecebedorFinal9();
		clearRecebedorFinal10();
	}

	public String geraNumeroContrato() {
		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();

		int numeroUltimoContrato = Integer.valueOf(contratoCobrancaDao.ultimoNumeroContrato());

		return String.format("%05d", numeroUltimoContrato);
	}

	public String clearFieldsView() {
		this.tituloPainel = "Visualizar";

		loadLovs();

		loadSelectedLovs();

		this.contratoGerado = true;

		this.qtdeParcelas = String.valueOf(this.objetoContratoCobranca.getQtdeParcelas());

		// Verifica se há parcelas em atraso, se sim irá colorir a linha na tela
		TimeZone zone = TimeZone.getDefault();
		Locale locale = new Locale("pt", "BR");
		Calendar dataHoje = Calendar.getInstance(zone, locale);
		Calendar dataVencimentoParcela = Calendar.getInstance(zone, locale);
		dataHoje.set(Calendar.HOUR_OF_DAY, 0);
		dataHoje.set(Calendar.MINUTE, 0);
		dataHoje.set(Calendar.SECOND, 0);
		dataHoje.set(Calendar.MILLISECOND, 0);

		for (ContratoCobrancaDetalhes ccd : this.objetoContratoCobranca.getListContratoCobrancaDetalhes()) {
			dataVencimentoParcela.setTime(ccd.getDataVencimento());
			dataHoje.set(Calendar.HOUR_OF_DAY, 0);
			dataHoje.set(Calendar.MINUTE, 0);
			dataHoje.set(Calendar.SECOND, 0);
			dataHoje.set(Calendar.MILLISECOND, 0);
			ccd.setContrato(objetoContratoCobranca);

			if (dataVencimentoParcela.getTime().before(dataHoje.getTime()) && !ccd.isParcelaPaga()) {
				ccd.setParcelaVencida(true);
			}

			if (dataVencimentoParcela.getTime().equals(dataHoje.getTime()) && !ccd.isParcelaPaga()) {
				ccd.setParcelaVencendo(true);
			}
		}

		loadRetencaoRepasse();

		listaTodasSubpastas();

		kobanaMB.clearFieldsParcelasBoleto();

		return "/Atendimento/Cobranca/ContratoCobrancaDetalhes.xhtml";
	}

	public String clearFieldsExcluir() {
		this.tituloPainel = "Excluir";

		loadLovs();

		loadSelectedLovs();

		this.contratoGerado = true;

		this.qtdeParcelas = String.valueOf(this.objetoContratoCobranca.getQtdeParcelas());

		loadRetencaoRepasse();

		return "/Atendimento/Cobranca/ContratoCobrancaDetalhes.xhtml";
	}

	public String clearFieldsBaixar() {
		this.tituloPainel = "Baixar Parcela";

		if (CommonsUtil.semValor(this.objetoContratoCobranca)
				&& !CommonsUtil.semValor(this.numeroContratoObjetoContratoCobranca)) {
			ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();
			ContratoCobranca contratoCobranca = contratoCobrancaDao
					.getContratoPorNumeroContrato(this.numeroContratoObjetoContratoCobranca);
			this.setObjetoContratoCobranca(contratoCobranca);
		}

		// loadLovs();

		// loadSelectedLovs();

		this.dataHoje = DateUtil.gerarDataHoje();

		this.baixaCustasDiversas = false;

		loadListRecebedores();

		this.contratoGerado = true;

		this.qtdeParcelas = String.valueOf(this.objetoContratoCobranca.getQtdeParcelas());

		this.selectedListContratoCobrancaDetalhes = new ArrayList<ContratoCobrancaDetalhes>();

		this.dataPromessaPagamento = null;

		listaTodasSubpastas();

		this.reciboGerado = false;
		this.fileRecibo = null;
		this.pathRecibo = null;
		this.nomeRecibo = null;

		this.dataPagamentoInvestidor = DateUtil.gerarDataHoje();

		// Verifica se há parcelas em atraso, se sim irá colorir a linha na tela
		TimeZone zone = TimeZone.getDefault();
		Locale locale = new Locale("pt", "BR");
		Calendar dataHoje = Calendar.getInstance(zone, locale);
		Date auxDataPagamento = dataHoje.getTime();

		SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd", locale);
		String auxDataPagamentoStr = sdf.format(dataHoje.getTime());
		try {
			auxDataPagamento = sdf.parse(auxDataPagamentoStr);
		} catch (ParseException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}

		dataCalculoValorPresente = dataHoje.getTime();

		// onRowEdit - nova data
		rowEditNewDate = auxDataPagamento;

		for (ContratoCobrancaDetalhes ccd : this.objetoContratoCobranca.getListContratoCobrancaDetalhes()) {
			// se já houve baixa parcial, utiliza a data de vencimento atualizada
			// senão utiliza a data de vencimento antiga
			String auxDataVencimentoStr = "";
			Date auxDataVencimento = null;
			if (ccd.getDataVencimentoAtual() != null) {
				auxDataVencimentoStr = sdf.format(ccd.getDataVencimentoAtual());
				auxDataVencimento = ccd.getDataVencimentoAtual();
			} else {
				auxDataVencimentoStr = sdf.format(ccd.getDataVencimento());
				auxDataVencimento = ccd.getDataVencimento();
			}

			if (ccd.isParcelaPaga() == false && ccd.getListContratoCobrancaDetalhesParcial().size() >= 0) {
				for (ContratoCobrancaDetalhesParcial ccdp : ccd.getListContratoCobrancaDetalhesParcial()) {
					if (!ccdp.isBaixaGalleria()) {
						ccd.setPagoParcial(true);
						break;
					}
				}
			} else {
				ccd.setPagoParcial(false);
			}

			try {
				auxDataVencimento = sdf.parse(auxDataVencimentoStr);
			} catch (ParseException e) {
				// TODO Auto-generated catch block
				e.printStackTrace();
			}

			if (auxDataVencimento.before(auxDataPagamento) && !ccd.isParcelaPaga()) {
				if (DateUtil.getWorkingDaysBetweenTwoDates(auxDataVencimento, auxDataPagamento) > 0) {
					ccd.setParcelaVencida(true);

					// calcula coluna valor atualizado
					ContratoCobrancaUtilsMB contratoCobrancaUtilsMB;
					/*
					 * if (ccd.getVlrJuros().compareTo(BigDecimal.ZERO) == 0) {
					 * contratoCobrancaUtilsMB = new ContratoCobrancaUtilsMB( auxDataVencimento,
					 * auxDataPagamento, ccd.getVlrParcela(), BigDecimal.valueOf(1.00),
					 * ccd.getTxMulta()); } else { contratoCobrancaUtilsMB = new
					 * ContratoCobrancaUtilsMB( auxDataVencimento, auxDataPagamento,
					 * ccd.getVlrParcela(), ccd.getVlrJuros(), ccd.getTxMulta()); }
					 */

					if (ccd.getVlrJuros() != null) {
						if (BigDecimal.ZERO.compareTo(ccd.getVlrJuros()) == 0) {
							contratoCobrancaUtilsMB = new ContratoCobrancaUtilsMB(auxDataVencimento, auxDataPagamento,
									ccd.getVlrParcela(), BigDecimal.valueOf(1.00),
									this.objetoContratoCobranca.getTxMulta());
						} else {
							contratoCobrancaUtilsMB = new ContratoCobrancaUtilsMB(auxDataVencimento, auxDataPagamento,
									ccd.getVlrParcela(), this.objetoContratoCobranca.getTxJuros(),
									this.objetoContratoCobranca.getTxMulta());
						}
					} else {
						contratoCobrancaUtilsMB = new ContratoCobrancaUtilsMB(auxDataVencimento, auxDataPagamento,
								ccd.getVlrParcela(), this.objetoContratoCobranca.getTxJuros(),
								this.objetoContratoCobranca.getTxMulta());
					}

					if (!ccd.isParcelaPaga()) {
						if (ccd.getListContratoCobrancaDetalhesParcial().size() > 0) {
							contratoCobrancaUtilsMB.recalculaValorSemMulta();
						} else {
							contratoCobrancaUtilsMB.recalculaValorDiaUtil();
						}
						ccd.setVlrParcelaAtualizada(contratoCobrancaUtilsMB.getValorAtualizado());
					} else {
						ccd.setVlrParcelaAtualizada(null);
					}
				}
			}

			if (auxDataVencimento.equals(auxDataPagamento) && !ccd.isParcelaPaga()) {
				ccd.setParcelaVencendo(true);
			}

			BigDecimal somaBaixas = BigDecimal.ZERO;
			if (ccd.isAmortizacao()) {
				somaBaixas = ccd.getVlrParcela();
			} else {
				for (ContratoCobrancaDetalhesParcial cBaixas : ccd.getListContratoCobrancaDetalhesParcial()) {
					if (!CommonsUtil.semValor(cBaixas.getDataPagamento())) {
						ccd.setDataUltimoPagamento(cBaixas.getDataPagamento());
					}
					if (!CommonsUtil.semValor(cBaixas.getVlrRecebido())) {
						somaBaixas = somaBaixas.add(cBaixas.getVlrRecebido());
					}
				}
			}

			ccd.setValorTotalPagamento(somaBaixas);
		}

		loadRetencaoRepasse();

		this.selectedContratoCobrancaDetalhes = new ContratoCobrancaDetalhes();
		this.selectedContratoCobrancaDetalhes
				.setListContratoCobrancaFavorecidos(new ArrayList<ContratoCobrancaFavorecidos>());
		this.selectedContratoCobrancaDetalhes.getListContratoCobrancaFavorecidos()
				.add(new ContratoCobrancaFavorecidos());

		atualizaStatusDasParcelasInvestidor();

		// pré-seleciona o recebedor -- default galleria SA
		PagadorRecebedorDao prDao = new PagadorRecebedorDao();
		if (this.objetoContratoCobranca.getEmpresa() != null) {
			if (this.objetoContratoCobranca.getEmpresa().equals("FIDC GALLERIA")) {
				this.selectedRecebedor = prDao.findById((long) 6625);
				// TODO CRI 2
			} else if (this.objetoContratoCobranca.getEmpresa().equals("CRI 1")
					|| this.objetoContratoCobranca.getEmpresa().equals("CRI 2")
					|| this.objetoContratoCobranca.getEmpresa().equals("CRI 3")
					|| this.objetoContratoCobranca.getEmpresa().equals("CRI 4")
					|| this.objetoContratoCobranca.getEmpresa().equals("CRI 5")) {
				this.selectedRecebedor = prDao.findById((long) 15765);
			} else {
				this.selectedRecebedor = prDao.findById((long) 803);
			}

			this.nomeRecebedor = this.selectedRecebedor.getNome();
		}

		/*
		 * if (this.objetoContratoCobranca.getRecebedor2().getCpf() != null) {
		 * this.tipoPessoaIsFisica = true;
		 * 
		 * this.nomeFavorecido = this.objetoContratoCobranca.getRecebedor().getNome();
		 * this.cpfcnpjFavorecido = this.objetoContratoCobranca.getRecebedor().getCpf();
		 * } else { this.tipoPessoaIsFisica = false;
		 * 
		 * this.nomeFavorecido = this.objetoContratoCobranca.getRecebedor().getNome();
		 * this.cpfcnpjFavorecido =
		 * this.objetoContratoCobranca.getRecebedor().getCnpj(); }
		 */

		this.vlrCustosDiversosBaixa = BigDecimal.ZERO;

		this.baixaCustosDiversos = false;

		return "/Atendimento/Cobranca/ContratoCobrancaBaixar.xhtml";
	}

	public void atualizaStatusDasParcelasInvestidor() {
		for (ContratoCobrancaDetalhes ccd : this.objetoContratoCobranca.getListContratoCobrancaDetalhes()) {
			// investidor 1
			if (this.objetoContratoCobranca.getRecebedor() != null) {
				for (ContratoCobrancaParcelasInvestidor ccpi : this.objetoContratoCobranca
						.getListContratoCobrancaParcelasInvestidor1()) {
					if (ccpi.getNumeroParcela().equals(ccd.getNumeroParcela())) {
						ccpi.setParcelaVencendo(ccd.isParcelaVencendo());
						ccpi.setParcelaVencida(ccd.isParcelaVencida());
						break;
					}
				}
			}

			// investidor 1
			if (this.objetoContratoCobranca.getRecebedor2() != null) {
				for (ContratoCobrancaParcelasInvestidor ccpi : this.objetoContratoCobranca
						.getListContratoCobrancaParcelasInvestidor2()) {
					if (ccpi.getNumeroParcela().equals(ccd.getNumeroParcela())) {
						ccpi.setParcelaVencendo(ccd.isParcelaVencendo());
						ccpi.setParcelaVencida(ccd.isParcelaVencida());
						break;
					}
				}
			}

			// investidor 1
			if (this.objetoContratoCobranca.getRecebedor3() != null) {
				for (ContratoCobrancaParcelasInvestidor ccpi : this.objetoContratoCobranca
						.getListContratoCobrancaParcelasInvestidor3()) {
					if (ccpi.getNumeroParcela().equals(ccd.getNumeroParcela())) {
						ccpi.setParcelaVencendo(ccd.isParcelaVencendo());
						ccpi.setParcelaVencida(ccd.isParcelaVencida());
						break;
					}
				}
			}

			// investidor 1
			if (this.objetoContratoCobranca.getRecebedor4() != null) {
				for (ContratoCobrancaParcelasInvestidor ccpi : this.objetoContratoCobranca
						.getListContratoCobrancaParcelasInvestidor4()) {
					if (ccpi.getNumeroParcela().equals(ccd.getNumeroParcela())) {
						ccpi.setParcelaVencendo(ccd.isParcelaVencendo());
						ccpi.setParcelaVencida(ccd.isParcelaVencida());
						break;
					}
				}
			}

			// investidor 1
			if (this.objetoContratoCobranca.getRecebedor5() != null) {
				for (ContratoCobrancaParcelasInvestidor ccpi : this.objetoContratoCobranca
						.getListContratoCobrancaParcelasInvestidor5()) {
					if (ccpi.getNumeroParcela().equals(ccd.getNumeroParcela())) {
						ccpi.setParcelaVencendo(ccd.isParcelaVencendo());
						ccpi.setParcelaVencida(ccd.isParcelaVencida());
						break;
					}
				}
			}

			// investidor 1
			if (this.objetoContratoCobranca.getRecebedor6() != null) {
				for (ContratoCobrancaParcelasInvestidor ccpi : this.objetoContratoCobranca
						.getListContratoCobrancaParcelasInvestidor6()) {
					if (ccpi.getNumeroParcela().equals(ccd.getNumeroParcela())) {
						ccpi.setParcelaVencendo(ccd.isParcelaVencendo());
						ccpi.setParcelaVencida(ccd.isParcelaVencida());
						break;
					}
				}
			}

			// investidor 1
			if (this.objetoContratoCobranca.getRecebedor7() != null) {
				for (ContratoCobrancaParcelasInvestidor ccpi : this.objetoContratoCobranca
						.getListContratoCobrancaParcelasInvestidor7()) {
					if (ccpi.getNumeroParcela().equals(ccd.getNumeroParcela())) {
						ccpi.setParcelaVencendo(ccd.isParcelaVencendo());
						ccpi.setParcelaVencida(ccd.isParcelaVencida());
						break;
					}
				}
			}

			// investidor 1
			if (this.objetoContratoCobranca.getRecebedor8() != null) {
				for (ContratoCobrancaParcelasInvestidor ccpi : this.objetoContratoCobranca
						.getListContratoCobrancaParcelasInvestidor8()) {
					if (ccpi.getNumeroParcela().equals(ccd.getNumeroParcela())) {
						ccpi.setParcelaVencendo(ccd.isParcelaVencendo());
						ccpi.setParcelaVencida(ccd.isParcelaVencida());
						break;
					}
				}
			}

			// investidor 1
			if (this.objetoContratoCobranca.getRecebedor9() != null) {
				for (ContratoCobrancaParcelasInvestidor ccpi : this.objetoContratoCobranca
						.getListContratoCobrancaParcelasInvestidor9()) {
					if (ccpi.getNumeroParcela().equals(ccd.getNumeroParcela())) {
						ccpi.setParcelaVencendo(ccd.isParcelaVencendo());
						ccpi.setParcelaVencida(ccd.isParcelaVencida());
						break;
					}
				}
			}

			// investidor 1
			if (this.objetoContratoCobranca.getRecebedor10() != null) {
				for (ContratoCobrancaParcelasInvestidor ccpi : this.objetoContratoCobranca
						.getListContratoCobrancaParcelasInvestidor10()) {
					if (ccpi.getNumeroParcela().equals(ccd.getNumeroParcela())) {
						ccpi.setParcelaVencendo(ccd.isParcelaVencendo());
						ccpi.setParcelaVencida(ccd.isParcelaVencida());
						break;
					}
				}
			}
		}
	}

	public StreamedContent gerarExcelParcelasInvestidor(List<ContratoCobrancaParcelasInvestidor> listaParcelas,
			String nome) throws IOException {
		XSSFWorkbook wb = new XSSFWorkbook(getClass().getResourceAsStream("/resource/TabelaVazia.xlsx"));

		XSSFSheet sheet = wb.getSheetAt(0);
		DashboardDao dDao = new DashboardDao();
		List<ContratoCobranca> contratos = dDao.getContratosLead();

		XSSFRow linha = sheet.getRow(0);
		if (linha == null) {
			sheet.createRow(0);
			linha = sheet.getRow(0);
		}

		CellStyle cell_style = wb.createCellStyle();
		XSSFFont font = wb.createFont();
		font.setBold(true);
		font.setFontHeightInPoints((short) 9);
		cell_style.setFont(font);
		cell_style.setAlignment(HorizontalAlignment.CENTER);
		cell_style.setVerticalAlignment(VerticalAlignment.CENTER);
		cell_style.setBorderBottom(BorderStyle.THIN);
		cell_style.setBorderTop(BorderStyle.THIN);
		cell_style.setBorderRight(BorderStyle.THIN);
		cell_style.setBorderLeft(BorderStyle.THIN);
		cell_style.setWrapText(true);

		gravaCelula(0, "Data", linha, cell_style);
		gravaCelula(1, "Parcela", linha, cell_style);
		gravaCelula(2, "Parcela Mensal", linha, cell_style);
		gravaCelula(3, "Juros", linha, cell_style);
		gravaCelula(4, "Amortização", linha, cell_style);
		gravaCelula(5, "Saldo Credor", linha, cell_style);
		gravaCelula(6, "IR Retido", linha, cell_style);
		gravaCelula(7, "Valor Líquido", linha, cell_style);

		// cria estilo especifico para coluna type numérico
		CellStyle numericStyle = wb.createCellStyle();
		numericStyle.setFont(font);
		numericStyle.setAlignment(HorizontalAlignment.CENTER);
		numericStyle.setVerticalAlignment(VerticalAlignment.CENTER);
		numericStyle.setBorderBottom(BorderStyle.THIN);
		numericStyle.setBorderTop(BorderStyle.THIN);
		numericStyle.setBorderRight(BorderStyle.THIN);
		numericStyle.setBorderLeft(BorderStyle.THIN);
		numericStyle.setWrapText(true);
		// cria a formatação para moeda
		CreationHelper ch = wb.getCreationHelper();
		numericStyle.setDataFormat(
				ch.createDataFormat().getFormat("_(R$* #,##0.00_);_(R$* (#,##0.00);_(R$* \"-\"??_);_(@_)"));

		// cria estilo especifico para coluna type numérico
		CellStyle numberStyle = wb.createCellStyle();
		numberStyle.setFont(font);
		numberStyle.setAlignment(HorizontalAlignment.CENTER);
		numberStyle.setVerticalAlignment(VerticalAlignment.CENTER);
		numberStyle.setBorderBottom(BorderStyle.THIN);
		numberStyle.setBorderTop(BorderStyle.THIN);
		numberStyle.setBorderRight(BorderStyle.THIN);
		numberStyle.setBorderLeft(BorderStyle.THIN);
		numberStyle.setWrapText(true);

		// cria estilo especifico para coluna type Date
		CellStyle dateStyle = wb.createCellStyle();
		dateStyle.setFont(font);
		dateStyle.setAlignment(HorizontalAlignment.CENTER);
		dateStyle.setVerticalAlignment(VerticalAlignment.CENTER);
		dateStyle.setBorderBottom(BorderStyle.THIN);
		dateStyle.setBorderTop(BorderStyle.THIN);
		dateStyle.setBorderRight(BorderStyle.THIN);
		dateStyle.setBorderLeft(BorderStyle.THIN);
		dateStyle.setWrapText(true);
		// cria a formatação para Date
		dateStyle.setDataFormat((short) BuiltinFormats.getBuiltinFormat("m/d/yy"));

		BigDecimal totalParcelaMensal = BigDecimal.ZERO;
		BigDecimal totalJuros = BigDecimal.ZERO;
		BigDecimal totalIR = BigDecimal.ZERO;
		BigDecimal totalValorLiquido = BigDecimal.ZERO;

		int iLinha = 1;
		for (int iParcela = 0; iParcela < listaParcelas.size(); iParcela++) {
			ContratoCobrancaParcelasInvestidor parcela = listaParcelas.get(iParcela);

			linha = sheet.getRow(iLinha);
			if (linha == null) {
				sheet.createRow(iLinha);
				linha = sheet.getRow(iLinha);
			}

			Locale locale = new Locale("pt", "BR");
			SimpleDateFormat sdf = new SimpleDateFormat("dd/MM/yyyy", locale);
			String dataStr = sdf.format(parcela.getDataVencimento());

			gravaCelula(0, dataStr, linha, dateStyle);

			try {
				gravaCelula(1, CommonsUtil.bigDecimalValue(parcela.getNumeroParcela()), linha, numberStyle);
			} catch (NumberFormatException e) {
				gravaCelula(1, parcela.getNumeroParcela(), linha, numberStyle);
			}

			if (!CommonsUtil.semValor(parcela.getParcelaMensalBaixa())) {
				gravaCelula(2, ((BigDecimal) parcela.getParcelaMensalBaixa()).doubleValue(), linha, numericStyle);
				totalParcelaMensal = totalParcelaMensal.add(parcela.getParcelaMensalBaixa());
			} else {
				gravaCelula(2, ((BigDecimal) BigDecimal.ZERO).doubleValue(), linha, numericStyle);
			}

			if (!CommonsUtil.semValor(parcela.getJurosBaixa())) {
				gravaCelula(3, ((BigDecimal) parcela.getJurosBaixa()).doubleValue(), linha, numericStyle);
				totalJuros = totalJuros.add(parcela.getJurosBaixa());
			} else {
				gravaCelula(3, ((BigDecimal) BigDecimal.ZERO).doubleValue(), linha, numericStyle);
			}

			if (!CommonsUtil.semValor(parcela.getAmortizacao())) {
				gravaCelula(4, ((BigDecimal) parcela.getAmortizacao()).doubleValue(), linha, numericStyle);
			} else {
				gravaCelula(4, ((BigDecimal) BigDecimal.ZERO).doubleValue(), linha, numericStyle);
			}

			if (!CommonsUtil.semValor(parcela.getSaldoCredorAtualizado())) {
				gravaCelula(5, ((BigDecimal) parcela.getSaldoCredorAtualizado()).doubleValue(), linha, numericStyle);
			} else {
				gravaCelula(5, ((BigDecimal) BigDecimal.ZERO).doubleValue(), linha, numericStyle);
			}

			if (!CommonsUtil.semValor(parcela.getIrRetido())) {
				gravaCelula(6, ((BigDecimal) parcela.getIrRetido()).doubleValue(), linha, numericStyle);
				totalIR = totalIR.add(parcela.getIrRetido());
			} else {
				gravaCelula(6, ((BigDecimal) BigDecimal.ZERO).doubleValue(), linha, numericStyle);
			}

			if (!CommonsUtil.semValor(parcela.getValorLiquidoBaixa())) {
				gravaCelula(7, ((BigDecimal) parcela.getValorLiquidoBaixa()).doubleValue(), linha, numericStyle);
				totalValorLiquido = totalValorLiquido.add(parcela.getValorLiquidoBaixa());
			} else {
				gravaCelula(7, ((BigDecimal) BigDecimal.ZERO).doubleValue(), linha, numericStyle);
			}

			iLinha++;
		}

		for (int i = 0; i < 8; i++) {
			sheet.autoSizeColumn(i);
		}

		linha = sheet.getRow(iLinha);
		if (linha == null) {
			sheet.createRow(iLinha);
			linha = sheet.getRow(iLinha);
		}

		sheet.addMergedRegion(new CellRangeAddress(iLinha, iLinha, 0, 1));

		for (int i = 0; i <= iLinha; i++) {
			sheet.getRow(i).setHeightInPoints((short) 12);
		}

		gravaCelula(0, "Total Recebido", linha, cell_style);
		gravaCelula(1, "", linha, cell_style);
		gravaCelula(2, ((BigDecimal) totalParcelaMensal).doubleValue(), linha, numericStyle);
		gravaCelula(3, ((BigDecimal) totalJuros).doubleValue(), linha, numericStyle);
		gravaCelula(6, ((BigDecimal) totalIR).doubleValue(), linha, numericStyle);
		gravaCelula(7, ((BigDecimal) totalValorLiquido).doubleValue(), linha, numericStyle);

		ByteArrayOutputStream fileOut = new ByteArrayOutputStream();
		// escrever tudo o que foi feito no arquivo

		wb.write(fileOut);

		// fecha a escrita de dados nessa planilha
		wb.close();

		final GeradorRelatorioDownloadCliente gerador = new GeradorRelatorioDownloadCliente(
				FacesContext.getCurrentInstance());
		String nomeArquivoDownload = String.format("Galleria Bank - Parcelas Investidor - " + nome + "%s.xlsx", "");
		gerador.open(nomeArquivoDownload);
		gerador.feed(new ByteArrayInputStream(fileOut.toByteArray()));
		gerador.close();

		return null;
	}

	public void loadListRecebedores() {
		cedentesIugu = new ArrayList<PagadorRecebedor>();
		if (this.objetoContratoCobranca.getRecebedor() != null) {
			if (!cedentesIugu.contains(this.objetoContratoCobranca.getRecebedor())) {
				cedentesIugu.add(this.objetoContratoCobranca.getRecebedor());
			}
		}
		if (this.objetoContratoCobranca.getRecebedor2() != null) {
			if (!cedentesIugu.contains(this.objetoContratoCobranca.getRecebedor2())) {
				cedentesIugu.add(this.objetoContratoCobranca.getRecebedor2());
			}
		}
		if (this.objetoContratoCobranca.getRecebedor3() != null) {
			if (!cedentesIugu.contains(this.objetoContratoCobranca.getRecebedor3())) {
				cedentesIugu.add(this.objetoContratoCobranca.getRecebedor3());
			}
		}
		if (this.objetoContratoCobranca.getRecebedor4() != null) {
			if (!cedentesIugu.contains(this.objetoContratoCobranca.getRecebedor4())) {
				cedentesIugu.add(this.objetoContratoCobranca.getRecebedor4());
			}
		}
		if (this.objetoContratoCobranca.getRecebedor5() != null) {
			if (!cedentesIugu.contains(this.objetoContratoCobranca.getRecebedor5())) {
				cedentesIugu.add(this.objetoContratoCobranca.getRecebedor5());
			}
		}
		if (this.objetoContratoCobranca.getRecebedor6() != null) {
			if (!cedentesIugu.contains(this.objetoContratoCobranca.getRecebedor6())) {
				cedentesIugu.add(this.objetoContratoCobranca.getRecebedor6());
			}
		}
		if (this.objetoContratoCobranca.getRecebedor7() != null) {
			if (!cedentesIugu.contains(this.objetoContratoCobranca.getRecebedor7())) {
				cedentesIugu.add(this.objetoContratoCobranca.getRecebedor7());
			}
		}
		if (this.objetoContratoCobranca.getRecebedor8() != null) {
			if (!cedentesIugu.contains(this.objetoContratoCobranca.getRecebedor8())) {
				cedentesIugu.add(this.objetoContratoCobranca.getRecebedor8());
			}
		}
		if (this.objetoContratoCobranca.getRecebedor9() != null) {
			if (!cedentesIugu.contains(this.objetoContratoCobranca.getRecebedor9())) {
				cedentesIugu.add(this.objetoContratoCobranca.getRecebedor9());
			}
		}
		if (this.objetoContratoCobranca.getRecebedor10() != null) {
			if (!cedentesIugu.contains(this.objetoContratoCobranca.getRecebedor10())) {
				cedentesIugu.add(this.objetoContratoCobranca.getRecebedor10());
			}
		}

		if (this.objetoContratoCobranca.getRecebedorParcelaFinal1() != null) {
			if (!cedentesIugu.contains(this.objetoContratoCobranca.getRecebedorParcelaFinal1())) {
				cedentesIugu.add(this.objetoContratoCobranca.getRecebedorParcelaFinal1());
			}
		}
		if (this.objetoContratoCobranca.getRecebedorParcelaFinal2() != null) {
			if (!cedentesIugu.contains(this.objetoContratoCobranca.getRecebedorParcelaFinal2())) {
				cedentesIugu.add(this.objetoContratoCobranca.getRecebedorParcelaFinal2());
			}
		}
		if (this.objetoContratoCobranca.getRecebedorParcelaFinal3() != null) {
			if (!cedentesIugu.contains(this.objetoContratoCobranca.getRecebedorParcelaFinal3())) {
				cedentesIugu.add(this.objetoContratoCobranca.getRecebedorParcelaFinal3());
			}
		}
		if (this.objetoContratoCobranca.getRecebedorParcelaFinal4() != null) {
			if (!cedentesIugu.contains(this.objetoContratoCobranca.getRecebedorParcelaFinal4())) {
				cedentesIugu.add(this.objetoContratoCobranca.getRecebedorParcelaFinal4());
			}
		}
		if (this.objetoContratoCobranca.getRecebedorParcelaFinal5() != null) {
			if (!cedentesIugu.contains(this.objetoContratoCobranca.getRecebedorParcelaFinal5())) {
				cedentesIugu.add(this.objetoContratoCobranca.getRecebedorParcelaFinal5());
			}
		}
		if (this.objetoContratoCobranca.getRecebedorParcelaFinal6() != null) {
			if (!cedentesIugu.contains(this.objetoContratoCobranca.getRecebedorParcelaFinal6())) {
				cedentesIugu.add(this.objetoContratoCobranca.getRecebedorParcelaFinal6());
			}
		}
		if (this.objetoContratoCobranca.getRecebedorParcelaFinal7() != null) {
			if (!cedentesIugu.contains(this.objetoContratoCobranca.getRecebedorParcelaFinal7())) {
				cedentesIugu.add(this.objetoContratoCobranca.getRecebedorParcelaFinal7());
			}
		}
		if (this.objetoContratoCobranca.getRecebedorParcelaFinal8() != null) {
			if (!cedentesIugu.contains(this.objetoContratoCobranca.getRecebedorParcelaFinal8())) {
				cedentesIugu.add(this.objetoContratoCobranca.getRecebedorParcelaFinal8());
			}
		}
		if (this.objetoContratoCobranca.getRecebedorParcelaFinal9() != null) {
			if (!cedentesIugu.contains(this.objetoContratoCobranca.getRecebedorParcelaFinal9())) {
				cedentesIugu.add(this.objetoContratoCobranca.getRecebedorParcelaFinal9());
			}
		}
		if (this.objetoContratoCobranca.getRecebedorParcelaFinal10() != null) {
			if (!cedentesIugu.contains(this.objetoContratoCobranca.getRecebedorParcelaFinal10())) {
				cedentesIugu.add(this.objetoContratoCobranca.getRecebedorParcelaFinal10());
			}
		}
	}

	public String clearFieldsBaixarSemCalculoJuros() {
		this.tituloPainel = "Baixar Parcela";

		// loadLovs();

		// loadSelectedLovs();

		this.contratoGerado = true;

		this.qtdeParcelas = String.valueOf(this.objetoContratoCobranca.getQtdeParcelas());

		this.selectedListContratoCobrancaDetalhes = new ArrayList<ContratoCobrancaDetalhes>();

		listaTodasSubpastas();

		this.reciboGerado = false;
		this.fileRecibo = null;
		this.pathRecibo = null;
		this.nomeRecibo = null;

		// Verifica se há parcelas em atraso, se sim irá colorir a linha na tela
		TimeZone zone = TimeZone.getDefault();
		Locale locale = new Locale("pt", "BR");
		Calendar dataHoje = Calendar.getInstance(zone, locale);
		Date auxDataPagamento = dataHoje.getTime();

		SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd", locale);
		String auxDataPagamentoStr = sdf.format(dataHoje.getTime());
		try {
			auxDataPagamento = sdf.parse(auxDataPagamentoStr);
		} catch (ParseException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}

		dataCalculoValorPresente = dataHoje.getTime();
		// onRowEdit - nova data
		rowEditNewDate = auxDataPagamento;

		for (ContratoCobrancaDetalhes ccd : this.objetoContratoCobranca.getListContratoCobrancaDetalhes()) {
			// se já houve baixa parcial, utiliza a data de vencimento atualizada
			// senão utiliza a data de vencimento antiga
			String auxDataVencimentoStr = "";
			Date auxDataVencimento = null;
			if (ccd.getDataVencimentoAtual() != null) {
				auxDataVencimentoStr = sdf.format(ccd.getDataVencimentoAtual());
				auxDataVencimento = ccd.getDataVencimentoAtual();
			} else {
				auxDataVencimentoStr = sdf.format(ccd.getDataVencimento());
				auxDataVencimento = ccd.getDataVencimento();
			}

			try {
				auxDataVencimento = sdf.parse(auxDataVencimentoStr);
			} catch (ParseException e) {
				// TODO Auto-generated catch block
				e.printStackTrace();
			}

			if (auxDataVencimento.before(auxDataPagamento) && !ccd.isParcelaPaga()) {
				ccd.setParcelaVencida(true);
			}

			ccd.setVlrParcelaAtualizada(null);
		}

		loadRetencaoRepasse();

		this.selectedContratoCobrancaDetalhes = new ContratoCobrancaDetalhes();
		this.selectedContratoCobrancaDetalhes
				.setListContratoCobrancaFavorecidos(new ArrayList<ContratoCobrancaFavorecidos>());
		this.selectedContratoCobrancaDetalhes.getListContratoCobrancaFavorecidos()
				.add(new ContratoCobrancaFavorecidos());

		return "/Atendimento/Cobranca/ContratoCobrancaBaixar.xhtml";
	}

	public void realcularValorAtualizadoEstornoBxparcial(ContratoCobrancaDetalhes contratoCobrancaDetalhes) {
		// se já houve baixa parcial, utiliza a data de vencimento atualizada
		// senão utiliza a data de vencimento antiga
		// Verifica se há parcelas em atraso, se sim irá colorir a linha na tela
		TimeZone zone = TimeZone.getDefault();
		Locale locale = new Locale("pt", "BR");
		Calendar dataHoje = Calendar.getInstance(zone, locale);
		Date auxDataPagamento = dataHoje.getTime();

		SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd", locale);
		String auxDataPagamentoStr = sdf.format(dataHoje.getTime());
		try {
			auxDataPagamento = sdf.parse(auxDataPagamentoStr);
		} catch (ParseException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}

		String auxDataVencimentoStr = "";
		Date auxDataVencimento = null;
		if (contratoCobrancaDetalhes.getDataVencimentoAtual() != null) {
			auxDataVencimentoStr = sdf.format(contratoCobrancaDetalhes.getDataVencimentoAtual());
			auxDataVencimento = contratoCobrancaDetalhes.getDataVencimentoAtual();
		} else {
			auxDataVencimentoStr = sdf.format(contratoCobrancaDetalhes);
			auxDataVencimento = contratoCobrancaDetalhes.getDataVencimento();
		}

		try {
			auxDataVencimento = sdf.parse(auxDataVencimentoStr);
		} catch (ParseException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}

		if (auxDataVencimento.before(auxDataPagamento) && !contratoCobrancaDetalhes.isParcelaPaga()) {
			contratoCobrancaDetalhes.setParcelaVencida(true);

			// calcula coluna valor atualizado
			ContratoCobrancaUtilsMB contratoCobrancaUtilsMB;
			contratoCobrancaUtilsMB = new ContratoCobrancaUtilsMB(auxDataVencimento, auxDataPagamento,
					contratoCobrancaDetalhes.getVlrParcela(), contratoCobrancaDetalhes.getVlrJuros(),
					contratoCobrancaDetalhes.getTxMulta());

			if (!contratoCobrancaDetalhes.isParcelaPaga()) {
				if (contratoCobrancaDetalhes.getListContratoCobrancaDetalhesParcial().size() > 0) {
					contratoCobrancaUtilsMB.recalculaValorSemMulta();
				} else {
					contratoCobrancaUtilsMB.recalculaValor();
				}
				contratoCobrancaDetalhes.setVlrParcelaAtualizada(contratoCobrancaUtilsMB.getValorAtualizado());
			} else {
				contratoCobrancaDetalhes.setVlrParcelaAtualizada(null);
			}
		}

		if (auxDataVencimento.equals(auxDataPagamento) && !contratoCobrancaDetalhes.isParcelaPaga()) {
			contratoCobrancaDetalhes.setParcelaVencendo(true);
			contratoCobrancaDetalhes.setVlrParcelaAtualizada(null);
		}
	}

	public void reprovarContrato() {
		FacesContext context = FacesContext.getCurrentInstance();
		this.objetoContratoCobranca.setStatusContrato("Reprovado");
		this.objetoContratoCobranca.setReprovado(true);
		this.objetoContratoCobranca.setReprovadoData(DateUtil.gerarDataHoje());
		this.objetoContratoCobranca.setReprovadoUsuario(getNomeUsuarioLogado());
		this.objetoContratoCobranca.setStatus("Reprovado");
		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();
		this.objetoContratoCobranca.populaStatusEsteira(getUsuarioLogadoNull());
		contratoCobrancaDao.merge(this.objetoContratoCobranca);

		context.addMessage(null,
				new FacesMessage(FacesMessage.SEVERITY_INFO,
						"Contrato Cobrança: Pré-Contrato Reprovado com sucesso! (Contrato: "
								+ this.objetoContratoCobranca.getNumeroContrato() + ")!",
						""));
	}

	public String reprovarContratoJuridico() {
		// this.objetoContratoCobranca =
		// getContratoById(this.objetoContratoCobranca.getId());

		FacesContext context = FacesContext.getCurrentInstance();
		this.objetoContratoCobranca.setStatusContrato("Reprovado");
		this.objetoContratoCobranca.setReprovado(true);
		this.objetoContratoCobranca.setReprovadoData(DateUtil.gerarDataHoje());
		this.objetoContratoCobranca.setReprovadoUsuario(getNomeUsuarioLogado());
		this.objetoContratoCobranca.setStatus("Reprovado");

		this.objetoContratoCobranca.setMotivoReprovaSelectItem("Reprovado pelo Jurídico");
		this.objetoContratoCobranca.setReprovadoJuridicoEsteira(true);
		this.objetoContratoCobranca.setReprovadoJuridicoEsteiraData(DateUtil.gerarDataHoje());
		this.objetoContratoCobranca.setReprovadoJuridicoEsteiraUsuario(getNomeUsuarioLogado());

		updateCheckList();

		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();
		this.objetoContratoCobranca.populaStatusEsteira(getUsuarioLogadoNull());
		contratoCobrancaDao.merge(this.objetoContratoCobranca);

		context.addMessage(null,
				new FacesMessage(FacesMessage.SEVERITY_INFO,
						"Contrato Cobrança: Pré-Contrato Reprovado com sucesso! (Contrato: "
								+ this.objetoContratoCobranca.getNumeroContrato() + ")!",
						""));

		return geraConsultaContratosPorStatus("Comentario Jurídico");
	}

	public String reprovarContratoConsultar(String consulta) {
		// this.objetoContratoCobranca =
		// getContratoById(this.objetoContratoCobranca.getId());
		reprovarContrato();

		return geraConsultaContratosPorStatus(consulta);
	}

	public void baixarPreContrato() {
		FacesContext context = FacesContext.getCurrentInstance();
		this.objetoContratoCobranca.setStatus("Baixado");
		this.objetoContratoCobranca.setStatusContrato("Baixado");
		this.objetoContratoCobranca.setContratoResgatadoBaixar(false);
		this.objetoContratoCobranca.setBaixadoData(DateUtil.gerarDataHoje());
		this.objetoContratoCobranca.setBaixadoUsuario(getNomeUsuarioLogado());
		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();
		this.objetoContratoCobranca.populaStatusEsteira(getUsuarioLogadoNull());
		contratoCobrancaDao.merge(this.objetoContratoCobranca);

		TakeBlipMB takeBlipMB = new TakeBlipMB();
		ResponsavelDao rDao = new ResponsavelDao();
		Responsavel rValidaDocs = new Responsavel();

		// gera data de hoje no horario de brasilia
		Calendar cal = Calendar.getInstance();
		cal.add(Calendar.HOUR, -3);
		Date dataHoje = cal.getTime();
		String dataHojeStr = CommonsUtil.formataDataHora(dataHoje);

		// Tatiane
		rValidaDocs = rDao.findById((long) 643);
		// envia a mensagem
		takeBlipMB.sendWhatsAppMessageContratoBaixado(rValidaDocs, "operacao_baixada", getNomeUsuarioLogado(),
				this.objetoContratoCobranca.getNumeroContrato(), dataHojeStr);

		context.addMessage(null,
				new FacesMessage(FacesMessage.SEVERITY_INFO,
						"Contrato Cobrança: Pré-Contrato baixado com sucesso! (Contrato: "
								+ this.objetoContratoCobranca.getNumeroContrato() + ")!",
						""));
	}

	public void baixarPreContratoSemMensagem() {
		FacesContext context = FacesContext.getCurrentInstance();
		this.objetoContratoCobranca.setStatus("Baixado");
		this.objetoContratoCobranca.setStatusContrato("Baixado");
		this.objetoContratoCobranca.setContratoResgatadoBaixar(false);
		this.objetoContratoCobranca.setBaixadoData(DateUtil.gerarDataHoje());
		this.objetoContratoCobranca.setBaixadoUsuario("Sistema");
		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();
		this.objetoContratoCobranca.populaStatusEsteira(getUsuarioLogadoNull());
		contratoCobrancaDao.merge(this.objetoContratoCobranca);
	}

	public void baixarPreContratoAutomatico() {
		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();
		this.contratosPendentes = new ArrayList<ContratoCobranca>();

		TimeZone zone = TimeZone.getDefault();
		Locale locale = new Locale("pt", "BR");
		Calendar dataHoje = Calendar.getInstance(zone, locale);
		Date auxDataHoje = dataHoje.getTime();

		this.contratosPendentes = contratoCobrancaDao.ConsultaContratosASeremBaixados(auxDataHoje);

		for (ContratoCobranca contratos : this.contratosPendentes) {

			this.objetoContratoCobranca = contratoCobrancaDao.findById(contratos.getId());
			if (!this.objetoContratoCobranca.getStatus().equals("Aprovado")) {
				// System.out.println("Contrato na Lista a ser Baixado: " +
				// this.objetoContratoCobranca.getNumeroContrato());

				if (CommonsUtil.mesmoValor(this.objetoContratoCobranca.getStatusLead(), "Ag. Contato")) {
					this.objetoContratoCobranca.setStatusLead("Arquivado");
					this.objetoContratoCobranca.populaStatusEsteira(getUsuarioLogadoNull());
					contratoCobrancaDao.merge(this.objetoContratoCobranca);
				}

				if (!CommonsUtil.semValor(objetoContratoCobranca.getDataUltimaAtualizacao())) {
					if (DateUtil.getDifferenceDays(objetoContratoCobranca.getDataUltimaAtualizacao(),
							auxDataHoje) > 15) {
						if (!objetoContratoCobranca.isContratoResgatadoBaixar()) {
							baixarPreContratoSemMensagem();
						} else if (DateUtil.getDifferenceDays(objetoContratoCobranca.getContratoResgatadoData(),
								auxDataHoje) > 15) {
							baixarPreContratoSemMensagem();
						}
					}
				} else {
					if (!objetoContratoCobranca.isContratoResgatadoBaixar()) {
						baixarPreContratoSemMensagem();
					} else if (DateUtil.getDifferenceDays(objetoContratoCobranca.getContratoResgatadoData(),
							auxDataHoje) > 15) {
						baixarPreContratoSemMensagem();
					}
				}
			}
		}
	}

	public void enviaZapLeadEmTratamento() {
		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();
		this.contratosPendentes = new ArrayList<ContratoCobranca>();

		TimeZone zone = TimeZone.getDefault();
		Locale locale = new Locale("pt", "BR");
		Calendar dataHoje = Calendar.getInstance(zone, locale);
		Date auxDataHoje = dataHoje.getTime();

		this.contratosPendentes = contratoCobrancaDao.ConsultaZapLeadsEmTratamento(auxDataHoje);

		for (ContratoCobranca contratos : this.contratosPendentes) {

			this.objetoContratoCobranca = contratoCobrancaDao.findById(contratos.getId());

			if (CommonsUtil.mesmoValor(this.objetoContratoCobranca.getStatusLead(), "Em Tratamento")) {
				this.objetoContratoCobranca.setEnviadoWhatsAppLeadStandby(true);
				contratoCobrancaDao.merge(this.objetoContratoCobranca);
			}

			TakeBlipMB tkblpMb = new TakeBlipMB();
			PagadorRecebedor pagador;
			pagador = this.objetoContratoCobranca.getPagador();
			// pagador = new PagadorRecebedorDao().findById(10737l);
			tkblpMb.sendWhatsAppMessagePagadorLeadStandby(pagador, "leads_standby");
		}
	}

	public void enviaZapCartorio() {
		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();
		this.contratosPendentes = new ArrayList<ContratoCobranca>();

		TimeZone zone = TimeZone.getDefault();
		Locale locale = new Locale("pt", "BR");
		Calendar dataHoje = Calendar.getInstance(zone, locale);
		Date auxDataHoje = dataHoje.getTime();

		this.contratosPendentes = contratoCobrancaDao.ConsultaContratosCartorio(auxDataHoje);

		ResponsavelDao rDao = new ResponsavelDao();

		Responsavel rCcb1 = new Responsavel();
		Responsavel rCcb2 = new Responsavel();
		Responsavel rCcb3 = new Responsavel();
		Responsavel rCcb4 = new Responsavel();

		// Amanda
		rCcb1 = rDao.findById((long) 621);
		// Anna Flavia
		rCcb2 = rDao.findById((long) 622);
		// Flavia
		rCcb3 = rDao.findById((long) 623);
		// Luana
		rCcb4 = rDao.findById((long) 625);

		for (ContratoCobranca contratos : this.contratosPendentes) {

			this.objetoContratoCobranca = contratoCobrancaDao.findById(contratos.getId());

			this.objetoContratoCobranca.setNotificacaoCartorioData(
					DateUtil.adicionarDias(objetoContratoCobranca.getNotificacaoCartorioData(), 5));
			contratoCobrancaDao.merge(this.objetoContratoCobranca);

			TakeBlipMB tkblpMb = new TakeBlipMB();

			// Amanda
			// rCcb1 = rDao.findById((long) 621);
			tkblpMb.sendWhatsAppMessageCartorio(rCcb1, "notificacao_cartorio",
					this.objetoContratoCobranca.getNumeroContrato(), this.objetoContratoCobranca.getPagador().getNome(),
					this.objetoContratoCobranca.getNotificacaoCartorioData());

			// Anna Flavia
			// rCcb2 = rDao.findById((long) 622);
			tkblpMb.sendWhatsAppMessageCartorio(rCcb2, "notificacao_cartorio",
					this.objetoContratoCobranca.getNumeroContrato(), this.objetoContratoCobranca.getPagador().getNome(),
					this.objetoContratoCobranca.getNotificacaoCartorioData());

			// Flavia
			// rCcb3 = rDao.findById((long) 623);
			tkblpMb.sendWhatsAppMessageCartorio(rCcb3, "notificacao_cartorio",
					this.objetoContratoCobranca.getNumeroContrato(), this.objetoContratoCobranca.getPagador().getNome(),
					this.objetoContratoCobranca.getNotificacaoCartorioData());

			// Luana
			// rCcb4 = rDao.findById((long) 625);
			tkblpMb.sendWhatsAppMessageCartorio(rCcb4, "notificacao_cartorio",
					this.objetoContratoCobranca.getNumeroContrato(), this.objetoContratoCobranca.getPagador().getNome(),
					this.objetoContratoCobranca.getNotificacaoCartorioData());
		}
	}
	
	public void agendarWhatsappCobranca(){
		Date dataNotificacao = DateUtil.adicionarMes(objetoContratoCobranca.getDataInicio(), objetoContratoCobranca.getMesesCarencia() + 1);
		dataNotificacao = DateUtil.adicionarDias(dataNotificacao, -10);
		this.objetoContratoCobranca.setNotificacaoCobrancaData(dataNotificacao);
	}
	
	public void enviaZapCobranca() {
		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();
		this.contratosPendentes = new ArrayList<ContratoCobranca>();

		TimeZone zone = TimeZone.getDefault();
		Locale locale = new Locale("pt", "BR");
		Calendar dataHoje = Calendar.getInstance(zone, locale);
		Date auxDataHoje = dataHoje.getTime();

		this.contratosPendentes = contratoCobrancaDao.ConsultaContratosCobranca(auxDataHoje);

		ResponsavelDao rDao = new ResponsavelDao();

		Responsavel rCcb1 = new Responsavel();
		Responsavel rCcb2 = new Responsavel();
		Responsavel rCcb3 = new Responsavel();
		Responsavel rCcb4 = new Responsavel();

		// Camilo
		rCcb1 = rDao.findById((long) 1175);
		
		// Ana Beatriz
		rCcb2 = rDao.findById((long) 2049);
		
		// Lucas
		//rCcb1 = rDao.findById((long) 1137);
		
		for (ContratoCobranca contratos : this.contratosPendentes) {

			this.objetoContratoCobranca = contratoCobrancaDao.findById(contratos.getId());
			Date dataVencimento = objetoContratoCobranca.getListContratoCobrancaDetalhes().get(objetoContratoCobranca.getMesesCarencia() + 1).getDataVencimento();
					//DateUtil.adicionarDias(this.objetoContratoCobranca.getNotificacaoCobrancaData(), 10);
			
			this.objetoContratoCobranca.setNotificacaoCobrancaData(null);
			contratoCobrancaDao.merge(this.objetoContratoCobranca);

			TakeBlipMB tkblpMb = new TakeBlipMB();
			tkblpMb.sendWhatsAppMessageCobranca(rCcb1, "notificacao_parcela_vencendo", dataVencimento,
					this.objetoContratoCobranca.getNumeroContrato(), this.objetoContratoCobranca.getPagador().getNome());
			
			tkblpMb.sendWhatsAppMessageCobranca(rCcb2, "notificacao_parcela_vencendo", dataVencimento,
					this.objetoContratoCobranca.getNumeroContrato(), this.objetoContratoCobranca.getPagador().getNome());
		}
	}

	public void recuperarContratoReprovado() {
		FacesContext context = FacesContext.getCurrentInstance();
		this.objetoContratoCobranca = getContratoById(this.objetoContratoCobranca.getId());
		this.objetoContratoCobranca.setStatusContrato("Em Análise");
		this.objetoContratoCobranca.setReprovado(false);
		this.objetoContratoCobranca.setStatus("Pendente");
		if (!CommonsUtil.semValor(this.objetoContratoCobranca.getCadastroAprovadoValor())
				&& CommonsUtil.mesmoValor(this.objetoContratoCobranca.getCadastroAprovadoValor(), "Reprovado")) {
			this.objetoContratoCobranca.setCadastroAprovadoValor("Aprovado");
		}
		this.objetoContratoCobranca.setAnaliseReprovada(false);
		this.objetoContratoCobranca.setAnaliseReprovadaData(null);
		this.objetoContratoCobranca.setAnaliseReprovadaUsuario(null);

		this.objetoContratoCobranca.setContratoResgatadoBaixar(true);
		this.objetoContratoCobranca.setContratoResgatadoData(DateUtil.gerarDataHoje());

		updateCheckList();

		this.objetoContratoCobranca.setContratoResgatadoBaixar(true);
		this.objetoContratoCobranca.setContratoResgatadoData(DateUtil.gerarDataHoje());

		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();
		this.objetoContratoCobranca.populaStatusEsteira(getUsuarioLogadoNull());
		contratoCobrancaDao.merge(this.objetoContratoCobranca);

		context.addMessage(null,
				new FacesMessage(FacesMessage.SEVERITY_INFO,
						"Contrato Cobrança: Pré-Contrato resgatado com sucesso! (Contrato: "
								+ this.objetoContratoCobranca.getNumeroContrato() + ")!",
						""));
	}

	public void recuperarPreContratoBaixado() {
		FacesContext context = FacesContext.getCurrentInstance();
		this.objetoContratoCobranca = getContratoById(this.objetoContratoCobranca.getId());
		this.objetoContratoCobranca.setStatus("Pendente");
		this.objetoContratoCobranca.setStatusContrato("Em Análise");
		updateCheckList();
		this.objetoContratoCobranca.setContratoResgatadoBaixar(true);
		this.objetoContratoCobranca.setContratoResgatadoData(DateUtil.gerarDataHoje());

		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();
		this.objetoContratoCobranca.populaStatusEsteira(getUsuarioLogadoNull());
		contratoCobrancaDao.merge(this.objetoContratoCobranca);

		context.addMessage(null,
				new FacesMessage(FacesMessage.SEVERITY_INFO,
						"Contrato Cobrança: Pré-Contrato resgatado com sucesso! (Contrato: "
								+ this.objetoContratoCobranca.getNumeroContrato() + ")!",
						""));
	}

	public void retirarPendencia() {
		FacesContext context = FacesContext.getCurrentInstance();
		this.objetoContratoCobranca.setInicioAnalise(false);
		this.objetoContratoCobranca.setCadastroAprovadoValor("");
		updateCheckList();
		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();
		this.objetoContratoCobranca.populaStatusEsteira(getUsuarioLogadoNull());
		contratoCobrancaDao.merge(this.objetoContratoCobranca);

		context.addMessage(null,
				new FacesMessage(FacesMessage.SEVERITY_INFO,
						"Contrato Cobrança: Pendência retirada com sucesso! (Contrato: "
								+ this.objetoContratoCobranca.getNumeroContrato() + ")!",
						""));
	}

	public String baixarEConsultarPreContrato() {
		this.objetoContratoCobranca = getContratoById(this.objetoContratoCobranca.getId());
		baixarPreContrato();
		return geraConsultaContratosBaixados();
	}

	private BigDecimal valorPresenteParcela;
	private Date dataCalculoValorPresente;

	private int numeroPresenteParcela;
	private int numeroParcelaQuitar;
	private Date dataQuitacao;
	private boolean calcularComSeguro;

	private Date dataAmortizacao;
	private BigDecimal valorPresenteTotal;
	private BigDecimal amortizacaoPresenteTotal;
	private BigDecimal porcentagemDesconto;
	private BigDecimal valorComDesconto;
	private String tipoAmortizacao;

	private QuitacaoPDF quitacaoPDF = new QuitacaoPDF();

	public void calcularValorPresenteParcela() {
		TimeZone zone = TimeZone.getDefault();
		Locale locale = new Locale("pt", "BR");
		// Calendar dataHoje = Calendar.getInstance(zone, locale);
		// Date auxDataHoje = dataHoje.getTime();

		ContratoCobrancaDetalhes parcelas = this.objetoContratoCobranca.getListContratoCobrancaDetalhes()
				.get(this.numeroPresenteParcela);
		BigDecimal juros = this.objetoContratoCobranca.getTxJurosParcelas();
		BigDecimal saldo = parcelas.getVlrJurosParcela().add(parcelas.getVlrAmortizacaoParcela());
		BigDecimal quantidadeDeMeses = BigDecimal.ONE;

		quantidadeDeMeses = BigDecimal
				.valueOf(DateUtil.Days360(dataCalculoValorPresente, parcelas.getDataVencimento()));

		quantidadeDeMeses = quantidadeDeMeses.divide(BigDecimal.valueOf(30), MathContext.DECIMAL128);

		/*
		 * if(quantidadeDeMeses.compareTo(BigDecimal.ZERO) == -1) { quantidadeDeMeses =
		 * quantidadeDeMeses.multiply(BigDecimal.valueOf(-1)); }
		 */

		Double quantidadeDeMesesDouble = CommonsUtil.doubleValue(quantidadeDeMeses);

		juros = juros.divide(BigDecimal.valueOf(100));
		juros = juros.add(BigDecimal.ONE);

		double divisor = Math.pow(CommonsUtil.doubleValue(juros), quantidadeDeMesesDouble);

		this.valorPresenteParcela = (saldo).divide(CommonsUtil.bigDecimalValue(divisor), MathContext.DECIMAL128);
		this.valorPresenteParcela = this.valorPresenteParcela.setScale(2, BigDecimal.ROUND_HALF_UP);

		if (parcelas.getDataVencimento().before(getDataHoje())) {
			if (!CommonsUtil.semValor(parcelas.getSeguroDFI())) {
				valorPresenteParcela = valorPresenteParcela.add(parcelas.getSeguroDFI());
			}
			if (!CommonsUtil.semValor(parcelas.getSeguroMIP())) {
				valorPresenteParcela = valorPresenteParcela.add(parcelas.getSeguroMIP());
			}
			if (!CommonsUtil.semValor(parcelas.getTaxaAdm())) {
				valorPresenteParcela = valorPresenteParcela.add(parcelas.getTaxaAdm());
			}
		}
	}

	public void calcularValorPresenteParcela(boolean calcularComSeguro) {
		TimeZone zone = TimeZone.getDefault();
		Locale locale = new Locale("pt", "BR");
		Calendar dataHoje = Calendar.getInstance(zone, locale);
		Date auxDataHoje = dataHoje.getTime();

		ContratoCobrancaDetalhes parcelas = this.objetoContratoCobranca.getListContratoCobrancaDetalhes()
				.get(this.numeroPresenteParcela);
		BigDecimal juros = this.objetoContratoCobranca.getTxJurosParcelas();
		BigDecimal saldo;
		if (calcularComSeguro) {
			saldo = parcelas.getVlrParcela();
		} else {
			saldo = parcelas.getVlrJurosParcela().add(parcelas.getVlrAmortizacaoParcela());
		}

		BigDecimal quantidadeDeMeses = BigDecimal.ONE;

		quantidadeDeMeses = BigDecimal.valueOf(DateUtil.Days360(auxDataHoje, parcelas.getDataVencimento()));

		quantidadeDeMeses = quantidadeDeMeses.divide(BigDecimal.valueOf(30), MathContext.DECIMAL128);

		/*
		 * if(quantidadeDeMeses.compareTo(BigDecimal.ZERO) == -1) { quantidadeDeMeses =
		 * quantidadeDeMeses.multiply(BigDecimal.valueOf(-1)); }
		 */

		Double quantidadeDeMesesDouble = CommonsUtil.doubleValue(quantidadeDeMeses);

		juros = juros.divide(BigDecimal.valueOf(100));
		juros = juros.add(BigDecimal.ONE);

		double divisor = Math.pow(CommonsUtil.doubleValue(juros), quantidadeDeMesesDouble);

		this.valorPresenteParcela = (saldo).divide(CommonsUtil.bigDecimalValue(divisor), MathContext.DECIMAL128);
		this.valorPresenteParcela = this.valorPresenteParcela.setScale(2, BigDecimal.ROUND_HALF_UP);

		if (parcelas.getDataVencimento().before(getDataHoje())) {
			if (!CommonsUtil.semValor(parcelas.getSeguroDFI())) {
				valorPresenteParcela = valorPresenteParcela.add(parcelas.getSeguroDFI());
			}
			if (!CommonsUtil.semValor(parcelas.getSeguroMIP())) {
				valorPresenteParcela = valorPresenteParcela.add(parcelas.getSeguroMIP());
			}
			if (!CommonsUtil.semValor(parcelas.getTaxaAdm())) {
				valorPresenteParcela = valorPresenteParcela.add(parcelas.getTaxaAdm());
			}
		}
	}

	public BigDecimal calcularValorPresenteTotalContrato(ContratoCobranca contrato) {
		TimeZone zone = TimeZone.getDefault();
		Locale locale = new Locale("pt", "BR");
		Calendar dataHoje = Calendar.getInstance(zone, locale);
		Date auxDataHoje = dataHoje.getTime();

		BigDecimal valorPresenteTotalContrato = BigDecimal.ZERO;
		BigDecimal juros = contrato.getTxJurosParcelas();

		for (ContratoCobrancaDetalhes parcelas : contrato.getListContratoCobrancaDetalhes()) {
			this.valorPresenteParcela = BigDecimal.ZERO;
			BigDecimal saldo = parcelas.getVlrJurosParcela().add(parcelas.getVlrAmortizacaoParcela());
			BigDecimal quantidadeDeMeses = BigDecimal.ONE;

			quantidadeDeMeses = BigDecimal.valueOf(DateUtil.Days360(auxDataHoje, parcelas.getDataVencimento()));

			quantidadeDeMeses = quantidadeDeMeses.divide(BigDecimal.valueOf(30), MathContext.DECIMAL128);

			/*
			 * if(quantidadeDeMeses.compareTo(BigDecimal.ZERO) == -1) { quantidadeDeMeses =
			 * quantidadeDeMeses.multiply(BigDecimal.valueOf(-1)); }
			 */

			Double quantidadeDeMesesDouble = CommonsUtil.doubleValue(quantidadeDeMeses);

			juros = juros.divide(BigDecimal.valueOf(100));
			juros = juros.add(BigDecimal.ONE);

			double divisor = Math.pow(CommonsUtil.doubleValue(juros), quantidadeDeMesesDouble);

			this.valorPresenteParcela = (saldo).divide(CommonsUtil.bigDecimalValue(divisor), MathContext.DECIMAL128);
			this.valorPresenteParcela = this.valorPresenteParcela.setScale(2, BigDecimal.ROUND_HALF_UP);

			if (parcelas.getDataVencimento().before(getDataHoje())) {
				if (!CommonsUtil.semValor(parcelas.getSeguroDFI())) {
					valorPresenteParcela = valorPresenteParcela.add(parcelas.getSeguroDFI());
				}
				if (!CommonsUtil.semValor(parcelas.getSeguroMIP())) {
					valorPresenteParcela = valorPresenteParcela.add(parcelas.getSeguroMIP());
				}
				if (!CommonsUtil.semValor(parcelas.getTaxaAdm())) {
					valorPresenteParcela = valorPresenteParcela.add(parcelas.getTaxaAdm());
				}
			}

			valorPresenteTotalContrato = valorPresenteTotalContrato.add(this.valorPresenteParcela);
		}

		return valorPresenteTotalContrato;
	}

	private List<ContratoCobrancaDetalhes> listContratoCobrancaDetalhesQuitar;

	public void clearQuitarContratoDialog() {
		TimeZone zone = TimeZone.getDefault();
		Locale locale = new Locale("pt", "BR");
		Calendar dataHoje = Calendar.getInstance(zone, locale);
		Date auxDataHoje = dataHoje.getTime();

		this.numeroParcelaQuitar = 0;
		this.dataQuitacao = auxDataHoje;
		this.quitacaoPDF = new QuitacaoPDF();
		this.porcentagemDesconto = BigDecimal.ZERO;
		this.valorComDesconto = BigDecimal.ZERO;

		simularQuitacaoContrato();
	}

	public void simularQuitacaoContrato() {
		this.valorPresenteTotal = BigDecimal.ZERO;
		// this.listContratoCobrancaDetalhesQuitar =
		// this.objetoContratoCobranca.getListContratoCobrancaDetalhes();
		this.listContratoCobrancaDetalhesQuitar = new ArrayList<ContratoCobrancaDetalhes>();
		for (ContratoCobrancaDetalhes parcelaContrato : this.objetoContratoCobranca.getListContratoCobrancaDetalhes()) {
			ContratoCobrancaDetalhes parcelaQuitacao = new ContratoCobrancaDetalhes(parcelaContrato);
			this.listContratoCobrancaDetalhesQuitar.add(parcelaQuitacao);
		}

		String cpf = "";
		if (!CommonsUtil.semValor(this.objetoContratoCobranca.getPagador().getCpf())) {
			cpf = this.objetoContratoCobranca.getPagador().getCpf();
		} else if (!CommonsUtil.semValor(this.objetoContratoCobranca.getPagador().getCnpj())) {
			cpf = this.objetoContratoCobranca.getPagador().getCnpj();
		}
		quitacaoPDF = new QuitacaoPDF(this.objetoContratoCobranca.getPagador().getNome(), this.dataQuitacao,
				this.objetoContratoCobranca.getNumeroContratoSeguro(), cpf);
		valorComDesconto = BigDecimal.ZERO;
		for (ContratoCobrancaDetalhes parcelas : listContratoCobrancaDetalhesQuitar) {
			if (parcelas.isParcelaPaga()) {
				continue;
			}
			this.valorPresenteParcela = BigDecimal.ZERO;
			if (CommonsUtil.intValue(parcelas.getNumeroParcela()) >= numeroParcelaQuitar) {
				BigDecimal valorParcelaPDF = parcelas.getVlrParcela();
				BigDecimal desconto = BigDecimal.ZERO;

				if (this.dataQuitacao.after(parcelas.getDataVencimento())
						|| this.dataQuitacao.after(DateUtil.adicionarDias(parcelas.getDataVencimento(), -30))) {
					calcularValorPresenteParcelaDataValor(this.dataQuitacao, parcelas, parcelas.getVlrParcela());
				} else {
					this.numeroPresenteParcela = CommonsUtil.intValue(parcelas.getNumeroParcela());
					calcularValorPresenteParcelaData(this.dataQuitacao, parcelas);
					if (this.objetoContratoCobranca.isTemTxAdm()) {
						valorPresenteParcela = valorPresenteParcela.add(SiscoatConstants.TAXA_ADM);
					}
				}

				valorPresenteTotal = valorPresenteTotal.add(this.valorPresenteParcela);
				if (!CommonsUtil.semValor(porcentagemDesconto)) {
					BigDecimal porcentagem = BigDecimal.valueOf(100).subtract(porcentagemDesconto);
					porcentagem = porcentagem.divide(BigDecimal.valueOf(100));
					valorComDesconto = valorComDesconto.add(valorPresenteParcela.multiply(porcentagem));
					valorPresenteParcela = valorPresenteParcela.multiply(porcentagem);
					valorPresenteParcela = valorPresenteParcela.setScale(2, RoundingMode.HALF_EVEN);
				}
				desconto = valorParcelaPDF.subtract(valorPresenteParcela);

				QuitacaoParcelasPDF parcelaPDF = new QuitacaoParcelasPDF(parcelas.getNumeroParcela(),
						parcelas.getDataVencimento(), valorParcelaPDF, desconto, valorPresenteParcela);
				quitacaoPDF.getParcelas().add(parcelaPDF);
			}
		}
		if (CommonsUtil.semValor(porcentagemDesconto)) {
			valorComDesconto = valorPresenteTotal;
		}
		valorComDesconto = valorComDesconto.setScale(2, RoundingMode.HALF_EVEN);
		quitacaoPDF.setValorQuitacao(valorComDesconto);
		// quitarContrato(listContratoCobrancaDetalhesQuitar);
	}

	public void quitarContrato(List<ContratoCobrancaDetalhes> listaParcelas) {
		ContratoCobrancaDetalhesDao contratoCobrancaDetalhesDao = new ContratoCobrancaDetalhesDao();
		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();
		valorPresenteTotal = BigDecimal.ZERO;
		// this.selectedListContratoCobrancaDetalhes = new
		// ArrayList<ContratoCobrancaDetalhes>();

		for (ContratoCobrancaDetalhes parcelas : listaParcelas) {
			this.valorPresenteParcela = BigDecimal.ZERO;
			if (!parcelas.isParcelaPaga() && CommonsUtil.intValue(parcelas.getNumeroParcela()) >= numeroParcelaQuitar) {

				if (this.dataQuitacao.after(parcelas.getDataVencimento())
						|| this.dataQuitacao.after(DateUtil.adicionarDias(parcelas.getDataVencimento(), -30))) {
					calcularValorPresenteParcelaDataValor(this.dataQuitacao, parcelas, parcelas.getVlrParcela());
				} else {
					this.numeroPresenteParcela = CommonsUtil.intValue(parcelas.getNumeroParcela());
					calcularValorPresenteParcelaData(this.dataQuitacao, parcelas);
					if (this.objetoContratoCobranca.isTemTxAdm()) {
						valorPresenteParcela = valorPresenteParcela.add(SiscoatConstants.TAXA_ADM);
					}
				}

				valorPresenteTotal = valorPresenteTotal.add(this.valorPresenteParcela);
				if (!CommonsUtil.semValor(porcentagemDesconto)) {
					BigDecimal porcentagem = BigDecimal.valueOf(100).subtract(porcentagemDesconto);
					porcentagem = porcentagem.divide(BigDecimal.valueOf(100));
					valorPresenteParcela = valorPresenteParcela.multiply(porcentagem);
					valorPresenteParcela = valorPresenteParcela.setScale(2, RoundingMode.HALF_EVEN);
				}

				parcelas.setValorTotalPagamento(this.valorPresenteParcela);
				parcelas.setDataUltimoPagamento(this.dataQuitacao);

				////////////////////////////////////////////////

				TimeZone zone = TimeZone.getDefault();
				Locale locale = new Locale("pt", "BR");

				Calendar dataPagamento = Calendar.getInstance(zone, locale);
				dataPagamento.setTime(this.dataQuitacao);

				ContratoCobrancaDetalhesParcial contratoCobrancaDetalhesParcial = new ContratoCobrancaDetalhesParcial();

				if (this.selectedRecebedor != null) {
					if (this.selectedRecebedor.getId() > 0) {
						contratoCobrancaDetalhesParcial.setRecebedor(this.selectedRecebedor);
					}
				}

				if (this.observacao != null) {
					contratoCobrancaDetalhesParcial.setObservacaoRecebedor(this.observacao);
				}

				contratoCobrancaDetalhesParcial.setDataVencimento(parcelas.getDataVencimento());
				contratoCobrancaDetalhesParcial.setDataVencimentoAtual(parcelas.getDataVencimentoAtual());
				contratoCobrancaDetalhesParcial.setNumeroParcela(parcelas.getNumeroParcela());
				contratoCobrancaDetalhesParcial.setDataPagamento(dataPagamento.getTime());
				contratoCobrancaDetalhesParcial.setVlrParcela(parcelas.getVlrParcela());
				contratoCobrancaDetalhesParcial.setVlrRecebido(parcelas.getValorTotalPagamento());
				contratoCobrancaDetalhesParcial.setVlrParcelaAtualizado(parcelas.getVlrParcela());
				contratoCobrancaDetalhesParcial.setSaldoAPagar(BigDecimal.ZERO);
				contratoCobrancaDetalhesParcial.setVlrParcelaAtualizado(parcelas.getVlrParcelaAtualizada());
				parcelas.getListContratoCobrancaDetalhesParcial().add(contratoCobrancaDetalhesParcial);
				parcelas.setParcelaPaga(true);
				parcelas.setOrigemBaixa("quitarContrato");
				if (parcelas.getId() > 0) {
					contratoCobrancaDetalhesDao.merge(parcelas);
					// this.selectedListContratoCobrancaDetalhes.add(parcelas);
				}
			}
		}
		System.out.print("");
	}

	public void calcularPorcentagemDesconto() {
		if (CommonsUtil.semValor(valorComDesconto) || CommonsUtil.semValor(valorPresenteTotal))
			return;
		BigDecimal regra3 = valorComDesconto.multiply(BigDecimal.valueOf(100));
		regra3 = regra3.divide(valorPresenteTotal, MathContext.DECIMAL128);
		porcentagemDesconto = regra3;
		porcentagemDesconto = porcentagemDesconto.subtract(BigDecimal.valueOf(100));
		porcentagemDesconto = porcentagemDesconto.negate();
		porcentagemDesconto = porcentagemDesconto.setScale(6, RoundingMode.HALF_EVEN);
		simularQuitacaoContrato();
	}

	public StreamedContent downloadPDFQuitacao() throws JRException, IOException {
		if (!CommonsUtil.semValor(this.quitacaoPDF.getParcelas())) {
			JasperPrint jp = null;
			jp = geraPDFSimulacao();
			final GeradorRelatorioDownloadCliente gerador = new GeradorRelatorioDownloadCliente(
					FacesContext.getCurrentInstance());
			String identificacao = quitacaoPDF.getNome();
			if (CommonsUtil.semValor(identificacao))
				gerador.open("Galleria Bank - Quitação.pdf");
			else {
				String nomeArquivoDownload = String.format("Galleria Bank - Quitação %s.pdf", identificacao);
				gerador.open(nomeArquivoDownload);
			}
			gerador.feed(jp);
			gerador.close();
		}
		return null;
	}

	public JasperPrint geraPDFSimulacao() throws JRException, IOException {
		final ReportUtil ReportUtil = new ReportUtil();
		JasperReport rptSimulacao = ReportUtil.getRelatorio("QuitacaoContrato");
		JasperReport rptSimulacaoDetalhe = ReportUtil.getRelatorio("QuitacaoParcelas");
		InputStream logoStream = getClass().getResourceAsStream("/resource/GalleriaBank.png");
		Map<String, Object> parameters = new HashMap<String, Object>();
		parameters.put("SUBREPORT_DETALHE", rptSimulacaoDetalhe);
		parameters.put("IMAGEMLOGO", IOUtils.toByteArray(logoStream));
		parameters.put("REPORT_LOCALE", new Locale("pt", "BR"));
		parameters.put("MOSTRARIPCA", true);
		List<QuitacaoPDF> list = new ArrayList<QuitacaoPDF>();
		list.add(quitacaoPDF);
		final JRBeanCollectionDataSource dataSource = new JRBeanCollectionDataSource(list);
		return JasperFillManager.fillReport(rptSimulacao, parameters, dataSource);
	}

	public void geraJSONLiquidacao() {
		String nomeJSON = "";
		BigDecimal valorTotalLiquidacao = BigDecimal.ZERO;
		int qtdeLiquidados = 0;

		String contratosErros = null;

		String patternyyyyMMdd = "yyyyMMdd";
		SimpleDateFormat simpleDateFormatyyyyMMdd = new SimpleDateFormat(patternyyyyMMdd);
		String patternyyyyMMddComTraco = "yyyy-MM-dd";
		SimpleDateFormat simpleDateFormatyyyyMMddComTraco = new SimpleDateFormat(patternyyyyMMddComTraco);
		String identificadorCessao = simpleDateFormatyyyyMMdd.format(DateUtil.gerarDataHoje()) + "_LIQ";

		JSONObject jsonSchema = new JSONObject();
		jsonSchema.put("$schema", "https://schemas.brltrust.com.br/json/fidc/v1.2/cessao.schema.json");

		JSONObject jsonFundo = new JSONObject();
		jsonFundo.put("identificacao", Long.valueOf("37294759000134"));
		jsonFundo.put("nome", "FIDC GALLERIA");
		jsonSchema.put("fundo", jsonFundo);

		JSONObject jsonCessao = new JSONObject();

		JSONObject jsonOriginador = new JSONObject();
		jsonOriginador.put("codigo", "34425347000106");
		jsonOriginador.put("nome", "GALLERIA FINANCAS SEC");
		jsonCessao.put("originador", jsonOriginador);

		jsonCessao.put("identificadorCessao", identificadorCessao);

		JSONArray jsonRecebiveis = new JSONArray();

		for (ContratoCobrancaDetalhes detalhes : objetoContratoCobranca.getListContratoCobrancaDetalhes()) {
			if (detalhes.isParcelaPaga()) {
				continue;
			}
			ContratoCobrancaBRLLiquidacao parcela = new ContratoCobrancaBRLLiquidacao();
			String numero = detalhes.getNumeroParcela();
			if (numero.length() == 1) {
				numero = "00" + numero;
			} else if (numero.length() == 2) {
				numero = "0" + numero;
			} else {
				numero = numero;
			}
			this.valorPresenteParcela = BigDecimal.ZERO;

			if (this.dataQuitacao.after(detalhes.getDataVencimento())
					|| this.dataQuitacao.after(DateUtil.adicionarDias(detalhes.getDataVencimento(), -30))) {
				calcularValorPresenteParcelaDataValor(this.dataQuitacao, detalhes, detalhes.getVlrParcela());
			} else {
				this.numeroPresenteParcela = CommonsUtil.intValue(detalhes.getNumeroParcela());
				calcularValorPresenteParcelaData(this.dataQuitacao, detalhes);
				if (this.objetoContratoCobranca.isTemTxAdm()) {
					valorPresenteParcela = valorPresenteParcela.add(SiscoatConstants.TAXA_ADM);
				}
			}
			BigDecimal vlrParcela = BigDecimal.ZERO;
			BigDecimal valorParcelaOriginal = BigDecimal.ZERO;
			if (!CommonsUtil.semValor(detalhes.getVlrAmortizacaoParcela())) {
				vlrParcela = vlrParcela.add(detalhes.getVlrAmortizacaoParcela());
				valorParcelaOriginal = valorParcelaOriginal.add(detalhes.getVlrAmortizacaoParcela());
			}
			if (!CommonsUtil.semValor(detalhes.getVlrJurosParcela())) {
				vlrParcela = vlrParcela.add(detalhes.getVlrJurosParcela());
				valorParcelaOriginal = valorParcelaOriginal.add(detalhes.getVlrJurosParcela());
			}
			parcela.setNumeroParcela(numero);
			parcela.setVlrAmortizacaoParcela(detalhes.getVlrAmortizacaoParcela());
			parcela.setDataVencimento(detalhes.getDataVencimento());
			parcela.setDataPagamento(dataQuitacao);
			parcela.setVlrParcela(vlrParcela);
			parcela.setVlrRecebido(valorPresenteParcela);
			parcela.setId(detalhes.getId());
			parcela.setVlrJurosSemIPCA(detalhes.getValorJurosSemIPCA());
			parcela.setVlrAmortizacaoSemIPCA(detalhes.getValorAmortizacaoSemIPCA());
			parcela.setContrato(this.objetoContratoCobranca);

			JSONObject jsonRecebivel = new JSONObject();

			String numeroParcela = "";

			if (parcela.getNumeroParcela().length() == 1) {
				numeroParcela = "00" + parcela.getNumeroParcela();
			} else if (parcela.getNumeroParcela().length() == 2) {
				numeroParcela = "0" + parcela.getNumeroParcela();
			} else {
				numeroParcela = parcela.getNumeroParcela();
			}

			jsonRecebivel.put("numeroControle", parcela.getContrato().getNumeroContratoSeguro() + "-" + numeroParcela);
			jsonRecebivel.put("coobrigacao", false);
			jsonRecebivel.put("ocorrencia", 33);
			jsonRecebivel.put("tipo", 73);
			jsonRecebivel.put("documento", parcela.getContrato().getNumeroContratoSeguro());
			jsonRecebivel.put("termoCessao", parcela.getContrato().getTermoCessao());

			JSONObject jsonSacado = new JSONObject();

			JSONObject jsonPessoa = new JSONObject();
			if (parcela.getContrato().getPagador().getCpf() != null
					&& !parcela.getContrato().getPagador().getCpf().equals("")) {
				jsonPessoa.put("tipo", "PF");
				jsonPessoa.put("identificacao",
						Long.valueOf(CommonsUtil.somenteNumeros((parcela.getContrato().getPagador().getCpf()))));
			} else {
				jsonPessoa.put("tipo", "PJ");
				jsonPessoa.put("identificacao",
						Long.valueOf(CommonsUtil.somenteNumeros(parcela.getContrato().getPagador().getCnpj())));
			}
			jsonPessoa.put("nome", parcela.getContrato().getPagador().getNome());
			jsonSacado.put("pessoa", jsonPessoa);

			JSONObject jsonEndereco = new JSONObject();
			if (!CommonsUtil.semValor(parcela.getContrato().getPagador().getCep())) {
				jsonEndereco.put("cep",
						Long.valueOf(CommonsUtil.somenteNumeros(parcela.getContrato().getPagador().getCep())));
			} else {
				jsonEndereco.put("cep", Long.valueOf(00000000));
			}
			jsonEndereco.put("logradouro", parcela.getContrato().getPagador().getEndereco());
			jsonEndereco.put("numero", parcela.getContrato().getPagador().getNumero());
			jsonEndereco.put("complemento", parcela.getContrato().getPagador().getComplemento());
			jsonEndereco.put("bairro", parcela.getContrato().getPagador().getBairro());
			jsonEndereco.put("municipio", parcela.getContrato().getPagador().getCidade());
			jsonEndereco.put("uf", parcela.getContrato().getPagador().getEstado());
			jsonSacado.put("endereco", jsonEndereco);
			jsonRecebivel.put("sacado", jsonSacado);

			JSONObject jsonCedente = new JSONObject();
			jsonCedente.put("tipo", "PJ");

			if (parcela.getContrato().getCedenteBRLCessao().equals("BMP Money Plus SCD S.A.")) {
				jsonCedente.put("identificacao", Long.valueOf("34337707000100"));
				jsonCedente.put("nome", "BMP Money Plus SCD S.A.");
			} else {
				jsonCedente.put("identificacao", Long.valueOf("34425347000106"));
				jsonCedente.put("nome", "Galleria Finanças Securitizadora S.A.");
			}
			jsonRecebivel.put("cedente", jsonCedente);

			jsonRecebivel.put("aquisicao",
					simpleDateFormatyyyyMMddComTraco.format(parcela.getContrato().getDataAquisicaoCessao()));
			jsonRecebivel.put("emissao",
					simpleDateFormatyyyyMMddComTraco.format(parcela.getContrato().getDataInicio()));
			jsonRecebivel.put("vencimento", simpleDateFormatyyyyMMddComTraco.format(parcela.getDataVencimento()));
			jsonRecebivel.put("liquidacao", simpleDateFormatyyyyMMddComTraco.format(parcela.getDataVencimento()));
			JSONObject jsonValores = new JSONObject();

			if (parcela.getVlrAmortizacaoSemIPCA() != null && parcela.getVlrJurosSemIPCA() != null) {
				jsonValores.put("face", parcela.getVlrAmortizacaoSemIPCA().add(parcela.getVlrJurosSemIPCA()).setScale(2,
						RoundingMode.HALF_EVEN));
			} else {
				if (contratosErros == null) {
					contratosErros = parcela.getContrato().getNumeroContrato();
				} else {
					contratosErros = contratosErros + " / " + parcela.getContrato().getNumeroContrato();
				}
			}
			if (parcela.getContrato() != null) {
				if (parcela.getContrato().getTxJurosCessao() != null) {
					jsonValores.put("aquisicao", calcularValorPresenteParcelaJson(parcela.getId(),
							parcela.getContrato().getTxJurosCessao(), parcela.getContrato().getDataAquisicaoCessao()));
				} else {
					jsonValores.put("aquisicao",
							calcularValorPresenteParcelaJson(parcela.getId(),
									parcela.getContrato().getTxJurosParcelas(),
									parcela.getContrato().getDataAquisicaoCessao()));
				}
			} else {
				jsonValores.put("aquisicao", calcularValorPresenteParcelaJson(parcela.getId(),
						parcela.getContrato().getTxJurosParcelas(), parcela.getContrato().getDataAquisicaoCessao()));
			}

			if (parcela.getDataPagamento().before(parcela.getDataVencimento())
					&& parcela.getVlrRecebido().compareTo(valorParcelaOriginal) < 0) {
				jsonValores.put("liquidacao", parcela.getVlrRecebido());

				valorTotalLiquidacao = valorTotalLiquidacao.add(parcela.getVlrRecebido());
			} else {
				jsonValores.put("liquidacao", valorParcelaOriginal);

				valorTotalLiquidacao = valorTotalLiquidacao.add(valorParcelaOriginal);
			}
			qtdeLiquidados = qtdeLiquidados + 1;
			jsonRecebivel.put("valores", jsonValores);
			JSONObject jsonDados = new JSONObject();
			jsonDados.put("indice", "IPCA");
			jsonRecebivel.put("dados", jsonDados);

			jsonRecebiveis.put(jsonRecebivel);
		}

		jsonCessao.put("recebiveis", jsonRecebiveis);

		jsonSchema.put("cessao", jsonCessao);

		nomeJSON = "JSON_BRL_Trust_Liquidacao_" + identificadorCessao + "_QtdeLiquidados_" + qtdeLiquidados
				+ "_ValorTotal_" + valorTotalLiquidacao + ".json";
		try {
			downloadJson(jsonSchema, nomeJSON);
		} catch (FileNotFoundException e) {
			e.printStackTrace();
		} catch (UnsupportedEncodingException e) {
			e.printStackTrace();
		} catch (IOException e) {
			e.printStackTrace();
		}
	}

	public BigDecimal calcularValorPresenteParcelaJson(Long idParcela, BigDecimal txJuros, Date dataAquisicao) {
		TimeZone zone = TimeZone.getDefault();
		Locale locale = new Locale("pt", "BR");
		Calendar dataHoje = Calendar.getInstance(zone, locale);
		// Date auxDataHoje = dataHoje.getTime();
		Date auxDataHoje = dataAquisicao;
		BigDecimal valorPresenteParcela;

		ContratoCobrancaDetalhesDao cDao = new ContratoCobrancaDetalhesDao();
		ContratoCobrancaDetalhes parcelas = cDao.findById(idParcela);

		BigDecimal juros = txJuros;
		BigDecimal saldo = BigDecimal.ZERO;

		if (parcelas.getValorJurosSemIPCA() != null && parcelas.getValorAmortizacaoSemIPCA() != null) {
			saldo = parcelas.getValorJurosSemIPCA().add(parcelas.getValorAmortizacaoSemIPCA());
		}

		BigDecimal quantidadeDeMeses = BigDecimal.ONE;

		quantidadeDeMeses = BigDecimal.valueOf(DateUtil.Days360(auxDataHoje, parcelas.getDataVencimento()));

		quantidadeDeMeses = quantidadeDeMeses.divide(BigDecimal.valueOf(30), MathContext.DECIMAL128);

		if (quantidadeDeMeses.compareTo(BigDecimal.ZERO) == -1) {
			quantidadeDeMeses = quantidadeDeMeses.multiply(BigDecimal.valueOf(-1));
		}

		Double quantidadeDeMesesDouble = CommonsUtil.doubleValue(quantidadeDeMeses);

		juros = juros.divide(BigDecimal.valueOf(100));
		juros = juros.add(BigDecimal.ONE);

		double divisor = Math.pow(CommonsUtil.doubleValue(juros), quantidadeDeMesesDouble);

		valorPresenteParcela = (saldo).divide(CommonsUtil.bigDecimalValue(divisor), MathContext.DECIMAL128);
		valorPresenteParcela = valorPresenteParcela.setScale(2, BigDecimal.ROUND_HALF_UP);

		return valorPresenteParcela;
	}

	private void downloadJson(JSONObject jsonSchema, String nomeJSON) throws IOException {
		final GeradorRelatorioDownloadCliente gerador = new GeradorRelatorioDownloadCliente(
				FacesContext.getCurrentInstance());
		String nomeSemvirgula = nomeJSON;
		if (nomeSemvirgula.contains(",")) {
			nomeSemvirgula = nomeSemvirgula.replace(",", "");
		}
		String nomeArquivoDownload = nomeSemvirgula;
		gerador.open(nomeArquivoDownload);

		gerador.feed(new ByteArrayInputStream(jsonSchema.toString().getBytes()));
		gerador.close();
	}

	public void amortizarContratoValorPresente() {

		ContratoCobrancaDetalhesDao contratoCobrancaDetalhesDao = new ContratoCobrancaDetalhesDao();
		TimeZone zone = TimeZone.getDefault();
		Locale locale = new Locale("pt", "BR");
		Calendar dataHoje = Calendar.getInstance(zone, locale);
		Calendar dataVencimentoParcela = Calendar.getInstance(zone, locale);
		dataVencimentoParcela.set(Calendar.HOUR_OF_DAY, 0);
		dataVencimentoParcela.set(Calendar.MINUTE, 0);
		dataVencimentoParcela.set(Calendar.SECOND, 0);
		dataVencimentoParcela.set(Calendar.MILLISECOND, 0);

		int iparcelas;
		this.listContratoCobrancaDetalhesQuitar = this.objetoContratoCobranca.getListContratoCobrancaDetalhes();

		if (CommonsUtil.mesmoValor(tipoAmortizacao, "crescente")) {
			iparcelas = 0;
		} else {
			iparcelas = listContratoCobrancaDetalhesQuitar.size() - 1;
		}

		while (0 <= iparcelas && iparcelas < listContratoCobrancaDetalhesQuitar.size()) {
			ContratoCobrancaDetalhes parcelas = listContratoCobrancaDetalhesQuitar.get(iparcelas);

			setBpContratoCobrancaDetalhesCustom(parcelas);

			if (CommonsUtil.mesmoValor(tipoAmortizacao, "crescente")) {
				iparcelas++;
			} else {
				iparcelas--;
			}

			if (parcelas.isParcelaPaga()) {
				continue;
			}

			this.valorPresenteParcela = BigDecimal.ZERO;
			calcularValorPresenteParcelaData(this.dataAmortizacao, parcelas);

			for (ContratoCobrancaDetalhesParcial parcial : parcelas.getListContratoCobrancaDetalhesParcial()) {
				valorPresenteParcela = valorPresenteParcela.subtract(parcial.getVlrRecebido());
			}

			ContratoCobrancaDetalhesParcial contratoCobrancaDetalhesParcial = new ContratoCobrancaDetalhesParcial();

			if (this.amortizacaoPresenteTotal.compareTo(this.valorPresenteParcela) >= 0) {

				// atualiza data de vencimento para a data atual se a data de vencimento for
				// menor que a data de hoje
				// if
				// (this.bpContratoCobrancaDetalhes.getDataVencimentoAtual().before(this.rowEditNewDate))
				// {
				bpContratoCobrancaDetalhes.setDataVencimentoAtual(this.rowEditNewDate);
				// }
				contratoCobrancaDetalhesParcial.setDataVencimento(this.bpContratoCobrancaDetalhes.getDataVencimento());
				contratoCobrancaDetalhesParcial
						.setDataVencimentoAtual(this.bpContratoCobrancaDetalhes.getDataVencimentoAtual());
				contratoCobrancaDetalhesParcial.setNumeroParcela(this.bpContratoCobrancaDetalhes.getNumeroParcela());
				contratoCobrancaDetalhesParcial.setDataPagamento(dataAmortizacao);
				contratoCobrancaDetalhesParcial.setVlrParcela(valorPresenteParcela);
				contratoCobrancaDetalhesParcial.setVlrRecebido(valorPresenteParcela);
				contratoCobrancaDetalhesParcial.setVlrParcelaAtualizado(valorPresenteParcela);
				contratoCobrancaDetalhesParcial.setSaldoAPagar(BigDecimal.ZERO);
				bpContratoCobrancaDetalhes.getListContratoCobrancaDetalhesParcial()
						.add(contratoCobrancaDetalhesParcial);
				bpContratoCobrancaDetalhes.setParcelaPaga(true);
				bpContratoCobrancaDetalhes.setOrigemBaixa("amortizarContratoValorPresente");

				// valor da parcela continua o mesmo
				amortizacaoPresenteTotal = amortizacaoPresenteTotal.subtract(valorPresenteParcela);
				bpContratoCobrancaDetalhes.setVlrParcelaAtualizada(BigDecimal.ZERO);

			} else if (this.amortizacaoPresenteTotal.compareTo(BigDecimal.ZERO) > 0) {
				// atualiza data de vencimento para a data atual se a data de vencimento for
				// menor que a data de hoje
				if (this.bpContratoCobrancaDetalhes.getDataVencimentoAtual().before(this.rowEditNewDate)) {
					bpContratoCobrancaDetalhes.setDataVencimentoAtual(this.rowEditNewDate);
				}

				contratoCobrancaDetalhesParcial.setDataVencimento(this.bpContratoCobrancaDetalhes.getDataVencimento());
				contratoCobrancaDetalhesParcial
						.setDataVencimentoAtual(this.bpContratoCobrancaDetalhes.getDataVencimentoAtual());

				// historico de baixa parcial
				contratoCobrancaDetalhesParcial.setNumeroParcela(this.bpContratoCobrancaDetalhes.getNumeroParcela());
				contratoCobrancaDetalhesParcial.setDataPagamento(dataAmortizacao);
				contratoCobrancaDetalhesParcial.setVlrParcela(
						bpContratoCobrancaDetalhes.getVlrParcelaAtualizada().subtract(this.amortizacaoPresenteTotal));
				contratoCobrancaDetalhesParcial.setVlrRecebido(this.amortizacaoPresenteTotal);
				contratoCobrancaDetalhesParcial
						.setVlrParcelaAtualizado(this.bpContratoCobrancaDetalhes.getVlrParcelaAtualizada());
				contratoCobrancaDetalhesParcial.setSaldoAPagar(
						bpContratoCobrancaDetalhes.getVlrParcelaAtualizada().subtract(this.amortizacaoPresenteTotal));

				bpContratoCobrancaDetalhes.getListContratoCobrancaDetalhesParcial()
						.add(contratoCobrancaDetalhesParcial);

				// se o valor recebido for menor que o da parcela
				bpContratoCobrancaDetalhes.setVlrParcela(
						bpContratoCobrancaDetalhes.getVlrParcelaAtualizada().subtract(this.amortizacaoPresenteTotal));
				bpContratoCobrancaDetalhes.setVlrParcelaAtualizada(null);

				this.amortizacaoPresenteTotal = BigDecimal.ZERO;
			}
			contratoCobrancaDetalhesDao.merge(bpContratoCobrancaDetalhes);

			ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();

			this.objetoContratoCobranca = contratoCobrancaDao.findById(this.objetoContratoCobranca.getId());

			// ATUALIZA STATUS PARCELAS
			for (ContratoCobrancaDetalhes ccd : this.objetoContratoCobranca.getListContratoCobrancaDetalhes()) {

				if (ccd.isAmortizacao()) {
					ccd.setValorTotalPagamento(ccd.getVlrParcela());
					continue;
				}

				dataVencimentoParcela.setTime(ccd.getDataVencimentoAtual());

				if (dataVencimentoParcela.getTime().before(dataHoje.getTime()) && !ccd.isParcelaPaga()) {
					ccd.setParcelaVencida(true);

					// calcula coluna valor atualizado
					ContratoCobrancaUtilsMB contratoCobrancaUtilsMB;
					if (ccd.getVlrParcelaAtualizada() != null) {
						if (ccd.getVlrParcelaAtualizada().compareTo(BigDecimal.ZERO) == 1) {
							contratoCobrancaUtilsMB = new ContratoCobrancaUtilsMB(dataVencimentoParcela.getTime(),
									dataHoje.getTime(), ccd.getVlrParcela(), ccd.getVlrParcelaAtualizada(),
									ccd.getVlrJuros(), ccd.getTxMulta());
						} else {
							contratoCobrancaUtilsMB = new ContratoCobrancaUtilsMB(dataVencimentoParcela.getTime(),
									dataHoje.getTime(), ccd.getVlrParcela(), ccd.getVlrJuros(), ccd.getTxMulta());
						}
					} else {
						contratoCobrancaUtilsMB = new ContratoCobrancaUtilsMB(dataVencimentoParcela.getTime(),
								dataHoje.getTime(), ccd.getVlrParcela(), ccd.getVlrJuros(), ccd.getTxMulta());
					}

					if (!ccd.isParcelaPaga()) {
						if (ccd.getListContratoCobrancaDetalhesParcial().size() > 0) {
							contratoCobrancaUtilsMB.recalculaValorSemMulta();
						} else {
							contratoCobrancaUtilsMB.recalculaValor();
						}

						ccd.setVlrParcelaAtualizada(contratoCobrancaUtilsMB.getValorAtualizado());
					} else {
						ccd.setVlrParcelaAtualizada(null);
					}
				}

				if (dataVencimentoParcela.getTime().equals(dataHoje.getTime()) && !ccd.isParcelaPaga()) {
					ccd.setParcelaVencendo(true);
				}

				BigDecimal somaBaixas = BigDecimal.ZERO;

				for (ContratoCobrancaDetalhesParcial cBaixas : ccd.getListContratoCobrancaDetalhesParcial()) {
					ccd.setDataUltimoPagamento(cBaixas.getDataPagamento());
					somaBaixas = somaBaixas.add(cBaixas.getVlrRecebido());
				}

				ccd.setValorTotalPagamento(somaBaixas);
			}
		}
	}

	public void calcularValorPresenteParcelaData(Date data, ContratoCobrancaDetalhes parcelas) {
		BigDecimal juros = this.objetoContratoCobranca.getTxJurosParcelas();

		BigDecimal saldo = BigDecimal.ZERO;
		if (parcelas.getVlrJurosParcela() != null && parcelas.getVlrAmortizacaoParcela() != null) {
			saldo = parcelas.getVlrJurosParcela().add(parcelas.getVlrAmortizacaoParcela());
		} else {
			if (parcelas.getVlrJurosParcela() != null) {
				saldo = parcelas.getVlrJurosParcela();
			}
			if (parcelas.getVlrAmortizacaoParcela() != null) {
				saldo = parcelas.getVlrAmortizacaoParcela();
			}
		}

		BigDecimal quantidadeDeMeses = BigDecimal.ONE;

		quantidadeDeMeses = BigDecimal.valueOf(DateUtil.Days360(data, parcelas.getDataVencimento()));

		quantidadeDeMeses = quantidadeDeMeses.divide(BigDecimal.valueOf(30), MathContext.DECIMAL128);

		/*
		 * if(quantidadeDeMeses.compareTo(BigDecimal.ZERO) == -1) { quantidadeDeMeses =
		 * quantidadeDeMeses.multiply(BigDecimal.valueOf(-1)); }
		 */

		Double quantidadeDeMesesDouble = CommonsUtil.doubleValue(quantidadeDeMeses);

		juros = juros.divide(BigDecimal.valueOf(100));
		juros = juros.add(BigDecimal.ONE);

		double divisor = Math.pow(CommonsUtil.doubleValue(juros), quantidadeDeMesesDouble);

		this.valorPresenteParcela = (saldo).divide(CommonsUtil.bigDecimalValue(divisor), MathContext.DECIMAL128);
		this.valorPresenteParcela = this.valorPresenteParcela.setScale(2, BigDecimal.ROUND_HALF_UP);

		if (parcelas.getDataVencimento().before(data)) {
			if (!CommonsUtil.semValor(parcelas.getSeguroDFI())) {
				valorPresenteParcela = valorPresenteParcela.add(parcelas.getSeguroDFI());
			}
			if (!CommonsUtil.semValor(parcelas.getSeguroMIP())) {
				valorPresenteParcela = valorPresenteParcela.add(parcelas.getSeguroMIP());
			}
			if (!CommonsUtil.semValor(parcelas.getTaxaAdm())) {
				valorPresenteParcela = valorPresenteParcela.add(parcelas.getTaxaAdm());
			}
		}
	}

	public void calcularValorPresenteParcelaDataValor(Date data, ContratoCobrancaDetalhes parcelas, BigDecimal valor) {
		BigDecimal juros = this.objetoContratoCobranca.getTxJurosParcelas();

		BigDecimal saldo = valor;
		BigDecimal quantidadeDeMeses = BigDecimal.ONE;

		quantidadeDeMeses = BigDecimal.valueOf(DateUtil.Days360(data, parcelas.getDataVencimento()));

		quantidadeDeMeses = quantidadeDeMeses.divide(BigDecimal.valueOf(30), MathContext.DECIMAL128);

		Double quantidadeDeMesesDouble = CommonsUtil.doubleValue(quantidadeDeMeses);

		juros = juros.divide(BigDecimal.valueOf(100));
		juros = juros.add(BigDecimal.ONE);

		double divisor = Math.pow(CommonsUtil.doubleValue(juros), quantidadeDeMesesDouble);

		this.valorPresenteParcela = (saldo).divide(CommonsUtil.bigDecimalValue(divisor), MathContext.DECIMAL128);
		this.valorPresenteParcela = this.valorPresenteParcela.setScale(2, BigDecimal.ROUND_HALF_UP);
	}

	public BigDecimal calcularValorPresente(Date dataInicio, Date dataFim, BigDecimal valor, BigDecimal txJuros) {
		BigDecimal juros = txJuros;
		BigDecimal saldo = valor;
		BigDecimal quantidadeDeMeses = BigDecimal.ONE;

		quantidadeDeMeses = BigDecimal.valueOf(DateUtil.Days360(dataInicio, dataFim));
		quantidadeDeMeses = quantidadeDeMeses.divide(BigDecimal.valueOf(30), MathContext.DECIMAL128);
		Double quantidadeDeMesesDouble = CommonsUtil.doubleValue(quantidadeDeMeses);
		juros = juros.divide(BigDecimal.valueOf(100));
		juros = juros.add(BigDecimal.ONE);
		double divisor = Math.pow(CommonsUtil.doubleValue(juros), quantidadeDeMesesDouble);
		BigDecimal valorPresenteParcela = (saldo).multiply(CommonsUtil.bigDecimalValue(divisor));
		valorPresenteParcela = valorPresenteParcela.setScale(2, BigDecimal.ROUND_HALF_UP);
		return valorPresenteParcela;
	}

	public Date getDataAmortizacao() {
		return dataAmortizacao;
	}

	public void setDataAmortizacao(Date dataAmortizacao) {
		this.dataAmortizacao = dataAmortizacao;
	}

	public BigDecimal getAmortizacaoPresenteTotal() {
		return amortizacaoPresenteTotal;
	}

	public void setAmortizacaoPresenteTotal(BigDecimal amortizacaoPresenteTotal) {
		this.amortizacaoPresenteTotal = amortizacaoPresenteTotal;
	}

	public String getTipoAmortizacao() {
		return tipoAmortizacao;
	}

	public void setTipoAmortizacao(String tipoAmortizacao) {
		this.tipoAmortizacao = tipoAmortizacao;
	}

	public List<ContratoCobrancaDetalhes> getListContratoCobrancaDetalhesQuitar() {
		return listContratoCobrancaDetalhesQuitar;
	}

	public void setListContratoCobrancaDetalhesQuitar(
			List<ContratoCobrancaDetalhes> listContratoCobrancaDetalhesQuitar) {
		this.listContratoCobrancaDetalhesQuitar = listContratoCobrancaDetalhesQuitar;
	}

	public BigDecimal getValorPresenteTotal() {
		return valorPresenteTotal;
	}

	public void setValorPresenteTotal(BigDecimal valorPresenteTotal) {
		this.valorPresenteTotal = valorPresenteTotal;
	}

	public Date getDataQuitacao() {
		return dataQuitacao;
	}

	public void setDataQuitacao(Date dataQuitacao) {
		this.dataQuitacao = dataQuitacao;
	}

	public int getNumeroParcelaQuitar() {
		return numeroParcelaQuitar;
	}

	public void setNumeroParcelaQuitar(int numeroParcelaQuitar) {
		this.numeroParcelaQuitar = numeroParcelaQuitar;
	}

	public BigDecimal getValorPresenteParcela() {
		return valorPresenteParcela;
	}

	public void setValorPresenteParcela(BigDecimal valorPresenteParcela) {
		this.valorPresenteParcela = valorPresenteParcela;
	}

	public Date getDataCalculoValorPresente() {
		return dataCalculoValorPresente;
	}

	public void setDataCalculoValorPresente(Date dataCalculoValorPresente) {
		this.dataCalculoValorPresente = dataCalculoValorPresente;
	}

	public int getNumeroPresenteParcela() {
		return numeroPresenteParcela;
	}

	public void setNumeroPresenteParcela(int numeroPresenteParcela) {
		this.numeroPresenteParcela = numeroPresenteParcela;
	}

	public boolean isCalcularComSeguro() {
		return calcularComSeguro;
	}

	public void setCalcularComSeguro(boolean calcularComSeguro) {
		this.calcularComSeguro = calcularComSeguro;
	}

	public String clearFieldsEditarPendentes() {
		listaArquivosAnaliseDocumentos();
		this.restricaoOperacao = new ArrayList<>();
		this.restricaoImovel = new ArrayList<>();

		this.objetoContratoCobranca = getContratoById(this.objetoContratoCobranca.getId());
		this.objetoImovelCobranca = this.objetoContratoCobranca.getImovel();
		this.objetoPagadorRecebedor = this.objetoContratoCobranca.getPagador();
		this.tituloPainel = "Editar";

		listaRestricoesPessoas();
		listaRestricoesImovel();

		this.valorPresenteParcela = BigDecimal.ZERO;

		listaTodasSubpastas();
		this.objetoContratoCobranca.setContaPagarValorTotal(calcularValorTotalContasPagar());

		loadLovs();
		loadSelectedLovsPendentes();
		ContratoCobrancaDao cDao = new ContratoCobrancaDao();
		this.contratosPagadorAnalisado = cDao.getContratosDoPagador(this.objetoContratoCobranca);
		this.contratosImovelAnalisado = cDao.getContratosDoImovel(this.objetoContratoCobranca);
		contratosLaudo = "";
		if (CommonsUtil.mesmoValor(this.tituloTelaConsultaPreStatus, "Pedir Laudo")) {
			for (ContratoCobranca contratoImovel : contratosImovelAnalisado) {
				if (contratoImovel.isLaudoRecebido()) {
					if (CommonsUtil.semValor(contratosLaudo)) {
						contratosLaudo = "Operações com pedido de laudo: ";
					}
					contratosLaudo = contratosLaudo + contratoImovel.getNumeroContrato() + "; ";
				}
			}
		}

		if (contratosPagadorAnalisado.size() > 0) {
			for (ContratosPagadorAnalisadoVO contratosPagadorAnalisadoVO : contratosPagadorAnalisado) {
//				for (ContratoCobranca contratoCobranca : contratosPagadorAnalisadoVO.getContratosPagadorAnalisado()) {
//				contratosPagadorAnalisadoVO.setContratosPagadorAnalisado(
				populaStatus(contratosPagadorAnalisadoVO.getContratosPagadorAnalisado());
//				}
			}
			PrimeFaces current = PrimeFaces.current();
			current.executeScript("PF('listaContratosPagador').show();");
		}

		if (contratosImovelAnalisado.size() > 0) {
			this.contratosImovelAnalisado = populaStatus(contratosImovelAnalisado);
			PrimeFaces current = PrimeFaces.current();
			current.executeScript("PF('listaContratosImovel').show();");
		}

		if (this.objetoContratoCobranca.getPagador() != null) {
			if (this.objetoContratoCobranca.getPagador().getCnpj() != null
					&& !this.objetoContratoCobranca.getPagador().getCnpj().equals("")) {
				this.tipoPessoaIsFisica = false;
			} else {
				this.tipoPessoaIsFisica = true;
			}
		}

		// permissao para editar inicio analise
		if (loginBean != null) {
			User usuarioLogado = new User();
			UserDao u = new UserDao();
			usuarioLogado = u.findByFilter("login", loginBean.getUsername()).get(0);

			if (CommonsUtil.mesmoValor(usuarioLogado.getId(), (long) 778) || usuarioLogado.isAdministrador()
					|| CommonsUtil.mesmoValor(usuarioLogado.getId(), (long) 210)) {
				gerenciaStatus = true;
			} else {
				gerenciaStatus = false;
			}
		}

		this.qtdeParcelas = String.valueOf(this.objetoContratoCobranca.getQtdeParcelas());

		if (this.objetoContratoCobranca.getResponsavel() != null) {
			this.codigoResponsavel = this.objetoContratoCobranca.getResponsavel().getCodigo();
		}

		saveEstadoCheckListAtual();

		if (this.baixarMode) {
			return "/Atendimento/Cobranca/ContratoCobrancaPreCustomizadoDetalhes.xhtml";
		} else {
			return "/Atendimento/Cobranca/ContratoCobrancaInserirPendente.xhtml";
		}
	}
	
	public void bloquearForm() {
		PrimeFaces current = PrimeFaces.current();
		if(blockForm) {
			current.executeScript("PF('blockForm').show();");
		} else {
			current.executeScript("PF('blockForm').hide();");
		}
	}

	public String clearFieldsDetalhesPendentes() {

		this.objetoContratoCobranca = getContratoById(this.objetoContratoCobranca.getId());
		this.objetoImovelCobranca = this.objetoContratoCobranca.getImovel();
		this.objetoPagadorRecebedor = this.objetoContratoCobranca.getPagador();

		this.tituloPainel = "Editar";

		this.valorPresenteParcela = BigDecimal.ZERO;

		listaTodasSubpastas();

		this.objetoContratoCobranca.setContaPagarValorTotal(calcularValorTotalContasPagar());

		this.tituloTelaConsultaPreStatus = "PreContratos";

		getIndexStepContrato();

		loadLovs();

		loadSelectedLovsPendentes();

		if (this.objetoContratoCobranca.getPagador() != null) {
			if (this.objetoContratoCobranca.getPagador().getCnpj() != null
					&& !this.objetoContratoCobranca.getPagador().getCnpj().equals("")) {
				this.tipoPessoaIsFisica = false;
			} else {
				this.tipoPessoaIsFisica = true;
			}
		}

		this.seguradoSelecionado = new Segurado();
		this.seguradoSelecionado.setPessoa(new PagadorRecebedor());
		this.socioSelecionado = new PagadorRecebedorSocio();
		this.socioSelecionado.setPessoa(new PagadorRecebedor());
		this.pagadorSecundarioSelecionado = new PagadorRecebedorAdicionais();
		this.pagadorSecundarioSelecionado.setPessoa(new PagadorRecebedor());
		this.addSegurador = false;
		this.addSocio = false;
		this.addPagador = false;
		this.mostrarTodosProcessos = false;

		this.objetoAnaliseComite = new AnaliseComite();
		this.objetoContratoCobranca.setQtdeVotosAprovadosComite(BigInteger.ZERO);
		this.objetoContratoCobranca.setQtdeVotosReprovadosComite(BigInteger.ZERO);

		this.qtdeParcelas = String.valueOf(this.objetoContratoCobranca.getQtdeParcelas());

		if (this.objetoContratoCobranca.getResponsavel() != null) {
			this.codigoResponsavel = this.objetoContratoCobranca.getResponsavel().getCodigo();
		}
		// this.objetoContratoCobranca.setDataInicio(this.objetoContratoCobranca.getDataContrato());

		saveEstadoCheckListAtual();

		return "/Atendimento/Cobranca/ContratoCobrancaDetalhesPendentePorStatus.xhtml";
	}

	public void clearMensagensWhatsApp() {
		this.controleWhatsAppAgAssintura = false;
		this.controleWhatsAppAssinado = false;
		this.controleWhatsAppPajuLaudoRecebido = false;
		this.controleWhatsAppPreAprovado = false;
		this.controleWhatsAppComite = false;
	}

	private List<PorcentagemImovel> porcentagem = new ArrayList<>();
	private BigDecimal porcentagemPersonalizada = BigDecimal.ZERO;

	public void calculaPorcentagemImovel() {
		porcentagem = new ArrayList<>();
		BigDecimal porcentagemLimite = new BigDecimal(100);
		BigDecimal recomendacao = gerarRecomendacaoComite();
		BigDecimal valorSugerido = recomendacao.subtract(recomendacao.remainder(new BigDecimal(5000)));

		if (porcentagemPersonalizada == null) {
			porcentagemPersonalizada = BigDecimal.ZERO;
		}
		if (porcentagemPersonalizada.compareTo(porcentagemLimite) == 1) {
			porcentagemPersonalizada = new BigDecimal(100);
		}

		valorMercaoImovelPorcento = objetoContratoCobranca.getValorMercadoImovel().divide(new BigDecimal(100));
		porcentagem.add(new PorcentagemImovel("Valor do imóvel: ", objetoContratoCobranca.getValorMercadoImovel(),
				false, false));
		porcentagem.add(new PorcentagemImovel("Recomendado:", valorSugerido, true, false));
		porcentagem.add(new PorcentagemImovel("LTV 20%:", calculaValorLTV(new BigDecimal(20)), true, false));
		porcentagem.add(new PorcentagemImovel("LTV 30%:", calculaValorLTV(new BigDecimal(30)), true, false));
		porcentagem.add(new PorcentagemImovel("LTV 35%:", calculaValorLTV(new BigDecimal(35)), true, false));
		porcentagem.add(new PorcentagemImovel("LTV 40%:", calculaValorLTV(new BigDecimal(40)), true, false));
		porcentagem.add(new PorcentagemImovel("LTV 45%:", calculaValorLTV(new BigDecimal(45)), true, false));
		porcentagem.add(new PorcentagemImovel("LTV 50%:", calculaValorLTV(new BigDecimal(50)), true, false));
		if (porcentagemPersonalizada != null) {
			porcentagem
					.add(new PorcentagemImovel("Personalizado", calculaValorLTV(porcentagemPersonalizada), true, true));
		}
		porcentagemPersonalizada = BigDecimal.ZERO;

	}

	public BigDecimal calculaValorLTV(BigDecimal divisor) {
		valorMercaoImovelPorcento = objetoContratoCobranca.getValorMercadoImovel().divide(new BigDecimal(100));
		BigDecimal valorPorcentagem = valorMercaoImovelPorcento.multiply(divisor);

		BigDecimal valorDividido = valorPorcentagem.remainder(new BigDecimal(5000));
		BigDecimal valorTotal = valorPorcentagem.subtract(valorDividido);
		return valorTotal;
	}

	public List<PorcentagemImovel> getPorcentagem() {
		return porcentagem;
	}

	public void setPorcentagem(List<PorcentagemImovel> porcentagem) {
		this.porcentagem = porcentagem;
	}

	public String clearFieldsEditarPendentesAnalistas() {
		clearMensagensWhatsApp();
		this.objetoContratoCobranca.calcularTaxaPreAprovada();
		this.objetoContratoCobranca = getContratoById(this.objetoContratoCobranca.getId());
		this.objetoImovelCobranca = this.objetoContratoCobranca.getImovel();
		this.objetoPagadorRecebedor = this.objetoContratoCobranca.getPagador();

		this.tituloPainel = "Editar";

		listaTodasSubpastas();

		BigDecimal valorDespesas = calcularValorTotalContasPagar();
		// if(!CommonsUtil.semValor(valorDespesas)) {
		this.objetoContratoCobranca.setContaPagarValorTotal(valorDespesas);
		// }

		loadLovs();

		loadSelectedLovsPendentes();
		this.objetoContratoCobranca.getResponsavel().salvarDadosBancarios();
		this.objetoContratoCobranca.calcularValorTotalContasPagas();

		if (this.objetoContratoCobranca.getPagador() != null) {
			if (this.objetoContratoCobranca.getPagador().getCnpj() != null
					&& !this.objetoContratoCobranca.getPagador().getCnpj().equals("")) {
				this.tipoPessoaIsFisica = false;
			} else {
				this.tipoPessoaIsFisica = true;
			}
		}

		this.seguradoSelecionado = new Segurado();
		this.seguradoSelecionado.setPessoa(new PagadorRecebedor());
		this.socioSelecionado = new PagadorRecebedorSocio();
		this.socioSelecionado.setPessoa(new PagadorRecebedor());
		this.pagadorSecundarioSelecionado = new PagadorRecebedorAdicionais();
		this.pagadorSecundarioSelecionado.setPessoa(new PagadorRecebedor());
		this.addSegurador = false;
		this.addSocio = false;
		this.addPagador = false;
		this.controleWhatsAlteracaoAvaliadorLaudo = false;
		this.controleWhatsAlteracaoAvaliadorLaudoGalache = false;
		this.controleWhatsAlteracaoGeracaoPAJU = false;
		this.mostrarTodosProcessos = false;

		this.qtdeParcelas = String.valueOf(this.objetoContratoCobranca.getQtdeParcelas());

		if (this.objetoContratoCobranca.getResponsavel() != null) {
			this.codigoResponsavel = this.objetoContratoCobranca.getResponsavel().getCodigo();
		}
		// this.objetoContratoCobranca.setDataInicio(this.objetoContratoCobranca.getDataContrato());

		this.objetoContratoCobranca.calcularTaxaPreAprovada();

		carregaValorIOFCustos();

		saveEstadoCheckListAtual();

		getIndexStepContrato();

		// monta listagem de Arquivo para analise
		listaArquivosAnaliseDocumentos();

		this.restricaoOperacao = new ArrayList<>();
		this.restricaoImovel = new ArrayList<>();

		listaRestricoesPessoas();
		listaRestricoesImovel();

		verificaPagamentoAntecipado();
		verificaPagamentoIntegral();

		this.objetoAnaliseComite = new AnaliseComite();
		this.objetoContratoCobranca.setQtdeVotosAprovadosComite(BigInteger.ZERO);
		this.objetoContratoCobranca.setQtdeVotosReprovadosComite(BigInteger.ZERO);
		this.contratosPagadorAnalisado = new ArrayList<>();
		this.contratosImovelAnalisado = new ArrayList<>();

		ContratoCobrancaDao cDao = new ContratoCobrancaDao();

		if (CommonsUtil.mesmoValor(this.tituloTelaConsultaPreStatus, "Aguardando Análise")
				|| CommonsUtil.mesmoValor(this.tituloTelaConsultaPreStatus, "Em Análise")
				|| CommonsUtil.mesmoValor(this.tituloTelaConsultaPreStatus, "Pedir Laudo")
				|| CommonsUtil.mesmoValor(this.tituloTelaConsultaPreStatus, "Pedir PAJU")
				|| CommonsUtil.mesmoValor(this.tituloTelaConsultaPreStatus, "Comentario Jurídico")
				|| CommonsUtil.mesmoValor(this.tituloTelaConsultaPreStatus, "Ag. Documentos Comite")
				|| CommonsUtil.mesmoValor(this.tituloTelaConsultaPreStatus, "Ag. Comite")
				|| CommonsUtil.mesmoValor(this.tituloTelaConsultaPreStatus, "Ag. DOC")) {
			if (CommonsUtil.mesmoValor(objetoContratoCobranca.getFormaDePagamentoLaudoPAJU(), "No final")) {
				objetoContratoCobranca.setValorLaudoPajuPago(BigDecimal.ZERO);
				objetoContratoCobranca.setValorLaudoPajuFaltante(objetoContratoCobranca.getValorLaudoPajuTotal());
			}
			this.contratosPagadorAnalisado = cDao.getContratosDoPagador(this.objetoContratoCobranca);
			this.contratosImovelAnalisado = cDao.getContratosDoImovel(this.objetoContratoCobranca);
			contratosLaudo = "";
			if (CommonsUtil.mesmoValor(this.tituloTelaConsultaPreStatus, "Pedir Laudo")) {
				for (ContratoCobranca contratoImovel : contratosImovelAnalisado) {
					if (contratoImovel.isLaudoRecebido()) {
						if (CommonsUtil.semValor(contratosLaudo)) {
							contratosLaudo = "Operações com pedido de laudo: ";
						}
						contratosLaudo = contratosLaudo + contratoImovel.getNumeroContrato() + "; ";
					}
				}
			}

			if (contratosPagadorAnalisado.size() > 0) {
				for (ContratosPagadorAnalisadoVO contratosPagadorAnalisadoVO : contratosPagadorAnalisado) {
					contratosPagadorAnalisadoVO.setContratosPagadorAnalisado(
							populaStatus(contratosPagadorAnalisadoVO.getContratosPagadorAnalisado()));
				}
				PrimeFaces current = PrimeFaces.current();
				current.executeScript("PF('listaContratosPagador').show();");
			}

			if (contratosImovelAnalisado.size() > 0) {
				this.contratosImovelAnalisado = populaStatus(contratosImovelAnalisado);
				PrimeFaces current = PrimeFaces.current();
				current.executeScript("PF('listaContratosImovel').show();");
			}

			if (CommonsUtil.mesmoValor(this.tituloTelaConsultaPreStatus, "Pedir PAJU")) {
				Responsavel resp = objetoContratoCobranca.getResponsavel();
				if (CommonsUtil.mesmoValor(resp.getCidadeFilial(), "Sorocaba")
						|| (!CommonsUtil.semValor(resp.getDonoResponsavel())
								&& CommonsUtil.mesmoValor(resp.getDonoResponsavel().getCidadeFilial(), "Sorocaba"))) {
					objetoContratoCobranca.setAvaliacaoPaju("Luvison");
					objetoContratoCobranca.setPagtoLaudoConfirmada(true);
				}
			}

		}

		if (CommonsUtil.mesmoValor(this.tituloTelaConsultaPreStatus, "Ag. Comite")) {

			calculaPorcentagemImovel();
			gerarRecomendacaoComite();
			objetoAnaliseComite.setValorComite(null);

			if (!this.objetoContratoCobranca.getListaAnaliseComite().isEmpty()) {
				for (AnaliseComite comite : this.objetoContratoCobranca.getListaAnaliseComite()) {
					User usuarioLogado = new User();
					UserDao u = new UserDao();
					usuarioLogado = u.findByFilter("login", loginBean.getUsername()).get(0);
					if (CommonsUtil.mesmoValor(comite.getVotoAnaliseComite(), "Aprovado")) {
						this.objetoContratoCobranca.setQtdeVotosAprovadosComite(
								this.objetoContratoCobranca.getQtdeVotosAprovadosComite().add(BigInteger.ONE));
					} else if (CommonsUtil.mesmoValor(comite.getVotoAnaliseComite(), "Reprovado")) {
						this.objetoContratoCobranca.setQtdeVotosReprovadosComite(
								this.objetoContratoCobranca.getQtdeVotosReprovadosComite().add(BigInteger.ONE));
					}
					if (CommonsUtil.mesmoValor(usuarioLogado.getLogin(), comite.getUsuarioComite())) {
						// comite.setValorComite(null);
						this.objetoAnaliseComite = comite;
						this.objetoAnaliseComite.calcularValorParcela();
					}
				}
			}
			this.objetoContratoCobranca
					.setQtdeVotosNecessariosComite(definirQtdeVotoComite(this.objetoContratoCobranca));
		}

		if (CommonsUtil.mesmoValor(this.tituloTelaConsultaPreStatus, "Ag. DOC")) {
			calcularPorcentagemImoveis();
			BigDecimal valorTotalRegistro = BigDecimal.ZERO;
			RegistroImovelTabelaDao rDao = new RegistroImovelTabelaDao();
			ImovelCobrancaAdicionaisDao imovelCobrancaAdicionaisDao = new ImovelCobrancaAdicionaisDao();
			for (ImovelCobrancaAdicionais imovelAdicional : objetoContratoCobranca.getListaImoveis()) {
				if (CommonsUtil.semValor(imovelAdicional.getPorcentagem()))
					continue;
				BigDecimal porcentagem = imovelAdicional.getPorcentagem().divide(BigDecimal.valueOf(100),
						MathContext.DECIMAL128);
				BigDecimal valorPorMatricula = objetoContratoCobranca.getValorAprovadoComite().multiply(porcentagem);
				BigDecimal valorRegistro = rDao.getValorRegistro(valorPorMatricula);
				valorTotalRegistro = valorTotalRegistro.add(valorRegistro);
				imovelAdicional.setValorRegistro(valorRegistro);
				imovelCobrancaAdicionaisDao.merge(imovelAdicional);
			}
			if (!CommonsUtil.semValor(objetoContratoCobranca.getPorcentagemImovelPrincipal())) {
				BigDecimal porcentagem = objetoContratoCobranca.getPorcentagemImovelPrincipal()
						.divide(BigDecimal.valueOf(100), MathContext.DECIMAL128);
				BigDecimal valorPorMatricula = objetoContratoCobranca.getValorAprovadoComite().multiply(porcentagem);
				BigDecimal valorRegistro = rDao.getValorRegistro(valorPorMatricula);
				valorTotalRegistro = valorTotalRegistro.add(valorRegistro);
				objetoContratoCobranca.setValorRegistroImovelPrincipal(valorRegistro);
			}

			if (CommonsUtil.semValor(objetoContratoCobranca.getValorCartorio())
					|| valorTotalRegistro.compareTo(objetoContratoCobranca.getValorCartorio()) > 0) {
				objetoContratoCobranca.setValorCartorio(valorTotalRegistro);
			}
			// calcularRegistroVelho();
		}

		if (CommonsUtil.mesmoValor(this.tituloTelaConsultaPreStatus, "Ag. Registro")) {
			this.objetoContratoCobranca.setTxHonorario(BigDecimal.valueOf(20.00));
			this.objetoContratoCobranca.setTxJuros(BigDecimal.valueOf(1.00));
			this.objetoContratoCobranca.setTxMulta(BigDecimal.valueOf(2.00));
			this.objetoContratoCobranca.setCorrigidoIPCA(true);
			this.objetoContratoCobranca.setTemTxAdm(true);
			this.objetoContratoCobranca.setTemSeguro(true);
			this.objetoContratoCobranca.setTemSeguroDFI(true);
			this.objetoContratoCobranca.setTemSeguroMIP(true);
			if (CommonsUtil.semValor(this.objetoContratoCobranca.getValorImovel())) {
				this.objetoContratoCobranca.setValorImovel(this.objetoContratoCobranca.getValorMercadoImovel());
			}
			if (!CommonsUtil.semValor(this.objetoContratoCobranca.getPrazoAprovadoCCB())) {
				this.qtdeParcelas = this.objetoContratoCobranca.getPrazoAprovadoCCB().toString();
			}
			if (CommonsUtil.semValor(this.objetoContratoCobranca.getValorCCB())) {
				this.objetoContratoCobranca.setValorCCB(this.objetoContratoCobranca.getValorAprovadoCCB());
			}
			if (CommonsUtil.semValor(this.objetoContratoCobranca.getTxJurosParcelas())) {
				this.objetoContratoCobranca.setTxJurosParcelas(this.objetoContratoCobranca.getTaxaAprovada());
			}
		}

		User usuarioLogado = new User();
		UserDao u = new UserDao();
		usuarioLogado = u.findByFilter("login", loginBean.getUsername()).get(0);
		this.inserirImovelDisable = false;
		this.inserirImovelOcultarValorMercadoImovel = false;

		if (CommonsUtil.mesmoValor(this.tituloTelaConsultaPreStatus, "Pré-Comite")
				|| CommonsUtil.mesmoValor(this.tituloTelaConsultaPreStatus, "Análise Comercial")
				|| CommonsUtil.mesmoValor(this.tituloTelaConsultaPreStatus, "Análise Pré-Aprovada")) {
			if (usuarioLogado.isComiteConsultar()) {
				return "/Atendimento/Cobranca/ContratoCobrancaDetalhesPendentePorStatus.xhtml";
			} else {
				return "/Atendimento/Cobranca/ContratoCobrancaInserirPendentePorStatus.xhtml";
			}
		} else if (CommonsUtil.mesmoValor(this.tituloTelaConsultaPreStatus, "Comentario Jurídico")) {
			if (usuarioLogado.isProfileComentarioJuridico() || usuarioLogado.isAdministrador()) {
				return "/Atendimento/Cobranca/ContratoCobrancaInserirPendentePorStatus.xhtml";
			} else {
				return "/Atendimento/Cobranca/ContratoCobrancaDetalhesPendentePorStatus.xhtml";
			}
		} else if (CommonsUtil.mesmoValor(this.tituloTelaConsultaPreStatus, "Ag. Comite")) {
			this.inserirImovelOcultarValorMercadoImovel = true;
			return "/Atendimento/Cobranca/ContratoCobrancaInserirPendentePorStatusComite.xhtml";
		} else if (CommonsUtil.mesmoValor(this.tituloTelaConsultaPreStatus, "Ag. Pagamento Op.")) {
			return "/Atendimento/Cobranca/ContratoCobrancaInserirPendentePorStatusAgPagamentoOperacao.xhtml";
		} else {
			return "/Atendimento/Cobranca/ContratoCobrancaInserirPendentePorStatus.xhtml";
		}
	}

	private void listaRestricoesPessoas() {
		PagadorRecebedorService pagadorRecebedorService = new PagadorRecebedorService();
		List<String> result = pagadorRecebedorService.verificaRestricao(objetoContratoCobranca.getPagador());

		if (!CommonsUtil.semValor(result))
			this.restricaoOperacao.addAll(result);

		for (DocumentoAnalise documento : this.listaDocumentoAnalise) {
			if (documento.isLiberadoAnalise()) {
				if (!CommonsUtil.semValor(documento.getPagador())) {
					result = pagadorRecebedorService.verificaRestricao(documento.getPagador());
					result.removeAll(this.restricaoOperacao);
					if (!CommonsUtil.semValor(result))
						this.restricaoOperacao.addAll(result);
				}
			}
		}
	}

	private void listaRestricoesImovel() {
		ImovelCobrancaRestricaoService imovelCobrancaRestricaoService = new ImovelCobrancaRestricaoService();
		List<String> result = imovelCobrancaRestricaoService.verificaRestricao(objetoContratoCobranca);

		if (!CommonsUtil.semValor(result))
			this.restricaoImovel = result;

	}

	public void carregaValorIOFCustos() {
		CcbDao ccbDao = new CcbDao();
		CcbContrato ccb = ccbDao.ConsultaCcbPorContratoNew(this.objetoContratoCobranca);

		if (ccb.getId() > 0) {
			this.objetoContratoCobranca.setValorCustoEmissao(ccb.getValorIOF());
		}

		this.objetoContratoCobranca.setNomeBancarioCustoEmissao("Galleria SCD");
		this.objetoContratoCobranca.setBancoBancarioCustoEmissao("001");
		this.objetoContratoCobranca.setAgenciaBancarioCustoEmissao("6937");
		this.objetoContratoCobranca.setContaBancarioCustoEmissao("120621-4");
		this.objetoContratoCobranca.setCpfCnpjBancarioCustoEmissao("51.604.356/0001-75");
		this.objetoContratoCobranca.setPixCustoEmissao("51.604.356/0001-75");

		// carta split cliente
		this.objetoContratoCobranca.setValorCartaSplit(ccb.getValorLiquidoCredito());
		this.objetoContratoCobranca.setNomeBancarioCartaSplit(ccb.getTitularConta());

		if (this.objetoContratoCobranca.getPagador().getCpf() != null
				&& !this.objetoContratoCobranca.getPagador().getCpf().equals("")) {
			this.objetoContratoCobranca.setCpfCnpjBancarioCartaSplit(this.objetoContratoCobranca.getPagador().getCpf());
		} else {
			this.objetoContratoCobranca
					.setCpfCnpjBancarioCartaSplit(this.objetoContratoCobranca.getPagador().getCnpj());
		}

		this.objetoContratoCobranca.setBancoBancarioCartaSplit(String.valueOf(ccb.getNumeroBanco()));
		this.objetoContratoCobranca.setAgenciaBancarioCartaSplit(ccb.getAgencia());
		this.objetoContratoCobranca.setContaBancarioCartaSplit(ccb.getContaCorrente());
		this.objetoContratoCobranca.setPixCartaSplit(ccb.getPixBanco());

		// carta split Galleria
		this.objetoContratoCobranca.setValorCartaSplitGalleria(ccb.getValorDespesas());
		this.objetoContratoCobranca.setNomeBancarioCartaSplitGalleria("Galleria Correspondente Bancário Eireli");
		this.objetoContratoCobranca.setCpfCnpjBancarioCartaSplitGalleria("34.787.885/0001-32");
		this.objetoContratoCobranca.setBancoBancarioCartaSplitGalleria("");
		this.objetoContratoCobranca.setAgenciaBancarioCartaSplitGalleria("");
		this.objetoContratoCobranca.setContaBancarioCartaSplitGalleria("");
		this.objetoContratoCobranca.setPixCartaSplitGalleria("b56b12e2-f476-4272-8d16-c1a5a31cc660");
		
		// cria despesas processos
		for (CcbProcessosJudiciais processos : ccb.getProcessosJucidiais()) {
			if (!buscaDespesaRepetida(processos.getNumero())) {
				concluirContaProcesso(processos.getNumero(), processos.getValorAtualizado());
			}
		}
	}
	
	public boolean buscaDespesaRepetida(String descricao) {
		boolean temDespesaRepetida = false;
		
		for (ContasPagar contas : this.objetoContratoCobranca.getListContasPagar()) {
			if (contas.getDescricao().equals(descricao)) {
				temDespesaRepetida = true;
			}
		}
		
		return temDespesaRepetida;
	}

	public void concluirContaProcesso(String descricao, BigDecimal valorProcesso) {
		this.contasPagarSelecionada.setContrato(this.objetoContratoCobranca);
		this.contasPagarSelecionada.setNumeroDocumento(this.objetoContratoCobranca.getNumeroContrato());
		this.contasPagarSelecionada.setPagadorRecebedor(this.objetoPagadorRecebedor);
		this.contasPagarSelecionada.setTipoDespesa("C");
		this.contasPagarSelecionada.setDescricao(descricao);
		this.contasPagarSelecionada.setResponsavel(this.objetoContratoCobranca.getResponsavel());
		this.contasPagarSelecionada.setValor(valorProcesso);

		if (!CommonsUtil.semValor(valorProcesso)) {
			if (!CommonsUtil.semValor(this.objetoContratoCobranca.getContaPagarValorTotal())) {
				this.objetoContratoCobranca.setContaPagarValorTotal(this.objetoContratoCobranca
						.getContaPagarValorTotal().add(valorProcesso));
			} else {
				this.objetoContratoCobranca.setContaPagarValorTotal(valorProcesso);
			}
			if (!CommonsUtil.semValor(this.contasPagarSelecionada.getValorPagamento())) {
				if (CommonsUtil.mesmoValor(this.contasPagarSelecionada.getValorPagamento(),
						valorProcesso)) {
					this.contasPagarSelecionada.setContaPaga(true);
				}
				this.objetoContratoCobranca.setContaPagarValorTotal(this.objetoContratoCobranca
						.getContaPagarValorTotal().subtract(this.contasPagarSelecionada.getValorPagamento()));
			}
		}

		this.objetoContratoCobranca.getListContasPagar().add(this.contasPagarSelecionada);

		BigDecimal valorDespesas = calcularValorTotalContasPagar();
		this.objetoContratoCobranca.setContaPagarValorTotal(valorDespesas);
		ContasPagarDao contasPagarDao = new ContasPagarDao();
		if (contasPagarSelecionada.getId() <= 0) {
			contasPagarDao.create(contasPagarSelecionada);
		} else {
			contasPagarDao.merge(contasPagarSelecionada);
		}
		this.contasPagarSelecionada = new ContasPagar();
		this.addContasPagar = false;
		this.objetoContratoCobranca.calcularValorTotalContasPagas();

	}
	private void calcularRegistroVelho() {
		int qtdMatriculas = 1;
		String matriculas = objetoContratoCobranca.getImovel().getNumeroMatricula().trim();
		if (matriculas.endsWith(",")) {
			matriculas = matriculas.substring(0, matriculas.lastIndexOf(",")).trim();
		}

		qtdMatriculas = matriculas.split(",").length;
		// se for apartamento é no minimo 3
		/*
		 * if (CommonsUtil.mesmoValorIgnoreCase("Apartamento",
		 * objetoContratoCobranca.getImovel().getTipo()) && qtdMatriculas == 1) {
		 * qtdMatriculas = 3; }
		 */

		RegistroImovelTabelaDao rDao = new RegistroImovelTabelaDao();
		BigDecimal valorPorMatricula = objetoContratoCobranca.getValorAprovadoComite()
				.divide(BigDecimal.valueOf(qtdMatriculas), MathContext.DECIMAL128);
		BigDecimal valorRegistro = rDao.getValorRegistro(valorPorMatricula);
		valorRegistro = valorRegistro.multiply(BigDecimal.valueOf(qtdMatriculas));
		// Emprestimo = financiamento
		if (CommonsUtil.mesmoValorIgnoreCase("Emprestimo", objetoContratoCobranca.getTipoOperacao()))
			valorRegistro = valorRegistro.multiply(CommonsUtil.bigDecimalValue(2));
		if (CommonsUtil.semValor(objetoContratoCobranca.getValorCartorio())
				|| valorRegistro.compareTo(objetoContratoCobranca.getValorCartorio()) > 0) {
			objetoContratoCobranca.setValorCartorio(valorRegistro);
		}
	}

	private BigDecimal gerarRecomendacaoComite() {
		BigDecimal valorSugerido = BigDecimal.ZERO;

		objetoAnaliseComite.setTipoPessoa(objetoContratoCobranca.getPagador().getCpf());
		objetoAnaliseComite.setTipoImovel(objetoContratoCobranca.getImovel().getTipo());
		objetoAnaliseComite.setTipoOp(objetoContratoCobranca.getTipoOperacao());
		objetoAnaliseComite.setVlrImovel(objetoContratoCobranca.getValorMercadoImovel());
		if (CommonsUtil.semValor(this.objetoAnaliseComite.getTaxaComite())
				&& !CommonsUtil.semValor(this.objetoContratoCobranca.getTaxaPreAprovadaMaior())) {
			this.objetoAnaliseComite.setTaxaComite(this.objetoContratoCobranca.getTaxaPreAprovadaMaior());
		}
		if (CommonsUtil.semValor(this.objetoAnaliseComite.getPrazoMaxComite())
				&& !CommonsUtil.semValor(this.objetoContratoCobranca.getPrazoMaxPreAprovado())) {
			this.objetoAnaliseComite.setPrazoMaxComite(this.objetoContratoCobranca.getPrazoMaxPreAprovado());
		}
		// if(CommonsUtil.semValor(this.objetoAnaliseComite.getComentarioComite()) &&
		// !CommonsUtil.semValor(this.objetoContratoCobranca.getComentarioJuridico())){
		// this.objetoAnaliseComite.setComentarioComite(this.objetoContratoCobranca.getComentarioJuridico());
		// }

		valorSugerido = BigDecimal.ZERO;
		if (CommonsUtil.mesmoValor(this.objetoContratoCobranca.getImovel().getTipo(), "Apartamento")
				|| CommonsUtil.mesmoValor(this.objetoContratoCobranca.getImovel().getTipo(), "Casa de Condomínio")
				|| CommonsUtil.mesmoValor(this.objetoContratoCobranca.getImovel().getTipo(),
						"Casa de Condomínio acima1000")) {

			if (!CommonsUtil.semValor(this.objetoContratoCobranca.getValorMercadoImovel())) {
				valorSugerido = this.objetoContratoCobranca.getValorMercadoImovel().multiply(BigDecimal.valueOf(40));
				valorSugerido = valorSugerido.divide(BigDecimal.valueOf(100), MathContext.DECIMAL128);
			} else {
				if (!CommonsUtil.semValor(this.objetoContratoCobranca.getValorVendaForcadaImovel())) {
					valorSugerido = this.objetoContratoCobranca.getValorVendaForcadaImovel()
							.multiply(BigDecimal.valueOf(50));
					valorSugerido = valorSugerido.divide(BigDecimal.valueOf(100), MathContext.DECIMAL128);
				}
			}

			if (!CommonsUtil.semValor(this.objetoContratoCobranca.getValorEmprestimo())
					&& this.objetoContratoCobranca.getValorEmprestimo().compareTo(valorSugerido) < 0) {
				objetoAnaliseComite.setValorComite(this.objetoContratoCobranca.getValorEmprestimo());
			} else {
				this.objetoAnaliseComite.setValorComite(valorSugerido);
			}
			
			objetoAnaliseComite.calcularValorParcela();
		}
		
		if (CommonsUtil.semValor(objetoImovelCobranca.getLinkGMaps())) {
			getLinkMaps();
		}
		
		gerarProcessosQuitarComite();

		if (CommonsUtil.semValor(this.objetoAnaliseComite.getCarenciaComite())) {
			this.objetoAnaliseComite.setCarenciaComite(1);
		}

		for (CcbProcessosJudiciais processo : this.objetoContratoCobranca.getListProcessos()) {
			if (CommonsUtil.mesmoValor(processo.getQuitar(), "Quitar")) {
				processo.setSelecionadoComite(true);
			}
		}
		return valorSugerido;

	}

	public void gerarProcessosQuitarComite() {
//		if (CommonsUtil.semValor(this.objetoContratoCobranca.getProcessosQuitarComite())) {

		StringBuilder sProcesosQuitar = new StringBuilder();
		for (CcbProcessosJudiciais processo : this.objetoContratoCobranca.getListProcessos().stream()
				.filter(p -> p.isSelecionadoComite()).collect(Collectors.toList())) {

			String retiraObservaco = processo.getNumero() + " - "
					+ CommonsUtil.formataValorMonetario(processo.getValorAtualizado(), "R$ ") + "\n";
			sProcesosQuitar.append(retiraObservaco);
		}

		if (!CommonsUtil.semValor(sProcesosQuitar)) {
			this.objetoContratoCobranca.setProcessosQuitarComite(sProcesosQuitar.toString());
		} else
			this.objetoContratoCobranca.setProcessosQuitarComite(null);

//		}
	}

	public String clearFieldsEditarAvaliacaoImovel() {
		clearMensagensWhatsApp();
		this.objetoContratoCobranca = getContratoById(this.objetoContratoCobranca.getId());
		this.objetoImovelCobranca = this.objetoContratoCobranca.getImovel();
		this.objetoPagadorRecebedor = this.objetoContratoCobranca.getPagador();

		if (this.objetoContratoCobranca.getResponsavel() != null) {
			this.codigoResponsavel = this.objetoContratoCobranca.getResponsavel().getCodigo();
		}

		this.tituloPainel = "Editar";

		filesInterno = new ArrayList<FileUploaded>();
		filesInterno = listaArquivosInterno();

		filesJuridico = new ArrayList<FileUploaded>();
		filesJuridico = listaArquivosJuridico();

		listaArquivosAnaliseDocumentos();
		this.restricaoOperacao = new ArrayList<>();
		this.restricaoImovel = new ArrayList<>();

		listaRestricoesPessoas();
		listaRestricoesImovel();

		this.inserirImovelDisable = true;
		this.inserirImovelOcultarValorMercadoImovel = true;

		return "/Atendimento/Cobranca/ContratoCobrancaInserirPendentePorStatusAvaliacaoImovel.xhtml";
	}

	public String clearFieldsEditarAvaliacaoImovelGalache() {
		clearMensagensWhatsApp();
		this.objetoContratoCobranca = getContratoById(this.objetoContratoCobranca.getId());
		this.objetoImovelCobranca = this.objetoContratoCobranca.getImovel();
		this.objetoPagadorRecebedor = this.objetoContratoCobranca.getPagador();

		this.tituloPainel = "Editar";

		if (this.objetoContratoCobranca.getResponsavel() != null) {
			this.codigoResponsavel = this.objetoContratoCobranca.getResponsavel().getCodigo();
		}
		listaArquivosAnaliseDocumentos();
		this.restricaoOperacao = new ArrayList<>();
		this.restricaoImovel = new ArrayList<>();

		listaRestricoesPessoas();
		listaRestricoesImovel();

		filesInterno = new ArrayList<FileUploaded>();
		filesInterno = listaArquivosInterno();

		filesJuridico = new ArrayList<FileUploaded>();
		filesJuridico = listaArquivosJuridico();

		this.inserirImovelDisable = true;
		this.inserirImovelOcultarValorMercadoImovel = true;
		return "/Atendimento/Cobranca/ContratoCobrancaInserirPendentePorStatusAvaliacaoImovelGalache.xhtml";
	}

	public String clearFieldsEditarGeracaoPAJU() {
		clearMensagensWhatsApp();
		this.objetoContratoCobranca = getContratoById(this.objetoContratoCobranca.getId());
		this.objetoImovelCobranca = this.objetoContratoCobranca.getImovel();
		this.objetoPagadorRecebedor = this.objetoContratoCobranca.getPagador();

		if (this.objetoContratoCobranca.getResponsavel() != null) {
			this.codigoResponsavel = this.objetoContratoCobranca.getResponsavel().getCodigo();
		}

		if (this.objetoContratoCobranca.getAnalistaGeracaoPAJU() != null) {
			this.idAnalistaGeracaoPAJU = this.objetoContratoCobranca.getAnalistaGeracaoPAJU().getId();
		} else {
			this.idAnalistaGeracaoPAJU = 0;
		}
		listaArquivosAnaliseDocumentos();
		this.restricaoOperacao = new ArrayList<>();
		this.restricaoImovel = new ArrayList<>();

		// listaRestricoesPessoas();

		this.tituloPainel = "Editar";

		filesInterno = new ArrayList<FileUploaded>();
		filesInterno = listaArquivosInterno();

		filesJuridico = new ArrayList<FileUploaded>();
		filesJuridico = listaArquivosJuridico();

		this.tituloTelaConsultaPreStatus = "Geração de PAJU";
		this.inserirImovelDisable = true;
		this.inserirImovelOcultarValorMercadoImovel = true;
		
		return "/Atendimento/Cobranca/ContratoCobrancaInserirPendentePorStatusGeracaoPAJU.xhtml";
	}

	public void getIndexStepContrato() {
		this.indexStepsStatusContrato = 0;

		if (CommonsUtil.mesmoValor(this.objetoContratoCobranca.getStatus(), "Aprovado")
				&& (!this.objetoContratoCobranca.isOperacaoPaga()
						|| this.objetoContratoCobranca.isPendenciaPagamento())) {
			this.indexStepsStatusContrato = 14;
		} else if (!this.objetoContratoCobranca.isInicioAnalise()) {
			this.indexStepsStatusContrato = 0;
		} else if (this.objetoContratoCobranca.isAnaliseReprovada()) {
			this.indexStepsStatusContrato = 1;
		} else {
			if (!this.objetoContratoCobranca.isAnaliseReprovada() && this.objetoContratoCobranca.isInicioAnalise()
					&& (this.objetoContratoCobranca.getCadastroAprovadoValor() == null
							|| this.objetoContratoCobranca.getCadastroAprovadoValor().equals("")
							|| this.objetoContratoCobranca.getCadastroAprovadoValor().equals("Pendente"))) {
				this.indexStepsStatusContrato = 1;
			}

			else if (this.objetoContratoCobranca.getCadastroAprovadoValor() != null) {
				if (!this.objetoContratoCobranca.isAnaliseReprovada() && this.objetoContratoCobranca.isInicioAnalise()
						&& this.objetoContratoCobranca.getCadastroAprovadoValor().equals("Aprovado")
						&& (!this.objetoContratoCobranca.isPedidoLaudo()
								|| !this.objetoContratoCobranca.isPagtoLaudoConfirmada())) {
					this.indexStepsStatusContrato = 2;
				}

				else if ((CommonsUtil.mesmoValor(this.tituloTelaConsultaPreStatus,
						"Avaliação de Imóvel - Galache - Consultar")
						|| CommonsUtil.mesmoValor(this.tituloTelaConsultaPreStatus, "Avaliação de Imóvel - Consultar")
						|| CommonsUtil.mesmoValor(this.tituloTelaConsultaPreStatus, "Ag. Laudo")
						|| CommonsUtil.mesmoValor(this.tituloTelaConsultaPreStatus, "Pedir Laudo")
						|| CommonsUtil.mesmoValor(this.tituloTelaConsultaPreStatus, "Pedir PAJU"))
						&& !this.objetoContratoCobranca.isAnaliseReprovada()
						&& this.objetoContratoCobranca.isInicioAnalise()
						&& this.objetoContratoCobranca.getCadastroAprovadoValor().equals("Aprovado")
						&& this.objetoContratoCobranca.isPedidoLaudo()
						&& this.objetoContratoCobranca.isPagtoLaudoConfirmada()
						&& (!this.objetoContratoCobranca.isPajurFavoravel()
								|| !this.objetoContratoCobranca.isLaudoRecebido())) {
					this.indexStepsStatusContrato = 3;
				}

				else if (!this.objetoContratoCobranca.isAnaliseReprovada()
						&& this.objetoContratoCobranca.isInicioAnalise()
						&& this.objetoContratoCobranca.getCadastroAprovadoValor().equals("Aprovado")
						&& this.objetoContratoCobranca.isPagtoLaudoConfirmada()
						&& this.objetoContratoCobranca.isPajurFavoravel()
						&& !this.objetoContratoCobranca.isAnaliseComercial()) {
					this.indexStepsStatusContrato = 4;
				}

				else if (!this.objetoContratoCobranca.isAnaliseReprovada()
						&& this.objetoContratoCobranca.isInicioAnalise()
						&& this.objetoContratoCobranca.getCadastroAprovadoValor().equals("Aprovado")
						&& this.objetoContratoCobranca.isPagtoLaudoConfirmada()
						&& this.objetoContratoCobranca.isPajurFavoravel()
						&& this.objetoContratoCobranca.isAnaliseComercial()
						&& !this.objetoContratoCobranca.isComentarioJuridicoEsteira()) {
					this.indexStepsStatusContrato = 5;
				}

				else if (!this.objetoContratoCobranca.isAnaliseReprovada()
						&& this.objetoContratoCobranca.isInicioAnalise()
						&& this.objetoContratoCobranca.getCadastroAprovadoValor().equals("Aprovado")
						&& this.objetoContratoCobranca.isPagtoLaudoConfirmada()
						&& this.objetoContratoCobranca.isPajurFavoravel()
						&& this.objetoContratoCobranca.isAnaliseComercial()
						&& this.objetoContratoCobranca.isComentarioJuridicoEsteira()
						&& !this.objetoContratoCobranca.isPreAprovadoComite()
						|| !this.objetoContratoCobranca.isDocumentosComite()) {
					this.indexStepsStatusContrato = 6;
				}

				else if (!this.objetoContratoCobranca.isAnaliseReprovada()
						&& this.objetoContratoCobranca.isInicioAnalise()
						&& this.objetoContratoCobranca.getCadastroAprovadoValor().equals("Aprovado")
						&& this.objetoContratoCobranca.isPagtoLaudoConfirmada()
						&& this.objetoContratoCobranca.isLaudoRecebido()
						&& this.objetoContratoCobranca.isPajurFavoravel()
						&& this.objetoContratoCobranca.isAnaliseComercial()
						&& this.objetoContratoCobranca.isComentarioJuridicoEsteira()
						&& this.objetoContratoCobranca.isPreAprovadoComite()
						&& this.objetoContratoCobranca.isDocumentosComite()
						&& (!this.objetoContratoCobranca.isAprovadoComite()
								|| !this.objetoContratoCobranca.isOkCliente())) {
					this.indexStepsStatusContrato = 7;
				}

				else if (!this.objetoContratoCobranca.isAnaliseReprovada()
						&& this.objetoContratoCobranca.isInicioAnalise()
						&& this.objetoContratoCobranca.getCadastroAprovadoValor().equals("Aprovado")
						&& this.objetoContratoCobranca.isPagtoLaudoConfirmada()
						&& this.objetoContratoCobranca.isLaudoRecebido()
						&& this.objetoContratoCobranca.isPajurFavoravel()
						&& this.objetoContratoCobranca.isAnaliseComercial()
						&& this.objetoContratoCobranca.isComentarioJuridicoEsteira()
						&& this.objetoContratoCobranca.isAprovadoComite()
						&& (!this.objetoContratoCobranca.isCertificadoEmitido())) {
					this.indexStepsStatusContrato = 8;
				}

				else if (!this.objetoContratoCobranca.isAnaliseReprovada()
						&& this.objetoContratoCobranca.isInicioAnalise()
						&& this.objetoContratoCobranca.getCadastroAprovadoValor().equals("Aprovado")
						&& this.objetoContratoCobranca.isPagtoLaudoConfirmada()
						&& this.objetoContratoCobranca.isLaudoRecebido()
						&& this.objetoContratoCobranca.isPajurFavoravel()
						&& this.objetoContratoCobranca.isAnaliseComercial()
						&& this.objetoContratoCobranca.isComentarioJuridicoEsteira()
						&& this.objetoContratoCobranca.isDocumentosCompletos()
						&& this.objetoContratoCobranca.isAprovadoComite() && !this.objetoContratoCobranca.isReanalise()
						&& !this.objetoContratoCobranca.isCcbPronta()) {
					this.indexStepsStatusContrato = 9;
				}

				else if (!this.objetoContratoCobranca.isAnaliseReprovada()
						&& this.objetoContratoCobranca.isInicioAnalise()
						&& this.objetoContratoCobranca.getCadastroAprovadoValor().equals("Aprovado")
						&& this.objetoContratoCobranca.isPagtoLaudoConfirmada()
						&& this.objetoContratoCobranca.isLaudoRecebido()
						&& this.objetoContratoCobranca.isPajurFavoravel()
						&& this.objetoContratoCobranca.isAnaliseComercial()
						&& this.objetoContratoCobranca.isComentarioJuridicoEsteira()
						&& this.objetoContratoCobranca.isAprovadoComite()
						&& this.objetoContratoCobranca.isDocumentosCompletos()
						&& this.objetoContratoCobranca.isCcbPronta()
						&& !this.objetoContratoCobranca.isContratoConferido()) {
					this.indexStepsStatusContrato = 10;
				}

				else if (!this.objetoContratoCobranca.isAnaliseReprovada()
						&& this.objetoContratoCobranca.isInicioAnalise()
						&& this.objetoContratoCobranca.getCadastroAprovadoValor().equals("Aprovado")
						&& this.objetoContratoCobranca.isPagtoLaudoConfirmada()
						&& this.objetoContratoCobranca.isLaudoRecebido()
						&& this.objetoContratoCobranca.isPajurFavoravel()
						&& this.objetoContratoCobranca.isAnaliseComercial()
						&& this.objetoContratoCobranca.isComentarioJuridicoEsteira()
						&& this.objetoContratoCobranca.isAprovadoComite()
						&& this.objetoContratoCobranca.isDocumentosCompletos()
						&& this.objetoContratoCobranca.isCcbPronta()
						&& this.objetoContratoCobranca.isContratoConferido()
						&& (this.objetoContratoCobranca.isAgAssinatura()
								|| (this.objetoContratoCobranca.isReanalise()))) {
					this.indexStepsStatusContrato = 11;
				}

				else if (!this.objetoContratoCobranca.isAnaliseReprovada()
						&& this.objetoContratoCobranca.isInicioAnalise()
						&& this.objetoContratoCobranca.getCadastroAprovadoValor().equals("Aprovado")
						&& this.objetoContratoCobranca.isPagtoLaudoConfirmada()
						&& this.objetoContratoCobranca.isLaudoRecebido()
						&& this.objetoContratoCobranca.isPajurFavoravel()
						&& this.objetoContratoCobranca.isAnaliseComercial()
						&& this.objetoContratoCobranca.isComentarioJuridicoEsteira()
						&& this.objetoContratoCobranca.isAprovadoComite()
						&& this.objetoContratoCobranca.isDocumentosCompletos()
						&& this.objetoContratoCobranca.isCcbPronta()
						&& this.objetoContratoCobranca.isContratoConferido()
						&& !this.objetoContratoCobranca.isAgAssinatura()
						//&& this.objetoContratoCobranca.isAgEnvioCartorio()
						&& !this.objetoContratoCobranca.isResolucaoExigenciaCartorio()
						&& this.objetoContratoCobranca.isAgRegistro()) {
					this.indexStepsStatusContrato = 12;

				}

				else if (!this.objetoContratoCobranca.isAnaliseReprovada()
						&& this.objetoContratoCobranca.isInicioAnalise()
						&& this.objetoContratoCobranca.getCadastroAprovadoValor().equals("Aprovado")
						&& this.objetoContratoCobranca.isPagtoLaudoConfirmada()
						&& this.objetoContratoCobranca.isLaudoRecebido()
						&& this.objetoContratoCobranca.isPajurFavoravel()
						&& this.objetoContratoCobranca.isAnaliseComercial()
						&& this.objetoContratoCobranca.isComentarioJuridicoEsteira()
						&& this.objetoContratoCobranca.isAprovadoComite()
						&& this.objetoContratoCobranca.isDocumentosCompletos()
						&& this.objetoContratoCobranca.isCcbPronta()
						&& this.objetoContratoCobranca.isContratoConferido()
						&& !this.objetoContratoCobranca.isAgAssinatura()
						&& !this.objetoContratoCobranca.isAgEnvioCartorio()
						&& this.objetoContratoCobranca.isResolucaoExigenciaCartorio()
						&& this.objetoContratoCobranca.isAgRegistro()) {
					this.indexStepsStatusContrato = 13;

				}

			}

			// coloca todos no status a frente
			/*
			 * if (indexStepsStatusContrato < 9) { indexStepsStatusContrato =
			 * indexStepsStatusContrato + 1; }
			 */
		}
	}

	public ContratoCobranca getContratoById(long idContrato) {
		ContratoCobranca contrato = new ContratoCobranca();
		ContratoCobrancaDao cDao = new ContratoCobrancaDao();

		contrato = cDao.findById(idContrato);
		this.documentoConsultarTodos = new ArrayList<FileUploaded>();
		return contrato;
	}

	public String clearFieldsEditarPendentesSimples() {
		this.objetoContratoCobranca = getContratoById(this.objetoContratoCobranca.getId());
		this.objetoImovelCobranca = this.objetoContratoCobranca.getImovel();
		this.objetoPagadorRecebedor = this.objetoContratoCobranca.getPagador();
		this.contratos = new ArrayList<ContratoCobranca>();

		this.tituloPainel = "Editar";

		listaTodasSubpastas();

		loadLovs();

		loadSelectedLovsPendentes();

		if (this.objetoContratoCobranca.getPagador() != null) {
			if (this.objetoContratoCobranca.getPagador().getCnpj() != null
					&& !this.objetoContratoCobranca.getPagador().getCnpj().equals("")) {
				this.tipoPessoaIsFisica = false;
			} else {
				this.tipoPessoaIsFisica = true;
			}
		}

		this.seguradoSelecionado = new Segurado();
		this.seguradoSelecionado.setPessoa(new PagadorRecebedor());
		this.socioSelecionado = new PagadorRecebedorSocio();
		this.socioSelecionado.setPessoa(new PagadorRecebedor());
		this.pagadorSecundarioSelecionado = new PagadorRecebedorAdicionais();
		this.pagadorSecundarioSelecionado.setPessoa(new PagadorRecebedor());
		this.addSegurador = false;
		this.addSocio = false;
		this.addPagador = false;
		this.mostrarTodosProcessos = false;

		// this.qtdeParcelas =
		// String.valueOf(this.objetoContratoCobranca.getQtdeParcelas());

		if (this.objetoContratoCobranca.getResponsavel() != null) {
			this.codigoResponsavel = this.objetoContratoCobranca.getResponsavel().getCodigo();
		}
		// this.objetoContratoCobranca.setDataInicio(this.objetoContratoCobranca.getDataContrato());

		// saveEstadoCheckListAtual();

		if (!this.objetoContratoCobranca.isInicioAnalise()) {
			this.inserirImovelDisable = false;
			this.inserirImovelOcultarValorMercadoImovel = true;
			return "/Atendimento/Cobranca/ContratoCobrancaPreCustomizadoInserir.xhtml";
		} else {
			if ((this.objetoContratoCobranca.isComentarioJuridicoEsteira()
					&& !this.objetoContratoCobranca.isPreAprovadoComite())
					|| ((this.objetoContratoCobranca.isPajurFavoravel())
							&& !this.objetoContratoCobranca.isAnaliseComercial())
					|| (CommonsUtil.mesmoValor(this.objetoContratoCobranca.getCadastroAprovadoValor(), "Aprovado")
							&& !this.objetoContratoCobranca.isPedidoLaudoPajuComercial())) {
				User usuarioLogado = new User();
				UserDao u = new UserDao();
				usuarioLogado = u.findByFilter("login", loginBean.getUsername()).get(0);
				if (usuarioLogado.isComiteConsultar()) {

					if ((this.objetoContratoCobranca.isPajurFavoravel())
							&& !this.objetoContratoCobranca.isAnaliseComercial()) {
						this.tituloTelaConsultaPreStatus = "Análise Comercial";
					} else if (this.objetoContratoCobranca.isComentarioJuridicoEsteira()
							&& !this.objetoContratoCobranca.isPreAprovadoComite()) {
						this.tituloTelaConsultaPreStatus = "Pré-Comite";
					} else if (CommonsUtil.mesmoValor(this.objetoContratoCobranca.getCadastroAprovadoValor(),
							"Aprovado") && !this.objetoContratoCobranca.isPedidoLaudoPajuComercial()) {
						this.tituloTelaConsultaPreStatus = "Análise Pré-Aprovada";
					}

					return clearFieldsEditarPendentesAnalistas();
				}
			}
			return "/Atendimento/Cobranca/ContratoCobrancaPreCustomizadoDetalhes.xhtml";
		}
	}

	public String clearFieldsLeadsTerceirosEditar() {
		this.objetoContratoCobranca = getContratoById(this.objetoContratoCobranca.getId());
		this.objetoImovelCobranca = this.objetoContratoCobranca.getImovel();
		this.objetoPagadorRecebedor = this.objetoContratoCobranca.getPagador();
		this.contratos = new ArrayList<ContratoCobranca>();

		this.tituloPainel = "Editar";

		listaTodasSubpastas();

		loadLovs();

		loadSelectedLovsPendentes();

		if (this.objetoContratoCobranca.getPagador() != null) {
			if (this.objetoContratoCobranca.getPagador().getCnpj() != null
					&& !this.objetoContratoCobranca.getPagador().getCnpj().equals("")) {
				this.tipoPessoaIsFisica = false;
			} else {
				this.tipoPessoaIsFisica = true;
			}
		}

		this.seguradoSelecionado = new Segurado();
		this.seguradoSelecionado.setPessoa(new PagadorRecebedor());
		this.socioSelecionado = new PagadorRecebedorSocio();
		this.socioSelecionado.setPessoa(new PagadorRecebedor());
		this.pagadorSecundarioSelecionado = new PagadorRecebedorAdicionais();
		this.pagadorSecundarioSelecionado.setPessoa(new PagadorRecebedor());
		this.addSegurador = false;
		this.addSocio = false;
		this.addPagador = false;
		this.mostrarTodosProcessos = false;

		// this.qtdeParcelas =
		// String.valueOf(this.objetoContratoCobranca.getQtdeParcelas());

		if (this.objetoContratoCobranca.getResponsavel() != null) {
			this.codigoResponsavel = this.objetoContratoCobranca.getResponsavel().getCodigo();
		}
		// this.objetoContratoCobranca.setDataInicio(this.objetoContratoCobranca.getDataContrato());

		// saveEstadoCheckListAtual();
		return "/Atendimento/Cobranca/ContratoCobrancaLeadsTerceirosEditar.xhtml";
	}

	public void saveEstadoCheckListAtual() {
		this.contratoCobrancaCheckList = new ContratoCobranca();

		this.contratoCobrancaCheckList.setInicioAnalise(this.objetoContratoCobranca.isInicioAnalise());
		this.contratoCobrancaCheckList.setCadastroAprovadoValor(this.objetoContratoCobranca.getCadastroAprovadoValor());
		this.contratoCobrancaCheckList
				.setMatriculaAprovadaValor(this.objetoContratoCobranca.getMatriculaAprovadaValor());
		this.contratoCobrancaCheckList.setPagtoLaudoConfirmada(this.objetoContratoCobranca.isPagtoLaudoConfirmada());
		this.contratoCobrancaCheckList.setLaudoRecebido(this.objetoContratoCobranca.isLaudoRecebido());
		this.contratoCobrancaCheckList.setPajurFavoravel(this.objetoContratoCobranca.isPajurFavoravel());
		this.contratoCobrancaCheckList.setAprovadoComite(this.objetoContratoCobranca.isAprovadoComite());
		this.contratoCobrancaCheckList.setDocumentosCompletos(this.objetoContratoCobranca.isDocumentosCompletos());
		this.contratoCobrancaCheckList.setCcbPronta(this.objetoContratoCobranca.isCcbPronta());
		this.contratoCobrancaCheckList.setContratoConferido(this.objetoContratoCobranca.isContratoConferido());
		this.contratoCobrancaCheckList.setAgAssinatura(this.objetoContratoCobranca.isAgAssinatura());
		this.contratoCobrancaCheckList.setAgRegistro(this.objetoContratoCobranca.isAgRegistro());
		this.contratoCobrancaCheckList.setStatusContrato(this.objetoContratoCobranca.getStatusContrato());
		this.contratoCobrancaCheckList.setStatus(this.objetoContratoCobranca.getStatus());
	}

	public boolean hasBaixaParcial() {
		for (ContratoCobrancaDetalhes ccd : this.objetoContratoCobranca.getListContratoCobrancaDetalhes()) {
			if (ccd.getListContratoCobrancaDetalhesParcial().size() > 0) {
				return true;
			}
		}
		return false;
	}

	public String clearFieldsEditar() {
		this.tituloPainel = "Editar";

		this.hasBaixaParcial = hasBaixaParcial();

		this.renderRecebedorFinais = false;

		if (this.objetoContratoCobranca.getRecebedorParcelaFinal1() != null
				|| this.objetoContratoCobranca.getRecebedorParcelaFinal2() != null
				|| this.objetoContratoCobranca.getRecebedorParcelaFinal3() != null
				|| this.objetoContratoCobranca.getRecebedorParcelaFinal4() != null
				|| this.objetoContratoCobranca.getRecebedorParcelaFinal5() != null
				|| this.objetoContratoCobranca.getRecebedorParcelaFinal6() != null
				|| this.objetoContratoCobranca.getRecebedorParcelaFinal7() != null
				|| this.objetoContratoCobranca.getRecebedorParcelaFinal8() != null
				|| this.objetoContratoCobranca.getRecebedorParcelaFinal9() != null
				|| this.objetoContratoCobranca.getRecebedorParcelaFinal10() != null) {
			this.renderRecebedorFinais = true;
		}

		listaTodasSubpastas();

		loadLovs();

		loadSelectedLovs();

		this.contratoGerado = true;

		this.qtdeParcelas = String.valueOf(this.objetoContratoCobranca.getQtdeParcelas());

		// Verifica se há parcelas em atraso, se sim irá colorir a linha na tela
		TimeZone zone = TimeZone.getDefault();
		Locale locale = new Locale("pt", "BR");
		Calendar dataHoje = Calendar.getInstance(zone, locale);
		Calendar dataVencimentoParcela = Calendar.getInstance(zone, locale);
		dataHoje.set(Calendar.HOUR_OF_DAY, 0);
		dataHoje.set(Calendar.MINUTE, 0);
		dataHoje.set(Calendar.SECOND, 0);
		dataHoje.set(Calendar.MILLISECOND, 0);

		for (ContratoCobrancaDetalhes ccd : this.objetoContratoCobranca.getListContratoCobrancaDetalhes()) {
			dataVencimentoParcela.setTime(ccd.getDataVencimento());
			dataHoje.set(Calendar.HOUR_OF_DAY, 0);
			dataHoje.set(Calendar.MINUTE, 0);
			dataHoje.set(Calendar.SECOND, 0);
			dataHoje.set(Calendar.MILLISECOND, 0);

			if (dataVencimentoParcela.getTime().before(dataHoje.getTime()) && !ccd.isParcelaPaga()) {
				ccd.setParcelaVencida(true);
			}

			if (dataVencimentoParcela.getTime().equals(dataHoje.getTime()) && !ccd.isParcelaPaga()) {
				ccd.setParcelaVencendo(true);
			}
		}

		this.vlrRepasse = null;

		this.vlrRetencao = null;

		this.vlrComissao = null;

		this.vlrParcelaFinal = null;

		this.vlrRepasseFinal = null;

		this.vlrRetencaoFinal = null;

		this.vlrComissaoFinal = null;

		loadRetencaoRepasse();
		this.geraBoletoInclusaoContrato = false;
		this.fileBoleto = null;

		return "/Atendimento/Cobranca/ContratoCobrancaInserir.xhtml";
	}

	public void clearFieldsSegurados() {
		loadLovs();
		loadSelectedLovs();

		this.tituloPagadorRecebedorDialog = "Segurados";
		this.tipoPesquisaPagadorRecebedor = "Segurado";
		this.updatePagadorRecebedor = ":formSegurados:SeguradoresPanel";
		this.seguradoSelecionado = new Segurado();
		this.seguradoSelecionado.setPessoa(new PagadorRecebedor());

		this.contratoGerado = true;
	}

	public String clearFieldsEditarReParcelar() {
		this.tituloPainel = "Editar";

		this.hasBaixaParcial = hasBaixaParcial();
		this.amortizacao = new ContratoCobrancaDetalhes();

		this.renderRecebedorFinais = false;

		if (this.objetoContratoCobranca.getRecebedorParcelaFinal1() != null
				|| this.objetoContratoCobranca.getRecebedorParcelaFinal2() != null
				|| this.objetoContratoCobranca.getRecebedorParcelaFinal3() != null
				|| this.objetoContratoCobranca.getRecebedorParcelaFinal4() != null
				|| this.objetoContratoCobranca.getRecebedorParcelaFinal5() != null
				|| this.objetoContratoCobranca.getRecebedorParcelaFinal6() != null
				|| this.objetoContratoCobranca.getRecebedorParcelaFinal7() != null
				|| this.objetoContratoCobranca.getRecebedorParcelaFinal8() != null
				|| this.objetoContratoCobranca.getRecebedorParcelaFinal9() != null
				|| this.objetoContratoCobranca.getRecebedorParcelaFinal10() != null) {
			this.renderRecebedorFinais = true;
		}

		listaTodasSubpastas();

		loadLovs();

		loadSelectedLovs();

		this.contratoGerado = true;

		this.qtdeParcelas = String.valueOf(this.objetoContratoCobranca.getQtdeParcelas());

		this.simuladorParcelas = null;

		// Verifica se há parcelas em atraso, se sim irá colorir a linha na tela
		TimeZone zone = TimeZone.getDefault();
		Locale locale = new Locale("pt", "BR");
		Calendar dataHoje = Calendar.getInstance(zone, locale);
		Calendar dataVencimentoParcela = Calendar.getInstance(zone, locale);
		dataHoje.set(Calendar.HOUR_OF_DAY, 0);
		dataHoje.set(Calendar.MINUTE, 0);
		dataHoje.set(Calendar.SECOND, 0);
		dataHoje.set(Calendar.MILLISECOND, 0);

		for (ContratoCobrancaDetalhes ccd : this.objetoContratoCobranca.getListContratoCobrancaDetalhes()) {
			dataVencimentoParcela.setTime(ccd.getDataVencimento());
			dataHoje.set(Calendar.HOUR_OF_DAY, 0);
			dataHoje.set(Calendar.MINUTE, 0);
			dataHoje.set(Calendar.SECOND, 0);
			dataHoje.set(Calendar.MILLISECOND, 0);

			if (dataVencimentoParcela.getTime().before(dataHoje.getTime()) && !ccd.isParcelaPaga()) {
				ccd.setParcelaVencida(true);
			}

			if (dataVencimentoParcela.getTime().equals(dataHoje.getTime()) && !ccd.isParcelaPaga()) {
				ccd.setParcelaVencendo(true);
			}
		}

		this.vlrRepasse = null;

		this.vlrRetencao = null;

		this.vlrComissao = null;

		this.vlrParcelaFinal = null;

		this.vlrRepasseFinal = null;

		this.vlrRetencaoFinal = null;

		this.vlrComissaoFinal = null;

		loadRetencaoRepasse();
		this.geraBoletoInclusaoContrato = false;
		this.fileBoleto = null;

		return "/Atendimento/Cobranca/ContratoCobrancaReParcelarEditar.xhtml";
	}

	public String clearFieldsEditarAlterarParcela() {
		this.tituloPainel = "Editar";

		this.hasBaixaParcial = hasBaixaParcial();

		this.renderRecebedorFinais = false;

		if (this.objetoContratoCobranca.getRecebedorParcelaFinal1() != null
				|| this.objetoContratoCobranca.getRecebedorParcelaFinal2() != null
				|| this.objetoContratoCobranca.getRecebedorParcelaFinal3() != null
				|| this.objetoContratoCobranca.getRecebedorParcelaFinal4() != null
				|| this.objetoContratoCobranca.getRecebedorParcelaFinal5() != null
				|| this.objetoContratoCobranca.getRecebedorParcelaFinal6() != null
				|| this.objetoContratoCobranca.getRecebedorParcelaFinal7() != null
				|| this.objetoContratoCobranca.getRecebedorParcelaFinal8() != null
				|| this.objetoContratoCobranca.getRecebedorParcelaFinal9() != null
				|| this.objetoContratoCobranca.getRecebedorParcelaFinal10() != null) {
			this.renderRecebedorFinais = true;
		}

		listaTodasSubpastas();

		loadLovs();

		loadSelectedLovs();

		this.contratoGerado = true;

		this.qtdeParcelas = String.valueOf(this.objetoContratoCobranca.getQtdeParcelas());

		// Verifica se há parcelas em atraso, se sim irá colorir a linha na tela
		TimeZone zone = TimeZone.getDefault();
		Locale locale = new Locale("pt", "BR");
		Calendar dataHoje = Calendar.getInstance(zone, locale);
		Calendar dataVencimentoParcela = Calendar.getInstance(zone, locale);
		dataHoje.set(Calendar.HOUR_OF_DAY, 0);
		dataHoje.set(Calendar.MINUTE, 0);
		dataHoje.set(Calendar.SECOND, 0);
		dataHoje.set(Calendar.MILLISECOND, 0);

		for (ContratoCobrancaDetalhes ccd : this.objetoContratoCobranca.getListContratoCobrancaDetalhes()) {
			dataVencimentoParcela.setTime(ccd.getDataVencimento());
			dataHoje.set(Calendar.HOUR_OF_DAY, 0);
			dataHoje.set(Calendar.MINUTE, 0);
			dataHoje.set(Calendar.SECOND, 0);
			dataHoje.set(Calendar.MILLISECOND, 0);

			if (dataVencimentoParcela.getTime().before(dataHoje.getTime()) && !ccd.isParcelaPaga()) {
				ccd.setParcelaVencida(true);
			}

			if (dataVencimentoParcela.getTime().equals(dataHoje.getTime()) && !ccd.isParcelaPaga()) {
				ccd.setParcelaVencendo(true);
			}
		}

		this.vlrRepasse = null;

		this.vlrRetencao = null;

		this.vlrComissao = null;

		this.vlrParcelaFinal = null;

		this.vlrRepasseFinal = null;

		this.vlrRetencaoFinal = null;

		this.vlrComissaoFinal = null;

		loadRetencaoRepasse();
		this.geraBoletoInclusaoContrato = false;
		this.fileBoleto = null;

		this.selectedListContratoCobrancaParcelasInvestidor = new ArrayList<ContratoCobrancaParcelasInvestidor>();
		this.selectedListContratoCobrancaParcelasInvestidor2 = new ArrayList<ContratoCobrancaParcelasInvestidor>();
		this.selectedListContratoCobrancaParcelasInvestidor3 = new ArrayList<ContratoCobrancaParcelasInvestidor>();
		this.selectedListContratoCobrancaParcelasInvestidor4 = new ArrayList<ContratoCobrancaParcelasInvestidor>();
		this.selectedListContratoCobrancaParcelasInvestidor5 = new ArrayList<ContratoCobrancaParcelasInvestidor>();
		this.selectedListContratoCobrancaParcelasInvestidor6 = new ArrayList<ContratoCobrancaParcelasInvestidor>();
		this.selectedListContratoCobrancaParcelasInvestidor7 = new ArrayList<ContratoCobrancaParcelasInvestidor>();
		this.selectedListContratoCobrancaParcelasInvestidor8 = new ArrayList<ContratoCobrancaParcelasInvestidor>();
		this.selectedListContratoCobrancaParcelasInvestidor9 = new ArrayList<ContratoCobrancaParcelasInvestidor>();
		this.selectedListContratoCobrancaParcelasInvestidor10 = new ArrayList<ContratoCobrancaParcelasInvestidor>();

		return "/Atendimento/Cobranca/AlteraParcelasInvestidorEditar.xhtml";
	}

	public void excluirParcelasInvestidor1() {
		FacesContext context = FacesContext.getCurrentInstance();

		List<ContratoCobrancaParcelasInvestidor> listaParcelasAtualizadas = excluirParcelasInvestidor(
				this.objetoContratoCobranca.getListContratoCobrancaParcelasInvestidor1(),
				this.selectedListContratoCobrancaParcelasInvestidor);

		if (listaParcelasAtualizadas.size() > 0) {
			this.objetoContratoCobranca.setListContratoCobrancaParcelasInvestidor1(listaParcelasAtualizadas);

			ContratoCobrancaDao cDao = new ContratoCobrancaDao();
			cDao.merge(this.objetoContratoCobranca);
		}

		context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_INFO,
				"Excluir Parcela(s) Investidor: Parcela(s) excluída(s) com sucesso!", ""));
	}

	public void excluirParcelasInvestidor3() {
		FacesContext context = FacesContext.getCurrentInstance();

		List<ContratoCobrancaParcelasInvestidor> listaParcelasAtualizadas = excluirParcelasInvestidor(
				this.objetoContratoCobranca.getListContratoCobrancaParcelasInvestidor3(),
				this.selectedListContratoCobrancaParcelasInvestidor3);

		if (listaParcelasAtualizadas.size() > 0) {
			this.objetoContratoCobranca.setListContratoCobrancaParcelasInvestidor3(listaParcelasAtualizadas);

			ContratoCobrancaDao cDao = new ContratoCobrancaDao();
			cDao.merge(this.objetoContratoCobranca);
		}

		context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_INFO,
				"Excluir Parcela(s) Investidor: Parcela(s) excluída(s) com sucesso!", ""));
	}

	public void excluirParcelasInvestidor4() {
		FacesContext context = FacesContext.getCurrentInstance();

		List<ContratoCobrancaParcelasInvestidor> listaParcelasAtualizadas = excluirParcelasInvestidor(
				this.objetoContratoCobranca.getListContratoCobrancaParcelasInvestidor4(),
				this.selectedListContratoCobrancaParcelasInvestidor4);

		if (listaParcelasAtualizadas.size() > 0) {
			this.objetoContratoCobranca.setListContratoCobrancaParcelasInvestidor4(listaParcelasAtualizadas);

			ContratoCobrancaDao cDao = new ContratoCobrancaDao();
			cDao.merge(this.objetoContratoCobranca);
		}

		context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_INFO,
				"Excluir Parcela(s) Investidor: Parcela(s) excluída(s) com sucesso!", ""));
	}

	public void excluirParcelasInvestidor5() {
		FacesContext context = FacesContext.getCurrentInstance();

		List<ContratoCobrancaParcelasInvestidor> listaParcelasAtualizadas = excluirParcelasInvestidor(
				this.objetoContratoCobranca.getListContratoCobrancaParcelasInvestidor5(),
				this.selectedListContratoCobrancaParcelasInvestidor5);

		if (listaParcelasAtualizadas.size() > 0) {
			this.objetoContratoCobranca.setListContratoCobrancaParcelasInvestidor5(listaParcelasAtualizadas);

			ContratoCobrancaDao cDao = new ContratoCobrancaDao();
			cDao.merge(this.objetoContratoCobranca);
		}

		context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_INFO,
				"Excluir Parcela(s) Investidor: Parcela(s) excluída(s) com sucesso!", ""));
	}

	public void excluirParcelasInvestidor6() {
		FacesContext context = FacesContext.getCurrentInstance();

		List<ContratoCobrancaParcelasInvestidor> listaParcelasAtualizadas = excluirParcelasInvestidor(
				this.objetoContratoCobranca.getListContratoCobrancaParcelasInvestidor6(),
				this.selectedListContratoCobrancaParcelasInvestidor6);

		if (listaParcelasAtualizadas.size() > 0) {
			this.objetoContratoCobranca.setListContratoCobrancaParcelasInvestidor6(listaParcelasAtualizadas);

			ContratoCobrancaDao cDao = new ContratoCobrancaDao();
			cDao.merge(this.objetoContratoCobranca);
		}

		context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_INFO,
				"Excluir Parcela(s) Investidor: Parcela(s) excluída(s) com sucesso!", ""));
	}

	public void excluirParcelasInvestidor7() {
		FacesContext context = FacesContext.getCurrentInstance();

		List<ContratoCobrancaParcelasInvestidor> listaParcelasAtualizadas = excluirParcelasInvestidor(
				this.objetoContratoCobranca.getListContratoCobrancaParcelasInvestidor7(),
				this.selectedListContratoCobrancaParcelasInvestidor7);

		if (listaParcelasAtualizadas.size() > 0) {
			this.objetoContratoCobranca.setListContratoCobrancaParcelasInvestidor7(listaParcelasAtualizadas);

			ContratoCobrancaDao cDao = new ContratoCobrancaDao();
			cDao.merge(this.objetoContratoCobranca);
		}

		context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_INFO,
				"Excluir Parcela(s) Investidor: Parcela(s) excluída(s) com sucesso!", ""));
	}

	public void excluirParcelasInvestidor8() {
		FacesContext context = FacesContext.getCurrentInstance();

		List<ContratoCobrancaParcelasInvestidor> listaParcelasAtualizadas = excluirParcelasInvestidor(
				this.objetoContratoCobranca.getListContratoCobrancaParcelasInvestidor8(),
				this.selectedListContratoCobrancaParcelasInvestidor8);

		if (listaParcelasAtualizadas.size() > 0) {
			this.objetoContratoCobranca.setListContratoCobrancaParcelasInvestidor8(listaParcelasAtualizadas);

			ContratoCobrancaDao cDao = new ContratoCobrancaDao();
			cDao.merge(this.objetoContratoCobranca);
		}

		context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_INFO,
				"Excluir Parcela(s) Investidor: Parcela(s) excluída(s) com sucesso!", ""));
	}

	public void excluirParcelasInvestidor9() {
		FacesContext context = FacesContext.getCurrentInstance();

		List<ContratoCobrancaParcelasInvestidor> listaParcelasAtualizadas = excluirParcelasInvestidor(
				this.objetoContratoCobranca.getListContratoCobrancaParcelasInvestidor9(),
				this.selectedListContratoCobrancaParcelasInvestidor9);

		if (listaParcelasAtualizadas.size() > 0) {
			this.objetoContratoCobranca.setListContratoCobrancaParcelasInvestidor9(listaParcelasAtualizadas);

			ContratoCobrancaDao cDao = new ContratoCobrancaDao();
			cDao.merge(this.objetoContratoCobranca);
		}

		context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_INFO,
				"Excluir Parcela(s) Investidor: Parcela(s) excluída(s) com sucesso!", ""));
	}

	public void excluirParcelasInvestidor10() {
		FacesContext context = FacesContext.getCurrentInstance();

		List<ContratoCobrancaParcelasInvestidor> listaParcelasAtualizadas = excluirParcelasInvestidor(
				this.objetoContratoCobranca.getListContratoCobrancaParcelasInvestidor10(),
				this.selectedListContratoCobrancaParcelasInvestidor10);

		if (listaParcelasAtualizadas.size() > 0) {
			this.objetoContratoCobranca.setListContratoCobrancaParcelasInvestidor10(listaParcelasAtualizadas);

			ContratoCobrancaDao cDao = new ContratoCobrancaDao();
			cDao.merge(this.objetoContratoCobranca);
		}

		context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_INFO,
				"Excluir Parcela(s) Investidor: Parcela(s) excluída(s) com sucesso!", ""));
	}

	public void excluirParcelasInvestidor2() {
		FacesContext context = FacesContext.getCurrentInstance();

		List<ContratoCobrancaParcelasInvestidor> listaParcelasAtualizadas = excluirParcelasInvestidor(
				this.objetoContratoCobranca.getListContratoCobrancaParcelasInvestidor2(),
				this.selectedListContratoCobrancaParcelasInvestidor2);

		if (listaParcelasAtualizadas.size() > 0) {
			this.objetoContratoCobranca.setListContratoCobrancaParcelasInvestidor2(listaParcelasAtualizadas);

			ContratoCobrancaDao cDao = new ContratoCobrancaDao();
			cDao.merge(this.objetoContratoCobranca);
		}

		context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_INFO,
				"Excluir Parcela(s) Investidor: Parcela(s) excluída(s) com sucesso!", ""));
	}

	public List<ContratoCobrancaParcelasInvestidor> excluirParcelasInvestidor(
			List<ContratoCobrancaParcelasInvestidor> parcelasInvestidor,
			List<ContratoCobrancaParcelasInvestidor> parcelasSelecionadas) {
		FacesContext context = FacesContext.getCurrentInstance();

		boolean problemasParcelas = false;
		boolean parcelaExcluida = false;

		List<ContratoCobrancaParcelasInvestidor> parcelasContratoInvestidor = new ArrayList<ContratoCobrancaParcelasInvestidor>();

		// Verifica se foram selecionadas parcelas a serem excluídas
		if (parcelasSelecionadas.size() > 0) {
			// Verifica se entre as selecionadas há parcelas baixadas
			for (ContratoCobrancaParcelasInvestidor inv : parcelasSelecionadas) {
				if (inv.isBaixado()) {
					problemasParcelas = true;

					context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR,
							"Excluir Parcela(s) Investidor: Erro de validação: há parcelas baixadas selecionadas.",
							""));

					break;
				}
			}

			// se está tudo Ok para excluir, faz a exclusão das parcelas
			if (!problemasParcelas) {
				for (ContratoCobrancaParcelasInvestidor parcelas : parcelasInvestidor) {

					parcelaExcluida = false;

					// Cria uma lista das parcelas que continuam no contrato
					for (ContratoCobrancaParcelasInvestidor parcelasSelected : parcelasSelecionadas) {
						if (parcelasSelected.getId() == parcelas.getId()) {
							parcelaExcluida = true;
						}
					}

					if (!parcelaExcluida) {
						parcelasContratoInvestidor.add(parcelas);
					}
				}

				// Se Há lista com as parcelas que continuam no contrato do investidor
				if (parcelasContratoInvestidor.size() > 0) {
					// atualiza o número da parcela, no caso de exclusão no meio do contrato
					int numeroParcela = 0;
					for (ContratoCobrancaParcelasInvestidor p : parcelasContratoInvestidor) {
						numeroParcela = numeroParcela + 1;

						p.setNumeroParcela(String.valueOf(numeroParcela));
					}

					// retorna a lista atualizada.
					return parcelasContratoInvestidor;
				}
			}
		} else {
			context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR,
					"Excluir Parcela(s) Investidor: Erro de validação: não há parcelas selecionadas.", ""));
		}

		return parcelasContratoInvestidor;
	}

	public String clearFieldsRelFinanceiroBaixado() {
		this.filtrarDataVencimento = "Atualizada";
		this.relDataContratoInicio = null;
		this.relDataContratoFim = null;

		this.empresa = "TODAS";

		this.relObjetoContratoCobranca = new ArrayList<RelatorioFinanceiroCobranca>();
		this.selectedContratoCobrancaDetalhes = new ContratoCobrancaDetalhes();

		this.numContrato = null;

		this.contratoGerado = false;

		this.filtroRelBaixado = "inicio";

		this.relIsParcial = false;

		this.relParcial = "Baixa Total e Parcial";

		clearPagador();
		clearRecebedor();
		clearRecebedor2();
		clearRecebedor3();
		clearRecebedor4();
		clearRecebedor5();
		clearRecebedor6();
		clearRecebedor7();
		clearRecebedor8();
		clearRecebedor9();
		clearRecebedor10();
		clearResponsavel();
		clearGrupoFavorecido();

		this.grupoPagadores = false;
		clearGrupoPagadores();

		PagadorRecebedorDao pagadorRecebedorDao = new PagadorRecebedorDao();
		this.listPagadores = pagadorRecebedorDao.findAll();
		this.listRecebedores = pagadorRecebedorDao.findAll();

		ResponsavelDao responsavelDao = new ResponsavelDao();
		this.listResponsaveis = responsavelDao.findAll();

		GruposPagadoresDao gruposPagadoresDao = new GruposPagadoresDao();
		this.listGrupoPagadores = gruposPagadoresDao.findAll();

		this.exibeSomenteFavorecidosFiltrados = "Todos";

		this.grupoFavorecidos = true;

		return "/Atendimento/Cobranca/ContratoCobrancaFinanceiroBaixado.xhtml";
	}

	public String clearFieldsRelFinanceiroBaixadoFIDC() {
		this.relDataContratoInicio = DateUtil.gerarDataHoje();
		this.relDataContratoFim = DateUtil.gerarDataHoje();

		this.relObjetoContratoCobranca = new ArrayList<RelatorioFinanceiroCobranca>();
		this.selectedContratoCobrancaDetalhes = new ContratoCobrancaDetalhes();
		relatorioFinanceiroCobrancaResumo = new RelatorioFinanceiroCobrancaResumo();
		this.contratoGerado = false;

		return "/Atendimento/Cobranca/ContratoCobrancaFinanceiroBaixadoFIDC.xhtml";
	}

	public String clearFieldsRelFinanceiroBaixadoCRI1() {
		this.relDataContratoInicio = DateUtil.gerarDataHoje();
		this.relDataContratoFim = DateUtil.gerarDataHoje();

		this.relObjetoContratoCobranca = new ArrayList<RelatorioFinanceiroCobranca>();
		this.selectedContratoCobrancaDetalhes = new ContratoCobrancaDetalhes();
		relatorioFinanceiroCobrancaResumo = new RelatorioFinanceiroCobrancaResumo();
		this.contratoGerado = false;

		return "/Atendimento/Cobranca/ContratoCobrancaFinanceiroBaixadoCRI1.xhtml";
	}

	public String clearFieldsRelFinanceiroBaixadoCRI2() {
		this.relDataContratoInicio = DateUtil.gerarDataHoje();
		this.relDataContratoFim = DateUtil.gerarDataHoje();

		this.relObjetoContratoCobranca = new ArrayList<RelatorioFinanceiroCobranca>();
		this.selectedContratoCobrancaDetalhes = new ContratoCobrancaDetalhes();
		relatorioFinanceiroCobrancaResumo = new RelatorioFinanceiroCobrancaResumo();
		this.contratoGerado = false;

		return "/Atendimento/Cobranca/ContratoCobrancaFinanceiroBaixadoCRI2.xhtml";
	}

	public String clearFieldsRelFinanceiroBaixadoCRI3() {
		this.relDataContratoInicio = DateUtil.gerarDataHoje();
		this.relDataContratoFim = DateUtil.gerarDataHoje();

		this.relObjetoContratoCobranca = new ArrayList<RelatorioFinanceiroCobranca>();
		this.selectedContratoCobrancaDetalhes = new ContratoCobrancaDetalhes();
		relatorioFinanceiroCobrancaResumo = new RelatorioFinanceiroCobrancaResumo();
		this.contratoGerado = false;

		return "/Atendimento/Cobranca/ContratoCobrancaFinanceiroBaixadoCRI3.xhtml";
	}

	public String clearFieldsRelFinanceiroBaixadoCRI4() {
		this.relDataContratoInicio = DateUtil.gerarDataHoje();
		this.relDataContratoFim = DateUtil.gerarDataHoje();

		this.relObjetoContratoCobranca = new ArrayList<RelatorioFinanceiroCobranca>();
		this.selectedContratoCobrancaDetalhes = new ContratoCobrancaDetalhes();
		relatorioFinanceiroCobrancaResumo = new RelatorioFinanceiroCobrancaResumo();
		this.contratoGerado = false;

		return "/Atendimento/Cobranca/ContratoCobrancaFinanceiroBaixadoCRI4.xhtml";
	}

	public String clearFieldsRelFinanceiroBaixadoCRI5() {
		this.relDataContratoInicio = DateUtil.gerarDataHoje();
		this.relDataContratoFim = DateUtil.gerarDataHoje();

		this.relObjetoContratoCobranca = new ArrayList<RelatorioFinanceiroCobranca>();
		this.selectedContratoCobrancaDetalhes = new ContratoCobrancaDetalhes();
		relatorioFinanceiroCobrancaResumo = new RelatorioFinanceiroCobrancaResumo();
		this.contratoGerado = false;

		return "/Atendimento/Cobranca/ContratoCobrancaFinanceiroBaixadoCRI5.xhtml";
	}

	public String clearFieldsRelFinanceiroRecebedor() {
		this.relDataContratoInicio = null;
		this.relDataContratoFim = null;

		this.relObjetoContratoCobranca = new ArrayList<RelatorioFinanceiroCobranca>();
		this.selectedContratoCobrancaDetalhes = new ContratoCobrancaDetalhes();

		this.numContrato = null;

		this.contratoGerado = false;

		this.filtroRelBaixado = "inicio";

		clearRecebedor();

		PagadorRecebedorDao pagadorRecebedorDao = new PagadorRecebedorDao();
		this.listRecebedores = pagadorRecebedorDao.findAll();

		return "/Atendimento/Cobranca/ContratoCobrancaFinanceiroRecebedor.xhtml";
	}

	public String clearFieldsRelAtrasoRecebedor() {
		this.relDataContratoInicio = null;
		this.relDataContratoFim = null;

		this.relObjetoContratoCobranca = new ArrayList<RelatorioFinanceiroCobranca>();
		this.selectedContratoCobrancaDetalhes = new ContratoCobrancaDetalhes();

		this.contratoGerado = false;

		this.filtroRelBaixado = "inicio";

		PagadorRecebedorDao pagadorRecebedorDao = new PagadorRecebedorDao();
		this.listRecebedores = pagadorRecebedorDao.findAll();

		return "/Atendimento/Cobranca/ContratoCobrancaAtrasoRecebedor.xhtml";
	}

	public String backContratoCobrancaFinanceiro() {
		geraRelFinanceiro();
		return "/Atendimento/Cobranca/ContratoCobrancaFinanceiro.xhtml";
	}

	public String backContratoCobrancaQuitados() {
		return "/Atendimento/Cobranca/ContratoCobrancaConsultarQuitados.xhtml";
	}

	public String backContratoCobrancaConsultar() {
		return "/Atendimento/Cobranca/ContratoCobrancaConsultar.xhtml";
	}

	public String backContratoCobrancaFinanceiroBaixado() {
		geraRelFinanceiroBaixado();
		return "/Atendimento/Cobranca/ContratoCobrancaFinanceiroBaixado.xhtml";
	}

	/**
	 * @return the hasBaixaParcial
	 */
	public boolean isHasBaixaParcial() {
		return hasBaixaParcial;
	}

	/**
	 * @param hasBaixaParcial the hasBaixaParcial to set
	 */
	public void setHasBaixaParcial(boolean hasBaixaParcial) {
		this.hasBaixaParcial = hasBaixaParcial;
	}

	public String clearFieldsContratos(String empresa) {
		this.filtrarDataVencimento = "Atualizada";
		TimeZone zone = TimeZone.getDefault();
		Locale locale = new Locale("pt", "BR");
		Calendar dataInicio = Calendar.getInstance(zone, locale);
		this.relDataContratoInicio = dataInicio.getTime();
		this.relDataContratoFim = dataInicio.getTime();
		this.relObjetoContratoCobranca = new ArrayList<RelatorioFinanceiroCobranca>();
		this.selectedContratoCobrancaDetalhes = new ContratoCobrancaDetalhes();

		clearPagador();
		clearRecebedor();
		clearRecebedor2();
		clearRecebedor3();
		clearRecebedor4();
		clearRecebedor5();
		clearRecebedor6();
		clearRecebedor7();
		clearRecebedor8();
		clearRecebedor9();
		clearRecebedor10();
		clearResponsavel();

		this.numContrato = null;

		PagadorRecebedorDao pagadorRecebedorDao = new PagadorRecebedorDao();
		this.listPagadores = pagadorRecebedorDao.findAll();
		this.listRecebedores = pagadorRecebedorDao.findAll();
		this.listRecebedoresSeleciodados = new ArrayList<PagadorRecebedor>();

		this.dualListModelRecebedores = new DualListModel<PagadorRecebedor>(listRecebedores,
				listRecebedoresSeleciodados);

		ResponsavelDao responsavelDao = new ResponsavelDao();
		this.listResponsaveis = responsavelDao.findAll();

		this.contratoGerado = false;

		this.contratos = new ArrayList<ContratoCobranca>();
		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();

		this.tituloPainel = "";

		if (empresa.equals("Todas")) {
			this.tituloPainel = "GERAL";
			this.contratos = contratoCobrancaDao.consultaContratosUltimos10(empresa);
		}

		if (empresa.equals("Securitizadora")) {
			this.contratos = contratoCobrancaDao.consultaContratosUltimos10(empresa);
			stackedGroupBarModel = new BarChartModel();
			this.tituloPainel = "GALLERIA FINANÇAS SECURITIZADORA S.A.";
		}

		if (empresa.equals("FIDC")) {
			this.contratos = contratoCobrancaDao.consultaContratosUltimos10(empresa);

			clearFIDC();
			stackedGroupBarModel = new BarChartModel();

			this.tituloPainel = "FIDC GALLERIA";
		}

		if (empresa.equals("CRI 1")) {
			this.contratos = contratoCobrancaDao.consultaContratosUltimos10(empresa);

			clearCRI1();
			stackedGroupBarModel = new BarChartModel();

			this.tituloPainel = "CRI 1";
		}

		if (empresa.equals("CRI 2")) {
			this.contratos = contratoCobrancaDao.consultaContratosUltimos10(empresa);

			clearCRI2();
			stackedGroupBarModel = new BarChartModel();

			this.tituloPainel = "CRI 2";
		}

		if (empresa.equals("CRI 3")) {
			this.contratos = contratoCobrancaDao.consultaContratosUltimos10(empresa);

			clearCRI3();
			stackedGroupBarModel = new BarChartModel();

			this.tituloPainel = "CRI 3";
		}

		if (empresa.equals("CRI 4")) {
			this.contratos = contratoCobrancaDao.consultaContratosUltimos10(empresa);

			clearCRI4();
			stackedGroupBarModel = new BarChartModel();

			this.tituloPainel = "CRI 4";
		}

		if (empresa.equals("CRI 5")) {
			this.contratos = contratoCobrancaDao.consultaContratosUltimos10(empresa);

			clearCRI5();
			stackedGroupBarModel = new BarChartModel();

			this.tituloPainel = "CRI 5";
		}

		return "/Atendimento/Cobranca/ContratoCobrancaConsultar.xhtml";
	}

	public String clearFieldsContratosPerformance() {
		this.tipoParametroConsultaContrato = "numeroContrato";
		this.parametroConsultaContrato = null;
		this.empresa = "Todas";

		this.contratoGerado = false;

		this.contratos = new ArrayList<ContratoCobranca>();

		this.tituloPainel = "";
		this.updatePagadorRecebedor = "";

		this.selectedListContratoCobrancaDetalhes = new ArrayList<ContratoCobrancaDetalhes>();

		return "/Atendimento/Cobranca/ContratoCobrancaConsultarPerformance.xhtml";
	}

	public void calculaValorTotalBoleto() {
		// calcula o valor do boleto quando a geração é de mais de 1 parcela
		if (this.selectedListContratoCobrancaDetalhes.size() > 0) {
			this.valorBoleto = BigDecimal.ZERO;

			for (ContratoCobrancaDetalhes parcelasSelecionadas : this.selectedListContratoCobrancaDetalhes) {
				this.valorBoleto = this.valorBoleto.add(parcelasSelecionadas.getVlrParcela());
			}
		}
	}

	public void calculaValorTotalBoletoKobana() {
		// calcula o valor do boleto quando a geração é de mais de 1 parcela
		if (this.selectedListContratoCobrancaDetalhes.size() > 0) {
			this.valorBoleto = BigDecimal.ZERO;

			for (ContratoCobrancaDetalhes parcelasSelecionadas : this.selectedListContratoCobrancaDetalhes) {
				this.valorBoleto = this.valorBoleto.add(parcelasSelecionadas.getVlrBoletoKobana());
			}
		}
	}

	public void populaVlrBoletoKobana() {
		this.dataQuitacao = this.dataVencimentoBoleto;
		simularQuitacaoContrato();

		if (this.selectedListContratoCobrancaDetalhes.size() > 0) {
			for (ContratoCobrancaDetalhes parcelasSelecionadas : this.selectedListContratoCobrancaDetalhes) {
				for (QuitacaoParcelasPDF parcelaPresente : this.quitacaoPDF.getParcelas()) {
					if (parcelaPresente.getNumeroParcela().equals(parcelasSelecionadas.getNumeroParcela())) {
						parcelasSelecionadas.setVlrBoletoKobana(parcelaPresente.getValorPresenteParcela());
					}
				}
				// parcelasSelecionadas.setVlrBoletoKobana(parcelasSelecionadas.getVlrParcela());
			}
		}
	}

	public void clearFiltersConsultaContratosPerformance() {
		this.tipoParametroConsultaContrato = "numeroContrato";
		this.parametroConsultaContrato = null;
		this.contratoGerado = false;
		this.empresa = "Todas";

		this.contratos = new ArrayList<ContratoCobranca>();
	}

	public void geraConsultaContratosPerformance() {

		if (this.empresa.equals("Todas")) {
			this.tituloPainel = "GERAL";
		}

		if (this.empresa.equals("Securitizadora")) {
			this.tituloPainel = "GALLERIA FINANÇAS SECURITIZADORA S.A.";
		}

		if (this.empresa.equals("FIDC")) {
			this.tituloPainel = "FIDC GALLERIA";
		}

		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();
		this.contratos = new ArrayList<ContratoCobranca>();

		// Busca Contratos com Parcelas que vencem no dia atual
		if (this.tipoParametroConsultaContrato.equals("numeroContrato")) {
			if (this.parametroConsultaContrato.length() == 4) {
				this.parametroConsultaContrato = "0" + this.parametroConsultaContrato;
			}
		}

		this.contratos = contratoCobrancaDao.consultaContratosPerformance(this.tipoParametroConsultaContrato,
				this.parametroConsultaContrato, this.empresa);
	}

	public void changeStatusConsultaContratosPerformance() {
		this.parametroConsultaContrato = null;
	}

	public void changeStatusConsultaPreContratos() {
		this.parametroConsultaContrato = null;
		if (CommonsUtil.mesmoValor(this.tipoParametroConsultaContrato, "todos")) {
			geraConsultaContratosPendentes();
		}
	}

	private int totalContratosConsultar;
	private int prazoContrato;
	private BigDecimal valorUltimaPareclaPaga;
	private BigDecimal volumeCarteira;
	private BigDecimal somaContratos180;
	private BigDecimal somaContratos240;
	private BigDecimal porcentagem180;
	private BigDecimal porcentagem240;
	private int qtdDeparcelasVencidas;
	private BigDecimal inadimplencia30Soma;
	private BigDecimal inadimplencia60Soma;
	private BigDecimal inadimplencia90Soma;

	private BigDecimal prazoMax;
	private BigDecimal prazoMedio;
	private BigDecimal prazoMin;

	private BigDecimal taxaMax;
	private BigDecimal taxaMedia;
	private BigDecimal taxaMin;

	private BigDecimal taxaMaxIPCA;
	private BigDecimal taxaMediaIPCA;
	private BigDecimal taxaMinIPCA;

	private BigDecimal ltvMax;
	private BigDecimal ltvMedio;
	private BigDecimal ltvMin;

	private BigDecimal inadimplencia30Porcentagem;
	private BigDecimal inadimplencia60Porcentagem;
	private BigDecimal inadimplencia90Porcentagem;

	private Collection<ContratoCobranca> contratosInadimplencia30;
	private Collection<ContratoCobranca> contratosInadimplencia60;
	private Collection<ContratoCobranca> contratosInadimplencia90;
	private Collection<ContratoCobranca> contratoPrazoMin;

	private Collection<ContratoCobranca> contratosGraficoFidc;

	private BigDecimal totalAVencer;

	private BarChartModel stackedGroupBarModel;
	private CcbParticipantes participanteSelecionado;
	private CcbParticipantes socioCcbSelecionado;
	private boolean addSocioCcb = false;

	public void clearCRI1() {
		this.somaContratos240 = BigDecimal.ZERO;
		this.volumeCarteira = BigDecimal.ZERO;
		this.somaContratos180 = BigDecimal.ZERO;
		this.valorUltimaPareclaPaga = BigDecimal.ZERO;
		this.qtdDeparcelasVencidas = 0;
		this.inadimplencia30Soma = BigDecimal.ZERO;
		this.inadimplencia60Soma = BigDecimal.ZERO;
		this.inadimplencia90Soma = BigDecimal.ZERO;
		this.inadimplencia30Porcentagem = BigDecimal.ZERO;
		this.inadimplencia60Porcentagem = BigDecimal.ZERO;
		this.inadimplencia90Porcentagem = BigDecimal.ZERO;

		this.contratosInadimplencia30 = new ArrayList<ContratoCobranca>();
		this.contratosInadimplencia60 = new ArrayList<ContratoCobranca>();
		this.contratosInadimplencia90 = new ArrayList<ContratoCobranca>();
		this.contratoPrazoMin = new ArrayList<ContratoCobranca>();

		this.prazoMax = BigDecimal.ZERO;
		this.prazoMedio = BigDecimal.ZERO;
		this.prazoMin = BigDecimal.valueOf(0);

		this.taxaMax = BigDecimal.ZERO;
		this.taxaMedia = BigDecimal.ZERO;
		this.taxaMin = BigDecimal.valueOf(0);

		this.taxaMaxIPCA = BigDecimal.ZERO;
		this.taxaMediaIPCA = BigDecimal.ZERO;
		this.taxaMinIPCA = BigDecimal.valueOf(0);

		this.ltvMax = BigDecimal.ZERO;
		this.ltvMedio = BigDecimal.ZERO;
		this.ltvMin = BigDecimal.valueOf(0);

		this.totalContratosConsultar = 0;

		this.totalAVencer = BigDecimal.ZERO;
		this.porcentagem240 = BigDecimal.ZERO;
		this.porcentagem180 = BigDecimal.ZERO;
	}

	public void clearCRI2() {
		this.somaContratos240 = BigDecimal.ZERO;
		this.volumeCarteira = BigDecimal.ZERO;
		this.somaContratos180 = BigDecimal.ZERO;
		this.valorUltimaPareclaPaga = BigDecimal.ZERO;
		this.qtdDeparcelasVencidas = 0;
		this.inadimplencia30Soma = BigDecimal.ZERO;
		this.inadimplencia60Soma = BigDecimal.ZERO;
		this.inadimplencia90Soma = BigDecimal.ZERO;
		this.inadimplencia30Porcentagem = BigDecimal.ZERO;
		this.inadimplencia60Porcentagem = BigDecimal.ZERO;
		this.inadimplencia90Porcentagem = BigDecimal.ZERO;

		this.contratosInadimplencia30 = new ArrayList<ContratoCobranca>();
		this.contratosInadimplencia60 = new ArrayList<ContratoCobranca>();
		this.contratosInadimplencia90 = new ArrayList<ContratoCobranca>();
		this.contratoPrazoMin = new ArrayList<ContratoCobranca>();

		this.prazoMax = BigDecimal.ZERO;
		this.prazoMedio = BigDecimal.ZERO;
		this.prazoMin = BigDecimal.valueOf(0);

		this.taxaMax = BigDecimal.ZERO;
		this.taxaMedia = BigDecimal.ZERO;
		this.taxaMin = BigDecimal.valueOf(0);

		this.taxaMaxIPCA = BigDecimal.ZERO;
		this.taxaMediaIPCA = BigDecimal.ZERO;
		this.taxaMinIPCA = BigDecimal.valueOf(0);

		this.ltvMax = BigDecimal.ZERO;
		this.ltvMedio = BigDecimal.ZERO;
		this.ltvMin = BigDecimal.valueOf(0);

		this.totalContratosConsultar = 0;

		this.totalAVencer = BigDecimal.ZERO;
		this.porcentagem240 = BigDecimal.ZERO;
		this.porcentagem180 = BigDecimal.ZERO;
	}

	public void clearCRI3() {
		this.somaContratos240 = BigDecimal.ZERO;
		this.volumeCarteira = BigDecimal.ZERO;
		this.somaContratos180 = BigDecimal.ZERO;
		this.valorUltimaPareclaPaga = BigDecimal.ZERO;
		this.qtdDeparcelasVencidas = 0;
		this.inadimplencia30Soma = BigDecimal.ZERO;
		this.inadimplencia60Soma = BigDecimal.ZERO;
		this.inadimplencia90Soma = BigDecimal.ZERO;
		this.inadimplencia30Porcentagem = BigDecimal.ZERO;
		this.inadimplencia60Porcentagem = BigDecimal.ZERO;
		this.inadimplencia90Porcentagem = BigDecimal.ZERO;

		this.contratosInadimplencia30 = new ArrayList<ContratoCobranca>();
		this.contratosInadimplencia60 = new ArrayList<ContratoCobranca>();
		this.contratosInadimplencia90 = new ArrayList<ContratoCobranca>();
		this.contratoPrazoMin = new ArrayList<ContratoCobranca>();

		this.prazoMax = BigDecimal.ZERO;
		this.prazoMedio = BigDecimal.ZERO;
		this.prazoMin = BigDecimal.valueOf(0);

		this.taxaMax = BigDecimal.ZERO;
		this.taxaMedia = BigDecimal.ZERO;
		this.taxaMin = BigDecimal.valueOf(0);

		this.taxaMaxIPCA = BigDecimal.ZERO;
		this.taxaMediaIPCA = BigDecimal.ZERO;
		this.taxaMinIPCA = BigDecimal.valueOf(0);

		this.ltvMax = BigDecimal.ZERO;
		this.ltvMedio = BigDecimal.ZERO;
		this.ltvMin = BigDecimal.valueOf(0);

		this.totalContratosConsultar = 0;

		this.totalAVencer = BigDecimal.ZERO;
		this.porcentagem240 = BigDecimal.ZERO;
		this.porcentagem180 = BigDecimal.ZERO;
	}

	public void clearCRI5() {
		this.somaContratos240 = BigDecimal.ZERO;
		this.volumeCarteira = BigDecimal.ZERO;
		this.somaContratos180 = BigDecimal.ZERO;
		this.valorUltimaPareclaPaga = BigDecimal.ZERO;
		this.qtdDeparcelasVencidas = 0;
		this.inadimplencia30Soma = BigDecimal.ZERO;
		this.inadimplencia60Soma = BigDecimal.ZERO;
		this.inadimplencia90Soma = BigDecimal.ZERO;
		this.inadimplencia30Porcentagem = BigDecimal.ZERO;
		this.inadimplencia60Porcentagem = BigDecimal.ZERO;
		this.inadimplencia90Porcentagem = BigDecimal.ZERO;

		this.contratosInadimplencia30 = new ArrayList<ContratoCobranca>();
		this.contratosInadimplencia60 = new ArrayList<ContratoCobranca>();
		this.contratosInadimplencia90 = new ArrayList<ContratoCobranca>();
		this.contratoPrazoMin = new ArrayList<ContratoCobranca>();

		this.prazoMax = BigDecimal.ZERO;
		this.prazoMedio = BigDecimal.ZERO;
		this.prazoMin = BigDecimal.valueOf(0);

		this.taxaMax = BigDecimal.ZERO;
		this.taxaMedia = BigDecimal.ZERO;
		this.taxaMin = BigDecimal.valueOf(0);

		this.taxaMaxIPCA = BigDecimal.ZERO;
		this.taxaMediaIPCA = BigDecimal.ZERO;
		this.taxaMinIPCA = BigDecimal.valueOf(0);

		this.ltvMax = BigDecimal.ZERO;
		this.ltvMedio = BigDecimal.ZERO;
		this.ltvMin = BigDecimal.valueOf(0);

		this.totalContratosConsultar = 0;

		this.totalAVencer = BigDecimal.ZERO;
		this.porcentagem240 = BigDecimal.ZERO;
		this.porcentagem180 = BigDecimal.ZERO;
	}

	public void clearCRI4() {
		this.somaContratos240 = BigDecimal.ZERO;
		this.volumeCarteira = BigDecimal.ZERO;
		this.somaContratos180 = BigDecimal.ZERO;
		this.valorUltimaPareclaPaga = BigDecimal.ZERO;
		this.qtdDeparcelasVencidas = 0;
		this.inadimplencia30Soma = BigDecimal.ZERO;
		this.inadimplencia60Soma = BigDecimal.ZERO;
		this.inadimplencia90Soma = BigDecimal.ZERO;
		this.inadimplencia30Porcentagem = BigDecimal.ZERO;
		this.inadimplencia60Porcentagem = BigDecimal.ZERO;
		this.inadimplencia90Porcentagem = BigDecimal.ZERO;

		this.contratosInadimplencia30 = new ArrayList<ContratoCobranca>();
		this.contratosInadimplencia60 = new ArrayList<ContratoCobranca>();
		this.contratosInadimplencia90 = new ArrayList<ContratoCobranca>();
		this.contratoPrazoMin = new ArrayList<ContratoCobranca>();

		this.prazoMax = BigDecimal.ZERO;
		this.prazoMedio = BigDecimal.ZERO;
		this.prazoMin = BigDecimal.valueOf(0);

		this.taxaMax = BigDecimal.ZERO;
		this.taxaMedia = BigDecimal.ZERO;
		this.taxaMin = BigDecimal.valueOf(0);

		this.taxaMaxIPCA = BigDecimal.ZERO;
		this.taxaMediaIPCA = BigDecimal.ZERO;
		this.taxaMinIPCA = BigDecimal.valueOf(0);

		this.ltvMax = BigDecimal.ZERO;
		this.ltvMedio = BigDecimal.ZERO;
		this.ltvMin = BigDecimal.valueOf(0);

		this.totalContratosConsultar = 0;

		this.totalAVencer = BigDecimal.ZERO;
		this.porcentagem240 = BigDecimal.ZERO;
		this.porcentagem180 = BigDecimal.ZERO;
	}

	public void consultaDadosCRI(String relatorioTipo) {
		clearCRI1();

		TimeZone zone = TimeZone.getDefault();
		Locale locale = new Locale("pt", "BR");
		Calendar dataHoje = Calendar.getInstance(zone, locale);
		Calendar dataVencimentoParcela = Calendar.getInstance(zone, locale);
		dataHoje.set(Calendar.HOUR_OF_DAY, 0);
		dataHoje.set(Calendar.MINUTE, 0);
		dataHoje.set(Calendar.SECOND, 0);
		dataHoje.set(Calendar.MILLISECOND, 0);
		Date dataAtual = dataHoje.getTime();
		Calendar dataVencimentoMínima = new GregorianCalendar(2021, 9, 31);

		this.prazoMin = BigDecimal.valueOf(100);

		this.taxaMin = BigDecimal.valueOf(100);

		this.taxaMinIPCA = BigDecimal.valueOf(100);

		this.ltvMin = BigDecimal.valueOf(100);

		this.contratos = new ArrayList<ContratoCobranca>();
		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();

		this.contratos = contratoCobrancaDao.consultaContratos(relatorioTipo);
		this.totalContratosConsultar = this.contratos.size();

		contratosGraficoFidc = new ArrayList<ContratoCobranca>();

		BigDecimal somaPeso = BigDecimal.ZERO;
		BigDecimal ltv = BigDecimal.ZERO;

		for (ContratoCobranca contrato : this.contratos) {
			this.qtdDeparcelasVencidas = 0;
			for (ContratoCobrancaDetalhes ccd : contrato.getListContratoCobrancaDetalhes()) {
				dataVencimentoParcela.setTime(ccd.getDataVencimento());

				if (dataVencimentoParcela.getTime().before(dataHoje.getTime()) && !ccd.isParcelaPaga()) {
					ccd.setParcelaVencida(true);
				}

				else if (dataVencimentoParcela.getTime().equals(dataHoje.getTime()) && !ccd.isParcelaPaga()) {
					ccd.setParcelaVencendo(true);
				}

				if (ccd.isParcelaPaga()) {
					this.valorUltimaPareclaPaga = ccd.getVlrSaldoParcela();
					this.prazoContrato = contrato.getQtdeParcelas() - CommonsUtil.intValue(ccd.getNumeroParcela());
				} else if (ccd.isParcelaVencida()) {
					if (dataVencimentoParcela.after(dataVencimentoMínima)) {
						this.qtdDeparcelasVencidas++;
					}
					this.totalAVencer = this.totalAVencer
							.add(ccd.getVlrJurosParcela().add(ccd.getVlrAmortizacaoParcela()));
				} else {
					this.totalAVencer = this.totalAVencer
							.add(ccd.getVlrJurosParcela().add(ccd.getVlrAmortizacaoParcela()));
				}

				if (CommonsUtil.mesmoValor(ccd.getDataVencimento().getMonth(), dataAtual.getMonth())
						&& CommonsUtil.mesmoValor(ccd.getDataVencimento().getYear(), dataAtual.getYear())
						&& !CommonsUtil.semValor(contrato.getValorImovel())) {
					ltv = ccd.getVlrSaldoParcela().divide(contrato.getValorImovel(), MathContext.DECIMAL128);
				}
			}

			if (CommonsUtil.mesmoValor(this.prazoContrato, 0)
					|| CommonsUtil.mesmoValor(this.valorUltimaPareclaPaga, BigDecimal.ZERO)) {
				this.totalContratosConsultar--;
				this.valorUltimaPareclaPaga = BigDecimal.ZERO;
			} else {
				contratosGraficoFidc.add(contrato);

				if (!CommonsUtil.semValor(contrato.getValorCCB())) {
					BigDecimal peso = BigDecimal.ZERO;
					BigDecimal valor = BigDecimal.ZERO;
					peso = contrato.getValorCCB().divide(BigDecimal.valueOf(100000), MathContext.DECIMAL128);
					somaPeso = somaPeso.add(peso);
					valor = BigDecimal.valueOf(prazoContrato * peso.doubleValue());
					prazoMedio = prazoMedio.add(valor);
				}
				ltvMedio = ltvMedio.add(ltv);

				if (prazoMax.compareTo(BigDecimal.valueOf(prazoContrato)) == -1) {
					prazoMax = BigDecimal.valueOf(prazoContrato);
				}

				if (prazoMin.compareTo(BigDecimal.valueOf(prazoContrato)) == 1) {
					prazoMin = BigDecimal.valueOf(prazoContrato);
					contratoPrazoMin.clear();
					contratoPrazoMin.add(contrato);
				} else if (prazoMin.compareTo(BigDecimal.valueOf(prazoContrato)) == 0) {
					contratoPrazoMin.add(contrato);
				}

				if (contrato.isCorrigidoIPCA()) {
					if (taxaMaxIPCA.compareTo(contrato.getTxJurosParcelas()) == -1) {
						taxaMaxIPCA = contrato.getTxJurosParcelas();
					}
					if (taxaMinIPCA.compareTo(contrato.getTxJurosParcelas()) == 1) {
						taxaMinIPCA = contrato.getTxJurosParcelas();
					}
				} else {
					if (taxaMax.compareTo(contrato.getTxJurosParcelas()) == -1) {
						taxaMax = contrato.getTxJurosParcelas();
					}
					if (taxaMin.compareTo(contrato.getTxJurosParcelas()) == 1) {
						taxaMin = contrato.getTxJurosParcelas();
					}
				}

				if (ltvMax.compareTo(ltv) == -1) {
					ltvMax = ltv;
				}
				if (ltvMin.compareTo(ltv) == 1) {
					ltvMin = ltv;
				}
			}

			if (this.qtdDeparcelasVencidas == 1) {
				this.inadimplencia30Soma = this.inadimplencia30Soma.add(valorUltimaPareclaPaga);
				this.contratosInadimplencia30.add(contrato);
			} else if (this.qtdDeparcelasVencidas == 2) {
				this.inadimplencia60Soma = this.inadimplencia60Soma.add(valorUltimaPareclaPaga);
				this.contratosInadimplencia60.add(contrato);
			} else if (this.qtdDeparcelasVencidas >= 3) {
				this.inadimplencia90Soma = this.inadimplencia90Soma.add(valorUltimaPareclaPaga);
				this.contratosInadimplencia90.add(contrato);
			}

			this.volumeCarteira = this.volumeCarteira.add(valorUltimaPareclaPaga);

			if (this.prazoContrato <= 180) {
				this.somaContratos180 = this.somaContratos180.add(this.valorUltimaPareclaPaga);
			} else if (this.prazoContrato > 180) {
				this.somaContratos240 = this.somaContratos240.add(this.valorUltimaPareclaPaga);
			}
		}

		this.prazoMedio = prazoMedio.divide(BigDecimal.valueOf(totalContratosConsultar), MathContext.DECIMAL128);
		this.taxaMedia = CalcularMediaCcbSemIPCA(contratos);
		this.taxaMediaIPCA = CalcularMediaCcbComIPCA(contratos);
		this.ltvMedio = ltvMedio.divide(BigDecimal.valueOf(totalContratosConsultar), MathContext.DECIMAL128);

		this.ltvMedio = this.ltvMedio.multiply(BigDecimal.valueOf(100));
		this.ltvMax = this.ltvMax.multiply(BigDecimal.valueOf(100));
		this.ltvMin = this.ltvMin.multiply(BigDecimal.valueOf(100));

		this.prazoMedio = this.prazoMedio.divide(somaPeso, MathContext.DECIMAL128);
		this.prazoMedio = this.prazoMedio.setScale(2, BigDecimal.ROUND_HALF_UP);
		this.ltvMedio = this.ltvMedio.setScale(2, BigDecimal.ROUND_HALF_UP);
		this.ltvMax = this.ltvMax.setScale(2, BigDecimal.ROUND_HALF_UP);
		this.ltvMin = this.ltvMin.setScale(2, BigDecimal.ROUND_HALF_UP);

		this.inadimplencia30Porcentagem = this.inadimplencia30Soma.divide(this.volumeCarteira, MathContext.DECIMAL128);
		this.inadimplencia30Porcentagem = this.inadimplencia30Porcentagem.multiply(BigDecimal.valueOf(100));
		this.inadimplencia30Porcentagem = this.inadimplencia30Porcentagem.setScale(2, BigDecimal.ROUND_HALF_UP);

		this.inadimplencia60Porcentagem = this.inadimplencia60Soma.divide(this.volumeCarteira, MathContext.DECIMAL128);
		this.inadimplencia60Porcentagem = this.inadimplencia60Porcentagem.multiply(BigDecimal.valueOf(100));
		this.inadimplencia60Porcentagem = this.inadimplencia60Porcentagem.setScale(2, BigDecimal.ROUND_HALF_UP);

		this.inadimplencia90Porcentagem = this.inadimplencia90Soma.divide(this.volumeCarteira, MathContext.DECIMAL128);
		this.inadimplencia90Porcentagem = this.inadimplencia90Porcentagem.multiply(BigDecimal.valueOf(100));
		this.inadimplencia90Porcentagem = this.inadimplencia90Porcentagem.setScale(2, BigDecimal.ROUND_HALF_UP);

		this.porcentagem180 = this.somaContratos180.divide(this.volumeCarteira, MathContext.DECIMAL128);
		this.porcentagem180 = this.porcentagem180.multiply(BigDecimal.valueOf(100));
		this.porcentagem180 = this.porcentagem180.setScale(2, BigDecimal.ROUND_HALF_UP);

		this.porcentagem240 = this.somaContratos240.divide(this.volumeCarteira, MathContext.DECIMAL128);
		this.porcentagem240 = this.porcentagem240.multiply(BigDecimal.valueOf(100));
		this.porcentagem240 = this.porcentagem240.setScale(2, BigDecimal.ROUND_HALF_UP);

		prazoMax = prazoMax.add(BigDecimal.ONE);

		// createStackedGroupBarModel();
	}

	public void clearSecuritizadora() {
		this.somaContratos240 = BigDecimal.ZERO;
		this.volumeCarteira = BigDecimal.ZERO;
		this.somaContratos180 = BigDecimal.ZERO;
		this.valorUltimaPareclaPaga = BigDecimal.ZERO;
		this.qtdDeparcelasVencidas = 0;
		this.inadimplencia30Soma = BigDecimal.ZERO;
		this.inadimplencia60Soma = BigDecimal.ZERO;
		this.inadimplencia90Soma = BigDecimal.ZERO;
		this.inadimplencia30Porcentagem = BigDecimal.ZERO;
		this.inadimplencia60Porcentagem = BigDecimal.ZERO;
		this.inadimplencia90Porcentagem = BigDecimal.ZERO;

		this.contratosInadimplencia30 = new ArrayList<ContratoCobranca>();
		this.contratosInadimplencia60 = new ArrayList<ContratoCobranca>();
		this.contratosInadimplencia90 = new ArrayList<ContratoCobranca>();
		this.contratoPrazoMin = new ArrayList<ContratoCobranca>();

		this.prazoMax = BigDecimal.ZERO;
		this.prazoMedio = BigDecimal.ZERO;
		this.prazoMin = BigDecimal.valueOf(0);

		this.taxaMax = BigDecimal.ZERO;
		this.taxaMedia = BigDecimal.ZERO;
		this.taxaMin = BigDecimal.valueOf(0);

		this.taxaMaxIPCA = BigDecimal.ZERO;
		this.taxaMediaIPCA = BigDecimal.ZERO;
		this.taxaMinIPCA = BigDecimal.valueOf(0);

		this.ltvMax = BigDecimal.ZERO;
		this.ltvMedio = BigDecimal.ZERO;
		this.ltvMin = BigDecimal.valueOf(0);

		this.totalContratosConsultar = 0;

		this.totalAVencer = BigDecimal.ZERO;
		this.porcentagem240 = BigDecimal.ZERO;
		this.porcentagem180 = BigDecimal.ZERO;
	}

	public void consultaDadosSecuritizadora() {
		clearSecuritizadora();

		TimeZone zone = TimeZone.getDefault();
		Locale locale = new Locale("pt", "BR");
		Calendar dataHoje = Calendar.getInstance(zone, locale);
		Calendar dataVencimentoParcela = Calendar.getInstance(zone, locale);
		dataHoje.set(Calendar.HOUR_OF_DAY, 0);
		dataHoje.set(Calendar.MINUTE, 0);
		dataHoje.set(Calendar.SECOND, 0);
		dataHoje.set(Calendar.MILLISECOND, 0);
		Date dataAtual = dataHoje.getTime();
		Calendar dataVencimentoMínima = new GregorianCalendar(2021, 9, 31);

		this.prazoMin = BigDecimal.valueOf(100);

		this.taxaMin = BigDecimal.valueOf(100);

		this.taxaMinIPCA = BigDecimal.valueOf(100);

		this.ltvMin = BigDecimal.valueOf(100);

		this.contratos = new ArrayList<ContratoCobranca>();
		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();

		this.contratos = contratoCobrancaDao.consultaContratos("Securitizadora");
		this.totalContratosConsultar = this.contratos.size();

		contratosGraficoFidc = new ArrayList<ContratoCobranca>();

		BigDecimal somaPeso = BigDecimal.ZERO;
		BigDecimal ltv = BigDecimal.ZERO;

		for (ContratoCobranca contrato : this.contratos) {
			this.qtdDeparcelasVencidas = 0;
			for (ContratoCobrancaDetalhes ccd : contrato.getListContratoCobrancaDetalhes()) {
				dataVencimentoParcela.setTime(ccd.getDataVencimento());

				if (dataVencimentoParcela.getTime().before(dataHoje.getTime()) && !ccd.isParcelaPaga()) {
					ccd.setParcelaVencida(true);
				}

				else if (dataVencimentoParcela.getTime().equals(dataHoje.getTime()) && !ccd.isParcelaPaga()) {
					ccd.setParcelaVencendo(true);
				}

				BigDecimal valorParcela = BigDecimal.ZERO;

				if (ccd.isParcelaPaga()) {
					this.valorUltimaPareclaPaga = ccd.getVlrSaldoParcela();
					if (!CommonsUtil.mesmoValor(ccd.getNumeroParcela(), "Amortização")) {
						this.prazoContrato = contrato.getQtdeParcelas() - CommonsUtil.intValue(ccd.getNumeroParcela());
					}
				} else if (ccd.isParcelaVencida()) {
					if (dataVencimentoParcela.after(dataVencimentoMínima)) {
						this.qtdDeparcelasVencidas++;
					}

					if (!CommonsUtil.semValor(ccd.getVlrJurosParcela())) {
						valorParcela = valorParcela.add(ccd.getVlrJurosParcela());
					}

					if (!CommonsUtil.semValor(ccd.getVlrAmortizacaoParcela())) {
						valorParcela = valorParcela.add(ccd.getVlrAmortizacaoParcela());
					}

					if (!CommonsUtil.semValor(ccd.getVlrParcela()) && CommonsUtil.semValor(valorParcela)) {
						valorParcela = valorParcela.add(ccd.getVlrParcela());
					}

					this.totalAVencer = this.totalAVencer.add(valorParcela);
				} else {
					this.totalAVencer = this.totalAVencer.add(valorParcela);
				}

				if (CommonsUtil.mesmoValor(ccd.getDataVencimento().getMonth(), dataAtual.getMonth())
						&& CommonsUtil.mesmoValor(ccd.getDataVencimento().getYear(), dataAtual.getYear())
						&& !CommonsUtil.semValor(contrato.getValorImovel())) {
					ltv = ccd.getVlrSaldoParcela().divide(contrato.getValorImovel(), MathContext.DECIMAL128);
				}
			}

			if (CommonsUtil.mesmoValor(this.prazoContrato, 0)
					|| CommonsUtil.mesmoValor(this.valorUltimaPareclaPaga, BigDecimal.ZERO)) {
				this.totalContratosConsultar--;
				this.valorUltimaPareclaPaga = BigDecimal.ZERO;
			} else {
				contratosGraficoFidc.add(contrato);

				if (!CommonsUtil.semValor(contrato.getValorCCB())) {
					BigDecimal peso = BigDecimal.ZERO;
					BigDecimal valor = BigDecimal.ZERO;
					peso = contrato.getValorCCB().divide(BigDecimal.valueOf(100000), MathContext.DECIMAL128);
					somaPeso = somaPeso.add(peso);
					valor = BigDecimal.valueOf(prazoContrato * peso.doubleValue());
					prazoMedio = prazoMedio.add(valor);
				}

				ltvMedio = ltvMedio.add(ltv);

				if (prazoMax.compareTo(BigDecimal.valueOf(prazoContrato)) == -1) {
					prazoMax = BigDecimal.valueOf(prazoContrato);
				}

				if (prazoMin.compareTo(BigDecimal.valueOf(prazoContrato)) == 1) {
					prazoMin = BigDecimal.valueOf(prazoContrato);
					contratoPrazoMin.clear();
					contratoPrazoMin.add(contrato);
				} else if (prazoMin.compareTo(BigDecimal.valueOf(prazoContrato)) == 0) {
					contratoPrazoMin.add(contrato);
				}

				if (contrato.isCorrigidoIPCA()) {
					if (taxaMaxIPCA.compareTo(contrato.getTxJurosParcelas()) == -1) {
						taxaMaxIPCA = contrato.getTxJurosParcelas();
					}
					if (taxaMinIPCA.compareTo(contrato.getTxJurosParcelas()) == 1) {
						taxaMinIPCA = contrato.getTxJurosParcelas();
					}
				} else {
					if (taxaMax.compareTo(contrato.getTxJurosParcelas()) == -1) {
						taxaMax = contrato.getTxJurosParcelas();
					}
					if (taxaMin.compareTo(contrato.getTxJurosParcelas()) == 1) {
						taxaMin = contrato.getTxJurosParcelas();
					}
				}

				if (ltvMax.compareTo(ltv) == -1) {
					ltvMax = ltv;
				}
				if (ltvMin.compareTo(ltv) == 1) {
					ltvMin = ltv;
				}
			}

			if (CommonsUtil.semValor(valorUltimaPareclaPaga)) {
				valorUltimaPareclaPaga = BigDecimal.ZERO;
			}

			if (this.qtdDeparcelasVencidas == 1) {
				this.inadimplencia30Soma = this.inadimplencia30Soma.add(valorUltimaPareclaPaga);
				this.contratosInadimplencia30.add(contrato);
			} else if (this.qtdDeparcelasVencidas == 2) {
				this.inadimplencia60Soma = this.inadimplencia60Soma.add(valorUltimaPareclaPaga);
				this.contratosInadimplencia60.add(contrato);
			} else if (this.qtdDeparcelasVencidas >= 3) {
				this.inadimplencia90Soma = this.inadimplencia90Soma.add(valorUltimaPareclaPaga);
				this.contratosInadimplencia90.add(contrato);
			}

			this.volumeCarteira = this.volumeCarteira.add(valorUltimaPareclaPaga);

			if (this.prazoContrato <= 180) {
				this.somaContratos180 = this.somaContratos180.add(this.valorUltimaPareclaPaga);
			} else if (this.prazoContrato > 180) {
				this.somaContratos240 = this.somaContratos240.add(this.valorUltimaPareclaPaga);
			}
		}

		this.prazoMedio = prazoMedio.divide(BigDecimal.valueOf(totalContratosConsultar), MathContext.DECIMAL128);
		this.taxaMedia = CalcularMediaCcbSemIPCA(contratos);
		this.taxaMediaIPCA = CalcularMediaCcbComIPCA(contratos);
		this.ltvMedio = ltvMedio.divide(BigDecimal.valueOf(totalContratosConsultar), MathContext.DECIMAL128);

		this.ltvMedio = this.ltvMedio.multiply(BigDecimal.valueOf(100));
		this.ltvMax = this.ltvMax.multiply(BigDecimal.valueOf(100));
		this.ltvMin = this.ltvMin.multiply(BigDecimal.valueOf(100));

		this.prazoMedio = this.prazoMedio.divide(somaPeso, MathContext.DECIMAL128);
		this.prazoMedio = this.prazoMedio.setScale(2, BigDecimal.ROUND_HALF_UP);
		this.taxaMedia = this.taxaMedia.setScale(2, BigDecimal.ROUND_HALF_UP);
		this.taxaMediaIPCA = this.taxaMediaIPCA.setScale(2, BigDecimal.ROUND_HALF_UP);
		this.ltvMedio = this.ltvMedio.setScale(2, BigDecimal.ROUND_HALF_UP);
		this.ltvMax = this.ltvMax.setScale(2, BigDecimal.ROUND_HALF_UP);
		this.ltvMin = this.ltvMin.setScale(2, BigDecimal.ROUND_HALF_UP);

		this.inadimplencia30Porcentagem = this.inadimplencia30Soma.divide(this.volumeCarteira, MathContext.DECIMAL128);
		this.inadimplencia30Porcentagem = this.inadimplencia30Porcentagem.multiply(BigDecimal.valueOf(100));
		this.inadimplencia30Porcentagem = this.inadimplencia30Porcentagem.setScale(2, BigDecimal.ROUND_HALF_UP);

		this.inadimplencia60Porcentagem = this.inadimplencia60Soma.divide(this.volumeCarteira, MathContext.DECIMAL128);
		this.inadimplencia60Porcentagem = this.inadimplencia60Porcentagem.multiply(BigDecimal.valueOf(100));
		this.inadimplencia60Porcentagem = this.inadimplencia60Porcentagem.setScale(2, BigDecimal.ROUND_HALF_UP);

		this.inadimplencia90Porcentagem = this.inadimplencia90Soma.divide(this.volumeCarteira, MathContext.DECIMAL128);
		this.inadimplencia90Porcentagem = this.inadimplencia90Porcentagem.multiply(BigDecimal.valueOf(100));
		this.inadimplencia90Porcentagem = this.inadimplencia90Porcentagem.setScale(2, BigDecimal.ROUND_HALF_UP);

		this.porcentagem180 = this.somaContratos180.divide(this.volumeCarteira, MathContext.DECIMAL128);
		this.porcentagem180 = this.porcentagem180.multiply(BigDecimal.valueOf(100));
		this.porcentagem180 = this.porcentagem180.setScale(2, BigDecimal.ROUND_HALF_UP);

		this.porcentagem240 = this.somaContratos240.divide(this.volumeCarteira, MathContext.DECIMAL128);
		this.porcentagem240 = this.porcentagem240.multiply(BigDecimal.valueOf(100));
		this.porcentagem240 = this.porcentagem240.setScale(2, BigDecimal.ROUND_HALF_UP);

		prazoMax = prazoMax.add(BigDecimal.ONE);

		// createStackedGroupBarModel();
	}

	public void clearFIDC() {
		this.somaContratos240 = BigDecimal.ZERO;
		this.volumeCarteira = BigDecimal.ZERO;
		this.somaContratos180 = BigDecimal.ZERO;
		this.valorUltimaPareclaPaga = BigDecimal.ZERO;
		this.qtdDeparcelasVencidas = 0;
		this.inadimplencia30Soma = BigDecimal.ZERO;
		this.inadimplencia60Soma = BigDecimal.ZERO;
		this.inadimplencia90Soma = BigDecimal.ZERO;
		this.inadimplencia30Porcentagem = BigDecimal.ZERO;
		this.inadimplencia60Porcentagem = BigDecimal.ZERO;
		this.inadimplencia90Porcentagem = BigDecimal.ZERO;

		this.contratosInadimplencia30 = new ArrayList<ContratoCobranca>();
		this.contratosInadimplencia60 = new ArrayList<ContratoCobranca>();
		this.contratosInadimplencia90 = new ArrayList<ContratoCobranca>();
		this.contratoPrazoMin = new ArrayList<ContratoCobranca>();

		this.prazoMax = BigDecimal.ZERO;
		this.prazoMedio = BigDecimal.ZERO;
		this.prazoMin = BigDecimal.valueOf(0);

		this.taxaMax = BigDecimal.ZERO;
		this.taxaMedia = BigDecimal.ZERO;
		this.taxaMin = BigDecimal.valueOf(0);

		this.taxaMaxIPCA = BigDecimal.ZERO;
		this.taxaMediaIPCA = BigDecimal.ZERO;
		this.taxaMinIPCA = BigDecimal.valueOf(0);

		this.ltvMax = BigDecimal.ZERO;
		this.ltvMedio = BigDecimal.ZERO;
		this.ltvMin = BigDecimal.valueOf(0);

		this.totalContratosConsultar = 0;

		this.totalAVencer = BigDecimal.ZERO;
		this.porcentagem240 = BigDecimal.ZERO;
		this.porcentagem180 = BigDecimal.ZERO;
	}

	public void consultaDadosFIDC() {
		clearFIDC();

		TimeZone zone = TimeZone.getDefault();
		Locale locale = new Locale("pt", "BR");
		Calendar dataHoje = Calendar.getInstance(zone, locale);
		Calendar dataVencimentoParcela = Calendar.getInstance(zone, locale);
		dataHoje.set(Calendar.HOUR_OF_DAY, 0);
		dataHoje.set(Calendar.MINUTE, 0);
		dataHoje.set(Calendar.SECOND, 0);
		dataHoje.set(Calendar.MILLISECOND, 0);
		Date dataAtual = dataHoje.getTime();
		Calendar dataVencimentoMínima = new GregorianCalendar(2021, 9, 31);

		this.prazoMin = BigDecimal.valueOf(100);

		this.taxaMin = BigDecimal.valueOf(100);

		this.taxaMinIPCA = BigDecimal.valueOf(100);

		this.ltvMin = BigDecimal.valueOf(100);

		this.contratos = new ArrayList<ContratoCobranca>();
		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();

		this.contratos = contratoCobrancaDao.consultaContratos("FIDC");
		this.totalContratosConsultar = this.contratos.size();

		contratosGraficoFidc = new ArrayList<ContratoCobranca>();

		BigDecimal somaPeso = BigDecimal.ZERO;
		BigDecimal ltv = BigDecimal.ZERO;

		for (ContratoCobranca contrato : this.contratos) {
			this.qtdDeparcelasVencidas = 0;
			for (ContratoCobrancaDetalhes ccd : contrato.getListContratoCobrancaDetalhes()) {
				dataVencimentoParcela.setTime(ccd.getDataVencimento());

				if (dataVencimentoParcela.getTime().before(dataHoje.getTime()) && !ccd.isParcelaPaga()) {
					ccd.setParcelaVencida(true);
				}

				else if (dataVencimentoParcela.getTime().equals(dataHoje.getTime()) && !ccd.isParcelaPaga()) {
					ccd.setParcelaVencendo(true);
				}

				if (ccd.isParcelaPaga()) {
					this.valorUltimaPareclaPaga = ccd.getVlrSaldoParcela();
					this.prazoContrato = contrato.getQtdeParcelas() - CommonsUtil.intValue(ccd.getNumeroParcela());
				} else if (ccd.isParcelaVencida()) {
					if (dataVencimentoParcela.after(dataVencimentoMínima)) {
						this.qtdDeparcelasVencidas++;
					}
					this.totalAVencer = this.totalAVencer
							.add(ccd.getVlrJurosParcela().add(ccd.getVlrAmortizacaoParcela()));
				} else {
					this.totalAVencer = this.totalAVencer
							.add(ccd.getVlrJurosParcela().add(ccd.getVlrAmortizacaoParcela()));
				}

				if (CommonsUtil.mesmoValor(ccd.getDataVencimento().getMonth(), dataAtual.getMonth())
						&& CommonsUtil.mesmoValor(ccd.getDataVencimento().getYear(), dataAtual.getYear())
						&& !CommonsUtil.semValor(contrato.getValorImovel())) {
					ltv = ccd.getVlrSaldoParcela().divide(contrato.getValorImovel(), MathContext.DECIMAL128);
				}
			}

			if (CommonsUtil.mesmoValor(this.prazoContrato, 0)
					|| CommonsUtil.mesmoValor(this.valorUltimaPareclaPaga, BigDecimal.ZERO)) {
				this.totalContratosConsultar--;
				this.valorUltimaPareclaPaga = BigDecimal.ZERO;
			} else {
				contratosGraficoFidc.add(contrato);
				if (!CommonsUtil.semValor(contrato.getValorCCB())) {
					BigDecimal peso = BigDecimal.ZERO;
					BigDecimal valor = BigDecimal.ZERO;
					peso = contrato.getValorCCB().divide(BigDecimal.valueOf(100000), MathContext.DECIMAL128);
					somaPeso = somaPeso.add(peso);
					valor = BigDecimal.valueOf(prazoContrato * peso.doubleValue());
					prazoMedio = prazoMedio.add(valor);
				}

				ltvMedio = ltvMedio.add(ltv);

				if (prazoMax.compareTo(BigDecimal.valueOf(prazoContrato)) == -1) {
					prazoMax = BigDecimal.valueOf(prazoContrato);
				}

				if (prazoMin.compareTo(BigDecimal.valueOf(prazoContrato)) == 1) {
					prazoMin = BigDecimal.valueOf(prazoContrato);
					contratoPrazoMin.clear();
					contratoPrazoMin.add(contrato);
				} else if (prazoMin.compareTo(BigDecimal.valueOf(prazoContrato)) == 0) {
					contratoPrazoMin.add(contrato);
				}

				if (contrato.isCorrigidoIPCA()) {
					if (taxaMaxIPCA.compareTo(contrato.getTxJurosParcelas()) == -1) {
						taxaMaxIPCA = contrato.getTxJurosParcelas();
					}
					if (taxaMinIPCA.compareTo(contrato.getTxJurosParcelas()) == 1) {
						taxaMinIPCA = contrato.getTxJurosParcelas();
					}
				} else {
					if (taxaMax.compareTo(contrato.getTxJurosParcelas()) == -1) {
						taxaMax = contrato.getTxJurosParcelas();
					}
					if (taxaMin.compareTo(contrato.getTxJurosParcelas()) == 1) {
						taxaMin = contrato.getTxJurosParcelas();
					}
				}

				if (ltvMax.compareTo(ltv) == -1) {
					ltvMax = ltv;
				}
				if (ltvMin.compareTo(ltv) == 1) {
					ltvMin = ltv;
				}
			}

			if (this.qtdDeparcelasVencidas == 1) {
				this.inadimplencia30Soma = this.inadimplencia30Soma.add(valorUltimaPareclaPaga);
				this.contratosInadimplencia30.add(contrato);
			} else if (this.qtdDeparcelasVencidas == 2) {
				this.inadimplencia60Soma = this.inadimplencia60Soma.add(valorUltimaPareclaPaga);
				this.contratosInadimplencia60.add(contrato);
			} else if (this.qtdDeparcelasVencidas >= 3) {
				this.inadimplencia90Soma = this.inadimplencia90Soma.add(valorUltimaPareclaPaga);
				this.contratosInadimplencia90.add(contrato);
			}

			this.volumeCarteira = this.volumeCarteira.add(valorUltimaPareclaPaga);

			if (this.prazoContrato <= 180) {
				this.somaContratos180 = this.somaContratos180.add(this.valorUltimaPareclaPaga);
			} else if (this.prazoContrato > 180) {
				this.somaContratos240 = this.somaContratos240.add(this.valorUltimaPareclaPaga);
			}
		}

		this.prazoMedio = prazoMedio.divide(BigDecimal.valueOf(totalContratosConsultar), MathContext.DECIMAL128);
		this.taxaMedia = CalcularMediaCcbSemIPCA(contratos);
		this.taxaMediaIPCA = CalcularMediaCcbComIPCA(contratos);
		this.ltvMedio = ltvMedio.divide(BigDecimal.valueOf(totalContratosConsultar), MathContext.DECIMAL128);

		this.ltvMedio = this.ltvMedio.multiply(BigDecimal.valueOf(100));
		this.ltvMax = this.ltvMax.multiply(BigDecimal.valueOf(100));
		this.ltvMin = this.ltvMin.multiply(BigDecimal.valueOf(100));

		this.prazoMedio = this.prazoMedio.divide(somaPeso, MathContext.DECIMAL128);
		this.prazoMedio = this.prazoMedio.setScale(2, BigDecimal.ROUND_HALF_UP);
		this.ltvMedio = this.ltvMedio.setScale(2, BigDecimal.ROUND_HALF_UP);
		this.ltvMax = this.ltvMax.setScale(2, BigDecimal.ROUND_HALF_UP);
		this.ltvMin = this.ltvMin.setScale(2, BigDecimal.ROUND_HALF_UP);

		this.inadimplencia30Porcentagem = this.inadimplencia30Soma.divide(this.volumeCarteira, MathContext.DECIMAL128);
		this.inadimplencia30Porcentagem = this.inadimplencia30Porcentagem.multiply(BigDecimal.valueOf(100));
		this.inadimplencia30Porcentagem = this.inadimplencia30Porcentagem.setScale(2, BigDecimal.ROUND_HALF_UP);

		this.inadimplencia60Porcentagem = this.inadimplencia60Soma.divide(this.volumeCarteira, MathContext.DECIMAL128);
		this.inadimplencia60Porcentagem = this.inadimplencia60Porcentagem.multiply(BigDecimal.valueOf(100));
		this.inadimplencia60Porcentagem = this.inadimplencia60Porcentagem.setScale(2, BigDecimal.ROUND_HALF_UP);

		this.inadimplencia90Porcentagem = this.inadimplencia90Soma.divide(this.volumeCarteira, MathContext.DECIMAL128);
		this.inadimplencia90Porcentagem = this.inadimplencia90Porcentagem.multiply(BigDecimal.valueOf(100));
		this.inadimplencia90Porcentagem = this.inadimplencia90Porcentagem.setScale(2, BigDecimal.ROUND_HALF_UP);

		this.porcentagem180 = this.somaContratos180.divide(this.volumeCarteira, MathContext.DECIMAL128);
		this.porcentagem180 = this.porcentagem180.multiply(BigDecimal.valueOf(100));
		this.porcentagem180 = this.porcentagem180.setScale(2, BigDecimal.ROUND_HALF_UP);

		this.porcentagem240 = this.somaContratos240.divide(this.volumeCarteira, MathContext.DECIMAL128);
		this.porcentagem240 = this.porcentagem240.multiply(BigDecimal.valueOf(100));
		this.porcentagem240 = this.porcentagem240.setScale(2, BigDecimal.ROUND_HALF_UP);

		prazoMax = prazoMax.add(BigDecimal.ONE);

		// createStackedGroupBarModel();
	}

	public StreamedContent geraRelatorioCRI(String relatorioTipo) throws IOException {
		XSSFWorkbook wb = new XSSFWorkbook(getClass().getResourceAsStream("/resource/TabelaVazia.xlsx"));
		int iLinha = 0;
		int numeroLista = 1;

		TimeZone zone = TimeZone.getDefault();
		Locale locale = new Locale("pt", "BR");
		Calendar dataHoje = Calendar.getInstance(zone, locale);
		dataHoje.set(Calendar.HOUR_OF_DAY, 0);
		dataHoje.set(Calendar.MINUTE, 0);
		dataHoje.set(Calendar.SECOND, 0);
		dataHoje.set(Calendar.MILLISECOND, 0);
		Date dataAtual = dataHoje.getTime();

		XSSFSheet sheet = wb.getSheetAt(0);

		XSSFRow linha = sheet.getRow(iLinha);
		if (linha == null) {
			sheet.createRow(iLinha);
			linha = sheet.getRow(iLinha);
		}

		gravaCelula(0, "Período", linha);
		gravaCelula(1, "Saldo Inicial", linha);
		gravaCelula(2, "Juros", linha);
		gravaCelula(3, "Amortização", linha);
		gravaCelula(4, "Valor Parcela", linha);
		gravaCelula(5, "Amortização Total", linha);

		BigDecimal saldoAnterior = BigDecimal.ZERO;
		BigDecimal saldoInicial = BigDecimal.ZERO;
		BigDecimal juros = BigDecimal.ZERO;
		BigDecimal amortizacao = BigDecimal.ZERO;
		BigDecimal valorParcela = BigDecimal.ZERO;
		BigDecimal amortizacaoTotal = BigDecimal.ZERO;

//		ContratoCobranca contrato = contratos.iterator().next();

		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();
//		ContratoCobranca contrato = contratoCobrancaDao.findByFilter("numeroContrato", "06445").get(0);

		int mesHoje = dataAtual.getMonth();
		int anoHoje = dataAtual.getYear();

		int mesOntem = mesHoje;
		mesOntem--;
		int anoOntem = anoHoje;

		if (mesOntem < 0) {
			mesOntem = 11;
			anoOntem--;
		}

		iLinha = 1;

		int i = 0;
		for (i = 0; i <= prazoMax.intValue(); i++) {
			juros = BigDecimal.ZERO;
			amortizacao = BigDecimal.ZERO;
			valorParcela = BigDecimal.ZERO;

			for (ContratoCobranca contrato : this.contratosGraficoFidc) {
				for (ContratoCobrancaDetalhes ccd : contrato.getListContratoCobrancaDetalhes()) {
					int mesVencimento = ccd.getDataVencimento().getMonth();
					int anoVencimetno = ccd.getDataVencimento().getYear();

					if (i == 0) {
						if (CommonsUtil.mesmoValor(mesVencimento, mesOntem)
								&& CommonsUtil.mesmoValor(anoVencimetno, anoOntem)) {
							saldoAnterior = ccd.getVlrSaldoParcela();
						}
					}

					if (CommonsUtil.mesmoValor(mesVencimento, mesHoje)
							&& CommonsUtil.mesmoValor(anoVencimetno, anoHoje)) {
						if (i == 0) {
							if (!CommonsUtil.semValor(ccd.getVlrSaldoInicial())) {
								saldoInicial = saldoInicial.add(ccd.getVlrSaldoInicial());
							} else {
								saldoInicial = saldoInicial.add(saldoAnterior);
							}
						}
						juros = juros.add(ccd.getVlrJurosParcela());
						amortizacao = amortizacao.add(ccd.getVlrAmortizacaoParcela());
						amortizacaoTotal = amortizacaoTotal.add(ccd.getVlrAmortizacaoParcela());
						valorParcela = valorParcela.add(ccd.getVlrAmortizacaoParcela().add(ccd.getVlrJurosParcela()));
					}
				}
			}

			if (i == 0) {
				linha = sheet.getRow(iLinha);
				if (linha == null) {
					sheet.createRow(iLinha);
					linha = sheet.getRow(iLinha);
				}
				gravaCelula(0, 0, linha);
				gravaCelula(1, saldoInicial, linha);
				gravaCelula(2, BigDecimal.ZERO, linha);
				gravaCelula(3, BigDecimal.ZERO, linha);
				gravaCelula(4, BigDecimal.ZERO, linha);
				gravaCelula(5, BigDecimal.ZERO, linha);

				iLinha++;
			}

			BigDecimal saldoInicial2 = saldoInicial.subtract(amortizacaoTotal);

			linha = sheet.getRow(iLinha);
			if (linha == null) {
				sheet.createRow(iLinha);
				linha = sheet.getRow(iLinha);
			}

			gravaCelula(0, numeroLista, linha);
			gravaCelula(1, saldoInicial2, linha);
			gravaCelula(2, juros, linha);
			gravaCelula(3, amortizacao, linha);
			gravaCelula(4, valorParcela, linha);
			gravaCelula(5, amortizacaoTotal, linha);

			iLinha++;

			numeroLista++;
			mesHoje++;
			if (mesHoje == 12) {
				mesHoje = 0;
				anoHoje++;
			}
		}

		ByteArrayOutputStream fileOut = new ByteArrayOutputStream();
		// escrever tudo o que foi feito no arquivo
		wb.write(fileOut);

		// fecha a escrita de dados nessa planilha
		wb.close();

		final GeradorRelatorioDownloadCliente gerador = new GeradorRelatorioDownloadCliente(
				FacesContext.getCurrentInstance());
		String nomeArquivoDownload = String.format("Galleria Bank - Relatorio " + relatorioTipo + " %s.xlsx", "");
		gerador.open(nomeArquivoDownload);
		gerador.feed(new ByteArrayInputStream(fileOut.toByteArray()));
		gerador.close();

		return null;
	}

	public StreamedContent geraRelatorioSecuritizadora() throws IOException {
		XSSFWorkbook wb = new XSSFWorkbook(getClass().getResourceAsStream("/resource/TabelaVazia.xlsx"));
		int iLinha = 0;
		int numeroLista = 1;

		TimeZone zone = TimeZone.getDefault();
		Locale locale = new Locale("pt", "BR");
		Calendar dataHoje = Calendar.getInstance(zone, locale);
		dataHoje.set(Calendar.HOUR_OF_DAY, 0);
		dataHoje.set(Calendar.MINUTE, 0);
		dataHoje.set(Calendar.SECOND, 0);
		dataHoje.set(Calendar.MILLISECOND, 0);
		Date dataAtual = dataHoje.getTime();

		XSSFSheet sheet = wb.getSheetAt(0);

		XSSFRow linha = sheet.getRow(iLinha);
		if (linha == null) {
			sheet.createRow(iLinha);
			linha = sheet.getRow(iLinha);
		}

		gravaCelula(0, "Período", linha);
		gravaCelula(1, "Saldo Inicial", linha);
		gravaCelula(2, "Juros", linha);
		gravaCelula(3, "Amortização", linha);
		gravaCelula(4, "Valor Parcela", linha);
		gravaCelula(5, "Amortização Total", linha);

		BigDecimal saldoAnterior = BigDecimal.ZERO;
		BigDecimal saldoInicial = BigDecimal.ZERO;
		BigDecimal juros = BigDecimal.ZERO;
		BigDecimal amortizacao = BigDecimal.ZERO;
		BigDecimal valorParcela = BigDecimal.ZERO;
		BigDecimal amortizacaoTotal = BigDecimal.ZERO;

//		ContratoCobranca contrato = contratos.iterator().next();

		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();
//		ContratoCobranca contrato = contratoCobrancaDao.findByFilter("numeroContrato", "06445").get(0);

		int mesHoje = dataAtual.getMonth();
		int anoHoje = dataAtual.getYear();

		int mesOntem = mesHoje;
		mesOntem--;
		int anoOntem = anoHoje;

		if (mesOntem < 0) {
			mesOntem = 11;
			anoOntem--;
		}

		iLinha = 1;

		int i = 0;
		for (i = 0; i <= prazoMax.intValue(); i++) {
			juros = BigDecimal.ZERO;
			amortizacao = BigDecimal.ZERO;
			valorParcela = BigDecimal.ZERO;

			for (ContratoCobranca contrato : this.contratosGraficoFidc) {
				for (ContratoCobrancaDetalhes ccd : contrato.getListContratoCobrancaDetalhes()) {
					int mesVencimento = ccd.getDataVencimento().getMonth();
					int anoVencimetno = ccd.getDataVencimento().getYear();

					if (i == 0) {
						if (CommonsUtil.mesmoValor(mesVencimento, mesOntem)
								&& CommonsUtil.mesmoValor(anoVencimetno, anoOntem)) {
							saldoAnterior = ccd.getVlrSaldoParcela();
						}
					}

					if (CommonsUtil.mesmoValor(mesVencimento, mesHoje)
							&& CommonsUtil.mesmoValor(anoVencimetno, anoHoje)) {
						if (i == 0) {
							if (!CommonsUtil.semValor(ccd.getVlrSaldoInicial())) {
								saldoInicial = saldoInicial.add(ccd.getVlrSaldoInicial());
							} else {
								saldoInicial = saldoInicial.add(saldoAnterior);
							}
						}
						juros = juros.add(ccd.getVlrJurosParcela());
						amortizacao = amortizacao.add(ccd.getVlrAmortizacaoParcela());
						amortizacaoTotal = amortizacaoTotal.add(ccd.getVlrAmortizacaoParcela());
						valorParcela = valorParcela.add(ccd.getVlrAmortizacaoParcela().add(ccd.getVlrJurosParcela()));
					}
				}
			}

			if (i == 0) {
				linha = sheet.getRow(iLinha);
				if (linha == null) {
					sheet.createRow(iLinha);
					linha = sheet.getRow(iLinha);
				}
				gravaCelula(0, 0, linha);
				gravaCelula(1, saldoInicial, linha);
				gravaCelula(2, BigDecimal.ZERO, linha);
				gravaCelula(3, BigDecimal.ZERO, linha);
				gravaCelula(4, BigDecimal.ZERO, linha);
				gravaCelula(5, BigDecimal.ZERO, linha);

				iLinha++;
			}

			BigDecimal saldoInicial2 = saldoInicial.subtract(amortizacaoTotal);

			linha = sheet.getRow(iLinha);
			if (linha == null) {
				sheet.createRow(iLinha);
				linha = sheet.getRow(iLinha);
			}

			gravaCelula(0, numeroLista, linha);
			gravaCelula(1, saldoInicial2, linha);
			gravaCelula(2, juros, linha);
			gravaCelula(3, amortizacao, linha);
			gravaCelula(4, valorParcela, linha);
			gravaCelula(5, amortizacaoTotal, linha);

			iLinha++;

			numeroLista++;
			mesHoje++;
			if (mesHoje == 12) {
				mesHoje = 0;
				anoHoje++;
			}
		}

		ByteArrayOutputStream fileOut = new ByteArrayOutputStream();
		// escrever tudo o que foi feito no arquivo
		wb.write(fileOut);

		// fecha a escrita de dados nessa planilha
		wb.close();

		final GeradorRelatorioDownloadCliente gerador = new GeradorRelatorioDownloadCliente(
				FacesContext.getCurrentInstance());
		String nomeArquivoDownload = String.format("Galleria Bank - Relatorio Securitizadora %s.xlsx", "");
		gerador.open(nomeArquivoDownload);
		gerador.feed(new ByteArrayInputStream(fileOut.toByteArray()));
		gerador.close();

		return null;
	}

	public StreamedContent geraRelatorioFIDC() throws IOException {
		XSSFWorkbook wb = new XSSFWorkbook(getClass().getResourceAsStream("/resource/TabelaVazia.xlsx"));
		int iLinha = 0;
		int numeroLista = 1;

		TimeZone zone = TimeZone.getDefault();
		Locale locale = new Locale("pt", "BR");
		Calendar dataHoje = Calendar.getInstance(zone, locale);
		dataHoje.set(Calendar.HOUR_OF_DAY, 0);
		dataHoje.set(Calendar.MINUTE, 0);
		dataHoje.set(Calendar.SECOND, 0);
		dataHoje.set(Calendar.MILLISECOND, 0);
		Date dataAtual = dataHoje.getTime();

		XSSFSheet sheet = wb.getSheetAt(0);

		XSSFRow linha = sheet.getRow(iLinha);
		if (linha == null) {
			sheet.createRow(iLinha);
			linha = sheet.getRow(iLinha);
		}

		gravaCelula(0, "Período", linha);
		gravaCelula(1, "Saldo Inicial", linha);
		gravaCelula(2, "Juros", linha);
		gravaCelula(3, "Amortização", linha);
		gravaCelula(4, "Valor Parcela", linha);
		gravaCelula(5, "Amortização Total", linha);

		BigDecimal saldoAnterior = BigDecimal.ZERO;
		BigDecimal saldoInicial = BigDecimal.ZERO;
		BigDecimal juros = BigDecimal.ZERO;
		BigDecimal amortizacao = BigDecimal.ZERO;
		BigDecimal valorParcela = BigDecimal.ZERO;
		BigDecimal amortizacaoTotal = BigDecimal.ZERO;

//			ContratoCobranca contrato = contratos.iterator().next();

		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();
//			ContratoCobranca contrato = contratoCobrancaDao.findByFilter("numeroContrato", "06445").get(0);

		int mesHoje = dataAtual.getMonth();
		int anoHoje = dataAtual.getYear();

		int mesOntem = mesHoje;
		mesOntem--;
		int anoOntem = anoHoje;

		if (mesOntem < 0) {
			mesOntem = 11;
			anoOntem--;
		}

		iLinha = 1;

		int i = 0;
		for (i = 0; i <= prazoMax.intValue(); i++) {
			juros = BigDecimal.ZERO;
			amortizacao = BigDecimal.ZERO;
			valorParcela = BigDecimal.ZERO;

			for (ContratoCobranca contrato : this.contratosGraficoFidc) {
				for (ContratoCobrancaDetalhes ccd : contrato.getListContratoCobrancaDetalhes()) {
					int mesVencimento = ccd.getDataVencimento().getMonth();
					int anoVencimetno = ccd.getDataVencimento().getYear();

					if (i == 0) {
						if (CommonsUtil.mesmoValor(mesVencimento, mesOntem)
								&& CommonsUtil.mesmoValor(anoVencimetno, anoOntem)) {
							saldoAnterior = ccd.getVlrSaldoParcela();
						}
					}

					if (CommonsUtil.mesmoValor(mesVencimento, mesHoje)
							&& CommonsUtil.mesmoValor(anoVencimetno, anoHoje)) {
						if (i == 0) {
							if (!CommonsUtil.semValor(ccd.getVlrSaldoInicial())) {
								saldoInicial = saldoInicial.add(ccd.getVlrSaldoInicial());
							} else {
								saldoInicial = saldoInicial.add(saldoAnterior);
							}
						}
						juros = juros.add(ccd.getVlrJurosParcela());
						amortizacao = amortizacao.add(ccd.getVlrAmortizacaoParcela());
						amortizacaoTotal = amortizacaoTotal.add(ccd.getVlrAmortizacaoParcela());
						valorParcela = valorParcela.add(ccd.getVlrAmortizacaoParcela().add(ccd.getVlrJurosParcela()));
					}
				}
			}

			if (i == 0) {
				linha = sheet.getRow(iLinha);
				if (linha == null) {
					sheet.createRow(iLinha);
					linha = sheet.getRow(iLinha);
				}
				gravaCelula(0, 0, linha);
				gravaCelula(1, saldoInicial, linha);
				gravaCelula(2, BigDecimal.ZERO, linha);
				gravaCelula(3, BigDecimal.ZERO, linha);
				gravaCelula(4, BigDecimal.ZERO, linha);
				gravaCelula(5, BigDecimal.ZERO, linha);

				iLinha++;
			}

			BigDecimal saldoInicial2 = saldoInicial.subtract(amortizacaoTotal);

			linha = sheet.getRow(iLinha);
			if (linha == null) {
				sheet.createRow(iLinha);
				linha = sheet.getRow(iLinha);
			}

			gravaCelula(0, numeroLista, linha);
			gravaCelula(1, saldoInicial2, linha);
			gravaCelula(2, juros, linha);
			gravaCelula(3, amortizacao, linha);
			gravaCelula(4, valorParcela, linha);
			gravaCelula(5, amortizacaoTotal, linha);

			iLinha++;

			numeroLista++;
			mesHoje++;
			if (mesHoje == 12) {
				mesHoje = 0;
				anoHoje++;
			}
		}

		ByteArrayOutputStream fileOut = new ByteArrayOutputStream();
		// escrever tudo o que foi feito no arquivo
		wb.write(fileOut);

		// fecha a escrita de dados nessa planilha
		wb.close();

		final GeradorRelatorioDownloadCliente gerador = new GeradorRelatorioDownloadCliente(
				FacesContext.getCurrentInstance());
		String nomeArquivoDownload = String.format("Galleria Bank - Relatorio FIDC %s.xlsx", "");
		gerador.open(nomeArquivoDownload);
		gerador.feed(new ByteArrayInputStream(fileOut.toByteArray()));
		gerador.close();

		return null;
	}

	public void createStackedGroupBarModel() {
		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();

		stackedGroupBarModel = new BarChartModel();
		ChartData data = new ChartData();
		BarChartDataSet barDataSet = new BarChartDataSet();

		barDataSet.setLabel("Carteira");
		barDataSet.setBackgroundColor("rgb(69, 138, 17)");
		barDataSet.setStack("Stack 0");
		List<Number> dataVal = new ArrayList<>();

		BarChartDataSet barDataSet2 = new BarChartDataSet();
		barDataSet2.setLabel("Amortização");
		barDataSet2.setBackgroundColor("rgb(63, 171, 236)");
		barDataSet2.setStack("Stack 0");
		List<Number> dataVal2 = new ArrayList<>();

		BarChartDataSet barDataSet3 = new BarChartDataSet();
		barDataSet3.setLabel("Parcela");
		barDataSet3.setBackgroundColor("rgb(167, 06, 206)");
		barDataSet3.setStack("Stack 1");
		List<Number> dataVal3 = new ArrayList<>();

		List<String> labels = new ArrayList<>();

		TimeZone zone = TimeZone.getDefault();
		Locale locale = new Locale("pt", "BR");
		Calendar dataHoje = Calendar.getInstance(zone, locale);
		Calendar dataVencimentoParcela = Calendar.getInstance(zone, locale);
		dataHoje.set(Calendar.HOUR_OF_DAY, 0);
		dataHoje.set(Calendar.MINUTE, 0);
		dataHoje.set(Calendar.SECOND, 0);
		dataHoje.set(Calendar.MILLISECOND, 0);
		Date dataAtual = dataHoje.getTime();

		BigDecimal totalAmortizado = BigDecimal.ZERO;
		BigDecimal volumeCarteiraGrafico = BigDecimal.ZERO;
		BigDecimal saldoAnterior = BigDecimal.ZERO;

		String numeroParcela = "";

		int mesHoje = dataAtual.getMonth();
		int anoHoje = dataAtual.getYear();

		int mesOntem = mesHoje;
		mesOntem--;
		int anoOntem = anoHoje;

		if (mesOntem < 0) {
			mesOntem = 11;
			anoOntem--;
		}

//		ContratoCobranca contrato = contratos.iterator().next();

		int i = 0;
		for (i = 0; i <= prazoMax.intValue(); i++) {
			// volumeCarteiraGrafico = BigDecimal.ZERO;
			// totalAmortizado = BigDecimal.ZERO;

			for (ContratoCobranca contrato : this.contratosGraficoFidc) {
				for (ContratoCobrancaDetalhes ccd : contrato.getListContratoCobrancaDetalhes()) {
					int mesVencimento = ccd.getDataVencimento().getMonth();
					int anoVencimetno = ccd.getDataVencimento().getYear();

					if (i == 0) {
						if (CommonsUtil.mesmoValor(mesVencimento, mesOntem)
								&& CommonsUtil.mesmoValor(anoVencimetno, anoOntem)) {
							if (null == ccd.getVlrSaldoInicial()) {
								saldoAnterior = ccd.getVlrSaldoParcela();
							}
						}
					}

					if (CommonsUtil.mesmoValor(mesVencimento, mesHoje)
							&& CommonsUtil.mesmoValor(anoVencimetno, anoHoje)) {
						numeroParcela = ccd.getNumeroParcela();
						if (i == 0) {
							if (!CommonsUtil.semValor(ccd.getVlrSaldoInicial())) {
								volumeCarteiraGrafico = volumeCarteiraGrafico.add(ccd.getVlrSaldoInicial());
							} else {
								volumeCarteiraGrafico = volumeCarteiraGrafico.add(saldoAnterior);
							}
						}
						totalAmortizado = totalAmortizado.add(ccd.getVlrAmortizacaoParcela());
					}
				}
			}

			if (i == 0) {
				dataVal.add(volumeCarteiraGrafico);
				dataVal2.add(BigDecimal.ZERO);
				labels.add(CommonsUtil.stringValue(0));
			}

			BigDecimal volumeCarteiraGrafico2 = volumeCarteiraGrafico.subtract(totalAmortizado);
			// BigDecimal volumeCarteiraGrafico2 = volumeCarteiraGrafico;
			int j = i;
			j++;
			dataVal.add(volumeCarteiraGrafico2);
			dataVal2.add(totalAmortizado);
			dataVal3.add(CommonsUtil.intValue(numeroParcela));
			labels.add(CommonsUtil.stringValue(j));

			mesHoje++;
			if (mesHoje == 12) {
				mesHoje = 0;
				anoHoje++;
			}
		}

		barDataSet.setData(dataVal);
		barDataSet2.setData(dataVal2);
		barDataSet3.setData(dataVal3);

		BarChartOptions options = new BarChartOptions();
		CartesianScales cScales = new CartesianScales();
		CartesianLinearAxes linearAxes = new CartesianLinearAxes();
		linearAxes.setStacked(true);
		linearAxes.setOffset(true);
		cScales.addXAxesData(linearAxes);
		cScales.addYAxesData(linearAxes);
		options.setScales(cScales);

		Title title = new Title();
		title.setDisplay(true);
		title.setText("Bar Chart - Stacked Group");
		options.setTitle(title);

		Tooltip tooltip = new Tooltip();
		tooltip.setMode("index");
		tooltip.setIntersect(false);
		options.setTooltip(tooltip);

		stackedGroupBarModel.setOptions(options);

		data.addChartDataSet(barDataSet);
		data.addChartDataSet(barDataSet2);
		data.setLabels(labels);

		stackedGroupBarModel.setData(data);
	}

	private BigDecimal CalcularMediaCcbSemIPCA(Collection<ContratoCobranca> lista) {
		BigDecimal soma = BigDecimal.ZERO;
		BigDecimal somaPeso = BigDecimal.ZERO;
		for (ContratoCobranca coco : lista) {
			if (coco.isCorrigidoIPCA()) {
				continue;
			}
			BigDecimal peso = BigDecimal.ZERO;
			BigDecimal valor = BigDecimal.ZERO;
			BigDecimal taxa = coco.getTxJurosParcelas();
			BigDecimal valorContrato = coco.getValorCCB();
			if (!CommonsUtil.semValor(valorContrato) && !CommonsUtil.semValor(taxa)) {
				peso = valorContrato.divide(BigDecimal.valueOf(100000), MathContext.DECIMAL128);
				somaPeso = somaPeso.add(peso);
				valor = taxa.multiply(peso);
				soma = soma.add(valor);
			}
		}
		if (!CommonsUtil.semValor(somaPeso)) {
			BigDecimal media = soma.divide(somaPeso, MathContext.DECIMAL128);
			media = media.setScale(2, BigDecimal.ROUND_HALF_UP);
			return media;
		} else {
			return BigDecimal.ZERO;
		}
	}

	private BigDecimal CalcularMediaCcbComIPCA(Collection<ContratoCobranca> lista) {
		BigDecimal soma = BigDecimal.ZERO;
		BigDecimal somaPeso = BigDecimal.ZERO;
		for (ContratoCobranca coco : lista) {
			if (!coco.isCorrigidoIPCA()) {
				continue;
			}
			BigDecimal peso = BigDecimal.ZERO;
			BigDecimal valor = BigDecimal.ZERO;
			BigDecimal taxa = coco.getTxJurosParcelas();
			BigDecimal valorContrato = coco.getValorCCB();
			if (!CommonsUtil.semValor(valorContrato) && !CommonsUtil.semValor(taxa)) {
				peso = valorContrato.divide(BigDecimal.valueOf(100000), MathContext.DECIMAL128);
				somaPeso = somaPeso.add(peso);
				valor = taxa.multiply(peso);
				soma = soma.add(valor);
			}
		}
		if (!CommonsUtil.semValor(somaPeso)) {
			BigDecimal media = soma.divide(somaPeso, MathContext.DECIMAL128);
			media = media.setScale(2, BigDecimal.ROUND_HALF_UP);
			return media;
		} else {
			return BigDecimal.ZERO;
		}
	}

	private BigDecimal CalcularPrazoMedio(Collection<ContratoCobranca> lista) {
		BigDecimal soma = BigDecimal.ZERO;
		BigDecimal somaPeso = BigDecimal.ZERO;
		for (ContratoCobranca coco : lista) {
			if (coco.isCorrigidoIPCA()) {
				continue;
			}
			BigDecimal peso = BigDecimal.ZERO;
			BigDecimal valor = BigDecimal.ZERO;
			BigDecimal taxa = coco.getTxJurosParcelas();
			BigDecimal valorContrato = coco.getValorCCB();
			if (!CommonsUtil.semValor(valorContrato) && !CommonsUtil.semValor(taxa)) {
				peso = valorContrato.divide(BigDecimal.valueOf(100000), MathContext.DECIMAL128);
				somaPeso = somaPeso.add(peso);
				valor = taxa.multiply(peso);
				soma = soma.add(valor);
			}
		}
		if (!CommonsUtil.semValor(somaPeso)) {
			BigDecimal media = soma.divide(somaPeso, MathContext.DECIMAL128);
			media = media.setScale(2, BigDecimal.ROUND_HALF_UP);
			return media;
		} else {
			return BigDecimal.ZERO;
		}
	}

	public void geraConsultaPreContratosBaixados() {
		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();
		this.contratosPendentes = new ArrayList<ContratoCobranca>();
		String numeroContrato = "";

		if (this.numContrato.length() == 4) {
			numeroContrato = "0" + this.numContrato;
		} else {
			numeroContrato = this.numContrato;
		}

		this.contratosPendentes = contratoCobrancaDao.consultaPreContratosBaixados(numeroContrato);
	}

	public void geraConsultaContratosReprovadosPorContrato() {
		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();
		this.contratosPendentes = new ArrayList<ContratoCobranca>();
		String numeroContrato = "";

		if (this.numContrato.length() == 4) {
			numeroContrato = "0" + this.numContrato;
		} else {
			numeroContrato = this.numContrato;
		}

		this.contratosPendentes = contratoCobrancaDao.consultaContratosReprovados(numeroContrato);
	}

	public void geraConsultaContratos() {
		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();
		this.contratos = new ArrayList<ContratoCobranca>();

		// Busca Contratos com Parcelas que vencem no dia atual
		String numeroContrato = "";

		if (this.numContrato.length() == 4) {
			numeroContrato = "0" + this.numContrato;
		} else {
			numeroContrato = this.numContrato;
		}

		clearRecebedor();
		clearRecebedor2();
		clearRecebedor3();
		clearRecebedor4();
		clearRecebedor5();
		clearRecebedor6();
		clearRecebedor7();
		clearRecebedor8();
		clearRecebedor9();
		clearRecebedor10();

		if (this.selectedPagador != null && this.selectedPagador.getId() > 0) {
			populateSelectedPagador();
		}
		/*
		 * if (this.selectedResponsavel != null && this.selectedResponsavel.getId() > 0)
		 * { populateSelectedResponsavel(); }
		 */

		if (this.dualListModelRecebedores.getTarget().size() > 0) {
			int countRecebedores = 0;
			for (PagadorRecebedor pessoa : this.dualListModelRecebedores.getTarget()) {
				countRecebedores = countRecebedores + 1;

				if (countRecebedores == 1) {
					this.selectedRecebedor = pessoa;
					populateSelectedRecebedor();
				}
				if (countRecebedores == 2) {
					this.selectedRecebedor2 = pessoa;
					populateSelectedRecebedor2();
				}
				if (countRecebedores == 3) {
					this.selectedRecebedor3 = pessoa;
					populateSelectedRecebedor3();
				}
				if (countRecebedores == 4) {
					this.selectedRecebedor4 = pessoa;
					populateSelectedRecebedor4();
				}
				if (countRecebedores == 5) {
					this.selectedRecebedor5 = pessoa;
					populateSelectedRecebedor5();
				}
				if (countRecebedores == 6) {
					this.selectedRecebedor6 = pessoa;
					populateSelectedRecebedor6();
				}
				if (countRecebedores == 7) {
					this.selectedRecebedor7 = pessoa;
					populateSelectedRecebedor7();
				}
				if (countRecebedores == 8) {
					this.selectedRecebedor8 = pessoa;
					populateSelectedRecebedor8();
				}
				if (countRecebedores == 9) {
					this.selectedRecebedor9 = pessoa;
					populateSelectedRecebedor9();
				}
				if (countRecebedores == 10) {
					this.selectedRecebedor10 = pessoa;
					populateSelectedRecebedor10();
				}
			}
		}

		this.contratos = contratoCobrancaDao.consultaContratosNaoGalleria(numeroContrato, this.getIdPagador(),
				this.getIdRecebedor(), this.getIdRecebedor2(), this.getIdRecebedor3(), this.getIdRecebedor4(),
				this.getIdRecebedor5(), this.getIdRecebedor6(), this.getIdRecebedor7(), this.getIdRecebedor8(),
				this.getIdRecebedor9(), this.getIdRecebedor10(), this.tituloPainel);
	}

	public void clearFiltersConsultaContratos() {
		clearPagador();
		// clearResponsavel();
		clearRecebedor();
		clearRecebedor2();
		clearRecebedor3();
		clearRecebedor4();
		clearRecebedor5();
		clearRecebedor6();
		clearRecebedor7();
		clearRecebedor8();
		clearRecebedor9();
		clearRecebedor10();

		this.listRecebedoresSeleciodados = new ArrayList<PagadorRecebedor>();

		this.dualListModelRecebedores = new DualListModel<PagadorRecebedor>(listRecebedores,
				listRecebedoresSeleciodados);
	}

	public String clearFieldsRelFinanceiro() {
		this.filtrarDataVencimento = "Original";
		this.relIsRelAtraso = false;
		this.relIsCompleto = false;
		TimeZone zone = TimeZone.getDefault();
		Locale locale = new Locale("pt", "BR");
		Calendar dataInicio = Calendar.getInstance(zone, locale);
		this.relDataContratoInicio = dataInicio.getTime();
		this.relDataContratoFim = dataInicio.getTime();
		this.relObjetoContratoCobranca = new ArrayList<RelatorioFinanceiroCobranca>();
		this.selectedContratoCobrancaDetalhes = new ContratoCobrancaDetalhes();

		clearPagador();
		clearRecebedor();
		clearRecebedor2();
		clearRecebedor3();
		clearRecebedor4();
		clearRecebedor5();
		clearRecebedor6();
		clearRecebedor7();
		clearRecebedor8();
		clearRecebedor9();
		clearRecebedor10();
		clearResponsavel();
		clearGrupoFavorecido();
		clearGrupoPagadores();

		this.grupoPagadores = false;
		this.tipoFiltros = true;

		this.numContrato = null;

		PagadorRecebedorDao pagadorRecebedorDao = new PagadorRecebedorDao();
		this.listPagadores = pagadorRecebedorDao.findAll();
		this.listRecebedores = pagadorRecebedorDao.findAll();

		ResponsavelDao responsavelDao = new ResponsavelDao();
		this.listResponsaveis = responsavelDao.findAll();

		GruposFavorecidosDao gruposFavorecidosDao = new GruposFavorecidosDao();
		this.listGrupoFavorecido = gruposFavorecidosDao.findAll();

		GruposPagadoresDao gruposPagadoresDao = new GruposPagadoresDao();
		this.listGrupoPagadores = gruposPagadoresDao.findAll();

		// this.listContratoCobrancaFavorecidos = new
		// ArrayList<ContratoCobrancaFavorecidos>();
		// this.listContratoCobrancaFavorecidos.add(new ContratoCobrancaFavorecidos());

		this.contratoGerado = false;

		this.exibeSomenteFavorecidosFiltrados = "Nenhum";

		this.grupoFavorecidos = true;

		return "/Atendimento/Cobranca/ContratoCobrancaFinanceiro.xhtml";
	}

	public String clearFieldsRelFinanceiroAtraso() {

		TimeZone zone = TimeZone.getDefault();
		Locale locale = new Locale("pt", "BR");
		Calendar dataInicio = Calendar.getInstance(zone, locale);
		this.relDataContratoInicio = dataInicio.getTime();
		this.relDataContratoFim = dataInicio.getTime();

		this.relObjetoContratoCobranca = new ArrayList<RelatorioFinanceiroCobranca>();
		this.selectedContratoCobrancaDetalhes = new ContratoCobrancaDetalhes();

		this.contratoGerado = false;

		return "/Atendimento/Cobranca/ContratoCobrancaFinanceiroAtraso.xhtml";
	}

	public String clearFieldsRelFinanceiroAtrasoFIDC() {

		TimeZone zone = TimeZone.getDefault();
		Locale locale = new Locale("pt", "BR");
		Calendar dataInicio = Calendar.getInstance(zone, locale);
		this.relDataContratoInicio = dataInicio.getTime();
		this.relDataContratoFim = dataInicio.getTime();

		this.relObjetoContratoCobranca = new ArrayList<RelatorioFinanceiroCobranca>();
		this.selectedContratoCobrancaDetalhes = new ContratoCobrancaDetalhes();
		relatorioFinanceiroCobrancaResumo = new RelatorioFinanceiroCobrancaResumo();

		this.contratoGerado = false;

		return "/Atendimento/Cobranca/ContratoCobrancaFinanceiroAtrasoFIDC.xhtml";
	}

	public String clearFieldsRelFinanceiroAtrasoCRI1() {

		TimeZone zone = TimeZone.getDefault();
		Locale locale = new Locale("pt", "BR");
		Calendar dataInicio = Calendar.getInstance(zone, locale);
		this.relDataContratoInicio = dataInicio.getTime();
		this.relDataContratoFim = dataInicio.getTime();

		this.relObjetoContratoCobranca = new ArrayList<RelatorioFinanceiroCobranca>();
		this.selectedContratoCobrancaDetalhes = new ContratoCobrancaDetalhes();
		relatorioFinanceiroCobrancaResumo = new RelatorioFinanceiroCobrancaResumo();

		this.contratoGerado = false;

		return "/Atendimento/Cobranca/ContratoCobrancaFinanceiroAtrasoCRI1.xhtml";
	}

	public String clearFieldsRelFinanceiroAtrasoCRI2() {

		TimeZone zone = TimeZone.getDefault();
		Locale locale = new Locale("pt", "BR");
		Calendar dataInicio = Calendar.getInstance(zone, locale);
		this.relDataContratoInicio = dataInicio.getTime();
		this.relDataContratoFim = dataInicio.getTime();

		this.relObjetoContratoCobranca = new ArrayList<RelatorioFinanceiroCobranca>();
		this.selectedContratoCobrancaDetalhes = new ContratoCobrancaDetalhes();
		relatorioFinanceiroCobrancaResumo = new RelatorioFinanceiroCobrancaResumo();

		this.contratoGerado = false;

		return "/Atendimento/Cobranca/ContratoCobrancaFinanceiroAtrasoCRI2.xhtml";
	}

	public String clearFieldsRelFinanceiroAtrasoCRI3() {

		TimeZone zone = TimeZone.getDefault();
		Locale locale = new Locale("pt", "BR");
		Calendar dataInicio = Calendar.getInstance(zone, locale);
		this.relDataContratoInicio = dataInicio.getTime();
		this.relDataContratoFim = dataInicio.getTime();

		this.relObjetoContratoCobranca = new ArrayList<RelatorioFinanceiroCobranca>();
		this.selectedContratoCobrancaDetalhes = new ContratoCobrancaDetalhes();
		relatorioFinanceiroCobrancaResumo = new RelatorioFinanceiroCobrancaResumo();

		this.contratoGerado = false;

		return "/Atendimento/Cobranca/ContratoCobrancaFinanceiroAtrasoCRI3.xhtml";
	}

	public String clearFieldsRelFinanceiroAtrasoCRI4() {
		TimeZone zone = TimeZone.getDefault();
		Locale locale = new Locale("pt", "BR");
		Calendar dataInicio = Calendar.getInstance(zone, locale);
		this.relDataContratoInicio = dataInicio.getTime();
		this.relDataContratoFim = dataInicio.getTime();

		this.relObjetoContratoCobranca = new ArrayList<RelatorioFinanceiroCobranca>();
		this.selectedContratoCobrancaDetalhes = new ContratoCobrancaDetalhes();
		relatorioFinanceiroCobrancaResumo = new RelatorioFinanceiroCobrancaResumo();

		this.contratoGerado = false;

		return "/Atendimento/Cobranca/ContratoCobrancaFinanceiroAtrasoCRI4.xhtml";
	}

	public String clearFieldsRelFinanceiroAtrasoCRI5() {
		TimeZone zone = TimeZone.getDefault();
		Locale locale = new Locale("pt", "BR");
		Calendar dataInicio = Calendar.getInstance(zone, locale);
		this.relDataContratoInicio = dataInicio.getTime();
		this.relDataContratoFim = dataInicio.getTime();

		this.relObjetoContratoCobranca = new ArrayList<RelatorioFinanceiroCobranca>();
		this.selectedContratoCobrancaDetalhes = new ContratoCobrancaDetalhes();
		relatorioFinanceiroCobrancaResumo = new RelatorioFinanceiroCobrancaResumo();

		this.contratoGerado = false;

		return "/Atendimento/Cobranca/ContratoCobrancaFinanceiroAtrasoCRI5.xhtml";
	}

	public String clearFieldsRelFinanceiroAtrasoSecuritizadora() {

		TimeZone zone = TimeZone.getDefault();
		Locale locale = new Locale("pt", "BR");
		Calendar dataInicio = Calendar.getInstance(zone, locale);
		this.relDataContratoInicio = dataInicio.getTime();
		this.relDataContratoFim = dataInicio.getTime();

		this.relObjetoContratoCobranca = new ArrayList<RelatorioFinanceiroCobranca>();
		this.selectedContratoCobrancaDetalhes = new ContratoCobrancaDetalhes();

		this.contratoGerado = false;

		return "/Atendimento/Cobranca/ContratoCobrancaFinanceiroAtrasoSecuritizadora.xhtml";
	}

	public String clearFieldsRelFinanceiroContabilidade() {
		TimeZone zone = TimeZone.getDefault();
		Locale locale = new Locale("pt", "BR");
		Calendar dataInicio = Calendar.getInstance(zone, locale);
		this.relDataContratoInicio = dataInicio.getTime();
		this.relDataContratoFim = dataInicio.getTime();
		this.relObjetoContratoCobranca = new ArrayList<RelatorioFinanceiroCobranca>();

		this.contratoGerado = false;

		return "/Atendimento/Cobranca/ContratoCobrancaFinanceiroContabilidade.xhtml";
	}

	public String clearFieldsRelFinanceiroDia(String tipoContratoCobrancaFinanceiroDia) {
		this.relDataContratoInicio = DateUtil.gerarDataHoje();
		this.filtroDataCorteRelatorioDia = DateUtil.gerarDataHoje();
		this.consideraDataCorteRelatorioDia = false;

		this.contratoGerado = false;
		this.contratoCobrancaFinanceiroDia = new ArrayList<>();

		this.relObjetoContratoCobranca = new ArrayList<RelatorioFinanceiroCobranca>();
		this.selectedContratoCobrancaDetalhes = new ContratoCobrancaDetalhes();

		this.selectedContratoCobrancaFinanceiroDia = new ArrayList<>();

		this.tipoContratoCobrancaFinanceiroDia = tipoContratoCobrancaFinanceiroDia;

		return "/Atendimento/Cobranca/ContratoCobrancaFinanceiroDia.xhtml";
	}

	public String clearFieldsRelFinanceiroDiaCompleto() {
		this.relDataContratoInicio = DateUtil.gerarDataHoje();
		this.contratoGerado = false;
		this.contratoCobrancaFinanceiroDia = new ArrayList<>();

		this.relObjetoContratoCobranca = new ArrayList<RelatorioFinanceiroCobranca>();
		this.selectedContratoCobrancaDetalhes = new ContratoCobrancaDetalhes();

		this.selectedContratoCobrancaFinanceiroDia = new ArrayList<>();

		this.tipoContratoCobrancaFinanceiroDia = tipoContratoCobrancaFinanceiroDia;

		return "/Atendimento/Cobranca/ContratoCobrancaFinanceiroDiaCompleto.xhtml";
	}

	public String clearFieldsRelFinanceiroDiaEspelhamento(String tipoContratoCobrancaFinanceiroDia) {
		this.relDataContratoInicio = DateUtil.gerarDataHoje();
		this.contratoGerado = false;
		this.contratoCobrancaFinanceiroDia = new ArrayList<>();

		this.relObjetoContratoCobranca = new ArrayList<RelatorioFinanceiroCobranca>();
		this.selectedContratoCobrancaDetalhes = new ContratoCobrancaDetalhes();

		this.selectedContratoCobrancaFinanceiroDia = new ArrayList<>();

		this.tipoContratoCobrancaFinanceiroDia = tipoContratoCobrancaFinanceiroDia;

		return "/Atendimento/Cobranca/ContratoCobrancaFinanceiroDiaEspelhamento.xhtml";
	}

	public String clearFieldsRelFinanceiroFIDCMigracao() {
		this.relDataContratoInicio = DateUtil.gerarDataHoje();
		this.contratoGerado = false;
		this.contratoCobrancaFinanceiroDia = new ArrayList<>();

		this.relObjetoContratoCobranca = new ArrayList<RelatorioFinanceiroCobranca>();
		this.selectedContratoCobrancaDetalhes = new ContratoCobrancaDetalhes();

		this.selectedContratoCobrancaFinanceiroDia = new ArrayList<>();

		return "/Atendimento/Cobranca/ContratoCobrancaFinanceiroFIDCMigracao.xhtml";
	}

	public void selectedRecebedores() {

	}

	public void selecaoGrupoFavorecidos() {
		if (this.grupoFavorecidos) {
			clearRecebedor();
			clearRecebedor2();
			clearRecebedor3();
			clearRecebedor4();
			clearRecebedor5();
			clearRecebedor6();
			clearRecebedor7();
			clearRecebedor8();
			clearRecebedor9();
			clearRecebedor10();
		} else {
			clearGrupoFavorecido();
		}
	}

	public void selecaoGrupoPagadores() {
		if (this.grupoPagadores) {
			clearPagador();
			this.grupoPagadores = true;
		} else {
			clearGrupoPagadores();
			this.grupoPagadores = false;
		}
	}

	public void clearGrupoPagadores() {
		this.idGrupoPagador = 0;
		this.nomeGrupoPagador = null;
		this.selectedGrupoPagadores = new GruposPagadores();
	}

	public final void populateSelectedGrupoPagador() {
		this.idGrupoPagador = this.selectedGrupoPagadores.getId();
		this.nomeGrupoPagador = this.selectedGrupoPagadores.getNomeGrupo();
	}

	public void habilitaFiltros() {
		if (this.tipoFiltros) {
			this.numContrato = null;

			TimeZone zone = TimeZone.getDefault();
			Locale locale = new Locale("pt", "BR");
			Calendar dataInicio = Calendar.getInstance(zone, locale);
			this.relDataContratoInicio = dataInicio.getTime();
			this.relDataContratoFim = dataInicio.getTime();

			this.empresa = "TODAS";
		} else {
			clearPagador();
			clearRecebedor();
			clearRecebedor2();
			clearRecebedor3();
			clearRecebedor4();
			clearRecebedor5();
			clearRecebedor6();
			clearRecebedor7();
			clearRecebedor8();
			clearRecebedor9();
			clearRecebedor10();
			clearResponsavel();
			clearGrupoFavorecido();

			this.relDataContratoInicio = null;
			this.relDataContratoFim = null;

			this.empresa = "TODAS";
		}
	}

	public void habilitaFiltrosBaixados() {
		if (this.filtroRelBaixado.equals("Contrato")) {
			this.relDataContratoInicio = null;
			this.relDataContratoFim = null;
		} else {
			TimeZone zone = TimeZone.getDefault();
			Locale locale = new Locale("pt", "BR");
			Calendar dataInicio = Calendar.getInstance(zone, locale);
			this.relDataContratoInicio = dataInicio.getTime();
			this.relDataContratoFim = dataInicio.getTime();
			this.numContrato = null;
		}
	}

	public void geraRelFinanceiroBaixado() {
		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();

		if (this.filtroRelBaixado.equals("Contrato")) {
			if (this.numContrato.length() == 4) {
				this.numContrato = "0" + this.numContrato;
			} else {
				this.numContrato = this.numContrato;
			}
		}

		if (this.grupoFavorecidos) {
			converteGrupoFavorecidos();
		}

		if (this.relParcial.equals("Baixa Parcial")) {
			if (this.filtroRelBaixado.equals("Contrato")) {
				this.relObjetoContratoCobranca = contratoCobrancaDao.relatorioFinanceiroBaixadoParcialContrato(
						this.numContrato, this.getIdPagador(), this.getIdRecebedor(), this.getIdRecebedor2(),
						this.getIdRecebedor3(), this.getIdRecebedor4(), this.getIdRecebedor5(), this.getIdRecebedor6(),
						this.getIdRecebedor7(), this.getIdRecebedor8(), this.getIdRecebedor9(), this.getIdRecebedor10(),
						this.getIdResponsavel());
			} else {
				TimeZone zone = TimeZone.getDefault();
				Locale locale = new Locale("pt", "BR");

				Calendar cFim = Calendar.getInstance(zone, locale);
				cFim.setTime(this.relDataContratoFim);
				cFim.add(Calendar.DATE, 1);
				this.relDataContratoFim = cFim.getTime();

				/*
				 * this.relObjetoContratoCobranca =
				 * contratoCobrancaDao.relatorioFinanceiroBaixadoParcialPeriodo(
				 * this.relDataContratoInicio, this.relDataContratoFim, this.getIdPagador(),
				 * this.getIdRecebedor(), this.getIdRecebedor2(), this.getIdRecebedor3(),
				 * this.getIdRecebedor4(), this.getIdRecebedor5(), this.getIdRecebedor6(),
				 * this.getIdRecebedor7(), this.getIdRecebedor8(), this.getIdRecebedor9(),
				 * this.getIdRecebedor10(), this.getIdResponsavel(),
				 * this.filtrarDataVencimento);
				 */
				this.relObjetoContratoCobranca = contratoCobrancaDao.relatorioFinanceiroBaixadoPeriodoTotal(
						this.relDataContratoInicio, this.relDataContratoFim, this.getIdPagador(), this.getIdRecebedor(),
						this.getIdRecebedor2(), this.getIdRecebedor3(), this.getIdRecebedor4(), this.getIdRecebedor5(),
						this.getIdRecebedor6(), this.getIdRecebedor7(), this.getIdRecebedor8(), this.getIdRecebedor9(),
						this.getIdRecebedor10(), this.getIdResponsavel(), this.filtrarDataVencimento, "Baixa Parcial");
			}
		}

		if (this.relParcial.equals("Baixa Total")) {
			if (this.filtroRelBaixado.equals("Contrato")) {
				this.relObjetoContratoCobranca = contratoCobrancaDao.relatorioFinanceiroBaixadoContrato(
						this.numContrato, this.getIdPagador(), this.getIdRecebedor(), this.getIdRecebedor2(),
						this.getIdRecebedor3(), this.getIdRecebedor4(), this.getIdRecebedor5(), this.getIdRecebedor6(),
						this.getIdRecebedor7(), this.getIdRecebedor8(), this.getIdRecebedor9(), this.getIdRecebedor10(),
						this.getIdResponsavel());
			} else {
				/*
				 * this.relObjetoContratoCobranca =
				 * contratoCobrancaDao.relatorioFinanceiroBaixadoPeriodo(
				 * this.relDataContratoInicio, this.relDataContratoFim, this.getIdPagador(),
				 * this.getIdRecebedor(), this.getIdRecebedor2(), this.getIdRecebedor3(),
				 * this.getIdRecebedor4(), this.getIdRecebedor5(), this.getIdRecebedor6(),
				 * this.getIdRecebedor7(), this.getIdRecebedor8(), this.getIdRecebedor9(),
				 * this.getIdRecebedor10(), this.getIdResponsavel(),
				 * this.filtrarDataVencimento);
				 */

				this.relObjetoContratoCobranca = contratoCobrancaDao.relatorioFinanceiroBaixadoPeriodoTotal(
						this.relDataContratoInicio, this.relDataContratoFim, this.getIdPagador(), this.getIdRecebedor(),
						this.getIdRecebedor2(), this.getIdRecebedor3(), this.getIdRecebedor4(), this.getIdRecebedor5(),
						this.getIdRecebedor6(), this.getIdRecebedor7(), this.getIdRecebedor8(), this.getIdRecebedor9(),
						this.getIdRecebedor10(), this.getIdResponsavel(), this.filtrarDataVencimento, "Baixa Total");
			}
		}

		if (this.relParcial.equals("Baixa Total e Parcial")) {
			if (this.filtroRelBaixado.equals("Contrato")) {
				this.relObjetoContratoCobranca = contratoCobrancaDao.relatorioFinanceiroBaixadoContratoTotal(
						this.numContrato, this.getIdPagador(), this.getIdRecebedor(), this.getIdRecebedor2(),
						this.getIdRecebedor3(), this.getIdRecebedor4(), this.getIdRecebedor5(), this.getIdRecebedor6(),
						this.getIdRecebedor7(), this.getIdRecebedor8(), this.getIdRecebedor9(), this.getIdRecebedor10(),
						this.getIdResponsavel());
			} else {
				this.relObjetoContratoCobranca = contratoCobrancaDao.relatorioFinanceiroBaixadoPeriodoTotal(
						this.relDataContratoInicio, this.relDataContratoFim, this.getIdPagador(), this.getIdRecebedor(),
						this.getIdRecebedor2(), this.getIdRecebedor3(), this.getIdRecebedor4(), this.getIdRecebedor5(),
						this.getIdRecebedor6(), this.getIdRecebedor7(), this.getIdRecebedor8(), this.getIdRecebedor9(),
						this.getIdRecebedor10(), this.getIdResponsavel(), this.filtrarDataVencimento,
						"Baixa Total e Parcial");
			}
		}

		this.relSelectedObjetoContratoCobranca = new RelatorioFinanceiroCobranca();

		if (this.relObjetoContratoCobranca.size() == 0) {
			this.relObjetoContratoCobranca = new ArrayList<RelatorioFinanceiroCobranca>();
		}

		this.contratoGerado = false;
	}

	private void geraResumo() {

		if (CommonsUtil.semValor(relObjetoContratoCobranca)) {
			relatorioFinanceiroCobrancaResumo = new RelatorioFinanceiroCobrancaResumo();
		}

		BigInteger qtdContratos = CommonsUtil.bigIntegerValue(this.relObjetoContratoCobranca.stream()
				.map(RelatorioFinanceiroCobranca::getNumeroContrato).distinct().collect(Collectors.toList()).size());

		BigDecimal valorParcela = this.relObjetoContratoCobranca.stream()
				.map(x -> CommonsUtil.bigDecimalValue(x.getVlrParcela())).reduce(BigDecimal.ZERO, BigDecimal::add);

		BigDecimal vlrTotalPago = this.relObjetoContratoCobranca.stream()
				.map(x -> CommonsUtil.bigDecimalValue(x.getVlrTotalPago())).reduce(BigDecimal.ZERO, BigDecimal::add);

//		Pair<Double, Double> result = this.relObjetoContratoCobranca
//                .stream()
//                .map(rel -> Pair.of(rel.getValor(), rel.getVlrTotalPago()))
//                .reduce(Pair.of(0d, 0d), (pair1, pair2) -> Pair.of(pair1.getFirst() + pair2.getFirst(), pair1.getSecond() + pair2.getSecond()));
//		
		relatorioFinanceiroCobrancaResumo = new RelatorioFinanceiroCobrancaResumo(qtdContratos, valorParcela,
				vlrTotalPago);
	}

	public void geraRelFinanceiroBaixadoFIDC() {
		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();

		if (this.financeiroGalleria) {
			this.relObjetoContratoCobranca = contratoCobrancaDao
					.relatorioFinanceiroBaixadoPeriodoTotalFIDC2(this.relDataContratoInicio, this.relDataContratoFim);
		} else {
			this.relObjetoContratoCobranca = contratoCobrancaDao
					.relatorioFinanceiroBaixadoPeriodoTotalFIDC(this.relDataContratoInicio, this.relDataContratoFim);
		}

		this.relSelectedObjetoContratoCobranca = new RelatorioFinanceiroCobranca();

		if (this.relObjetoContratoCobranca.size() == 0) {
			this.relObjetoContratoCobranca = new ArrayList<RelatorioFinanceiroCobranca>();
		}

		geraResumo();

		this.contratoGerado = false;
	}

	public void geraRelFinanceiroBaixadoCRI1() {
		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();

		if (this.financeiroGalleria) {
			this.relObjetoContratoCobranca = contratoCobrancaDao
					.relatorioFinanceiroBaixadoPeriodoTotalCRI12(this.relDataContratoInicio, this.relDataContratoFim);
		} else {
			this.relObjetoContratoCobranca = contratoCobrancaDao
					.relatorioFinanceiroBaixadoPeriodoTotalCRI1(this.relDataContratoInicio, this.relDataContratoFim);
		}

		this.relSelectedObjetoContratoCobranca = new RelatorioFinanceiroCobranca();

		if (this.relObjetoContratoCobranca.size() == 0) {
			this.relObjetoContratoCobranca = new ArrayList<RelatorioFinanceiroCobranca>();
		}

		geraResumo();

		this.contratoGerado = false;
	}

	public void geraRelFinanceiroBaixadoCRI2() {
		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();

		if (this.financeiroGalleria) {
			this.relObjetoContratoCobranca = contratoCobrancaDao
					.relatorioFinanceiroBaixadoPeriodoTotalCRI22(this.relDataContratoInicio, this.relDataContratoFim);
		} else {
			this.relObjetoContratoCobranca = contratoCobrancaDao
					.relatorioFinanceiroBaixadoPeriodoTotalCRI2(this.relDataContratoInicio, this.relDataContratoFim);
		}

		this.relSelectedObjetoContratoCobranca = new RelatorioFinanceiroCobranca();

		if (this.relObjetoContratoCobranca.size() == 0) {
			this.relObjetoContratoCobranca = new ArrayList<RelatorioFinanceiroCobranca>();
		}

		geraResumo();

		this.contratoGerado = false;
	}

	public void geraRelFinanceiroBaixadoCRI3() {
		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();

		if (this.financeiroGalleria) {
			this.relObjetoContratoCobranca = contratoCobrancaDao
					.relatorioFinanceiroBaixadoPeriodoTotalCRI33(this.relDataContratoInicio, this.relDataContratoFim);
		} else {
			this.relObjetoContratoCobranca = contratoCobrancaDao
					.relatorioFinanceiroBaixadoPeriodoTotalCRI3(this.relDataContratoInicio, this.relDataContratoFim);
		}

		this.relSelectedObjetoContratoCobranca = new RelatorioFinanceiroCobranca();

		if (this.relObjetoContratoCobranca.size() == 0) {
			this.relObjetoContratoCobranca = new ArrayList<RelatorioFinanceiroCobranca>();
		}

		geraResumo();

		this.contratoGerado = false;
	}

	public void geraRelFinanceiroBaixadoCRI4() {
		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();

		if (this.financeiroGalleria) {
			this.relObjetoContratoCobranca = contratoCobrancaDao
					.relatorioFinanceiroBaixadoPeriodoTotalCRI44(this.relDataContratoInicio, this.relDataContratoFim);
		} else {
			this.relObjetoContratoCobranca = contratoCobrancaDao
					.relatorioFinanceiroBaixadoPeriodoTotalCRI4(this.relDataContratoInicio, this.relDataContratoFim);
		}

		this.relSelectedObjetoContratoCobranca = new RelatorioFinanceiroCobranca();

		if (this.relObjetoContratoCobranca.size() == 0) {
			this.relObjetoContratoCobranca = new ArrayList<RelatorioFinanceiroCobranca>();
		}

		geraResumo();

		this.contratoGerado = false;
	}

	public void geraRelFinanceiroBaixadoCRI5() {
		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();

		if (this.financeiroGalleria) {
			this.relObjetoContratoCobranca = contratoCobrancaDao
					.relatorioFinanceiroBaixadoPeriodoTotalCRI55(this.relDataContratoInicio, this.relDataContratoFim);
		} else {
			this.relObjetoContratoCobranca = contratoCobrancaDao
					.relatorioFinanceiroBaixadoPeriodoTotalCRI5(this.relDataContratoInicio, this.relDataContratoFim);
		}

		this.relSelectedObjetoContratoCobranca = new RelatorioFinanceiroCobranca();

		if (this.relObjetoContratoCobranca.size() == 0) {
			this.relObjetoContratoCobranca = new ArrayList<RelatorioFinanceiroCobranca>();
		}

		geraResumo();

		this.contratoGerado = false;
	}

	public void geraRelFinanceiroRecebedor() {
		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();

		if (this.filtroRelBaixado.equals("Contrato")) {
			String numContrato = "";
			/* Se filtro somente por numero do contrato */
			if (this.numContrato.length() == 4) {
				numContrato = "0" + this.numContrato;
			} else {
				numContrato = this.numContrato;
			}

			this.relObjetoContratoCobranca = contratoCobrancaDao.relatorioFinanceiroRecebedorContrato(numContrato,
					this.getIdRecebedor());
		} else {
			TimeZone zone = TimeZone.getDefault();
			Locale locale = new Locale("pt", "BR");

			Calendar cInicio = Calendar.getInstance(zone, locale);
			cInicio.setTime(this.relDataContratoInicio);
			cInicio.add(Calendar.DATE, -1);
			this.relDataContratoInicio = cInicio.getTime();

			Calendar cFim = Calendar.getInstance(zone, locale);
			cFim.setTime(this.relDataContratoFim);
			cFim.add(Calendar.DATE, 1);
			this.relDataContratoFim = cFim.getTime();

			this.relObjetoContratoCobranca = contratoCobrancaDao.relatorioFinanceiroRecebedorPeriodo(
					this.relDataContratoInicio, this.relDataContratoFim, this.getIdRecebedor());
		}

		this.relSelectedObjetoContratoCobranca = new RelatorioFinanceiroCobranca();

		if (this.relObjetoContratoCobranca.size() == 0) {
			this.relObjetoContratoCobranca = new ArrayList<RelatorioFinanceiroCobranca>();
		}

		this.contratoGerado = false;
	}

	public void geraRelAtrasoRecebedor() {
		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();

		TimeZone zone = TimeZone.getDefault();
		Locale locale = new Locale("pt", "BR");

		Calendar cInicio = Calendar.getInstance(zone, locale);
		cInicio.setTime(this.relDataContratoInicio);
		cInicio.add(Calendar.DATE, -1);
		this.relDataContratoInicio = cInicio.getTime();

		Calendar cFim = Calendar.getInstance(zone, locale);
		cFim.setTime(this.relDataContratoFim);
		cFim.add(Calendar.DATE, 1);
		this.relDataContratoFim = cFim.getTime();

		this.relObjetoContratoCobranca = contratoCobrancaDao
				.relatorioFinanceiroRecebedorAtraso(this.relDataContratoInicio, this.relDataContratoFim);

		this.relSelectedObjetoContratoCobranca = new RelatorioFinanceiroCobranca();

		if (this.relObjetoContratoCobranca.size() == 0) {
			this.relObjetoContratoCobranca = new ArrayList<RelatorioFinanceiroCobranca>();
		}

		this.contratoGerado = false;
	}

	public String geraConsultaContratosPendentes() {
		if (!SiscoatConstants.DEV && !CommonsUtil.sistemaWindows()) {
			this.baixarPreContratoAutomatico();
			this.enviaZapLeadEmTratamento();
			enviaZapCartorio();
		}

		// if (this.preContratoCustom) {

		// crmmb = new CRMMB();
		// crmmb.geraConsultaContratosTodos();

		// return "/Atendimento/Cobranca/ContratoCobrancaPreCustomizadoConsultar.xhtml";
		// } else {
		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();
		this.contratosPendentes = new ArrayList<ContratoCobranca>();

		if (loginBean != null) {
			User usuarioLogado = new User();
			UserDao u = new UserDao();
			usuarioLogado = u.findByFilter("login", loginBean.getUsername()).get(0);

			if (usuarioLogado != null) {
				if (usuarioLogado.isAdministrador()) {
					this.contratosPendentes = contratoCobrancaDao.consultaContratosPendentes(null,
							tipoParametroConsultaContrato, parametroConsultaContrato);
				} else {
					if (usuarioLogado.getListResponsavel().size() > 0) {
						this.contratosPendentes = contratoCobrancaDao.consultaContratosPendentesResponsaveis(
								usuarioLogado.getCodigoResponsavel(), usuarioLogado.getListResponsavel());
					} else {
						this.contratosPendentes = contratoCobrancaDao.consultaContratosPendentes(
								usuarioLogado.getCodigoResponsavel(), tipoParametroConsultaContrato,
								parametroConsultaContrato);
					}
				}
			}
		}

		this.contratosPendentes = populaStatus(this.contratosPendentes);

		return "/Atendimento/Cobranca/ContratoCobrancaConsultarPendentes.xhtml";
		// }
	}

	public void clearFieldsRelatorioComercial() {
		this.dataInicio = null;
		this.dataFim = null;
		this.selectedResponsavel = new Responsavel();
		ResponsavelDao rDao = new ResponsavelDao();
		FacesContext context = FacesContext.getCurrentInstance();
		ResponsavelDao responsavelDao = new ResponsavelDao();

		this.updateResponsavel = ":form:relatorioComercial ";

		if (loginBean != null) {
			User usuarioLogado = new User();
			UserDao u = new UserDao();
			usuarioLogado = u.findByFilter("login", loginBean.getUsername()).get(0);

			if (usuarioLogado != null) {
				if (usuarioLogado.isAdministrador()) {
					this.listResponsavel = rDao.findAll();
				} else {
					if (usuarioLogado.getListResponsavel().size() > 0) {
						this.listResponsavel = usuarioLogado.getListResponsavel();
					} else {
						context.addMessage(null,
								new FacesMessage(FacesMessage.SEVERITY_INFO, "Lista de Responsaveis Inválida", ""));
					}

					if (!CommonsUtil.semValor(usuarioLogado.getCodigoResponsavel())) {
						if (responsavelDao.findByFilter("codigo", usuarioLogado.getCodigoResponsavel()).size() >= 0) {
							if (!this.listResponsavel.contains(responsavelDao
									.findByFilter("codigo", usuarioLogado.getCodigoResponsavel()).get(0))) {
								this.listResponsavel.add(responsavelDao
										.findByFilter("codigo", usuarioLogado.getCodigoResponsavel()).get(0));
							}
						}
					}
				}
			}
		}
		this.listaContratos = new ArrayList<ContratoCobranca>();
	}

	public StreamedContent geraRelatorioComercial() throws IOException {
		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();
		this.listaContratos = contratoCobrancaDao.getDashboardContratosParaRelatorio(this.dataInicio, this.dataFim,
				this.selectedResponsavel.getCodigo(), false);

		XSSFWorkbook wb = new XSSFWorkbook(getClass().getResourceAsStream("/resource/TabelaVazia.xlsx"));
		int iLinha = 0;
		int numeroLista = this.listaContratos.size();

		XSSFSheet sheet = wb.getSheetAt(0);

		XSSFRow linha = sheet.getRow(iLinha);
		if (linha == null) {
			sheet.createRow(iLinha);
			linha = sheet.getRow(iLinha);
		}

		gravaCelula(0, "", linha);
		gravaCelula(1, "OP.", linha);
		gravaCelula(2, "Data", linha);
		gravaCelula(3, "Indicador", linha);
		gravaCelula(4, "Cliente", linha);
		gravaCelula(5, "Gerente", linha);

		iLinha = 1;

		for (ContratoCobranca contrato : this.listaContratos) {

			linha = sheet.getRow(iLinha);
			if (linha == null) {
				sheet.createRow(iLinha);
				linha = sheet.getRow(iLinha);
			}

			gravaCelula(0, numeroLista, linha);
			gravaCelula(1, contrato.getNumeroContrato(), linha);
			gravaCelula(2, contrato.getDataContrato(), linha);
			gravaCelula(3, contrato.getResponsavel().getNome(), linha);
			gravaCelula(4, contrato.getPagador().getNome(), linha);
			gravaCelula(5, contrato.getResponsavel().getDonoResponsavel().getNome(), linha);

			iLinha++;
			numeroLista--;
		}

		ByteArrayOutputStream fileOut = new ByteArrayOutputStream();
		// escrever tudo o que foi feito no arquivo
		wb.write(fileOut);

		// fecha a escrita de dados nessa planilha
		wb.close();

		final GeradorRelatorioDownloadCliente gerador = new GeradorRelatorioDownloadCliente(
				FacesContext.getCurrentInstance());

		gerador.open(
				String.format("Galleria Bank - Relatorio Comercial " + selectedResponsavel.getNome() + " %s.xlsx", ""));
		gerador.feed(new ByteArrayInputStream(fileOut.toByteArray()));
		gerador.close();

		return null;
	}

	public StreamedContent geraRelatorioComercialAdministrador() throws IOException {

		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();

		XSSFWorkbook wb = new XSSFWorkbook(getClass().getResourceAsStream("/resource/TabelaVazia.xlsx"));
		int iLinha = 0;

		XSSFSheet sheet = wb.getSheetAt(0);

		XSSFRow linha = sheet.getRow(iLinha);
		if (linha == null) {
			sheet.createRow(iLinha);
			linha = sheet.getRow(iLinha);
		}

		gravaCelula(0, "", linha);
		gravaCelula(1, "OP.", linha);
		gravaCelula(2, "Data", linha);
		gravaCelula(3, "Indicador", linha);
		gravaCelula(4, "Cliente", linha);
		gravaCelula(5, "Gerente", linha);

		iLinha = 1;

		for (Responsavel resp : listResponsavel) {

			this.listaContratos = contratoCobrancaDao.getDashboardContratosParaRelatorio(this.dataInicio, this.dataFim,
					resp.getCodigo(), true);
			int numeroLista = this.listaContratos.size();
			for (ContratoCobranca contrato : this.listaContratos) {
				linha = sheet.getRow(iLinha);
				if (linha == null) {
					sheet.createRow(iLinha);
					linha = sheet.getRow(iLinha);
				}

				gravaCelula(0, numeroLista, linha);
				gravaCelula(1, contrato.getNumeroContrato(), linha);
				gravaCelula(2, contrato.getDataContrato(), linha);
				gravaCelula(3, contrato.getResponsavel().getNome(), linha);
				gravaCelula(4, contrato.getPagador().getNome(), linha);
				gravaCelula(5, contrato.getResponsavel().getDonoResponsavel().getNome(), linha);

				iLinha++;
				numeroLista--;
			}
		}

		ByteArrayOutputStream fileOut = new ByteArrayOutputStream();
		// escrever tudo o que foi feito no arquivo
		wb.write(fileOut);

		// fecha a escrita de dados nessa planilha
		wb.close();

		final GeradorRelatorioDownloadCliente gerador = new GeradorRelatorioDownloadCliente(
				FacesContext.getCurrentInstance());

		gerador.open(String.format("Galleria Bank - Relatorio Responsaveis %s.xlsx", ""));
		gerador.feed(new ByteArrayInputStream(fileOut.toByteArray()));
		gerador.close();

		return null;
	}

	private void gravaCelula(Integer celula, BigDecimal value, XSSFRow linha) {
		if (linha.getCell(celula) == null)
			linha.createCell(celula);
		linha.getCell(celula).setCellValue(value.doubleValue());
	}

	private void gravaCelula(Integer celula, BigDecimal value, XSSFRow linha, CellStyle cell_style) {
		if (linha.getCell(celula) == null)
			linha.createCell(celula);
		linha.getCell(celula).setCellValue(value.doubleValue());
		linha.getCell(celula).setCellType(CellType.NUMERIC);
		linha.getCell(celula).setCellStyle(cell_style);
	}

	private void gravaCelula(Integer celula, Double value, XSSFRow linha, CellStyle cell_style) {
		if (linha.getCell(celula) == null)
			linha.createCell(celula);
		if (!CommonsUtil.semValor(value)) {
			linha.getCell(celula).setCellValue(value);
		} else {
			linha.getCell(celula).setCellValue(0);
		}
		linha.getCell(celula).setCellType(CellType.NUMERIC);
		linha.getCell(celula).setCellStyle(cell_style);

	}

	private void gravaCelula(Integer celula, String value, XSSFRow linha) {
		if (linha.getCell(celula) == null)
			linha.createCell(celula);
		if (!CommonsUtil.semValor(value))
			linha.getCell(celula).setCellValue(value);
		else
			linha.getCell(celula).setCellValue("");
	}

	private void gravaCelula(Integer celula, String value, XSSFRow linha, CellStyle cell_style) {
		if (linha.getCell(celula) == null)
			linha.createCell(celula);
		linha.getCell(celula).setCellValue(value);
		linha.getCell(celula).setCellStyle(cell_style);
	}

	private void gravaCelula(Integer celula, Date value, XSSFRow linha) {
		if (linha.getCell(celula) == null)
			linha.createCell(celula);
		linha.getCell(celula).setCellValue(value);
	}

	private void gravaCelula(Integer celula, Date value, XSSFRow linha, CellStyle cell_style) {
		if (linha.getCell(celula) == null)
			linha.createCell(celula);
		if (!CommonsUtil.semValor(value)) {
			linha.getCell(celula).setCellValue(value);
			linha.getCell(celula).setCellStyle(cell_style);
		} else {
			linha.getCell(celula).setCellValue("");
		}

	}

	private void gravaCelula(Integer celula, int value, XSSFRow linha) {
		if (linha.getCell(celula) == null)
			linha.createCell(celula);
		linha.getCell(celula).setCellValue(value);
	}

	public Collection<ContratoCobranca> populaStatus(Collection<ContratoCobranca> contratos) {
		// POPULA STATUS
		for (ContratoCobranca c : contratos) {

			if (CommonsUtil.mesmoValor(c.getStatus(), "Aprovado")) {
				c.setStatus("Aprovado");
			} else if (CommonsUtil.mesmoValor(c.getStatus(), "Reprovado")) {
				c.setStatus("Reprovado");
			} else if (CommonsUtil.mesmoValor(c.getStatus(), "Baixado")) {
				c.setStatus("Baixado");
			} else if (CommonsUtil.mesmoValor(c.getStatus(), "Desistência Cliente")) {
				c.setStatus("Reprovado");
			} else {
				if (CommonsUtil.semValor(c.getStatusLead())) {
					c.setStatus("Não Definido");
					continue;
				} else if (!c.getStatusLead().equals("Completo")) {
					if (c.getStatusLead().equals("Novo Lead")) {
						c.setStatus("Novo Lead");
					} else if (c.getStatusLead().equals("Em Tratamento")) {
						c.setStatus("Lead em Tratamento");
					} else if (c.getStatusLead().equals("Ag. Contato")) {
						c.setStatus("Lead Ag. Contato");
					} else if (c.getStatusLead().equals("Ag. Doc.")) {
						c.setStatus("Lead Ag. Doc.");
					} else if (CommonsUtil.mesmoValor(c.getStatusLead(), "Reprovado")) {
						c.setStatus("Lead Reprovado");
					} else if (c.getStatusLead().equals("Arquivado")) {
						c.setStatus("Lead Arquivado");
					}
					continue;
				}

				c.setStatus("Lead Completo");

				if (!c.isInicioAnalise())
					c.setStatus("Ag. Análise");

				if (c.isInicioAnalise())
					c.setStatus("Em Análise");

				if (c.getCadastroAprovadoValor() != null) {
					if (c.isInicioAnalise() && c.getCadastroAprovadoValor().equals("Pendente")) {
						c.setStatus("Análise Pendente");
					} else if (c.isInicioAnalise() && c.getCadastroAprovadoValor().equals("Aprovado")) {
						c.setStatus("Análise Pré-Aprovada");
					}

					if (c.isInicioAnalise() && c.getCadastroAprovadoValor().equals("Aprovado")
							&& c.isPedidoPreLaudoComercial()) {
						c.setStatus("Pedir Pré-Laudo");
					}

					String status = "";

					if (c.isInicioAnalise() && c.getCadastroAprovadoValor().equals("Aprovado")
							&& c.isPedidoLaudoPajuComercial() && !c.isPedidoLaudo()) {
						c.setStatus("Pedir Laudo");
						status = status + "Pedir Laudo";
					}

					if (c.isInicioAnalise() && c.getCadastroAprovadoValor().equals("Aprovado") && c.isPedidoLaudo()
							&& !c.isLaudoRecebido()) {
						if (!CommonsUtil.semValor(c.getAvaliacaoLaudo())
								&& CommonsUtil.mesmoValor(c.getAvaliacaoLaudo(), "Compass")) {
							c.setStatus("Aguardando Laudo Compass");
							if (!CommonsUtil.semValor(status)) {
								status = status + " | ";
							}
							status = status + "Aguardando Laudo Compass";
						} else if (!CommonsUtil.semValor(c.getAvaliacaoLaudo())
								&& CommonsUtil.mesmoValor(c.getAvaliacaoLaudo(), "Galache")) {
							c.setStatus("Aguardando Laudo Galache");
							if (!CommonsUtil.semValor(status)) {
								status = status + " | ";
							}
							status = status + "Aguardando Laudo Galache";
						} else {
							c.setStatus("Ag. Laudo");
							if (!CommonsUtil.semValor(status)) {
								status = status + " | ";
							}
							status = status + "Ag. Laudo";
						}
					}

					if (c.isInicioAnalise() && c.getCadastroAprovadoValor().equals("Aprovado")
							&& c.isPedidoLaudoPajuComercial() && !c.isPagtoLaudoConfirmada()) {
						c.setStatus("Pedir PAJU");
						if (!CommonsUtil.semValor(status)) {
							status = status + " | ";
						}
						status = status + "Pedir PAJU";
					}

					if (c.isInicioAnalise() && c.getCadastroAprovadoValor().equals("Aprovado")
							&& c.isPagtoLaudoConfirmada() && !c.isPajurFavoravel()) {
						c.setStatus("Ag. PAJU");
						if (!CommonsUtil.semValor(status)) {
							status = status + " | ";
						}
						if (!CommonsUtil.semValor(c.getAvaliacaoPaju())
								&& CommonsUtil.mesmoValor(c.getAvaliacaoPaju(), "Neves")) {
							status = status + "Ag. PAJU Neves";
						} else if (!CommonsUtil.semValor(c.getAvaliacaoPaju())
								&& CommonsUtil.mesmoValor(c.getAvaliacaoPaju(), "Luvison")) {
							status = status + "Ag. PAJU Luvison";
						} else {
							status = status + "Ag. PAJU";
						}
					}

					if (c.isInicioAnalise() && c.getCadastroAprovadoValor().equals("Aprovado")
							&& c.isPendenciaLaudoPaju() && (!c.isLaudoRecebido() || !c.isPajurFavoravel())) {
						if (!CommonsUtil.semValor(status)) {
							status = status + " | ";
						}
						status = status + "Laudo + Paju Pendente";
						// c.setStatus("Laudo + Paju Pendente");
					}

					if (c.isInicioAnalise() && c.getCadastroAprovadoValor().equals("Aprovado")
							&& c.isPagtoLaudoConfirmada() && c.isPajurFavoravel() && !c.isAnaliseComercial()) {
						if (!CommonsUtil.semValor(status)) {
							status = status + " | ";
						}
						status = status + "Análise Comercial";
						// c.setStatus("Análise Comercial");
					}

					if (c.isInicioAnalise() && c.getCadastroAprovadoValor().equals("Aprovado")
							&& c.isPagtoLaudoConfirmada() && c.isPajurFavoravel() && c.isAnaliseComercial()
							&& !c.isComentarioJuridicoEsteira()) {
						if (!CommonsUtil.semValor(status)) {
							status = status + " | ";
						}
						status = status + "Comentário Jurídico";
						// c.setStatus("Comentário Jurídico");
					}

					if (c.isInicioAnalise() && c.getCadastroAprovadoValor().equals("Aprovado")
							&& c.isPagtoLaudoConfirmada() && c.isPajurFavoravel() && c.isAnaliseComercial()
							&& c.isComentarioJuridicoEsteira() && !c.isPreAprovadoComite()) {
						if (!CommonsUtil.semValor(status)) {
							status = status + " | ";
						}
						status = status + "Pré-Comite";
						// c.setStatus("Pré-Comite");
					}

					if (!CommonsUtil.semValor(status)) {
						c.setStatus(status);
					}

					if (c.isInicioAnalise() && c.getCadastroAprovadoValor().equals("Aprovado")
							&& c.isPagtoLaudoConfirmada() && c.isLaudoRecebido() && c.isPajurFavoravel()
							&& c.isAnaliseComercial() && c.isComentarioJuridicoEsteira() && c.isPreAprovadoComite()
							&& !c.isDocumentosComite()) {
						c.setStatus("Ag. Validação DOCs");
					}

					if (c.isInicioAnalise() && c.getCadastroAprovadoValor().equals("Aprovado")
							&& c.isPagtoLaudoConfirmada() && c.isLaudoRecebido() && c.isPajurFavoravel()
							&& c.isAnaliseComercial() && c.isComentarioJuridicoEsteira() && c.isPreAprovadoComite()
							&& c.isDocumentosComite() && !c.isAprovadoComite()) {
						c.setStatus("Ag. Comite");
					}

					if (c.isInicioAnalise() && c.getCadastroAprovadoValor().equals("Aprovado")
							&& c.isPagtoLaudoConfirmada() && c.isLaudoRecebido() && c.isPajurFavoravel()
							&& c.isAnaliseComercial() && c.isComentarioJuridicoEsteira() && c.isPreAprovadoComite()
							&& c.isDocumentosComite() && c.isAprovadoComite() && !c.isOkCliente()) {
						c.setStatus("Ag. Ok Cliente");
					}

					if (c.isInicioAnalise() && c.getCadastroAprovadoValor().equals("Aprovado")
							&& c.isPagtoLaudoConfirmada() && c.isLaudoRecebido() && c.isPajurFavoravel()
							&& c.isAnaliseComercial() && c.isComentarioJuridicoEsteira() && c.isPreAprovadoComite()
							&& c.isDocumentosComite() && c.isAprovadoComite() && c.isOkCliente()
							&& !c.isDocumentosCompletos()) {
						c.setStatus("Ag. DOC");
					}

					if (c.isInicioAnalise() && c.getCadastroAprovadoValor().equals("Aprovado")
							&& c.isPagtoLaudoConfirmada() && c.isLaudoRecebido() && c.isPajurFavoravel()
							&& c.isAnaliseComercial() && c.isComentarioJuridicoEsteira() && c.isPreAprovadoComite()
							&& c.isDocumentosComite() && c.isAprovadoComite() && c.isOkCliente()
							&& c.isDocumentosCompletos() && !c.isReanalise() && !c.isCertificadoEmitido()) {
						c.setStatus("Ag. Certificado");
					}

					if (c.isInicioAnalise() && c.getCadastroAprovadoValor().equals("Aprovado")
							&& c.isPagtoLaudoConfirmada() && c.isLaudoRecebido() && c.isPajurFavoravel()
							&& c.isAnaliseComercial() && c.isComentarioJuridicoEsteira() && c.isPreAprovadoComite()
							&& c.isDocumentosComite() && c.isAprovadoComite() && c.isOkCliente()
							&& c.isDocumentosCompletos() && !c.isReanalise() && c.isCertificadoEmitido()
							&& !c.isCcbPronta()) {
						c.setStatus("Ag. CCB");
					}

					if (c.isInicioAnalise() && c.getCadastroAprovadoValor().equals("Aprovado")
							&& c.isPagtoLaudoConfirmada() && c.isLaudoRecebido() && c.isPajurFavoravel()
							&& c.isAnaliseComercial() && c.isComentarioJuridicoEsteira() && c.isPreAprovadoComite()
							&& c.isDocumentosComite() && c.isAprovadoComite() && c.isOkCliente()
							&& c.isDocumentosCompletos() && c.isCertificadoEmitido() && c.isCcbPronta()
							&& !c.isContratoConferido()) {
						c.setStatus("Ag. Conferência");
					}

					if (c.isInicioAnalise() && c.getCadastroAprovadoValor().equals("Aprovado")
							&& c.isPagtoLaudoConfirmada() && c.isLaudoRecebido() && c.isPajurFavoravel()
							&& c.isAnaliseComercial() && c.isComentarioJuridicoEsteira() && c.isPreAprovadoComite()
							&& c.isDocumentosComite() && c.isAprovadoComite() && c.isOkCliente()
							&& c.isDocumentosCompletos() && c.isCertificadoEmitido() && c.isCcbPronta()
							&& c.isContratoConferido() && c.isAgAssinatura()) {
						c.setStatus("Ag. Assinatura");
					}

					if (c.isInicioAnalise() && c.getCadastroAprovadoValor().equals("Aprovado")
							&& c.isPagtoLaudoConfirmada() && c.isLaudoRecebido() && c.isPajurFavoravel()
							&& c.isAnaliseComercial() && c.isComentarioJuridicoEsteira() && c.isPreAprovadoComite()
							&& c.isDocumentosComite() && c.isAprovadoComite() && c.isOkCliente()
							&& c.isDocumentosCompletos() && c.isCertificadoEmitido() && c.isCcbPronta()
							&& c.isContratoConferido() && c.isReanalise() && !c.isReanalisePronta()) {
						c.setStatus("Ag. Reanalise");
					}

					if (c.isInicioAnalise() && c.getCadastroAprovadoValor().equals("Aprovado")
							&& c.isPagtoLaudoConfirmada() && c.isLaudoRecebido() && c.isPajurFavoravel()
							&& c.isAnaliseComercial() && c.isComentarioJuridicoEsteira() && c.isPreAprovadoComite()
							&& c.isDocumentosComite() && c.isAprovadoComite() && c.isOkCliente()
							&& c.isDocumentosCompletos() && c.isCertificadoEmitido() && c.isCcbPronta()
							&& c.isContratoConferido() && c.isReanalise() && c.isReanalisePronta()
							&& !c.isReanaliseJuridico()) {
						c.setStatus("Ag. Reanalise Juridico");
					}

					if (c.isInicioAnalise() && c.getCadastroAprovadoValor().equals("Aprovado")
							&& c.isPagtoLaudoConfirmada() && c.isLaudoRecebido() && c.isPajurFavoravel()
							&& c.isAnaliseComercial() && c.isComentarioJuridicoEsteira() && c.isPreAprovadoComite()
							&& c.isDocumentosComite() && c.isAprovadoComite() && c.isOkCliente()
							&& c.isDocumentosCompletos() && c.isCertificadoEmitido() && c.isCcbPronta()
							&& c.isContratoConferido() && !c.isAgAssinatura() && !c.isReanalise()
							&& c.isAgEnvioCartorio()) {
						c.setStatus("Ag. Envio Cartório");
					}
					
					if (c.isInicioAnalise() && c.getCadastroAprovadoValor().equals("Aprovado")
							&& c.isPagtoLaudoConfirmada() && c.isLaudoRecebido() && c.isPajurFavoravel()
							&& c.isAnaliseComercial() && c.isComentarioJuridicoEsteira() && c.isPreAprovadoComite()
							&& c.isDocumentosComite() && c.isAprovadoComite() && c.isOkCliente()
							&& c.isDocumentosCompletos() && c.isCertificadoEmitido() && c.isCcbPronta()
							&& c.isContratoConferido() && !c.isAgAssinatura() && !c.isReanalise()
							&& !c.isAgEnvioCartorio() && c.isPendenciaExternaCartorio() && !c.isPendenciaResolvidaCartorio()) {
						c.setStatus("Ag. Resolução Pendência Cartório");
					}
					
					if (c.isInicioAnalise() && c.getCadastroAprovadoValor().equals("Aprovado")
							&& c.isPagtoLaudoConfirmada() && c.isLaudoRecebido() && c.isPajurFavoravel()
							&& c.isAnaliseComercial() && c.isComentarioJuridicoEsteira() && c.isPreAprovadoComite()
							&& c.isDocumentosComite() && c.isAprovadoComite() && c.isOkCliente()
							&& c.isDocumentosCompletos() && c.isCertificadoEmitido() && c.isCcbPronta()
							&& c.isContratoConferido() && !c.isAgAssinatura() && !c.isReanalise()
							&& !c.isAgEnvioCartorio() && !c.isPendenciaExternaCartorio() && !c.isResolucaoExigenciaCartorio()) {
						c.setStatus("Ag. Resolução Exigências/Pagamento");
					}

					if (c.isInicioAnalise() && c.getCadastroAprovadoValor().equals("Aprovado")
							&& c.isPagtoLaudoConfirmada() && c.isLaudoRecebido() && c.isPajurFavoravel()
							&& c.isAnaliseComercial() && c.isComentarioJuridicoEsteira() && c.isPreAprovadoComite()
							&& c.isDocumentosComite() && c.isAprovadoComite() && c.isOkCliente()
							&& c.isDocumentosCompletos() && c.isCertificadoEmitido() && c.isCcbPronta()
							&& c.isContratoConferido() && !c.isAgAssinatura() && !c.isAgEnvioCartorio() 
							&& c.isResolucaoExigenciaCartorio() && c.isAgRegistro()) {
						c.setStatus("Ag. Registro");
					}
				}
				if (c.isAnaliseReprovada()) {
					c.setStatus("Análise Reprovada");
				}
			}
		}
		return contratos;
	}

	public ContratoCobranca populaStatusUnitario(ContratoCobranca contrato) {
		// POPULA STATUS
		ContratoCobranca c = contrato;
		ContratoCobranca s = contratoCobrancaCheckList;
		if (CommonsUtil.semValor(s)) {
			return null;
		}

		if (CommonsUtil.mesmoValor(c.getStatus(), "Aprovado")
				&& !CommonsUtil.mesmoValor(c.getStatus(), s.getStatus())) {
			c.setStatus("Contrato Registrado");
		} else {

			if (!CommonsUtil.semValor(c.getCadastroAprovadoValor())) {
				if (c.getCadastroAprovadoValor().equals("Aprovado") && (CommonsUtil
						.semValor(s.getCadastroAprovadoValor())
						|| !CommonsUtil.mesmoValor(c.getCadastroAprovadoValor(), s.getCadastroAprovadoValor()))) {
					c.setStatus("Operação Pré-Aprovada");
				}
			}

			if (c.isLaudoRecebido() && c.isPajurFavoravel()) {
				if (!CommonsUtil.mesmoValor(c.isLaudoRecebido(), s.isLaudoRecebido())
						|| !CommonsUtil.mesmoValor(c.isPajurFavoravel(), s.isPajurFavoravel())) {
					c.setStatus("Laudo e Paju Recebidos");
				}
			}

			if (c.isAprovadoComite() && !CommonsUtil.mesmoValor(c.isAprovadoComite(), s.isAprovadoComite())) {
				c.setStatus("Aprovado no Comitê");
			}

			if (!c.isAgAssinatura() && !CommonsUtil.mesmoValor(c.isAgAssinatura(), s.isAgAssinatura())) {
				c.setStatus("Contrato Assinado");
			}

			if (!c.isAgRegistro() && !CommonsUtil.mesmoValor(c.isAgRegistro(), s.isAgRegistro())) {
				c.setStatus("Contrato Registrado");
			}
		}
		return contrato;
	}

	public String geraConsultaContratosPorStatus(String status) {
		if (!SiscoatConstants.DEV && !CommonsUtil.sistemaWindows()) {
			this.baixarPreContratoAutomatico();
			this.enviaZapLeadEmTratamento();
			enviaZapCartorio();
		}

		this.tituloTelaConsultaPreStatus = status;

		clearMensagensWhatsApp();

		if (status.equals("Lead")) {
			this.tituloTelaConsultaPreStatus = "Novo Lead";
		}
		if (status.equals("Análise Reprovada")) {
			this.tituloTelaConsultaPreStatus = "Análise Reprovada";
		}
		if (status.equals("Aguardando Análise")) {
			this.tituloTelaConsultaPreStatus = "Aguardando Análise";
		}
		if (status.equals("Em Analise")) {
			this.tituloTelaConsultaPreStatus = "Em Análise";
		}
		if (status.equals("Analise Pendente")) {
			this.tituloTelaConsultaPreStatus = "Análise Pendente";
		}
		if (status.equals("Análise Aprovada")) {
			this.tituloTelaConsultaPreStatus = "Análise Pré-Aprovada";
		}
		if (status.equals("Pedir Pré-Laudo")) {
			this.tituloTelaConsultaPreStatus = "Pedir Pré-Laudo";
		}
		if (status.equals("Pedir Laudo")) {
			this.tituloTelaConsultaPreStatus = "Pedir Laudo";
		}
		if (status.equals("Pedir PAJU")) {
			this.tituloTelaConsultaPreStatus = "Pedir PAJU";
		}
		if (status.equals("Laudo Paju Pendente")) {
			this.tituloTelaConsultaPreStatus = "Laudo + Paju Pendente";
		}
		if (status.equals("Ag. Pagto. Laudo")) {
			this.tituloTelaConsultaPreStatus = "Ag. Pagto. Laudo";
		}
		if (status.equals("Ag. PAJU e Laudo")) {
			this.tituloTelaConsultaPreStatus = "Ag. PAJU e Laudo";
		}
		if (status.equals("Ag. PAJU")) {
			this.tituloTelaConsultaPreStatus = "Ag. PAJU";
		}
		if (status.equals("Ag. Laudo")) {
			this.tituloTelaConsultaPreStatus = "Ag. Laudo";
		}
		if (status.equals("Análise Comercial")) {
			this.tituloTelaConsultaPreStatus = "Análise Comercial";
		}
		if (status.equals("Comentario Jurídico")) {
			this.tituloTelaConsultaPreStatus = "Comentario Jurídico";
		}
		if (status.equals("Pré-Comite")) {
			this.tituloTelaConsultaPreStatus = "Pré-Comite";
		}
		if (status.equals("Ag. Documentos Comite")) {
			this.tituloTelaConsultaPreStatus = "Ag. Documentos Comite";
		}
		if (status.equals("Ag. Comite")) {
			this.tituloTelaConsultaPreStatus = "Ag. Comite";
		}
		if (status.equals("Ag. Ok Cliente")) {
			this.tituloTelaConsultaPreStatus = "Ag. Ok Cliente";
		}
		if (status.equals("Ag. DOC")) {
			this.tituloTelaConsultaPreStatus = "Ag. DOC";
		}
		if (status.equals("Ag. Reanalise")) {
			this.tituloTelaConsultaPreStatus = "Ag. Reanalise";
		}
		if (status.equals("Ag. Reanalise Juridico")) {
			this.tituloTelaConsultaPreStatus = "Ag. Reanalise Juridico";
		}
		if (status.equals("Ag. Certificado")) {
			this.tituloTelaConsultaPreStatus = "Ag. Certificado";
		}
		if (status.equals("Ag. CCB")) {
			this.tituloTelaConsultaPreStatus = "Ag. CCB";
		}
		if (status.equals("Ag. Conferência")) {
			this.tituloTelaConsultaPreStatus = "Ag. Conferência";
		}
		if (status.equals("Ag. Assinatura")) {
			this.tituloTelaConsultaPreStatus = "Ag. Assinatura";
		}
		if (status.equals("Ag. Envio Cartorio")) {
			this.tituloTelaConsultaPreStatus = "Ag. Envio Cartório";
		}
		if (status.equals("Ag. Resolução Pendência")) {
			this.tituloTelaConsultaPreStatus = "Ag. Resolução Pendência";
		}
		if (status.equals("Ag. Resolução Exigencias/Pagamentos")) {
			this.tituloTelaConsultaPreStatus = "Ag. Resolução Exigencias/Pagamentos";
		}
		if (status.equals("Ag. Registro")) {
			this.tituloTelaConsultaPreStatus = "Ag. Registro";
		}

		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();
		this.contratosPendentes = new ArrayList<ContratoCobranca>();

		TimeZone zone = TimeZone.getDefault();
		Locale locale = new Locale("pt", "BR");
		Calendar dataHoje = Calendar.getInstance(zone, locale);
		Date auxDataHoje = dataHoje.getTime();

		User user = getUsuarioLogado();

		this.contratosPendentes = contratoCobrancaDao.geraConsultaContratosCRM(null, null, status);

		if (status.equals("Análise Reprovada")) {
			for (ContratoCobranca contratos : this.contratosPendentes) {
				contratos = getContratoById(contratos.getId());
				if (contratos.getAnaliseReprovadaData() != null && contratos.isAnaliseReprovada()) {
					if (DateUtil.getDifferenceDays(contratos.getAnaliseReprovadaData(), auxDataHoje) > 14) {
						if (this.objetoContratoCobranca != null) {
							this.objetoContratoCobranca = contratos;
							reprovarContrato();
						}
					}
				}
			}
		}

		/* consultaListagemCertidoes() */

		if (status.equals("Aguardando Análise") && (!user.isProfileGerenteAnalise() && !user.isAdministrador())) {
			if (contratoCobrancaDao.consultaQtdAnaliseUser(user.getLogin()) >= 3) {
				FacesContext context = FacesContext.getCurrentInstance();
				context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_INFO,
						"Analista com muitas operações em andamento!", ""));
				return "/Atendimento/Cobranca/ContratoCobrancaConsultarPreStatus.xhtml";
			}
			ContratoCobranca contratoAnalise = null;
			boolean pendenciaOutroAnalista = false;
			for (ContratoCobranca contrato : contratosPendentes) {
				if (CommonsUtil.mesmoValor(contrato.getAnalisePendenciadaUsuario(), user.getLogin())) {
					contratoAnalise = contrato;
					break;
				} else {
					contratoAnalise = contrato;
					if (!CommonsUtil.semValor(contrato.getAnalisePendenciadaUsuario())) {
						pendenciaOutroAnalista = true;
					}
					break;
				}
			}
			if (!CommonsUtil.semValor(contratoAnalise)) {
				objetoContratoCobranca = contratoAnalise;
				objetoPagadorRecebedor = contratoAnalise.getPagador();
				objetoImovelCobranca = contratoAnalise.getImovel();
				porcentagemPersonalizada = null;
				updateMode = true;
				crmMode = false;
				deleteMode = false;
				baixarMode = false;

				this.objetoContratoCobranca = getContratoById(this.objetoContratoCobranca.getId());
				this.objetoImovelCobranca = this.objetoContratoCobranca.getImovel();
				this.objetoPagadorRecebedor = this.objetoContratoCobranca.getPagador();

				saveEstadoCheckListAtual();
				objetoContratoCobranca.setInicioAnalise(true);
				// editPreContratoPorStatus();
				this.objetoPagadorRecebedor.criarConjugeNoSistema();
				ImovelCobrancaDao imovelCobrancaDao = new ImovelCobrancaDao();
				objetoImovelCobranca.popularObjetoCidade();
				imovelCobrancaDao.merge(this.objetoImovelCobranca);
				updateCheckList();
				this.objetoContratoCobranca.populaStatusEsteira(getUsuarioLogadoNull());
				if (pendenciaOutroAnalista) {
					FacesContext context = FacesContext.getCurrentInstance();
					context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_INFO,
							"Pendência do analista: " + objetoContratoCobranca.getAnalisePendenciadaUsuario(), ""));
					objetoContratoCobranca
							.setInicioAnaliseUsuario(objetoContratoCobranca.getAnalisePendenciadaUsuario());
				}
				contratoCobrancaDao.merge(this.objetoContratoCobranca);

				return clearFieldsEditarPendentesAnalistas();
			} else {
				FacesContext context = FacesContext.getCurrentInstance();
				context.addMessage(null,
						new FacesMessage(FacesMessage.SEVERITY_INFO, "Não há contratos para ser analisados! ", ""));
			}
		}

		if (status.equals("Ag. Ok Cliente")) {
			return "/Atendimento/Cobranca/ContratoCobrancaConsultarPreStatusAgOkCliente.xhtml";
		} else {
			return "/Atendimento/Cobranca/ContratoCobrancaConsultarPreStatus.xhtml";
		}
	}

	public String consultaAgPagamentoOp() {
		this.tituloTelaConsultaPreStatus = "Ag. Pagamento Op.";

		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();
		this.contratosPendentes = new ArrayList<ContratoCobranca>();

		this.contratosPendentes = contratoCobrancaDao.geraConsultaContratosAgPagoOp();
		this.selectedContratos = new ArrayList<ContratoCobranca>();

		return "/Atendimento/Cobranca/ContratoCobrancaConsultarPreStatus.xhtml";
	}

	public String clearFieldsAvaliacaoCompass() {

		clearMensagensWhatsApp();

		this.tituloTelaConsultaPreStatus = "Avaliação de Imóvel";

		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();
		this.contratosPendentes = new ArrayList<ContratoCobranca>();

		this.contratosPendentes = contratoCobrancaDao.geraConsultaContratosCRM(null, null, "Avaliação de Imóvel");

		this.inserirImovelDisable = true;
		this.inserirImovelOcultarValorMercadoImovel = true;

		return "/Atendimento/Cobranca/ContratoCobrancaConsultarPreStatusAvaliacaoImovel.xhtml";
	}

	public String clearFieldsAvaliacaoGalache() {

		clearMensagensWhatsApp();

		this.tituloTelaConsultaPreStatus = "Avaliação de Imóvel - Galache";

		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();
		this.contratosPendentes = new ArrayList<ContratoCobranca>();

		this.contratosPendentes = contratoCobrancaDao.geraConsultaContratosCRM(null, null,
				"Avaliação de Imóvel - Galache");

		return "/Atendimento/Cobranca/ContratoCobrancaConsultarPreStatusAvaliacaoImovelGalache.xhtml";
	}

	public String clearFieldsGeracaoPAJU(String empresaPaju) {

		clearMensagensWhatsApp();

		this.tituloTelaConsultaPreStatus = "Geração do PAJU";

		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();
		this.contratosPendentes = new ArrayList<ContratoCobranca>();
		if (CommonsUtil.mesmoValor(empresaPaju, "Neves")) {
			this.contratosPendentes = contratoCobrancaDao.geraConsultaContratosCRM(null, null,
					"Geração do PAJU - Neves");
		} else if (CommonsUtil.mesmoValor(empresaPaju, "Luvison")) {
			this.contratosPendentes = contratoCobrancaDao.geraConsultaContratosCRM(null, null,
					"Geração do PAJU - Luvison");
		} else {
			this.contratosPendentes = contratoCobrancaDao.geraConsultaContratosCRM(null, null, "Geração do PAJU");
		}

		return "/Atendimento/Cobranca/ContratoCobrancaConsultarPreStatusGeracaoPAJU.xhtml";
	}

	public void consultaListagemCertidoes() {
		for (ContratoCobranca contrato : contratosPendentes) {
			DocketDao docketDao = new DocketDao();
			String idCallManager = docketDao.consultaContratosPendentesResponsaveis(contrato);
			DocketService docketService = new DocketService();
			docketService.verificarCertidoesContrato(contrato, idCallManager);
		}
	}

	public void processaResponsaveisGeraNumeroWhatsApp() {
		ResponsavelDao r = new ResponsavelDao();
		List<Responsavel> responsaveis = r.findAll();

		TakeBlipMB takeBlipMB = new TakeBlipMB();

		for (Responsavel resp : responsaveis) {
			takeBlipMB.getWhatsAppURL(resp);
		}
	}

	public String geraConsultaLeads(String statuslead) {
		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();
		this.contratosPendentes = new ArrayList<ContratoCobranca>();

		if (loginBean != null) {
			User usuarioLogado = new User();
			UserDao u = new UserDao();
			usuarioLogado = u.findByFilter("login", loginBean.getUsername()).get(0);

			if (usuarioLogado != null) {
				if (usuarioLogado.isAdministrador()) {
					this.contratosPendentes = contratoCobrancaDao.consultaLeads(null, null, statuslead);
				} else {
					if (usuarioLogado.getCodigoResponsavel() != null) {
						this.contratosPendentes = contratoCobrancaDao.consultaLeads(
								usuarioLogado.getCodigoResponsavel(), usuarioLogado.getListResponsavel(), statuslead);
					}
				}
			}
		}

		if (statuslead.equals("Novo Lead")) {
			return "/Atendimento/Cobranca/ContratoCobrancaConsultarLeads.xhtml";
		}
		if (statuslead.equals("Em Tratamento")) {
			tituloTelaLead = "Em Tratamento";
			return "/Atendimento/Cobranca/ContratoCobrancaConsultarLeadsTratamento.xhtml";
		}
		if (statuslead.equals("Ag. Contato")) {
			tituloTelaLead = "Ag. Contato";
			return "/Atendimento/Cobranca/ContratoCobrancaConsultarLeadsTratamento.xhtml";
		}
		if (statuslead.equals("Ag. Doc.")) {
			tituloTelaLead = "Ag. Doc.";
			return "/Atendimento/Cobranca/ContratoCobrancaConsultarLeadsTratamento.xhtml";
		}
		if (statuslead.equals("Completo")) {
			return "/Atendimento/Cobranca/ContratoCobrancaConsultarLeadsCompletos.xhtml";
		}
		if (statuslead.equals("Reprovado")) {
			return "/Atendimento/Cobranca/ContratoCobrancaConsultarLeadsReprovados.xhtml";
		}

		return "";
	}

	public String geraConsultaLeadsTerceiros() {
		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();
		this.contratosPendentes = new ArrayList<ContratoCobranca>();

		if (loginBean != null) {
			User usuarioLogado = new User();
			UserDao u = new UserDao();
			usuarioLogado = u.findByFilter("login", loginBean.getUsername()).get(0);

			if (usuarioLogado != null) {
				if (usuarioLogado.isAdministrador()) {
					this.contratosPendentes = contratoCobrancaDao.consultaLeadsTerceiros(null);
				} else {
					if (usuarioLogado.getCodigoResponsavel() != null) {
						this.contratosPendentes = contratoCobrancaDao
								.consultaLeadsTerceiros(usuarioLogado.getCodigoResponsavel());
					}
				}
			}
		}

		return "/Atendimento/Cobranca/ContratoCobrancaConsultarLeadsTerceiros.xhtml";
	}

	public String geraConsultaContratosCustomizados() {
		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();
		this.contratosPendentes = new ArrayList<ContratoCobranca>();

		if (loginBean != null) {
			User usuarioLogado = new User();
			UserDao u = new UserDao();
			usuarioLogado = u.findByFilter("login", loginBean.getUsername()).get(0);

			if (usuarioLogado != null) {
				if (usuarioLogado.isAdministrador()) {
					this.contratosPendentes = contratoCobrancaDao.consultaContratosPendentes(null,
							tipoParametroConsultaContrato, parametroConsultaContrato);
				} else {
					if (usuarioLogado.getListResponsavel().size() > 0) {
						this.contratosPendentes = contratoCobrancaDao.consultaContratosPendentesResponsaveis(
								usuarioLogado.getCodigoResponsavel(), usuarioLogado.getListResponsavel());
					} else {
						this.contratosPendentes = contratoCobrancaDao.consultaContratosPendentes(
								usuarioLogado.getCodigoResponsavel(), tipoParametroConsultaContrato,
								parametroConsultaContrato);
					}
				}
			}
		}

		return "/Atendimento/Cobranca/ContratoCobrancaPreCustomizadoConsultar.xhtml";
	}

	public String geraConsultaContratosReprovados() {
		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();
		this.contratosPendentes = new ArrayList<ContratoCobranca>();
		this.setNumContrato("");

		if (loginBean != null) {
			User usuarioLogado = new User();
			UserDao u = new UserDao();
			usuarioLogado = u.findByFilter("login", loginBean.getUsername()).get(0);

			if (usuarioLogado != null) {
				if (usuarioLogado.isAdministrador()) {
					this.contratosPendentes = contratoCobrancaDao.consultaContratosPendentesReprovados(null);
				} else {
					if (usuarioLogado.getListResponsavel().size() > 0) {
						this.contratosPendentes = contratoCobrancaDao.consultaContratosPendentesReprovadosResponsaveis(
								usuarioLogado.getCodigoResponsavel(), usuarioLogado.getListResponsavel());
					} else {
						this.contratosPendentes = contratoCobrancaDao
								.consultaContratosPendentesReprovados(usuarioLogado.getCodigoResponsavel());
					}
				}
			}
		}

		return "/Atendimento/Cobranca/ContratoCobrancaConsultarReprovados.xhtml";
	}

	public String geraConsultaContratosBaixados() {
		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();
		this.numContrato = "";
		this.contratosPendentes = new ArrayList<ContratoCobranca>();

		if (loginBean != null) {
			User usuarioLogado = new User();
			UserDao u = new UserDao();
			usuarioLogado = u.findByFilter("login", loginBean.getUsername()).get(0);

			if (usuarioLogado != null) {
				if (usuarioLogado.isAdministrador()) {
					this.contratosPendentes = contratoCobrancaDao.consultaContratosPendentesBaixados(null);
				} else {
					if (usuarioLogado.getListResponsavel().size() > 0) {
						this.contratosPendentes = contratoCobrancaDao.consultaContratosPendentesBaixadosResponsaveis(
								usuarioLogado.getCodigoResponsavel(), usuarioLogado.getListResponsavel());
					} else {
						this.contratosPendentes = contratoCobrancaDao
								.consultaContratosPendentesBaixados(usuarioLogado.getCodigoResponsavel());
					}
				}
			}
		}

		return "/Atendimento/Cobranca/ContratoCobrancaConsultarBaixados.xhtml";
	}

	public String geraConsultaContratosQuitados() {
		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();
		this.contratosPendentes = new ArrayList<ContratoCobranca>();

		if (loginBean != null) {
			User usuarioLogado = new User();
			UserDao u = new UserDao();
			usuarioLogado = u.findByFilter("login", loginBean.getUsername()).get(0);

			if (usuarioLogado != null) {
				if (usuarioLogado.isAdministrador()) {
					this.contratosPendentes = contratoCobrancaDao.consultaContratosPendentesQuitados(null);
				} else {
					this.contratosPendentes = contratoCobrancaDao
							.consultaContratosPendentesQuitados(usuarioLogado.getCodigoResponsavel());
				}
			}
		}

		return "/Atendimento/Cobranca/ContratoCobrancaConsultarQuitados.xhtml";
	}

	public void converteGrupoFavorecidos() {
		if (this.selectedGrupoFavorecido != null) {
			if (this.selectedGrupoFavorecido.getRecebedor1() != null) {
				this.setIdRecebedor(this.selectedGrupoFavorecido.getRecebedor1().getId());
			}
			if (this.selectedGrupoFavorecido.getRecebedor2() != null) {
				this.setIdRecebedor2(this.selectedGrupoFavorecido.getRecebedor2().getId());
			}
			if (this.selectedGrupoFavorecido.getRecebedor3() != null) {
				this.setIdRecebedor3(this.selectedGrupoFavorecido.getRecebedor3().getId());
			}
			if (this.selectedGrupoFavorecido.getRecebedor4() != null) {
				this.setIdRecebedor4(this.selectedGrupoFavorecido.getRecebedor4().getId());
			}
			if (this.selectedGrupoFavorecido.getRecebedor5() != null) {
				this.setIdRecebedor5(this.selectedGrupoFavorecido.getRecebedor5().getId());
			}
			if (this.selectedGrupoFavorecido.getRecebedor6() != null) {
				this.setIdRecebedor6(this.selectedGrupoFavorecido.getRecebedor6().getId());
			}
			if (this.selectedGrupoFavorecido.getRecebedor7() != null) {
				this.setIdRecebedor7(this.selectedGrupoFavorecido.getRecebedor7().getId());
			}
			if (this.selectedGrupoFavorecido.getRecebedor8() != null) {
				this.setIdRecebedor8(this.selectedGrupoFavorecido.getRecebedor8().getId());
			}
			if (this.selectedGrupoFavorecido.getRecebedor9() != null) {
				this.setIdRecebedor9(this.selectedGrupoFavorecido.getRecebedor9().getId());
			}
			if (this.selectedGrupoFavorecido.getRecebedor10() != null) {
				this.setIdRecebedor10(this.selectedGrupoFavorecido.getRecebedor10().getId());
			}
		}
	}

	/*
	 * public void alteraContratoParaCartorio() { ContratoCobrancaDao
	 * contratoCobrancaDao = new ContratoCobrancaDao();
	 * this.relObjetoContratoCobranca = new
	 * ArrayList<RelatorioFinanceiroCobranca>(); List<RelatorioFinanceiroCobranca>
	 * relObjetoContratoCobrancaAux = new ArrayList<RelatorioFinanceiroCobranca>();
	 * 
	 * contratoCobrancaDao.s }
	 */

	public void geraRelFinanceiroAtraso() {
		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();
		this.relObjetoContratoCobranca = new ArrayList<RelatorioFinanceiroCobranca>();
		List<RelatorioFinanceiroCobranca> relObjetoContratoCobrancaAux = new ArrayList<RelatorioFinanceiroCobranca>();

		// Busca Contratos com Parcelas que vencem no dia atual
		relObjetoContratoCobrancaAux = contratoCobrancaDao
				.relatorioControleEstoqueAtrasoFull(this.relDataContratoInicioAtraso, this.relDataContratoFimAtraso);

		for (RelatorioFinanceiroCobranca parcelas : relObjetoContratoCobrancaAux) {
			// chamada para contar parcelas em atraso
			String retornoAtrasos = contratoCobrancaDao.getParcelasAtraso(DateUtil.gerarDataHoje(),
					this.filtrarDataVencimento, parcelas.getContratoCobranca().getId());

			int posicaoSeparador = retornoAtrasos.indexOf("||");

			parcelas.setQtdeAtrasos(retornoAtrasos.substring(0, posicaoSeparador));

			parcelas.setQtdeBaixasParciais(retornoAtrasos.substring(posicaoSeparador + 2, retornoAtrasos.length()));
		}

		// exclui o registro, quando o pagador é a Galleria SA
		/*
		 * if (relObjetoContratoCobrancaAux.size() > 0) { for
		 * (RelatorioFinanceiroCobranca r : relObjetoContratoCobrancaAux) { if
		 * (r.getContratoCobranca().getPagador().getId() != 14) {
		 * this.relObjetoContratoCobranca.add(r); } } }
		 */
		if (relObjetoContratoCobrancaAux.size() > 0) {
			this.relObjetoContratoCobranca = relObjetoContratoCobrancaAux;
		}

		processaDadosRelFinanceiroAtrasoFull();

		this.relSelectedObjetoContratoCobranca = new RelatorioFinanceiroCobranca();

		if (this.relObjetoContratoCobranca.size() == 0) {
			this.relObjetoContratoCobranca = new ArrayList<RelatorioFinanceiroCobranca>();
		}

		this.contratoGerado = false;
	}

	public void geraRelFinanceiroAtrasoFIDC() {
		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();
		this.relObjetoContratoCobranca = new ArrayList<RelatorioFinanceiroCobranca>();
		List<RelatorioFinanceiroCobranca> relObjetoContratoCobrancaAux = new ArrayList<RelatorioFinanceiroCobranca>();

		// Busca Contratos com Parcelas que vencem no dia atual
		relObjetoContratoCobrancaAux = contratoCobrancaDao
				.relatorioControleEstoqueAtrasoFullFIDC(DateUtil.gerarDataHoje());

		// exclui o registro, quando o pagador é a Galleria SA
		/*
		 * if (relObjetoContratoCobrancaAux.size() > 0) { for
		 * (RelatorioFinanceiroCobranca r : relObjetoContratoCobrancaAux) { if
		 * (r.getContratoCobranca().getPagador().getId() != 14) {
		 * this.relObjetoContratoCobranca.add(r); } } }
		 */
		if (relObjetoContratoCobrancaAux.size() > 0) {
			this.relObjetoContratoCobranca = relObjetoContratoCobrancaAux;
		}

		processaDadosRelFinanceiroAtrasoFull();

		this.relSelectedObjetoContratoCobranca = new RelatorioFinanceiroCobranca();

		if (this.relObjetoContratoCobranca.size() == 0) {
			this.relObjetoContratoCobranca = new ArrayList<RelatorioFinanceiroCobranca>();
		}

		this.contratoGerado = false;
	}

	public void geraRelFinanceiroAtrasoCRI1() {
		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();
		this.relObjetoContratoCobranca = new ArrayList<RelatorioFinanceiroCobranca>();
		List<RelatorioFinanceiroCobranca> relObjetoContratoCobrancaAux = new ArrayList<RelatorioFinanceiroCobranca>();

		// Busca Contratos com Parcelas que vencem no dia atual
		relObjetoContratoCobrancaAux = contratoCobrancaDao
				.relatorioControleEstoqueAtrasoFullCRI1(DateUtil.gerarDataHoje());

		// exclui o registro, quando o pagador é a Galleria SA
		/*
		 * if (relObjetoContratoCobrancaAux.size() > 0) { for
		 * (RelatorioFinanceiroCobranca r : relObjetoContratoCobrancaAux) { if
		 * (r.getContratoCobranca().getPagador().getId() != 14) {
		 * this.relObjetoContratoCobranca.add(r); } } }
		 */
		if (relObjetoContratoCobrancaAux.size() > 0) {
			this.relObjetoContratoCobranca = relObjetoContratoCobrancaAux;
		}

		processaDadosRelFinanceiroAtrasoFull();

		this.relSelectedObjetoContratoCobranca = new RelatorioFinanceiroCobranca();

		if (this.relObjetoContratoCobranca.size() == 0) {
			this.relObjetoContratoCobranca = new ArrayList<RelatorioFinanceiroCobranca>();
		}

		this.contratoGerado = false;
	}

	public void geraRelFinanceiroAtrasoCRI2() {
		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();
		this.relObjetoContratoCobranca = new ArrayList<RelatorioFinanceiroCobranca>();
		List<RelatorioFinanceiroCobranca> relObjetoContratoCobrancaAux = new ArrayList<RelatorioFinanceiroCobranca>();

		// Busca Contratos com Parcelas que vencem no dia atual
		relObjetoContratoCobrancaAux = contratoCobrancaDao
				.relatorioControleEstoqueAtrasoFullCRI2(DateUtil.gerarDataHoje());

		// exclui o registro, quando o pagador é a Galleria SA
		/*
		 * if (relObjetoContratoCobrancaAux.size() > 0) { for
		 * (RelatorioFinanceiroCobranca r : relObjetoContratoCobrancaAux) { if
		 * (r.getContratoCobranca().getPagador().getId() != 14) {
		 * this.relObjetoContratoCobranca.add(r); } } }
		 */
		if (relObjetoContratoCobrancaAux.size() > 0) {
			this.relObjetoContratoCobranca = relObjetoContratoCobrancaAux;
		}

		processaDadosRelFinanceiroAtrasoFull();

		this.relSelectedObjetoContratoCobranca = new RelatorioFinanceiroCobranca();

		if (this.relObjetoContratoCobranca.size() == 0) {
			this.relObjetoContratoCobranca = new ArrayList<RelatorioFinanceiroCobranca>();
		}

		this.contratoGerado = false;
	}

	public void geraRelFinanceiroAtrasoCRI3() {
		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();
		this.relObjetoContratoCobranca = new ArrayList<RelatorioFinanceiroCobranca>();
		List<RelatorioFinanceiroCobranca> relObjetoContratoCobrancaAux = new ArrayList<RelatorioFinanceiroCobranca>();

		// Busca Contratos com Parcelas que vencem no dia atual
		relObjetoContratoCobrancaAux = contratoCobrancaDao
				.relatorioControleEstoqueAtrasoFullCRI3(DateUtil.gerarDataHoje());

		// exclui o registro, quando o pagador é a Galleria SA
		/*
		 * if (relObjetoContratoCobrancaAux.size() > 0) { for
		 * (RelatorioFinanceiroCobranca r : relObjetoContratoCobrancaAux) { if
		 * (r.getContratoCobranca().getPagador().getId() != 14) {
		 * this.relObjetoContratoCobranca.add(r); } } }
		 */
		if (relObjetoContratoCobrancaAux.size() > 0) {
			this.relObjetoContratoCobranca = relObjetoContratoCobrancaAux;
		}

		processaDadosRelFinanceiroAtrasoFull();

		this.relSelectedObjetoContratoCobranca = new RelatorioFinanceiroCobranca();

		if (this.relObjetoContratoCobranca.size() == 0) {
			this.relObjetoContratoCobranca = new ArrayList<RelatorioFinanceiroCobranca>();
		}

		this.contratoGerado = false;
	}

	public void geraRelFinanceiroAtrasoCRI4() {
		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();
		this.relObjetoContratoCobranca = new ArrayList<RelatorioFinanceiroCobranca>();
		List<RelatorioFinanceiroCobranca> relObjetoContratoCobrancaAux = new ArrayList<RelatorioFinanceiroCobranca>();

		// Busca Contratos com Parcelas que vencem no dia atual
		relObjetoContratoCobrancaAux = contratoCobrancaDao
				.relatorioControleEstoqueAtrasoFullCRI4(DateUtil.gerarDataHoje());

		// exclui o registro, quando o pagador é a Galleria SA
		/*
		 * if (relObjetoContratoCobrancaAux.size() > 0) { for
		 * (RelatorioFinanceiroCobranca r : relObjetoContratoCobrancaAux) { if
		 * (r.getContratoCobranca().getPagador().getId() != 14) {
		 * this.relObjetoContratoCobranca.add(r); } } }
		 */
		if (relObjetoContratoCobrancaAux.size() > 0) {
			this.relObjetoContratoCobranca = relObjetoContratoCobrancaAux;
		}

		processaDadosRelFinanceiroAtrasoFull();

		this.relSelectedObjetoContratoCobranca = new RelatorioFinanceiroCobranca();

		if (this.relObjetoContratoCobranca.size() == 0) {
			this.relObjetoContratoCobranca = new ArrayList<RelatorioFinanceiroCobranca>();
		}

		this.contratoGerado = false;
	}

	public void geraRelFinanceiroAtrasoCRI5() {
		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();
		this.relObjetoContratoCobranca = new ArrayList<RelatorioFinanceiroCobranca>();
		List<RelatorioFinanceiroCobranca> relObjetoContratoCobrancaAux = new ArrayList<RelatorioFinanceiroCobranca>();

		// Busca Contratos com Parcelas que vencem no dia atual
		relObjetoContratoCobrancaAux = contratoCobrancaDao
				.relatorioControleEstoqueAtrasoFullCRI5(DateUtil.gerarDataHoje());

		// exclui o registro, quando o pagador é a Galleria SA
		/*
		 * if (relObjetoContratoCobrancaAux.size() > 0) { for
		 * (RelatorioFinanceiroCobranca r : relObjetoContratoCobrancaAux) { if
		 * (r.getContratoCobranca().getPagador().getId() != 14) {
		 * this.relObjetoContratoCobranca.add(r); } } }
		 */
		if (relObjetoContratoCobrancaAux.size() > 0) {
			this.relObjetoContratoCobranca = relObjetoContratoCobrancaAux;
		}

		processaDadosRelFinanceiroAtrasoFull();

		this.relSelectedObjetoContratoCobranca = new RelatorioFinanceiroCobranca();

		if (this.relObjetoContratoCobranca.size() == 0) {
			this.relObjetoContratoCobranca = new ArrayList<RelatorioFinanceiroCobranca>();
		}

		this.contratoGerado = false;
	}

	public void geraRelFinanceiroAtrasoSecuritizadora() {
		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();
		this.relObjetoContratoCobranca = new ArrayList<RelatorioFinanceiroCobranca>();
		List<RelatorioFinanceiroCobranca> relObjetoContratoCobrancaAux = new ArrayList<RelatorioFinanceiroCobranca>();

		// Busca Contratos com Parcelas que vencem no dia atual
		relObjetoContratoCobrancaAux = contratoCobrancaDao
				.relatorioControleEstoqueAtrasoFullSecuritizadora(DateUtil.gerarDataHoje());

		// exclui o registro, quando o pagador é a Galleria SA
		/*
		 * if (relObjetoContratoCobrancaAux.size() > 0) { for
		 * (RelatorioFinanceiroCobranca r : relObjetoContratoCobrancaAux) { if
		 * (r.getContratoCobranca().getPagador().getId() != 14) {
		 * this.relObjetoContratoCobranca.add(r); } } }
		 */
		if (relObjetoContratoCobrancaAux.size() > 0) {
			this.relObjetoContratoCobranca = relObjetoContratoCobrancaAux;
		}

		processaDadosRelFinanceiroAtrasoFull();

		this.relSelectedObjetoContratoCobranca = new RelatorioFinanceiroCobranca();

		if (this.relObjetoContratoCobranca.size() == 0) {
			this.relObjetoContratoCobranca = new ArrayList<RelatorioFinanceiroCobranca>();
		}

		this.contratoGerado = false;
	}

	public void geraRelFinanceiro() {
		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();
		this.relObjetoContratoCobranca = new ArrayList<RelatorioFinanceiroCobranca>();
		List<RelatorioFinanceiroCobranca> relObjetoContratoCobrancaAux = new ArrayList<RelatorioFinanceiroCobranca>();

		// Busca Contratos com Parcelas que vencem no dia atual
		if (this.tipoFiltros) {
			/* Filtra por period, parcelas em atraso / no periodo, evolvidos */
			if (this.grupoFavorecidos) {
				converteGrupoFavorecidos();
			}

			if (!relIsRelAtraso) {
				relObjetoContratoCobrancaAux = contratoCobrancaDao.relatorioControleEstoque(this.relDataContratoInicio,
						this.relDataContratoFim, this.getIdPagador(), this.getIdRecebedor(), this.getIdRecebedor2(),
						this.getIdRecebedor3(), this.getIdRecebedor4(), this.getIdRecebedor5(), this.getIdRecebedor6(),
						this.getIdRecebedor7(), this.getIdRecebedor8(), this.getIdRecebedor9(), this.getIdRecebedor10(),
						this.getIdResponsavel(), this.filtrarDataVencimento, this.grupoPagadores, this.idGrupoPagador,
						this.empresa);
			} else {
				relObjetoContratoCobrancaAux = contratoCobrancaDao.relatorioControleEstoqueAtraso(
						this.relDataContratoInicio, this.relDataContratoFim, this.getIdPagador(), this.getIdRecebedor(),
						this.getIdRecebedor2(), this.getIdRecebedor3(), this.getIdRecebedor4(), this.getIdRecebedor5(),
						this.getIdRecebedor6(), this.getIdRecebedor7(), this.getIdRecebedor8(), this.getIdRecebedor9(),
						this.getIdRecebedor10(), this.getIdResponsavel(), this.filtrarDataVencimento,
						this.grupoPagadores, this.idGrupoPagador, this.empresa);

				for (RelatorioFinanceiroCobranca parcelas : relObjetoContratoCobrancaAux) {
					// chamada para contar parcelas em atraso
					String retornoAtrasos = contratoCobrancaDao.getParcelasAtraso(DateUtil.gerarDataHoje(),
							this.filtrarDataVencimento, parcelas.getContratoCobranca().getId());

					int posicaoSeparador = retornoAtrasos.indexOf("||");

					parcelas.setQtdeAtrasos(retornoAtrasos.substring(0, posicaoSeparador));

					parcelas.setQtdeBaixasParciais(
							retornoAtrasos.substring(posicaoSeparador + 2, retornoAtrasos.length()));
				}
			}
		} else {
			/* Se filtro somente por numero do contrato */
			if (this.numContrato.length() == 4) {
				relObjetoContratoCobrancaAux = contratoCobrancaDao
						.relatorioControleEstoqueNumContrato("0" + this.numContrato);
			} else {
				relObjetoContratoCobrancaAux = contratoCobrancaDao
						.relatorioControleEstoqueNumContrato(this.numContrato);
			}
		}

		// exclui o registro, quando o pagador é a Galleria SA
		if (relObjetoContratoCobrancaAux.size() > 0) {
			for (RelatorioFinanceiroCobranca r : relObjetoContratoCobrancaAux) {
				if (r.getContratoCobranca().getPagador().getId() != 14) {
					this.relObjetoContratoCobranca.add(r);
				}
			}
		}

		processaDadosRelFinanceiro();

		this.relSelectedObjetoContratoCobranca = new RelatorioFinanceiroCobranca();

		if (this.relObjetoContratoCobranca.size() == 0) {
			this.relObjetoContratoCobranca = new ArrayList<RelatorioFinanceiroCobranca>();
		}

		this.contratoGerado = false;
	}

	public void geraRelFinanceiroContabilidade() {
		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();
		this.relObjetoContratoCobranca = new ArrayList<RelatorioFinanceiroCobranca>();

		this.relObjetoContratoCobranca = contratoCobrancaDao
				.relatorioFinanceiroContabilidade(this.relDataContratoInicio, this.relDataContratoFim);

		this.relSelectedObjetoContratoCobranca = new RelatorioFinanceiroCobranca();

		if (this.relObjetoContratoCobranca.size() == 0) {
			this.relObjetoContratoCobranca = new ArrayList<RelatorioFinanceiroCobranca>();
		}

		this.contratoGerado = false;
	}

	public void geraRelFinanceiroDiaEspelhamento() {
		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();
		this.contratoCobrancaFinanceiroDia = new ArrayList<>();

		this.contratoCobrancaFinanceiroDia = contratoCobrancaDao
				.relatorioFinanceiroDia(this.tipoContratoCobrancaFinanceiroDia);

		// Verifica se há parcelas em atraso, se sim irá colorir a linha na tela
		TimeZone zone = TimeZone.getDefault();
		Locale locale = new Locale("pt", "BR");
		Calendar dataHoje = Calendar.getInstance(zone, locale);
		Date auxDataPagamento = dataHoje.getTime();

		SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd", locale);
		String auxDataPagamentoStr = sdf.format(dataHoje.getTime());
		try {
			auxDataPagamento = sdf.parse(auxDataPagamentoStr);
		} catch (ParseException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}

		// onRowEdit - nova data
		rowEditNewDate = auxDataPagamento;

		List<ContratoCobrancaFinancerioDiaConsultaVO> listContratos = new ArrayList<ContratoCobrancaFinancerioDiaConsultaVO>();

		for (ContratoCobrancaFinancerioDiaConsultaVO contratos : this.contratoCobrancaFinanceiroDia) {

			int countParcelas = 0;
			BigDecimal somaAmortizacoes = BigDecimal.ZERO;

			SimuladorMB simuladorMB = new SimuladorMB();

			if (!CommonsUtil.semValor(contratos.getValorCCB())) {
				if (contratos.getListContratoCobrancaDetalhes().size() > 0) {
					if (contratos.getPagador_cpf() != null) {
						simuladorMB.setTipoPessoa("PF");
					} else {
						simuladorMB.setTipoPessoa("PJ");
					}
					simuladorMB.setTipoCalculo(contratos.getTipoCalculo());
					simuladorMB.setValorImovel(
							contratos.getValorCCB().multiply(BigDecimal.valueOf(3), MathContext.DECIMAL128));
					if (CommonsUtil.mesmoValor(simuladorMB.getValorImovel(), BigDecimal.ZERO)) {
						simuladorMB.setValorImovel(BigDecimal.ONE);
					}
					simuladorMB.setValorCredito(contratos.getValorCCB());
					simuladorMB.setTaxaJuros(contratos.getTxJurosParcelas());
					simuladorMB.setParcelas(BigInteger.valueOf(contratos.getListContratoCobrancaDetalhes().size() + 1));
					simuladorMB.setCarencia(BigInteger.valueOf(contratos.getMesesCarencia()));
					simuladorMB.setNaoCalcularMIP(contratos.isTemSeguroMIP());
					simuladorMB.setNaoCalcularDFI(contratos.isTemSeguroMIP());
					simuladorMB.setNaoCalcularTxAdm(contratos.isTemTxAdm());
					simuladorMB.setMostrarIPCA(true);
					simuladorMB.setTipoCalculoFinal('B');
					simuladorMB.setValidar(false);
					simuladorMB.setSimularComIPCA(false);
					simuladorMB.setIpcaSimulado(BigDecimal.ZERO);
					simuladorMB.simular();
				}
			}

			for (ContratoCobrancaFinanceiroDiaConsultaDetalhesVO ccd : contratos.getListContratoCobrancaDetalhes()) {

				if (ccd.isAmortizacao()) {
					somaAmortizacoes.add(ccd.getVlrParcela());
					continue;
				}

				// se já houve baixa parcial, utiliza a data de vencimento atualizada
				// senão utiliza a data de vencimento antiga
				String auxDataVencimentoStr = "";
				Date auxDataVencimento = null;
				if (ccd.getDataVencimentoAtual() != null) {
					auxDataVencimentoStr = sdf.format(ccd.getDataVencimentoAtual());
					auxDataVencimento = ccd.getDataVencimentoAtual();
				} else {
					auxDataVencimentoStr = sdf.format(ccd.getDataVencimento());
					auxDataVencimento = ccd.getDataVencimento();
				}

				try {
					auxDataVencimento = sdf.parse(auxDataVencimentoStr);
				} catch (ParseException e) {
					// TODO Auto-generated catch block
					e.printStackTrace();
				}

				if (auxDataVencimento.before(auxDataPagamento) && !ccd.isParcelaPaga()) {
					ccd.setParcelaVencida(true);

					// calcula coluna valor atualizado
					ContratoCobrancaUtilsMB contratoCobrancaUtilsMB;
					/*
					 * if (ccd.getVlrJuros().compareTo(BigDecimal.ZERO) == 0) {
					 * contratoCobrancaUtilsMB = new ContratoCobrancaUtilsMB( auxDataVencimento,
					 * auxDataPagamento, ccd.getVlrParcela(), BigDecimal.valueOf(1.00),
					 * ccd.getTxMulta()); } else { contratoCobrancaUtilsMB = new
					 * ContratoCobrancaUtilsMB( auxDataVencimento, auxDataPagamento,
					 * ccd.getVlrParcela(), ccd.getVlrJuros(), ccd.getTxMulta()); }
					 */
					if (ccd.getVlrJuros().compareTo(BigDecimal.ZERO) == 0) {
						contratoCobrancaUtilsMB = new ContratoCobrancaUtilsMB(auxDataVencimento, auxDataPagamento,
								ccd.getVlrParcela(), BigDecimal.valueOf(1.00),
								this.objetoContratoCobranca.getTxMulta());
					} else {
						contratoCobrancaUtilsMB = new ContratoCobrancaUtilsMB(auxDataVencimento, auxDataPagamento,
								ccd.getVlrParcela(), this.objetoContratoCobranca.getTxJuros(),
								this.objetoContratoCobranca.getTxMulta());
					}

					if (!ccd.isParcelaPaga()) {
						if (ccd.getListContratoCobrancaDetalhesParcial().size() > 0) {
							contratoCobrancaUtilsMB.recalculaValorSemMulta();
						} else {
							contratoCobrancaUtilsMB.recalculaValor();
						}
						ccd.setVlrParcelaAtualizada(contratoCobrancaUtilsMB.getValorAtualizado());
					} else {
						ccd.setVlrParcelaAtualizada(null);
					}
				}

				if (auxDataVencimento.equals(auxDataPagamento) && !ccd.isParcelaPaga()) {
					ccd.setParcelaVencendo(true);
				}

				BigDecimal somaBaixas = BigDecimal.ZERO;

				for (ContratoCobrancaFinanceiroDiaConsultaDetalhesParcialVO cBaixas : ccd
						.getListContratoCobrancaDetalhesParcial()) {
					ccd.setDataUltimoPagamento(cBaixas.getDataPagamento());

					if (cBaixas.getVlrRecebido() != null) {
						somaBaixas = somaBaixas.add(cBaixas.getVlrRecebido());
					}

					if (cBaixas.isBaixaGalleria() && cBaixas.getDataPagamento() == null) {
						ccd.setDataUltimoPagamento(cBaixas.getDataPagamentoGalleria());

						if (cBaixas.getVlrRecebido() != null) {
							somaBaixas = somaBaixas.add(cBaixas.getVlrRecebidoGalleria());
						}
					}

				}
				ccd.setValorTotalPagamento(somaBaixas.add(somaAmortizacoes));

				// seta valor original da parcela
				/*
				 * countParcelas = countParcelas + 1;
				 * 
				 * if (countParcelas < contratos.getListContratoCobrancaDetalhes().size()) {
				 * ccd.setVlrParcela(contratos.getVlrParcela()); } else { if
				 * (!contratos.isGeraParcelaFinal()) {
				 * ccd.setVlrParcela(contratos.getVlrParcela()); } }
				 */

			}
			BigDecimal cet = BigDecimal.ZERO;

			if (!CommonsUtil.semValor(simuladorMB.getSimulacao())) {
				if (!CommonsUtil.semValor(simuladorMB.getSimulacao().getCetAoMes())) {
					cet = simuladorMB.getSimulacao().getCetAoMes();
				}
			}
			contratos.setCetMes(cet);

			listContratos.add(contratos);
		}

		this.contratoCobrancaFinanceiroDia = listContratos;

		if (this.contratoCobrancaFinanceiroDia.size() == 0) {
			this.contratoCobrancaFinanceiroDia = new ArrayList<>();
		}

		this.contratoGerado = false;
	}

	public void geraRelFinanceiroDiaCompleto() {
		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();
		this.contratoCobrancaFinanceiroDia = new ArrayList<>();

		this.contratoCobrancaFinanceiroDia = contratoCobrancaDao.relatorioFinanceiroDiaCompleto();

		if (this.contratoCobrancaFinanceiroDia.size() == 0) {
			this.contratoCobrancaFinanceiroDia = new ArrayList<>();
		}

		this.contratoGerado = false;
	}

	public void geraRelFinanceiroDia() {
		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();
		this.contratoCobrancaFinanceiroDia = new ArrayList<>();

		this.contratoCobrancaFinanceiroDia = contratoCobrancaDao
				.relatorioFinanceiroDia(this.tipoContratoCobrancaFinanceiroDia);

		// Verifica se há parcelas em atraso, se sim irá colorir a linha na tela
		TimeZone zone = TimeZone.getDefault();
		Locale locale = new Locale("pt", "BR");
		Calendar dataHoje = Calendar.getInstance(zone, locale);
		Date auxDataPagamento = dataHoje.getTime();

		SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd", locale);
		String auxDataPagamentoStr = sdf.format(dataHoje.getTime());
		try {
			auxDataPagamento = sdf.parse(auxDataPagamentoStr);
		} catch (ParseException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}

		// onRowEdit - nova data
		rowEditNewDate = auxDataPagamento;

		List<ContratoCobrancaFinancerioDiaConsultaVO> listContratos = new ArrayList<>();

		for (ContratoCobrancaFinancerioDiaConsultaVO contratos : this.contratoCobrancaFinanceiroDia) {

			int countParcelas = 0;
			BigDecimal somaAmortizacoes = BigDecimal.ZERO;

			SimuladorMB simuladorMB = new SimuladorMB();

			if (!CommonsUtil.semValor(contratos.getValorCCB())) {
				if (contratos.getListContratoCobrancaDetalhes().size() > 0) {
					if (contratos.getPagador_cpf() != null) {
						simuladorMB.setTipoPessoa("PF");
					} else {
						simuladorMB.setTipoPessoa("PJ");
					}
					simuladorMB.setTipoCalculo(contratos.getTipoCalculo());
					simuladorMB.setValorImovel(
							contratos.getValorCCB().multiply(BigDecimal.valueOf(3), MathContext.DECIMAL128));
					if (CommonsUtil.mesmoValor(simuladorMB.getValorImovel(), BigDecimal.ZERO)) {
						simuladorMB.setValorImovel(BigDecimal.ONE);
					}
					simuladorMB.setValorCredito(contratos.getValorCCB());
					simuladorMB.setTaxaJuros(contratos.getTxJurosParcelas());
					simuladorMB.setParcelas(BigInteger.valueOf(contratos.getListContratoCobrancaDetalhes().size() + 1));
					simuladorMB.setCarencia(BigInteger.valueOf(contratos.getMesesCarencia()));
					simuladorMB.setNaoCalcularMIP(contratos.isTemSeguroMIP());
					simuladorMB.setNaoCalcularDFI(contratos.isTemSeguroMIP());
					simuladorMB.setNaoCalcularTxAdm(contratos.isTemTxAdm());
					simuladorMB.setMostrarIPCA(true);
					simuladorMB.setTipoCalculoFinal('B');
					simuladorMB.setValidar(false);
					simuladorMB.setSimularComIPCA(false);
					simuladorMB.setIpcaSimulado(BigDecimal.ZERO);
					simuladorMB.simular();
				}
			}

			// calcula coluna valor atualizado
			ContratoCobrancaUtilsMB contratoCobrancaUtilsMB;

			for (ContratoCobrancaFinanceiroDiaConsultaDetalhesVO ccd : contratos.getListContratoCobrancaDetalhes()) {

				if (ccd.isAmortizacao()) {
					somaAmortizacoes.add(ccd.getVlrParcela());
					continue;
				}

				// se já houve baixa parcial, utiliza a data de vencimento atualizada
				// senão utiliza a data de vencimento antiga
				String auxDataVencimentoStr = "";
				Date auxDataVencimento = null;
				if (ccd.getDataVencimentoAtual() != null) {
					auxDataVencimentoStr = sdf.format(ccd.getDataVencimentoAtual());
					auxDataVencimento = ccd.getDataVencimentoAtual();
				} else {
					auxDataVencimentoStr = sdf.format(ccd.getDataVencimento());
					auxDataVencimento = ccd.getDataVencimento();
				}

				try {
					auxDataVencimento = sdf.parse(auxDataVencimentoStr);
				} catch (ParseException e) {
					// TODO Auto-generated catch block
					e.printStackTrace();
				}

				if (auxDataVencimento.before(auxDataPagamento) && !ccd.isParcelaPaga()) {
					ccd.setParcelaVencida(true);
					/*
					 * if (ccd.getVlrJuros().compareTo(BigDecimal.ZERO) == 0) {
					 * contratoCobrancaUtilsMB = new ContratoCobrancaUtilsMB( auxDataVencimento,
					 * auxDataPagamento, ccd.getVlrParcela(), BigDecimal.valueOf(1.00),
					 * ccd.getTxMulta()); } else { contratoCobrancaUtilsMB = new
					 * ContratoCobrancaUtilsMB( auxDataVencimento, auxDataPagamento,
					 * ccd.getVlrParcela(), ccd.getVlrJuros(), ccd.getTxMulta()); }
					 */
					if (ccd.getVlrJuros().compareTo(BigDecimal.ZERO) == 0) {
						contratoCobrancaUtilsMB = new ContratoCobrancaUtilsMB(auxDataVencimento, auxDataPagamento,
								ccd.getVlrParcela(), BigDecimal.valueOf(1.00),
								this.objetoContratoCobranca.getTxMulta());
					} else {
						contratoCobrancaUtilsMB = new ContratoCobrancaUtilsMB(auxDataVencimento, auxDataPagamento,
								ccd.getVlrParcela(), this.objetoContratoCobranca.getTxJuros(),
								this.objetoContratoCobranca.getTxMulta());
					}

					if (!ccd.isParcelaPaga()) {
						if (ccd.getListContratoCobrancaDetalhesParcial().size() > 0) {
							contratoCobrancaUtilsMB.recalculaValorSemMulta();
						} else {
							contratoCobrancaUtilsMB.recalculaValor();
						}
						ccd.setVlrParcelaAtualizada(contratoCobrancaUtilsMB.getValorAtualizado());
					} else {
						ccd.setVlrParcelaAtualizada(null);
					}
				}

				if (auxDataVencimento.equals(auxDataPagamento) && !ccd.isParcelaPaga()) {
					ccd.setParcelaVencendo(true);
				}

				BigDecimal somaBaixas = BigDecimal.ZERO;

				for (ContratoCobrancaFinanceiroDiaConsultaDetalhesParcialVO cBaixas : ccd
						.getListContratoCobrancaDetalhesParcial()) {
					if (this.consideraDataCorteRelatorioDia) {
						if (cBaixas.getDataPagamento().before(this.filtroDataCorteRelatorioDia)) {
							ccd.setDataUltimoPagamento(cBaixas.getDataPagamento());

							if (cBaixas.getVlrRecebido() != null) {
								somaBaixas = somaBaixas.add(cBaixas.getVlrRecebido());
							}
						}
					} else {
						ccd.setDataUltimoPagamento(cBaixas.getDataPagamento());

						if (cBaixas.getVlrRecebido() != null) {
							somaBaixas = somaBaixas.add(cBaixas.getVlrRecebido());
						}
					}

					/*
					 * if (cBaixas.isBaixaGalleria() && cBaixas.getDataPagamento() == null) {
					 * ccd.setDataUltimoPagamento(cBaixas.getDataPagamentoGalleria());
					 * 
					 * if (cBaixas.getVlrRecebido() != null) { somaBaixas =
					 * somaBaixas.add(cBaixas.getVlrRecebidoGalleria()); } }
					 */

				}
				ccd.setValorTotalPagamento(somaBaixas.add(somaAmortizacoes));

				// seta valor original da parcela
				/*
				 * countParcelas = countParcelas + 1;
				 * 
				 * if (countParcelas < contratos.getListContratoCobrancaDetalhes().size()) {
				 * ccd.setVlrParcela(contratos.getVlrParcela()); } else { if
				 * (!contratos.isGeraParcelaFinal()) {
				 * ccd.setVlrParcela(contratos.getVlrParcela()); } }
				 */

			}
			BigDecimal cet = BigDecimal.ZERO;

			if (!CommonsUtil.semValor(simuladorMB.getSimulacao())) {
				if (!CommonsUtil.semValor(simuladorMB.getSimulacao().getCetAoMes())) {
					cet = simuladorMB.getSimulacao().getCetAoMes();
				}
			}
			contratos.setCetMes(cet);

			listContratos.add(contratos);
		}

		this.contratoCobrancaFinanceiroDia = listContratos;

		if (this.contratoCobrancaFinanceiroDia.size() == 0) {
			this.contratoCobrancaFinanceiroDia = new ArrayList<>();
		}

		this.contratoGerado = false;
	}

	public void geraXLSFinanceiroDiaCompleto() throws IOException {

		ParametrosDao pDao = new ParametrosDao();
		this.pathContrato = pDao.findByFilter("nome", "LOCACAO_PATH_COBRANCA").get(0).getValorString();
		this.nomeContrato = "Relatório Financeiro Dia - Completo.xlsx";

		TimeZone zone = TimeZone.getDefault();
		Locale locale = new Locale("pt", "BR");
		Calendar dataHoje = Calendar.getInstance(zone, locale);

		dataHoje.set(Calendar.HOUR_OF_DAY, 0);
		dataHoje.set(Calendar.MINUTE, 0);
		dataHoje.set(Calendar.SECOND, 0);
		dataHoje.set(Calendar.MILLISECOND, 0);

		// dataHoje.add(Calendar.DAY_OF_MONTH, 1);

		String excelFileName = this.pathContrato + this.nomeContrato;// name of excel file

		String sheetName = "Resultado";// name of sheet

		XSSFWorkbook wb = new XSSFWorkbook();
		XSSFSheet sheet = wb.createSheet(sheetName);
		sheet.setDefaultColumnWidth(25);

		// Style para cabeçalho
		XSSFCellStyle cell_style = wb.createCellStyle();
		cell_style.setFillForegroundColor(IndexedColors.GREY_25_PERCENT.getIndex());
		cell_style.setFillPattern(FillPatternType.SOLID_FOREGROUND);

		XSSFFont font = wb.createFont();
		font.setBold(true);
		cell_style.setFont(font);
		cell_style.setAlignment(HorizontalAlignment.CENTER);
		cell_style.setVerticalAlignment(VerticalAlignment.CENTER);
		cell_style.setBorderBottom(BorderStyle.THIN);
		cell_style.setBorderTop(BorderStyle.THIN);
		cell_style.setBorderRight(BorderStyle.THIN);
		cell_style.setBorderLeft(BorderStyle.THIN);
		cell_style.setWrapText(true);

		// Style para cabeçalho
		XSSFCellStyle cell_style_pago_String = wb.createCellStyle();
		cell_style_pago_String.setFillForegroundColor(IndexedColors.LIGHT_GREEN.getIndex());
		cell_style_pago_String.setFillPattern(FillPatternType.SOLID_FOREGROUND);
		cell_style_pago_String.setFont(font);
		cell_style_pago_String.setAlignment(HorizontalAlignment.CENTER);
		cell_style_pago_String.setVerticalAlignment(VerticalAlignment.CENTER);
		cell_style_pago_String.setBorderBottom(BorderStyle.THIN);
		cell_style_pago_String.setBorderTop(BorderStyle.THIN);
		cell_style_pago_String.setBorderRight(BorderStyle.THIN);
		cell_style_pago_String.setBorderLeft(BorderStyle.THIN);
		cell_style_pago_String.setWrapText(true);

		// Style para cabeçalho
		XSSFCellStyle cell_style_pago_Date = wb.createCellStyle();
		cell_style_pago_Date.setFillForegroundColor(IndexedColors.LIGHT_GREEN.getIndex());
		cell_style_pago_Date.setFillPattern(FillPatternType.SOLID_FOREGROUND);
		cell_style_pago_Date.setFont(font);
		cell_style_pago_Date.setAlignment(HorizontalAlignment.CENTER);
		cell_style_pago_Date.setVerticalAlignment(VerticalAlignment.CENTER);
		cell_style_pago_Date.setBorderBottom(BorderStyle.THIN);
		cell_style_pago_Date.setBorderTop(BorderStyle.THIN);
		cell_style_pago_Date.setBorderRight(BorderStyle.THIN);
		cell_style_pago_Date.setBorderLeft(BorderStyle.THIN);
		cell_style_pago_Date.setWrapText(true);
		cell_style_pago_Date.setDataFormat((short) BuiltinFormats.getBuiltinFormat("m/d/yy"));

		// Style para cabeçalho
		XSSFCellStyle cell_style_pago_Number = wb.createCellStyle();
		cell_style_pago_Number.setFillForegroundColor(IndexedColors.LIGHT_GREEN.getIndex());
		cell_style_pago_Number.setFillPattern(FillPatternType.SOLID_FOREGROUND);
		cell_style_pago_Number.setFont(font);
		cell_style_pago_Number.setAlignment(HorizontalAlignment.CENTER);
		cell_style_pago_Number.setVerticalAlignment(VerticalAlignment.CENTER);
		cell_style_pago_Number.setBorderBottom(BorderStyle.THIN);
		cell_style_pago_Number.setBorderTop(BorderStyle.THIN);
		cell_style_pago_Number.setBorderRight(BorderStyle.THIN);
		cell_style_pago_Number.setBorderLeft(BorderStyle.THIN);
		cell_style_pago_Number.setWrapText(true);
		CreationHelper chNumber = wb.getCreationHelper();
		cell_style_pago_Number.setDataFormat(
				chNumber.createDataFormat().getFormat("_(R$* #,##0.00_);_(R$* (#,##0.00);_(R$* \"-\"??_);_(@_)"));

		// Style para cabeçalho
		XSSFCellStyle cell_style_vencida_String = wb.createCellStyle();
		cell_style_vencida_String.setFillForegroundColor(IndexedColors.RED.getIndex());
		cell_style_vencida_String.setFillPattern(FillPatternType.SOLID_FOREGROUND);
		cell_style_vencida_String.setFont(font);
		cell_style_vencida_String.setAlignment(HorizontalAlignment.CENTER);
		cell_style_vencida_String.setVerticalAlignment(VerticalAlignment.CENTER);
		cell_style_vencida_String.setBorderBottom(BorderStyle.THIN);
		cell_style_vencida_String.setBorderTop(BorderStyle.THIN);
		cell_style_vencida_String.setBorderRight(BorderStyle.THIN);
		cell_style_vencida_String.setBorderLeft(BorderStyle.THIN);
		cell_style_vencida_String.setWrapText(true);

		// Style para cabeçalho
		XSSFCellStyle cell_style_vencida_Date = wb.createCellStyle();
		cell_style_vencida_Date.setFillForegroundColor(IndexedColors.RED.getIndex());
		cell_style_vencida_Date.setFillPattern(FillPatternType.SOLID_FOREGROUND);
		cell_style_vencida_Date.setFont(font);
		cell_style_vencida_Date.setAlignment(HorizontalAlignment.CENTER);
		cell_style_vencida_Date.setVerticalAlignment(VerticalAlignment.CENTER);
		cell_style_vencida_Date.setBorderBottom(BorderStyle.THIN);
		cell_style_vencida_Date.setBorderTop(BorderStyle.THIN);
		cell_style_vencida_Date.setBorderRight(BorderStyle.THIN);
		cell_style_vencida_Date.setBorderLeft(BorderStyle.THIN);
		cell_style_vencida_Date.setWrapText(true);
		cell_style_vencida_Date.setDataFormat((short) BuiltinFormats.getBuiltinFormat("m/d/yy"));

		// Style para cabeçalho
		XSSFCellStyle cell_style_vencida_Number = wb.createCellStyle();
		cell_style_vencida_Number.setFillForegroundColor(IndexedColors.RED.getIndex());
		cell_style_vencida_Number.setFillPattern(FillPatternType.SOLID_FOREGROUND);
		cell_style_vencida_Number.setFont(font);
		cell_style_vencida_Number.setAlignment(HorizontalAlignment.CENTER);
		cell_style_vencida_Number.setVerticalAlignment(VerticalAlignment.CENTER);
		cell_style_vencida_Number.setBorderBottom(BorderStyle.THIN);
		cell_style_vencida_Number.setBorderTop(BorderStyle.THIN);
		cell_style_vencida_Number.setBorderRight(BorderStyle.THIN);
		cell_style_vencida_Number.setBorderLeft(BorderStyle.THIN);
		cell_style_vencida_Number.setWrapText(true);
		chNumber = wb.getCreationHelper();
		cell_style_vencida_Number.setDataFormat(
				chNumber.createDataFormat().getFormat("_(R$* #,##0.00_);_(R$* (#,##0.00);_(R$* \"-\"??_);_(@_)"));

		// iterating r number of rows
		// cria CABEÇALHO
		int countLine = 0;
		XSSFRow row = sheet.createRow(countLine);
		XSSFCell cell;
		cell = row.createCell(0);
		cell.setCellValue("Contrato");
		cell.setCellStyle(cell_style);
		cell = row.createCell(1);
		cell.setCellValue("Data Contrato");
		cell.setCellStyle(cell_style);
		cell = row.createCell(2);
		cell.setCellValue("Pagador");
		cell.setCellStyle(cell_style);
		cell = row.createCell(3);
		cell.setCellValue("CPF/CNPJ");
		cell.setCellStyle(cell_style);
		cell = row.createCell(4);
		cell.setCellValue("E-mail");
		cell.setCellStyle(cell_style);
		cell = row.createCell(5);
		cell.setCellValue("Telefone");
		cell.setCellStyle(cell_style);
		cell = row.createCell(6);
		cell.setCellValue("Parcelas");
		cell.setCellStyle(cell_style);
		cell = row.createCell(7);
		cell.setCellValue("Corrigido?");
		cell.setCellStyle(cell_style);
		cell = row.createCell(8);
		cell.setCellValue("Quitado?");
		cell.setCellStyle(cell_style);
		cell = row.createCell(9);
		cell.setCellValue("Empresa");
		cell.setCellStyle(cell_style);
		cell = row.createCell(10);
		cell.setCellValue("Região Imóvel");
		cell.setCellStyle(cell_style);
		cell = row.createCell(11);
		cell.setCellValue("Valor CCB");
		cell.setCellStyle(cell_style);
		cell = row.createCell(12);
		cell.setCellValue("Taxa de Juros (%)");
		cell.setCellStyle(cell_style);
		cell = row.createCell(13);
		cell.setCellValue("Valor Imóvel");
		cell.setCellStyle(cell_style);

		// cria estilo para dados em geral
		cell_style = wb.createCellStyle();
		cell_style.setAlignment(HorizontalAlignment.CENTER);
		cell_style.setVerticalAlignment(VerticalAlignment.CENTER);
		cell_style.setBorderBottom(BorderStyle.THIN);
		cell_style.setBorderTop(BorderStyle.THIN);
		cell_style.setBorderRight(BorderStyle.THIN);
		cell_style.setBorderLeft(BorderStyle.THIN);
		cell_style.setWrapText(true);

		// cria estilo especifico para coluna type numérico
		CellStyle numericStyle = wb.createCellStyle();
		numericStyle.setAlignment(HorizontalAlignment.CENTER);
		numericStyle.setVerticalAlignment(VerticalAlignment.CENTER);
		numericStyle.setBorderBottom(BorderStyle.THIN);
		numericStyle.setBorderTop(BorderStyle.THIN);
		numericStyle.setBorderRight(BorderStyle.THIN);
		numericStyle.setBorderLeft(BorderStyle.THIN);
		numericStyle.setWrapText(true);
		// cria a formatação para moeda
		CreationHelper ch = wb.getCreationHelper();
		numericStyle.setDataFormat(
				ch.createDataFormat().getFormat("_(R$* #,##0.00_);_(R$* (#,##0.00);_(R$* \"-\"??_);_(@_)"));

		// cria estilo especifico para coluna type numérico
		CellStyle numberStyle = wb.createCellStyle();
		numberStyle.setAlignment(HorizontalAlignment.CENTER);
		numberStyle.setVerticalAlignment(VerticalAlignment.CENTER);
		numberStyle.setBorderBottom(BorderStyle.THIN);
		numberStyle.setBorderTop(BorderStyle.THIN);
		numberStyle.setBorderRight(BorderStyle.THIN);
		numberStyle.setBorderLeft(BorderStyle.THIN);
		numberStyle.setWrapText(true);

		// cria estilo especifico para coluna type Date
		CellStyle dateStyle = wb.createCellStyle();
		dateStyle.setAlignment(HorizontalAlignment.CENTER);
		dateStyle.setVerticalAlignment(VerticalAlignment.CENTER);
		dateStyle.setBorderBottom(BorderStyle.THIN);
		dateStyle.setBorderTop(BorderStyle.THIN);
		dateStyle.setBorderRight(BorderStyle.THIN);
		dateStyle.setBorderLeft(BorderStyle.THIN);
		dateStyle.setWrapText(true);
		// cria a formatação para Date
		dateStyle.setDataFormat((short) BuiltinFormats.getBuiltinFormat("m/d/yy"));

		int linhaInicioContrato = 0;

		for (ContratoCobrancaFinancerioDiaConsultaVO record : this.contratoCobrancaFinanceiroDia) {
			countLine++;
			linhaInicioContrato = countLine;
			row = sheet.createRow(countLine);

			// Contrato
			cell = row.createCell(0);
			cell.setCellStyle(cell_style);
			cell.setCellValue(record.getNumeroContrato());

			// Data do Contrato
			cell = row.createCell(1);
			cell.setCellStyle(dateStyle);
			cell.setCellValue(record.getDataContrato());

			// Pagador
			cell = row.createCell(2);
			cell.setCellStyle(cell_style);
			cell.setCellValue(record.getNomePagador());

			// CPF CNPJ
			cell = row.createCell(3);
			cell.setCellStyle(cell_style);
			cell.setCellValue(record.getDocumentoPagador());

			// Email
			cell = row.createCell(4);
			cell.setCellStyle(cell_style);
			cell.setCellValue(record.getEmailPagador());

			// Telefone
			cell = row.createCell(5);
			cell.setCellStyle(cell_style);
			cell.setCellValue(record.getCelularPagador());

			// Parcelas
			cell = row.createCell(6);
			cell.setCellStyle(cell_style);
			cell.setCellValue(record.getQtdeParcelas());

			// Corrigido
			cell = row.createCell(7);
			cell.setCellStyle(cell_style);

			if (record.isCorrigidoIPCA() || record.isCorrigidoNovoIPCA()) {
				cell.setCellValue("Sim");
			} else {
				cell.setCellValue("Não");
			}

			// Quitado
			cell = row.createCell(8);
			cell.setCellStyle(cell_style);

			if (record.isContratoQuitado()) {
				cell.setCellValue("Sim");
			} else {
				cell.setCellValue("Não");
			}

			// Empresa
			cell = row.createCell(9);
			cell.setCellStyle(cell_style);
			cell.setCellValue(record.getEmpresa());

			// Região Imóvel
			cell = row.createCell(10);
			cell.setCellStyle(cell_style);
			cell.setCellValue(record.getNomeCidadeImovel());

			// Valor CCB
			cell = row.createCell(11);
			cell.setCellStyle(numericStyle);
			cell.setCellType(CellType.NUMERIC);
			if (record.getValorCCB() != null) {
				cell.setCellValue(((BigDecimal) record.getValorCCB()).doubleValue());
			} else {
				cell.setCellValue(Double.valueOf("0"));
			}

			// Taxa Juros
			cell = row.createCell(12);
			cell.setCellStyle(numberStyle);
			if (record.getTxJurosParcelas() != null) {
				cell.setCellValue(((BigDecimal) record.getTxJurosParcelas()).doubleValue());
			} else {
				cell.setCellValue(Double.valueOf("0"));
			}

			// Valor Imóvel
			cell = row.createCell(13);
			cell.setCellStyle(numericStyle);
			if (record.getValorImovel() != null) {
				cell.setCellValue(((BigDecimal) record.getValorImovel()).doubleValue());
			} else {
				cell.setCellValue(Double.valueOf("0"));
			}
		}

		FileOutputStream fileOut = new FileOutputStream(excelFileName);

		// write this workbook to an Outputstream.
		wb.write(fileOut);
		fileOut.flush();
		fileOut.close();

		this.contratoGerado = true;
	}

	public StreamedContent geraXLSFinanceiroDia(boolean espelhamento) throws IOException {

		ParametrosDao pDao = new ParametrosDao();
		if (espelhamento)
			this.nomeContrato = "Relatório Financeiro Dia Espelhamento.xlsx";
		else
			this.nomeContrato = "Relatório Financeiro Dia.xlsx";

		TimeZone zone = TimeZone.getDefault();
		Locale locale = new Locale("pt", "BR");
		Calendar dataHoje = Calendar.getInstance(zone, locale);

		dataHoje.set(Calendar.HOUR_OF_DAY, 0);
		dataHoje.set(Calendar.MINUTE, 0);
		dataHoje.set(Calendar.SECOND, 0);
		dataHoje.set(Calendar.MILLISECOND, 0);

		// dataHoje.add(Calendar.DAY_OF_MONTH, 1);

		// String excelFileName = this.pathContrato + this.nomeContrato;// name of excel
		// file

		String sheetName = "Resultado";// name of sheet

		XSSFWorkbook wb = new XSSFWorkbook();
		XSSFSheet sheet = wb.createSheet(sheetName);
		sheet.setDefaultColumnWidth(25);

		// Style para cabeçalho
		XSSFCellStyle cell_style = wb.createCellStyle();
		cell_style.setFillForegroundColor(IndexedColors.GREY_25_PERCENT.getIndex());
		cell_style.setFillPattern(FillPatternType.SOLID_FOREGROUND);

		XSSFFont font = wb.createFont();
		font.setBold(true);
		cell_style.setFont(font);
		cell_style.setAlignment(HorizontalAlignment.CENTER);
		cell_style.setVerticalAlignment(VerticalAlignment.CENTER);
		cell_style.setBorderBottom(BorderStyle.THIN);
		cell_style.setBorderTop(BorderStyle.THIN);
		cell_style.setBorderRight(BorderStyle.THIN);
		cell_style.setBorderLeft(BorderStyle.THIN);
		cell_style.setWrapText(true);

		// Style para cabeçalho
		XSSFCellStyle cell_style_pago_String = wb.createCellStyle();
		cell_style_pago_String.setFillForegroundColor(IndexedColors.LIGHT_GREEN.getIndex());
		cell_style_pago_String.setFillPattern(FillPatternType.SOLID_FOREGROUND);
		cell_style_pago_String.setFont(font);
		cell_style_pago_String.setAlignment(HorizontalAlignment.CENTER);
		cell_style_pago_String.setVerticalAlignment(VerticalAlignment.CENTER);
		cell_style_pago_String.setBorderBottom(BorderStyle.THIN);
		cell_style_pago_String.setBorderTop(BorderStyle.THIN);
		cell_style_pago_String.setBorderRight(BorderStyle.THIN);
		cell_style_pago_String.setBorderLeft(BorderStyle.THIN);
		cell_style_pago_String.setWrapText(true);

		// Style para cabeçalho
		XSSFCellStyle cell_style_pago_Date = wb.createCellStyle();
		cell_style_pago_Date.setFillForegroundColor(IndexedColors.LIGHT_GREEN.getIndex());
		cell_style_pago_Date.setFillPattern(FillPatternType.SOLID_FOREGROUND);
		cell_style_pago_Date.setFont(font);
		cell_style_pago_Date.setAlignment(HorizontalAlignment.CENTER);
		cell_style_pago_Date.setVerticalAlignment(VerticalAlignment.CENTER);
		cell_style_pago_Date.setBorderBottom(BorderStyle.THIN);
		cell_style_pago_Date.setBorderTop(BorderStyle.THIN);
		cell_style_pago_Date.setBorderRight(BorderStyle.THIN);
		cell_style_pago_Date.setBorderLeft(BorderStyle.THIN);
		cell_style_pago_Date.setWrapText(true);
		cell_style_pago_Date.setDataFormat((short) BuiltinFormats.getBuiltinFormat("m/d/yy"));

		// Style para cabeçalho
		XSSFCellStyle cell_style_pago_Number = wb.createCellStyle();
		cell_style_pago_Number.setFillForegroundColor(IndexedColors.LIGHT_GREEN.getIndex());
		cell_style_pago_Number.setFillPattern(FillPatternType.SOLID_FOREGROUND);
		cell_style_pago_Number.setFont(font);
		cell_style_pago_Number.setAlignment(HorizontalAlignment.CENTER);
		cell_style_pago_Number.setVerticalAlignment(VerticalAlignment.CENTER);
		cell_style_pago_Number.setBorderBottom(BorderStyle.THIN);
		cell_style_pago_Number.setBorderTop(BorderStyle.THIN);
		cell_style_pago_Number.setBorderRight(BorderStyle.THIN);
		cell_style_pago_Number.setBorderLeft(BorderStyle.THIN);
		cell_style_pago_Number.setWrapText(true);
		CreationHelper chNumber = wb.getCreationHelper();
		cell_style_pago_Number.setDataFormat(
				chNumber.createDataFormat().getFormat("_(R$* #,##0.00_);_(R$* (#,##0.00);_(R$* \"-\"??_);_(@_)"));

		// Style para cabeçalho
		XSSFCellStyle cell_style_vencida_String = wb.createCellStyle();
		cell_style_vencida_String.setFillForegroundColor(IndexedColors.RED.getIndex());
		cell_style_vencida_String.setFillPattern(FillPatternType.SOLID_FOREGROUND);
		cell_style_vencida_String.setFont(font);
		cell_style_vencida_String.setAlignment(HorizontalAlignment.CENTER);
		cell_style_vencida_String.setVerticalAlignment(VerticalAlignment.CENTER);
		cell_style_vencida_String.setBorderBottom(BorderStyle.THIN);
		cell_style_vencida_String.setBorderTop(BorderStyle.THIN);
		cell_style_vencida_String.setBorderRight(BorderStyle.THIN);
		cell_style_vencida_String.setBorderLeft(BorderStyle.THIN);
		cell_style_vencida_String.setWrapText(true);

		// Style para cabeçalho
		XSSFCellStyle cell_style_vencida_Date = wb.createCellStyle();
		cell_style_vencida_Date.setFillForegroundColor(IndexedColors.RED.getIndex());
		cell_style_vencida_Date.setFillPattern(FillPatternType.SOLID_FOREGROUND);
		cell_style_vencida_Date.setFont(font);
		cell_style_vencida_Date.setAlignment(HorizontalAlignment.CENTER);
		cell_style_vencida_Date.setVerticalAlignment(VerticalAlignment.CENTER);
		cell_style_vencida_Date.setBorderBottom(BorderStyle.THIN);
		cell_style_vencida_Date.setBorderTop(BorderStyle.THIN);
		cell_style_vencida_Date.setBorderRight(BorderStyle.THIN);
		cell_style_vencida_Date.setBorderLeft(BorderStyle.THIN);
		cell_style_vencida_Date.setWrapText(true);
		cell_style_vencida_Date.setDataFormat((short) BuiltinFormats.getBuiltinFormat("m/d/yy"));

		// Style para cabeçalho
		XSSFCellStyle cell_style_vencida_Number = wb.createCellStyle();
		cell_style_vencida_Number.setFillForegroundColor(IndexedColors.RED.getIndex());
		cell_style_vencida_Number.setFillPattern(FillPatternType.SOLID_FOREGROUND);
		cell_style_vencida_Number.setFont(font);
		cell_style_vencida_Number.setAlignment(HorizontalAlignment.CENTER);
		cell_style_vencida_Number.setVerticalAlignment(VerticalAlignment.CENTER);
		cell_style_vencida_Number.setBorderBottom(BorderStyle.THIN);
		cell_style_vencida_Number.setBorderTop(BorderStyle.THIN);
		cell_style_vencida_Number.setBorderRight(BorderStyle.THIN);
		cell_style_vencida_Number.setBorderLeft(BorderStyle.THIN);
		cell_style_vencida_Number.setWrapText(true);
		chNumber = wb.getCreationHelper();
		cell_style_vencida_Number.setDataFormat(
				chNumber.createDataFormat().getFormat("_(R$* #,##0.00_);_(R$* (#,##0.00);_(R$* \"-\"??_);_(@_)"));

		// iterating r number of rows
		// cria CABEÇALHO
		int countLine = 0;
		XSSFRow row = sheet.createRow(countLine);
		XSSFCell cell;
		cell = row.createCell(0);
		cell.setCellValue("Contrato");
		cell.setCellStyle(cell_style);
		cell = row.createCell(1);
		cell.setCellValue("Data Contrato");
		cell.setCellStyle(cell_style);
		cell = row.createCell(2);
		cell.setCellValue("Pagador");
		cell.setCellStyle(cell_style);
		cell = row.createCell(3);
		cell.setCellValue("CPF/CNPJ");
		cell.setCellStyle(cell_style);
		cell = row.createCell(4);
		cell.setCellValue("Dt. Nascimento");
		cell.setCellStyle(cell_style);
		cell = row.createCell(5);
		cell.setCellValue("Endereço");
		cell.setCellStyle(cell_style);
		cell = row.createCell(6);
		cell.setCellValue("Nome Cônjuge");
		cell.setCellStyle(cell_style);
		cell = row.createCell(7);
		cell.setCellValue("CPF Cônjuge");
		cell.setCellStyle(cell_style);
		cell = row.createCell(8);
		cell.setCellValue("Região Imóvel");
		cell.setCellStyle(cell_style);
		cell = row.createCell(9);
		cell.setCellValue("Tipo Imóvel");
		cell.setCellStyle(cell_style);
		cell = row.createCell(10);
		cell.setCellValue("Valor Imóvel");
		cell.setCellStyle(cell_style);
		cell = row.createCell(11);
		cell.setCellValue("Valor CCB");
		cell.setCellStyle(cell_style);
		cell = row.createCell(12);
		cell.setCellValue("Taxa de Juros (%)");
		cell.setCellStyle(cell_style);
		cell = row.createCell(13);
		cell.setCellValue("Tipo de Juros");
		cell.setCellStyle(cell_style);
		cell = row.createCell(14);
		cell.setCellValue("CET");
		cell.setCellStyle(cell_style);
		cell = row.createCell(15);
		cell.setCellValue("CCB-Parcela");
		cell.setCellStyle(cell_style);
		cell = row.createCell(16);
		cell.setCellValue("Parcela");
		cell.setCellStyle(cell_style);
		cell = row.createCell(17);
		cell.setCellValue("Data Vencimento");
		cell.setCellStyle(cell_style);
		cell = row.createCell(18);
		cell.setCellValue("Amortização");
		cell.setCellStyle(cell_style);
		cell = row.createCell(19);
		cell.setCellValue("Juros");
		cell.setCellStyle(cell_style);
		cell = row.createCell(20);
		cell.setCellValue("Seguro DFI");
		cell.setCellStyle(cell_style);
		cell = row.createCell(21);
		cell.setCellValue("Seguro MIP");
		cell.setCellStyle(cell_style);
		cell = row.createCell(22);
		cell.setCellValue("Taxa ADM");
		cell.setCellStyle(cell_style);
		cell = row.createCell(23);
		cell.setCellValue("Valor");
		cell.setCellStyle(cell_style);
		cell = row.createCell(24);
		cell.setCellValue("Data Pagto.");
		cell.setCellStyle(cell_style);
		cell = row.createCell(25);
		cell.setCellValue("Valor Pago");
		cell.setCellStyle(cell_style);

		// cria estilo para dados em geral
		cell_style = wb.createCellStyle();
		cell_style.setAlignment(HorizontalAlignment.CENTER);
		cell_style.setVerticalAlignment(VerticalAlignment.CENTER);
		cell_style.setBorderBottom(BorderStyle.THIN);
		cell_style.setBorderTop(BorderStyle.THIN);
		cell_style.setBorderRight(BorderStyle.THIN);
		cell_style.setBorderLeft(BorderStyle.THIN);
		cell_style.setWrapText(true);

		// cria estilo especifico para coluna type numérico
		CellStyle numericStyle = wb.createCellStyle();
		numericStyle.setAlignment(HorizontalAlignment.CENTER);
		numericStyle.setVerticalAlignment(VerticalAlignment.CENTER);
		numericStyle.setBorderBottom(BorderStyle.THIN);
		numericStyle.setBorderTop(BorderStyle.THIN);
		numericStyle.setBorderRight(BorderStyle.THIN);
		numericStyle.setBorderLeft(BorderStyle.THIN);
		numericStyle.setWrapText(true);
		// cria a formatação para moeda
		CreationHelper ch = wb.getCreationHelper();
		numericStyle.setDataFormat(
				ch.createDataFormat().getFormat("_(R$* #,##0.00_);_(R$* (#,##0.00);_(R$* \"-\"??_);_(@_)"));

		// cria estilo especifico para coluna type numérico
		CellStyle numberStyle = wb.createCellStyle();
		numberStyle.setAlignment(HorizontalAlignment.CENTER);
		numberStyle.setVerticalAlignment(VerticalAlignment.CENTER);
		numberStyle.setBorderBottom(BorderStyle.THIN);
		numberStyle.setBorderTop(BorderStyle.THIN);
		numberStyle.setBorderRight(BorderStyle.THIN);
		numberStyle.setBorderLeft(BorderStyle.THIN);
		numberStyle.setWrapText(true);

		// cria estilo especifico para coluna type Date
		CellStyle dateStyle = wb.createCellStyle();
		dateStyle.setAlignment(HorizontalAlignment.CENTER);
		dateStyle.setVerticalAlignment(VerticalAlignment.CENTER);
		dateStyle.setBorderBottom(BorderStyle.THIN);
		dateStyle.setBorderTop(BorderStyle.THIN);
		dateStyle.setBorderRight(BorderStyle.THIN);
		dateStyle.setBorderLeft(BorderStyle.THIN);
		dateStyle.setWrapText(true);
		// cria a formatação para Date
		dateStyle.setDataFormat((short) BuiltinFormats.getBuiltinFormat("m/d/yy"));

		int linhaInicioContrato = 0;

		// verifica se tem selecionados ou se serão todos
		if (this.selectedContratoCobrancaFinanceiroDia.size() == 0) {
			this.selectedContratoCobrancaFinanceiroDia = this.contratoCobrancaFinanceiroDia;
		}

		for (ContratoCobrancaFinancerioDiaConsultaVO record : this.selectedContratoCobrancaFinanceiroDia) {
			countLine++;
			linhaInicioContrato = countLine;
			row = sheet.createRow(countLine);

			// Contrato
			cell = row.createCell(0);
			cell.setCellStyle(cell_style);
			cell.setCellValue(record.getNumeroContrato());

			// Data do Contrato
			cell = row.createCell(1);
			cell.setCellStyle(dateStyle);
			if (tipoContratoCobrancaFinanceiroDia.equals("PreAprovado")) {
				cell.setCellValue(record.getDataContrato());
			} else {
				cell.setCellValue(record.getDataInicio());
			}

			// Pagador
			cell = row.createCell(2);
			cell.setCellStyle(cell_style);
			cell.setCellValue(record.getPagador_nome());

			// CPF CNPJ
			cell = row.createCell(3);
			cell.setCellStyle(cell_style);
			if (record.getPagador_cpf() != null && !record.getPagador_cpf().equals("")) {
				cell.setCellValue(record.getPagador_cpf());
			} else {
				cell.setCellValue(record.getPagador_cpf());
			}

			// Data NAscimento Pagador
			cell = row.createCell(4);
			cell.setCellStyle(dateStyle);
			if (record.getPagador_dtNascimento() != null) {
				cell.setCellValue(record.getPagador_dtNascimento());
			}

			// Endereço pagador
			cell = row.createCell(5);
			cell.setCellStyle(cell_style);
			cell.setCellValue(record.getPagador_endereco() + ", " + record.getPagador_numero() + " - "
					+ record.getPagador_cidade() + " / " + record.getPagador_estado() + " (CEP: "
					+ record.getPagador_cep() + ")");

			// Nome Conjuge
			cell = row.createCell(6);
			cell.setCellStyle(cell_style);
			if (record.getPagador_nomeConjuge() != null) {
				cell.setCellValue(record.getPagador_nomeConjuge());
			}

			// CPF Conjuge
			cell = row.createCell(7);
			cell.setCellStyle(cell_style);
			if (record.getPagador_cpfConjuge() != null) {
				cell.setCellValue(record.getPagador_cpfConjuge());
			}

			// Região Imóvel
			cell = row.createCell(8);
			cell.setCellStyle(cell_style);
			if (record.getImovel_cidade() != null && record.getImovel_estado() != null) {
				cell.setCellValue(record.getImovel_cidade() + "/" + record.getImovel_estado());
			}

			// Tipo Imovel
			cell = row.createCell(9);
			cell.setCellStyle(cell_style);
			if (record.getTipoImovel() != null) {
				cell.setCellValue(record.getTipoImovel());
			}

			// Valor Imovel
			cell = row.createCell(10);
			cell.setCellStyle(numericStyle);
			cell.setCellType(CellType.NUMERIC);
			if (record.getValorImovel() != null) {
				cell.setCellValue(((BigDecimal) record.getValorImovel()).doubleValue());
			} else {
				cell.setCellValue(Double.valueOf("0"));
			}

			// Valor CCB
			cell = row.createCell(11);
			cell.setCellStyle(numericStyle);
			cell.setCellType(CellType.NUMERIC);
			if (record.getValorCCB() != null) {
				cell.setCellValue(((BigDecimal) record.getValorCCB()).doubleValue());
			} else {
				cell.setCellValue(Double.valueOf("0"));
			}

			// Taxa Juros
			cell = row.createCell(12);
			cell.setCellStyle(numberStyle);
			if (record.getTxJurosParcelas() != null) {
				cell.setCellValue(((BigDecimal) record.getTxJurosParcelas()).doubleValue());
			} else {
				cell.setCellValue(Double.valueOf("0"));
			}

			// Tipo Juros
			cell = row.createCell(13);
			cell.setCellStyle(cell_style);
			if (record.isCorrigidoIPCA() || record.isCorrigidoNovoIPCA()) {
				cell.setCellValue("Pós-Fixado");
			} else {
				cell.setCellValue("Pré-Fixado");
			}

			// CET
			cell = row.createCell(14);
			cell.setCellStyle(numberStyle);
			if (record.getTxJurosParcelas() != null) {
				cell.setCellValue(((BigDecimal) record.getCetMes()).doubleValue());
			} else {
				cell.setCellValue(Double.valueOf("0"));
			}

			int parcelaCount = 0;
			for (ContratoCobrancaFinanceiroDiaConsultaDetalhesVO parcelas : record.getListContratoCobrancaDetalhes()) {
				if (parcelaCount > 0) {
					countLine++;
					row = sheet.createRow(countLine);
				}
				parcelaCount = parcelaCount + 1;

				// Contrato
				cell = row.createCell(0);
				cell.setCellStyle(cell_style);
				cell.setCellValue(record.getNumeroContrato());

				// Data do Contrato
				cell = row.createCell(1);
				cell.setCellStyle(dateStyle);
				if (tipoContratoCobrancaFinanceiroDia.equals("PreAprovado")) {
					cell.setCellValue(record.getDataContrato());
				} else {
					cell.setCellValue(record.getDataInicio());
				}

				// Pagador
				cell = row.createCell(2);
				cell.setCellStyle(cell_style);
				cell.setCellValue(record.getPagador_nome());

				// CPF CNPJ
				cell = row.createCell(3);
				cell.setCellStyle(cell_style);
				if (record.getPagador_cpf() != null && !record.getPagador_cpf().equals("")) {
					cell.setCellValue(record.getPagador_cpf());
				} else {
					cell.setCellValue(record.getPagador_cnpj());
				}

				// Data NAscimento Pagador
				cell = row.createCell(4);
				cell.setCellStyle(dateStyle);
				if (record.getPagador_dtNascimento() != null) {
					cell.setCellValue(record.getPagador_dtNascimento());
				}

				// Endereço pagador
				cell = row.createCell(5);
				cell.setCellStyle(cell_style);
				cell.setCellValue(record.getPagador_endereco() + ", " + record.getPagador_numero() + " - "
						+ record.getPagador_cidade() + " / " + record.getPagador_estado() + " (CEP: "
						+ record.getPagador_cep() + ")");

				// Nome Conjuge
				cell = row.createCell(6);
				cell.setCellStyle(cell_style);
				if (record.getPagador_nomeConjuge() != null) {
					cell.setCellValue(record.getPagador_nomeConjuge());
				}

				// CPF Conjuge
				cell = row.createCell(7);
				cell.setCellStyle(cell_style);
				if (record.getPagador_cpfConjuge() != null) {
					cell.setCellValue(record.getPagador_cpfConjuge());
				}

				// Região Imóvel
				cell = row.createCell(8);
				cell.setCellStyle(cell_style);
				if (record.getImovel_cidade() != null && record.getImovel_estado() != null) {
					cell.setCellValue(record.getImovel_cidade() + "/" + record.getImovel_estado());
				}

				// Tipo Imovel
				cell = row.createCell(9);
				cell.setCellStyle(cell_style);
				if (record.getTipoImovel() != null) {
					cell.setCellValue(record.getTipoImovel());
				}

				// Valor Imovel
				cell = row.createCell(10);
				cell.setCellStyle(numericStyle);
				cell.setCellType(CellType.NUMERIC);
				if (record.getValorImovel() != null) {
					cell.setCellValue(((BigDecimal) record.getValorImovel()).doubleValue());
				} else {
					cell.setCellValue(Double.valueOf("0"));
				}

				// Valor CCB
				cell = row.createCell(11);
				cell.setCellStyle(numericStyle);
				cell.setCellType(CellType.NUMERIC);
				if (record.getValorCCB() != null) {
					cell.setCellValue(((BigDecimal) record.getValorCCB()).doubleValue());
				} else {
					cell.setCellValue(Double.valueOf("0"));
				}

				// Taxa Juros
				cell = row.createCell(12);
				cell.setCellStyle(numberStyle);
				if (record.getTxJurosParcelas() != null) {
					cell.setCellValue(((BigDecimal) record.getTxJurosParcelas()).doubleValue());
				} else {
					cell.setCellValue(Double.valueOf("0"));
				}

				// Tipo Juros
				cell = row.createCell(13);
				cell.setCellStyle(cell_style);
				if (record.isCorrigidoIPCA()) {
					cell.setCellValue("Pós-Fixado");
				} else {
					cell.setCellValue("Pré-Fixado");
				}

				// CET
				cell = row.createCell(14);
				cell.setCellStyle(numberStyle);
				if (record.getCetMes() != null) {
					cell.setCellValue(((BigDecimal) record.getCetMes()).doubleValue());
				} else {
					cell.setCellValue(Double.valueOf("0"));
				}

				// CCB
				cell = row.createCell(15);
				cell.setCellStyle(cell_style);
				String parcela = parcelas.getNumeroParcela();

				if (parcela.length() == 1) {
					parcela = "00" + parcela;
				} else if (parcela.length() == 2) {
					parcela = "0" + parcela;
				} else {
					parcela = parcela;
				}
				if (record.getNumeroContratoSeguro() != null) {
					cell.setCellValue(record.getNumeroContratoSeguro() + "-" + parcela);
				}

				// Parcela
				cell = row.createCell(16);
				cell.setCellStyle(cell_style);
				cell.setCellValue(parcelas.getNumeroParcela());

				// Data Vencimento
				cell = row.createCell(17);
				cell.setCellStyle(dateStyle);
				cell.setCellValue(parcelas.getDataVencimento());

				// Amortização
				cell = row.createCell(18);
				cell.setCellStyle(numericStyle);
				cell.setCellType(CellType.NUMERIC);
				if (parcelas.getVlrAmortizacaoParcela() != null) {
					cell.setCellValue(((BigDecimal) parcelas.getVlrAmortizacaoParcela()).doubleValue());
				} else {
					cell.setCellValue(Double.valueOf("0"));
				}

				// Juros
				cell = row.createCell(19);
				cell.setCellStyle(numericStyle);
				cell.setCellType(CellType.NUMERIC);
				if (parcelas.getVlrJurosParcela() != null) {
					cell.setCellValue(((BigDecimal) parcelas.getVlrJurosParcela()).doubleValue());
				} else {
					cell.setCellValue(Double.valueOf("0"));
				}

				// DFI
				cell = row.createCell(20);
				cell.setCellStyle(numericStyle);
				cell.setCellType(CellType.NUMERIC);
				if (parcelas.getVlrSeguroDFI() != null) {
					cell.setCellValue(((BigDecimal) parcelas.getVlrSeguroDFI()).doubleValue());
				} else {
					cell.setCellValue(Double.valueOf("0"));
				}

				// MIP
				cell = row.createCell(21);
				cell.setCellStyle(numericStyle);
				cell.setCellType(CellType.NUMERIC);
				if (parcelas.getVlrSeguroMIP() != null) {
					cell.setCellValue(((BigDecimal) parcelas.getVlrSeguroMIP()).doubleValue());
				} else {
					cell.setCellValue(Double.valueOf("0"));
				}

				// Taxa ADM
				cell = row.createCell(22);
				cell.setCellStyle(numericStyle);
				cell.setCellType(CellType.NUMERIC);
				if (parcelas.getVlrTaxaADM() != null) {
					cell.setCellValue(((BigDecimal) parcelas.getVlrTaxaADM()).doubleValue());
				} else {
					cell.setCellValue(Double.valueOf("0"));
				}

				// Valor Parcela
				cell = row.createCell(23);
				cell.setCellStyle(numericStyle);
				cell.setCellType(CellType.NUMERIC);
				if (parcelas.getVlrParcela() != null) {
					cell.setCellValue(((BigDecimal) parcelas.getVlrParcela()).doubleValue());
				} else {
					cell.setCellValue(Double.valueOf("0"));
				}

				// Data pagto
				cell = row.createCell(24);
				cell.setCellStyle(dateStyle);
				cell.setCellValue(parcelas.getDataUltimoPagamento());

				// Valor Pago
				cell = row.createCell(25);
				cell.setCellStyle(numericStyle);
				cell.setCellType(CellType.NUMERIC);
				if (parcelas.getValorTotalPagamento() != null) {
					cell.setCellValue(((BigDecimal) parcelas.getValorTotalPagamento()).doubleValue());
				} else {
					cell.setCellValue(Double.valueOf("0"));
				}
			}

			if ((countLine - linhaInicioContrato) > 1) {
				sheet.addMergedRegion(new CellRangeAddress(linhaInicioContrato, countLine, 0, 0));
				sheet.addMergedRegion(new CellRangeAddress(linhaInicioContrato, countLine, 1, 1));
				sheet.addMergedRegion(new CellRangeAddress(linhaInicioContrato, countLine, 2, 2));
				sheet.addMergedRegion(new CellRangeAddress(linhaInicioContrato, countLine, 3, 3));
				sheet.addMergedRegion(new CellRangeAddress(linhaInicioContrato, countLine, 4, 4));
				sheet.addMergedRegion(new CellRangeAddress(linhaInicioContrato, countLine, 5, 5));
				sheet.addMergedRegion(new CellRangeAddress(linhaInicioContrato, countLine, 6, 6));
				sheet.addMergedRegion(new CellRangeAddress(linhaInicioContrato, countLine, 7, 7));
				sheet.addMergedRegion(new CellRangeAddress(linhaInicioContrato, countLine, 8, 8));
				sheet.addMergedRegion(new CellRangeAddress(linhaInicioContrato, countLine, 9, 9));
				sheet.addMergedRegion(new CellRangeAddress(linhaInicioContrato, countLine, 10, 10));
				sheet.addMergedRegion(new CellRangeAddress(linhaInicioContrato, countLine, 11, 11));
				sheet.addMergedRegion(new CellRangeAddress(linhaInicioContrato, countLine, 12, 12));
				sheet.addMergedRegion(new CellRangeAddress(linhaInicioContrato, countLine, 13, 13));
				sheet.addMergedRegion(new CellRangeAddress(linhaInicioContrato, countLine, 14, 14));
			}

			// pula 1 linha
			countLine++;
			linhaInicioContrato = countLine;
			row = sheet.createRow(countLine);
			cell = row.createCell(0);
			cell.setCellStyle(cell_style);
			cell = row.createCell(1);
			cell.setCellStyle(cell_style);
			cell = row.createCell(2);
			cell.setCellStyle(cell_style);
			cell = row.createCell(3);
			cell.setCellStyle(cell_style);
			cell = row.createCell(4);
			cell.setCellStyle(cell_style);
			cell = row.createCell(5);
			cell.setCellStyle(cell_style);
			cell = row.createCell(6);
			cell.setCellStyle(cell_style);
			cell = row.createCell(7);
			cell.setCellStyle(cell_style);
			cell = row.createCell(8);
			cell.setCellStyle(cell_style);
			cell = row.createCell(9);
			cell.setCellStyle(cell_style);
			cell = row.createCell(10);
			cell.setCellStyle(cell_style);
			cell = row.createCell(11);
			cell.setCellStyle(cell_style);
			cell = row.createCell(12);
			cell.setCellStyle(cell_style);
			cell = row.createCell(13);
			cell.setCellStyle(cell_style);
			cell = row.createCell(14);
			cell.setCellStyle(cell_style);
			cell = row.createCell(15);
			cell.setCellStyle(cell_style);
			cell = row.createCell(16);
			cell.setCellStyle(cell_style);
			cell = row.createCell(17);
			cell.setCellStyle(cell_style);
			cell = row.createCell(18);
			cell.setCellStyle(cell_style);
			cell = row.createCell(19);
			cell.setCellStyle(cell_style);
			cell = row.createCell(20);
			cell.setCellStyle(cell_style);
			cell = row.createCell(21);
			cell.setCellStyle(cell_style);
			cell = row.createCell(22);
			cell.setCellStyle(cell_style);
			cell = row.createCell(23);
			cell.setCellStyle(cell_style);
			cell = row.createCell(24);
			cell.setCellStyle(cell_style);
			cell = row.createCell(25);
			cell.setCellStyle(cell_style);
		}

		/*
		 * FileOutputStream fileOut = new FileOutputStream(excelFileName);
		 * 
		 * wb.write(fileOut); fileOut.flush(); fileOut.close();
		 */

		this.contratoGerado = true;
		ByteArrayOutputStream out = new ByteArrayOutputStream();
		wb.write(out);
		wb.close();
		final GeradorRelatorioDownloadCliente gerador = new GeradorRelatorioDownloadCliente(
				FacesContext.getCurrentInstance());
		gerador.open(nomeContrato);
		gerador.feed(new ByteArrayInputStream(out.toByteArray()));
		gerador.close();
		return null;
	}

	public void atualizaIPCA() {
		IPCADao ipcaDao = new IPCADao();
		ContratoCobrancaDetalhesDao contratoCobrancaDetalhesDao = new ContratoCobrancaDetalhesDao();
		try {
			for (RelatorioFinanceiroCobranca relatorioFinanceiraCobranca : this.relObjetoContratoCobranca) {
				ContratoCobrancaDetalhes parcelaIpca = contratoCobrancaDetalhesDao
						.findById(relatorioFinanceiraCobranca.getIdParcela());
				if (calcularIPCA(ipcaDao, contratoCobrancaDetalhesDao, parcelaIpca)) {
					relatorioFinanceiraCobranca.setValor(parcelaIpca.getVlrParcela());
					contratoCobrancaDetalhesDao.update(parcelaIpca);
				}
			}
		} catch (Exception e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
	}

	public boolean calcularIPCA(IPCADao ipcaDao, ContratoCobrancaDetalhesDao contratoCobrancaDetalhesDao,
			ContratoCobrancaDetalhes contratoCobrancaDetalhes) {

		IPCA ultimoIpca = ipcaDao.getUltimoIPCA(contratoCobrancaDetalhes.getDataVencimento());

		// primeira condição é para meses de mesmo ano; segunda condição é para os meses
		// jan e fev da parcela IPCA
		if (contratoCobrancaDetalhes.getDataVencimento().getMonth() - ultimoIpca.getData().getMonth() <= 2
				|| contratoCobrancaDetalhes.getDataVencimento().getMonth() - ultimoIpca.getData().getMonth() <= -10) {

			ContratoCobranca contratoCobranca = contratoCobrancaDetalhesDao
					.getContratoCobranca(contratoCobrancaDetalhes.getId());
			// usar o reparcelamento aqui.

			if (contratoCobrancaDetalhes.getIpca() == null
					&& CommonsUtil.booleanValue(contratoCobranca.isCorrigidoIPCA())) {
				BigDecimal valorIpca = (contratoCobrancaDetalhes.getVlrSaldoParcela()
						.add(contratoCobrancaDetalhes.getVlrAmortizacaoParcela()))
						.multiply(ultimoIpca.getTaxa().divide(BigDecimal.valueOf(100)));
				contratoCobrancaDetalhes.setVlrParcela((contratoCobrancaDetalhes.getVlrParcela().add(valorIpca))
						.setScale(2, BigDecimal.ROUND_HALF_EVEN));
				contratoCobrancaDetalhes.setIpca(valorIpca);
				return true;
			}
		}

		return false;
	}

	public void geraRelFinanceiroUltimaParcela() {
		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();
		this.relObjetoContratoCobranca = new ArrayList<RelatorioFinanceiroCobranca>();

		this.relObjetoContratoCobranca = contratoCobrancaDao.relatorioControleEstoqueUltimaParcela();

		processaDadosRelFinanceiro();

		this.relSelectedObjetoContratoCobranca = new RelatorioFinanceiroCobranca();

		if (this.relObjetoContratoCobranca.size() == 0) {
			this.relObjetoContratoCobranca = new ArrayList<RelatorioFinanceiroCobranca>();
		}

		this.contratoGerado = false;
	}

	public void processaDadosRelFinanceiroAtrasoFull() {
		TimeZone zone = TimeZone.getDefault();
		Locale locale = new Locale("pt", "BR");
		Calendar data = Calendar.getInstance(zone, locale);
		Date auxDataPagamento = data.getTime();

		SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd", locale);
		String auxDataPagamentoStr = sdf.format(data.getTime());
		try {
			auxDataPagamento = sdf.parse(auxDataPagamentoStr);
		} catch (ParseException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}

		for (RelatorioFinanceiroCobranca relatorioFinanceiroCobranca : this.relObjetoContratoCobranca) {
			// se já houve baixa parcial, utiliza a data de vencimento atualizada
			// senão utiliza a data de vencimento antiga
			String auxDataVencimentoStr = "";
			Date auxDataVencimento = null;

			auxDataVencimentoStr = sdf.format(relatorioFinanceiroCobranca.getDataVencimentoAtual());
			try {
				auxDataVencimento = sdf.parse(auxDataVencimentoStr);
			} catch (ParseException e) {
				// TODO Auto-generated catch block
				e.printStackTrace();
			}

			ContratoCobrancaUtilsMB contratoCobrancaUtilsMB;

			contratoCobrancaUtilsMB = new ContratoCobrancaUtilsMB(auxDataVencimento, auxDataPagamento,
					relatorioFinanceiroCobranca.getValor(), relatorioFinanceiroCobranca.contratoCobranca.getTxJuros(),
					relatorioFinanceiroCobranca.contratoCobranca.getTxMulta());

			contratoCobrancaUtilsMB.recalculaValor();

			relatorioFinanceiroCobranca.setVlrParcelaAtualizada(contratoCobrancaUtilsMB.getValorAtualizado());
		}
	}

	public void processaDadosRelFinanceiro() {

		List<PagadorRecebedor> listPagadorRecebedor = new ArrayList<PagadorRecebedor>();
		List<BigDecimal> listValoresRecebedores = new ArrayList<BigDecimal>();

		/* Tratamento da opção de exibir somente o financeiro do favorecido filtrado */
		/*
		 * Se selecionado algum favorecido no filtro e houver restrição dos dados por
		 * favorecido
		 */
		if (this.exibeSomenteFavorecidosFiltrados.equals("Todos")) {
			for (RelatorioFinanceiroCobranca relatorioFinanceiroCobranca : this.relObjetoContratoCobranca) {
				listPagadorRecebedor = new ArrayList<PagadorRecebedor>();
				listValoresRecebedores = new ArrayList<BigDecimal>();

				relatorioFinanceiroCobranca.getContratoCobranca().setExibeRecebedor1(true);
				relatorioFinanceiroCobranca.getContratoCobranca().setExibeRecebedor2(true);
				relatorioFinanceiroCobranca.getContratoCobranca().setExibeRecebedor3(true);
				relatorioFinanceiroCobranca.getContratoCobranca().setExibeRecebedor4(true);
				relatorioFinanceiroCobranca.getContratoCobranca().setExibeRecebedor5(true);
				relatorioFinanceiroCobranca.getContratoCobranca().setExibeRecebedor6(true);
				relatorioFinanceiroCobranca.getContratoCobranca().setExibeRecebedor7(true);
				relatorioFinanceiroCobranca.getContratoCobranca().setExibeRecebedor8(true);
				relatorioFinanceiroCobranca.getContratoCobranca().setExibeRecebedor9(true);
				relatorioFinanceiroCobranca.getContratoCobranca().setExibeRecebedor10(true);

				if (relatorioFinanceiroCobranca.getContratoCobranca().getRecebedor() != null) {
					listPagadorRecebedor.add(relatorioFinanceiroCobranca.getContratoCobranca().getRecebedor());
					listValoresRecebedores.add(relatorioFinanceiroCobranca.getContratoCobranca().getVlrRecebedor());
				}

				// Contrato - Recebedor 2
				if (relatorioFinanceiroCobranca.getContratoCobranca().getRecebedor2() != null) {
					listPagadorRecebedor.add(relatorioFinanceiroCobranca.getContratoCobranca().getRecebedor2());
					listValoresRecebedores.add(relatorioFinanceiroCobranca.getContratoCobranca().getVlrRecebedor2());
				}

				// Contrato - Recebedor 3
				if (relatorioFinanceiroCobranca.getContratoCobranca().getRecebedor3() != null) {
					listPagadorRecebedor.add(relatorioFinanceiroCobranca.getContratoCobranca().getRecebedor3());
					listValoresRecebedores.add(relatorioFinanceiroCobranca.getContratoCobranca().getVlrRecebedor3());
				}

				// Contrato - Recebedor 3
				if (relatorioFinanceiroCobranca.getContratoCobranca().getRecebedor4() != null) {
					listPagadorRecebedor.add(relatorioFinanceiroCobranca.getContratoCobranca().getRecebedor4());
					listValoresRecebedores.add(relatorioFinanceiroCobranca.getContratoCobranca().getVlrRecebedor4());
				}

				// Contrato - Recebedor 5
				if (relatorioFinanceiroCobranca.getContratoCobranca().getRecebedor5() != null) {
					listPagadorRecebedor.add(relatorioFinanceiroCobranca.getContratoCobranca().getRecebedor5());
					listValoresRecebedores.add(relatorioFinanceiroCobranca.getContratoCobranca().getVlrRecebedor5());
				}

				// Contrato - Recebedor 6
				if (relatorioFinanceiroCobranca.getContratoCobranca().getRecebedor6() != null) {
					listPagadorRecebedor.add(relatorioFinanceiroCobranca.getContratoCobranca().getRecebedor6());
					listValoresRecebedores.add(relatorioFinanceiroCobranca.getContratoCobranca().getVlrRecebedor6());
				}

				// Contrato - Recebedor 7
				if (relatorioFinanceiroCobranca.getContratoCobranca().getRecebedor7() != null) {
					listPagadorRecebedor.add(relatorioFinanceiroCobranca.getContratoCobranca().getRecebedor7());
					listValoresRecebedores.add(relatorioFinanceiroCobranca.getContratoCobranca().getVlrRecebedor7());
				}

				// Contrato - Recebedor 8
				if (relatorioFinanceiroCobranca.getContratoCobranca().getRecebedor8() != null) {
					listPagadorRecebedor.add(relatorioFinanceiroCobranca.getContratoCobranca().getRecebedor8());
					listValoresRecebedores.add(relatorioFinanceiroCobranca.getContratoCobranca().getVlrRecebedor8());
				}

				// Contrato - Recebedor 9
				if (relatorioFinanceiroCobranca.getContratoCobranca().getRecebedor9() != null) {
					listPagadorRecebedor.add(relatorioFinanceiroCobranca.getContratoCobranca().getRecebedor9());
					listValoresRecebedores.add(relatorioFinanceiroCobranca.getContratoCobranca().getVlrRecebedor9());
				}

				// Contrato - Recebedor 10
				if (relatorioFinanceiroCobranca.getContratoCobranca().getRecebedor10() != null) {
					listPagadorRecebedor.add(relatorioFinanceiroCobranca.getContratoCobranca().getRecebedor10());
					listValoresRecebedores.add(relatorioFinanceiroCobranca.getContratoCobranca().getVlrRecebedor10());
				}

				// popula os recebedores do contrato conforme o filtro informado
				if (listPagadorRecebedor.size() > 0) {
					for (int i = 0; i < listPagadorRecebedor.size(); i++) {
						if (i == 0) {
							relatorioFinanceiroCobranca.setRecebedor1(listPagadorRecebedor.get(i));
							relatorioFinanceiroCobranca.setVlrRecebedor1(listValoresRecebedores.get(i));
						}
						if (i == 1) {
							relatorioFinanceiroCobranca.setRecebedor2(listPagadorRecebedor.get(i));
							relatorioFinanceiroCobranca.setVlrRecebedor2(listValoresRecebedores.get(i));
						}
						if (i == 2) {
							relatorioFinanceiroCobranca.setRecebedor3(listPagadorRecebedor.get(i));
							relatorioFinanceiroCobranca.setVlrRecebedor3(listValoresRecebedores.get(i));
						}
						if (i == 3) {
							relatorioFinanceiroCobranca.setRecebedor4(listPagadorRecebedor.get(i));
							relatorioFinanceiroCobranca.setVlrRecebedor4(listValoresRecebedores.get(i));
						}
						if (i == 4) {
							relatorioFinanceiroCobranca.setRecebedor5(listPagadorRecebedor.get(i));
							relatorioFinanceiroCobranca.setVlrRecebedor5(listValoresRecebedores.get(i));
						}
						if (i == 5) {
							relatorioFinanceiroCobranca.setRecebedor6(listPagadorRecebedor.get(i));
							relatorioFinanceiroCobranca.setVlrRecebedor6(listValoresRecebedores.get(i));
						}
						if (i == 6) {
							relatorioFinanceiroCobranca.setRecebedor7(listPagadorRecebedor.get(i));
							relatorioFinanceiroCobranca.setVlrRecebedor7(listValoresRecebedores.get(i));
						}
						if (i == 7) {
							relatorioFinanceiroCobranca.setRecebedor8(listPagadorRecebedor.get(i));
							relatorioFinanceiroCobranca.setVlrRecebedor8(listValoresRecebedores.get(i));
						}
						if (i == 8) {
							relatorioFinanceiroCobranca.setRecebedor9(listPagadorRecebedor.get(i));
							relatorioFinanceiroCobranca.setVlrRecebedor9(listValoresRecebedores.get(i));
						}
						if (i == 9) {
							relatorioFinanceiroCobranca.setRecebedor10(listPagadorRecebedor.get(i));
							relatorioFinanceiroCobranca.setVlrRecebedor10(listValoresRecebedores.get(i));
						}
					}
				}
			}
		}

		if (this.exibeSomenteFavorecidosFiltrados.equals("Nenhum")) {
			for (RelatorioFinanceiroCobranca relatorioFinanceiroCobranca : this.relObjetoContratoCobranca) {
				listPagadorRecebedor = new ArrayList<PagadorRecebedor>();
				listValoresRecebedores = new ArrayList<BigDecimal>();
				relatorioFinanceiroCobranca.getContratoCobranca().setExibeRecebedor1(false);
				relatorioFinanceiroCobranca.getContratoCobranca().setExibeRecebedor2(false);
				relatorioFinanceiroCobranca.getContratoCobranca().setExibeRecebedor3(false);
				relatorioFinanceiroCobranca.getContratoCobranca().setExibeRecebedor4(false);
				relatorioFinanceiroCobranca.getContratoCobranca().setExibeRecebedor5(false);
				relatorioFinanceiroCobranca.getContratoCobranca().setExibeRecebedor6(false);
				relatorioFinanceiroCobranca.getContratoCobranca().setExibeRecebedor7(false);
				relatorioFinanceiroCobranca.getContratoCobranca().setExibeRecebedor8(false);
				relatorioFinanceiroCobranca.getContratoCobranca().setExibeRecebedor9(false);
				relatorioFinanceiroCobranca.getContratoCobranca().setExibeRecebedor10(false);
			}
		}

		TimeZone zone = TimeZone.getDefault();
		Locale locale = new Locale("pt", "BR");
		Calendar data = Calendar.getInstance(zone, locale);
		Date auxDataPagamento = data.getTime();

		SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd", locale);
		String auxDataPagamentoStr = sdf.format(data.getTime());
		try {
			auxDataPagamento = sdf.parse(auxDataPagamentoStr);
		} catch (ParseException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}

		for (RelatorioFinanceiroCobranca relatorioFinanceiroCobranca : this.relObjetoContratoCobranca) {
			// se já houve baixa parcial, utiliza a data de vencimento atualizada
			// senão utiliza a data de vencimento antiga
			String auxDataVencimentoStr = "";
			Date auxDataVencimento = null;

			if (!CommonsUtil.semValor(relatorioFinanceiroCobranca.getDataVencimentoAtual())) {
				auxDataVencimentoStr = sdf.format(relatorioFinanceiroCobranca.getDataVencimentoAtual());
			} else {
				auxDataVencimentoStr = sdf.format(relatorioFinanceiroCobranca.getDataVencimento());
			}
			try {
				auxDataVencimento = sdf.parse(auxDataVencimentoStr);
			} catch (ParseException e) {
				// TODO Auto-generated catch block
				e.printStackTrace();
			}

			ContratoCobrancaUtilsMB contratoCobrancaUtilsMB;

			contratoCobrancaUtilsMB = new ContratoCobrancaUtilsMB(auxDataVencimento, auxDataPagamento,
					relatorioFinanceiroCobranca.getValor(), relatorioFinanceiroCobranca.contratoCobranca.getTxJuros(),
					relatorioFinanceiroCobranca.contratoCobranca.getTxMulta());

			contratoCobrancaUtilsMB.recalculaValor();

			relatorioFinanceiroCobranca.setVlrParcelaAtualizada(contratoCobrancaUtilsMB.getValorAtualizado());
		}

		if ((this.idRecebedor > 0 || this.idRecebedor2 > 0 || this.idRecebedor3 > 0 || this.idRecebedor4 > 0
				|| this.idRecebedor5 > 0 || this.idRecebedor6 > 0 || this.idRecebedor7 > 0 || this.idRecebedor8 > 0
				|| this.idRecebedor9 > 0 || this.idRecebedor10 > 0)
				&& (this.exibeSomenteFavorecidosFiltrados.equals("Somente Filtrados"))) {
			PagadorRecebedor pagadorRecebedorChecked = null;
			// Pesquisa para faezr match entre filtros de favorecidos e favorecidos do
			// contrato
			for (RelatorioFinanceiroCobranca relatorioFinanceiroCobranca : this.relObjetoContratoCobranca) {

				listPagadorRecebedor = new ArrayList<PagadorRecebedor>();
				listValoresRecebedores = new ArrayList<BigDecimal>();

				// Contrato - Recebedor 1
				if (relatorioFinanceiroCobranca.getContratoCobranca().getRecebedor() != null) {
					// check se o filtro informado da match com algum dos recebedores do contrato
					pagadorRecebedorChecked = checkRecebedorFiltroContrato(
							relatorioFinanceiroCobranca.getContratoCobranca().getRecebedor());

					// se deu match popula lista de recebedores auxiliar
					if (pagadorRecebedorChecked != null) {
						listPagadorRecebedor.add(pagadorRecebedorChecked);
						listValoresRecebedores.add(relatorioFinanceiroCobranca.getContratoCobranca().getVlrRecebedor());
					}

					// limpa a posição do recebedor no contrato
					relatorioFinanceiroCobranca.setRecebedor1(null);
					relatorioFinanceiroCobranca.setVlrRecebedor1(null);
				}

				// Contrato - Recebedor 2
				pagadorRecebedorChecked = null;
				if (relatorioFinanceiroCobranca.getContratoCobranca().getRecebedor2() != null) {
					// check se o filtro informado da match com algum dos recebedores do contrato
					pagadorRecebedorChecked = checkRecebedorFiltroContrato(
							relatorioFinanceiroCobranca.getContratoCobranca().getRecebedor2());

					// se deu match popula lista de recebedores auxiliar
					if (pagadorRecebedorChecked != null) {
						listPagadorRecebedor.add(pagadorRecebedorChecked);
						listValoresRecebedores
								.add(relatorioFinanceiroCobranca.getContratoCobranca().getVlrRecebedor2());
					}

					// limpa a posição do recebedor no contrato
					relatorioFinanceiroCobranca.setRecebedor2(null);
					relatorioFinanceiroCobranca.setVlrRecebedor2(null);
				}

				// Contrato - Recebedor 3
				pagadorRecebedorChecked = null;
				if (relatorioFinanceiroCobranca.getContratoCobranca().getRecebedor3() != null) {
					// check se o filtro informado da match com algum dos recebedores do contrato
					pagadorRecebedorChecked = checkRecebedorFiltroContrato(
							relatorioFinanceiroCobranca.getContratoCobranca().getRecebedor3());

					// se deu match popula lista de recebedores auxiliar
					if (pagadorRecebedorChecked != null) {
						listPagadorRecebedor.add(pagadorRecebedorChecked);
						listValoresRecebedores
								.add(relatorioFinanceiroCobranca.getContratoCobranca().getVlrRecebedor3());
					}

					// limpa a posição do recebedor no contrato
					relatorioFinanceiroCobranca.setRecebedor3(null);
					relatorioFinanceiroCobranca.setVlrRecebedor3(null);
				}

				// Contrato - Recebedor 3
				pagadorRecebedorChecked = null;
				if (relatorioFinanceiroCobranca.getContratoCobranca().getRecebedor4() != null) {
					// check se o filtro informado da match com algum dos recebedores do contrato
					pagadorRecebedorChecked = checkRecebedorFiltroContrato(
							relatorioFinanceiroCobranca.getContratoCobranca().getRecebedor4());

					// se deu match popula lista de recebedores auxiliar
					if (pagadorRecebedorChecked != null) {
						listPagadorRecebedor.add(pagadorRecebedorChecked);
						listValoresRecebedores
								.add(relatorioFinanceiroCobranca.getContratoCobranca().getVlrRecebedor4());
					}

					// limpa a posição do recebedor no contrato
					relatorioFinanceiroCobranca.setRecebedor4(null);
					relatorioFinanceiroCobranca.setVlrRecebedor4(null);
				}

				// Contrato - Recebedor 5
				pagadorRecebedorChecked = null;
				if (relatorioFinanceiroCobranca.getContratoCobranca().getRecebedor5() != null) {
					// check se o filtro informado da match com algum dos recebedores do contrato
					pagadorRecebedorChecked = checkRecebedorFiltroContrato(
							relatorioFinanceiroCobranca.getContratoCobranca().getRecebedor5());

					// se deu match popula lista de recebedores auxiliar
					if (pagadorRecebedorChecked != null) {
						listPagadorRecebedor.add(pagadorRecebedorChecked);
						listValoresRecebedores
								.add(relatorioFinanceiroCobranca.getContratoCobranca().getVlrRecebedor5());
					}

					// limpa a posição do recebedor no contrato
					relatorioFinanceiroCobranca.setRecebedor5(null);
					relatorioFinanceiroCobranca.setVlrRecebedor5(null);
				}

				// Contrato - Recebedor 6
				pagadorRecebedorChecked = null;
				if (relatorioFinanceiroCobranca.getContratoCobranca().getRecebedor6() != null) {
					// check se o filtro informado da match com algum dos recebedores do contrato
					pagadorRecebedorChecked = checkRecebedorFiltroContrato(
							relatorioFinanceiroCobranca.getContratoCobranca().getRecebedor6());

					// se deu match popula lista de recebedores auxiliar
					if (pagadorRecebedorChecked != null) {
						listPagadorRecebedor.add(pagadorRecebedorChecked);
						listValoresRecebedores
								.add(relatorioFinanceiroCobranca.getContratoCobranca().getVlrRecebedor6());
					}

					// limpa a posição do recebedor no contrato
					relatorioFinanceiroCobranca.setRecebedor6(null);
					relatorioFinanceiroCobranca.setVlrRecebedor6(null);
				}

				// Contrato - Recebedor 7
				pagadorRecebedorChecked = null;
				if (relatorioFinanceiroCobranca.getContratoCobranca().getRecebedor7() != null) {
					// check se o filtro informado da match com algum dos recebedores do contrato
					pagadorRecebedorChecked = checkRecebedorFiltroContrato(
							relatorioFinanceiroCobranca.getContratoCobranca().getRecebedor7());

					// se deu match popula lista de recebedores auxiliar
					if (pagadorRecebedorChecked != null) {
						listPagadorRecebedor.add(pagadorRecebedorChecked);
						listValoresRecebedores
								.add(relatorioFinanceiroCobranca.getContratoCobranca().getVlrRecebedor7());
					}

					// limpa a posição do recebedor no contrato
					relatorioFinanceiroCobranca.setRecebedor7(null);
					relatorioFinanceiroCobranca.setVlrRecebedor7(null);
				}

				// Contrato - Recebedor 8
				pagadorRecebedorChecked = null;
				if (relatorioFinanceiroCobranca.getContratoCobranca().getRecebedor8() != null) {
					// check se o filtro informado da match com algum dos recebedores do contrato
					pagadorRecebedorChecked = checkRecebedorFiltroContrato(
							relatorioFinanceiroCobranca.getContratoCobranca().getRecebedor8());

					// se deu match popula lista de recebedores auxiliar
					if (pagadorRecebedorChecked != null) {
						listPagadorRecebedor.add(pagadorRecebedorChecked);
						listValoresRecebedores
								.add(relatorioFinanceiroCobranca.getContratoCobranca().getVlrRecebedor8());
					}

					// limpa a posição do recebedor no contrato
					relatorioFinanceiroCobranca.setRecebedor8(null);
					relatorioFinanceiroCobranca.setVlrRecebedor8(null);
				}

				// Contrato - Recebedor 9
				pagadorRecebedorChecked = null;
				if (relatorioFinanceiroCobranca.getContratoCobranca().getRecebedor9() != null) {
					// check se o filtro informado da match com algum dos recebedores do contrato
					pagadorRecebedorChecked = checkRecebedorFiltroContrato(
							relatorioFinanceiroCobranca.getContratoCobranca().getRecebedor9());

					// se deu match popula lista de recebedores auxiliar
					if (pagadorRecebedorChecked != null) {
						listPagadorRecebedor.add(pagadorRecebedorChecked);
						listValoresRecebedores
								.add(relatorioFinanceiroCobranca.getContratoCobranca().getVlrRecebedor9());
					}

					// limpa a posição do recebedor no contrato
					relatorioFinanceiroCobranca.setRecebedor9(null);
					relatorioFinanceiroCobranca.setVlrRecebedor9(null);
				}

				// Contrato - Recebedor 10
				pagadorRecebedorChecked = null;
				if (relatorioFinanceiroCobranca.getContratoCobranca().getRecebedor10() != null) {
					// check se o filtro informado da match com algum dos recebedores do contrato
					pagadorRecebedorChecked = checkRecebedorFiltroContrato(
							relatorioFinanceiroCobranca.getContratoCobranca().getRecebedor10());

					// se deu match popula lista de recebedores auxiliar
					if (pagadorRecebedorChecked != null) {
						listPagadorRecebedor.add(pagadorRecebedorChecked);
						listValoresRecebedores
								.add(relatorioFinanceiroCobranca.getContratoCobranca().getVlrRecebedor10());
					}

					// limpa a posição do recebedor no contrato
					relatorioFinanceiroCobranca.setRecebedor10(null);
					relatorioFinanceiroCobranca.setVlrRecebedor10(null);
				}

				// popula os recebedores do contrato conforme o filtro informado
				if (listPagadorRecebedor.size() > 0) {
					for (int i = 0; i < listPagadorRecebedor.size(); i++) {
						if (i == 0) {
							relatorioFinanceiroCobranca.setRecebedor1(listPagadorRecebedor.get(i));
							relatorioFinanceiroCobranca.setVlrRecebedor1(listValoresRecebedores.get(i));
						}
						if (i == 1) {
							relatorioFinanceiroCobranca.setRecebedor2(listPagadorRecebedor.get(i));
							relatorioFinanceiroCobranca.setVlrRecebedor2(listValoresRecebedores.get(i));
						}
						if (i == 2) {
							relatorioFinanceiroCobranca.setRecebedor3(listPagadorRecebedor.get(i));
							relatorioFinanceiroCobranca.setVlrRecebedor3(listValoresRecebedores.get(i));
						}
						if (i == 3) {
							relatorioFinanceiroCobranca.setRecebedor4(listPagadorRecebedor.get(i));
							relatorioFinanceiroCobranca.setVlrRecebedor4(listValoresRecebedores.get(i));
						}
						if (i == 4) {
							relatorioFinanceiroCobranca.setRecebedor5(listPagadorRecebedor.get(i));
							relatorioFinanceiroCobranca.setVlrRecebedor5(listValoresRecebedores.get(i));
						}
						if (i == 5) {
							relatorioFinanceiroCobranca.setRecebedor6(listPagadorRecebedor.get(i));
							relatorioFinanceiroCobranca.setVlrRecebedor6(listValoresRecebedores.get(i));
						}
						if (i == 6) {
							relatorioFinanceiroCobranca.setRecebedor7(listPagadorRecebedor.get(i));
							relatorioFinanceiroCobranca.setVlrRecebedor7(listValoresRecebedores.get(i));
						}
						if (i == 7) {
							relatorioFinanceiroCobranca.setRecebedor8(listPagadorRecebedor.get(i));
							relatorioFinanceiroCobranca.setVlrRecebedor8(listValoresRecebedores.get(i));
						}
						if (i == 8) {
							relatorioFinanceiroCobranca.setRecebedor9(listPagadorRecebedor.get(i));
							relatorioFinanceiroCobranca.setVlrRecebedor9(listValoresRecebedores.get(i));
						}
						if (i == 9) {
							relatorioFinanceiroCobranca.setRecebedor10(listPagadorRecebedor.get(i));
							relatorioFinanceiroCobranca.setVlrRecebedor10(listValoresRecebedores.get(i));
						}
					}
				}
			}
		}
	}

	public PagadorRecebedor checkRecebedorFiltroContrato(PagadorRecebedor recebedorContrato) {
		if (this.idRecebedor > 0) {
			if (recebedorContrato.getId() == this.idRecebedor) {
				return recebedorContrato;
			}
		}
		if (this.idRecebedor2 > 0) {
			if (recebedorContrato.getId() == this.idRecebedor2) {
				return recebedorContrato;
			}
		}
		if (this.idRecebedor3 > 0) {
			if (recebedorContrato.getId() == this.idRecebedor3) {
				return recebedorContrato;
			}
		}
		if (this.idRecebedor4 > 0) {
			if (recebedorContrato.getId() == this.idRecebedor4) {
				return recebedorContrato;
			}
		}
		if (this.idRecebedor5 > 0) {
			if (recebedorContrato.getId() == this.idRecebedor5) {
				return recebedorContrato;
			}
		}
		if (this.idRecebedor6 > 0) {
			if (recebedorContrato.getId() == this.idRecebedor6) {
				return recebedorContrato;
			}
		}
		if (this.idRecebedor7 > 0) {
			if (recebedorContrato.getId() == this.idRecebedor7) {
				return recebedorContrato;
			}
		}
		if (this.idRecebedor8 > 0) {
			if (recebedorContrato.getId() == this.idRecebedor8) {
				return recebedorContrato;
			}
		}
		if (this.idRecebedor9 > 0) {
			if (recebedorContrato.getId() == this.idRecebedor9) {
				return recebedorContrato;
			}
		}
		if (this.idRecebedor10 > 0) {
			if (recebedorContrato.getId() == this.idRecebedor10) {
				return recebedorContrato;
			}
		}
		return null;
	}

	public void loadSelectedLovsPendentes() {
		clearSelectedLovsPendentes();

		if (this.objetoContratoCobranca.getPagador() != null) {
			this.selectedPagador = this.objetoContratoCobranca.getPagador();
			this.nomePagador = this.objetoContratoCobranca.getPagador().getNome();
			this.idPagador = this.objetoContratoCobranca.getPagador().getId();
		}

		if (!CommonsUtil.semValor(this.objetoCcb)) {
			CcbDao ccbDao = new CcbDao();
			this.objetoCcb = ccbDao.findByFilter("objetoContratoCobranca", objetoContratoCobranca).get(0);
		}

		if (this.objetoContratoCobranca.getResponsavel() != null) {
			this.selectedResponsavel = this.objetoContratoCobranca.getResponsavel();
			this.nomeResponsavel = this.objetoContratoCobranca.getResponsavel().getNome();
			this.idResponsavel = this.objetoContratoCobranca.getResponsavel().getId();

			/*
			 * if (this.objetoContratoCobranca.getResponsavel().getCpf() != null) {
			 * this.tipoResponsavelIsFisica = true; } else { this.tipoResponsavelIsFisica =
			 * false; }
			 */
		}

		if (this.objetoContratoCobranca.getImovel() != null) {
			this.selectedImovel = this.objetoContratoCobranca.getImovel();
			this.nomeImovel = this.objetoContratoCobranca.getImovel().getNome();
			this.idImovel = this.objetoContratoCobranca.getImovel().getId();
		}

		this.processoSelecionado = new CcbProcessosJudiciais();
		this.averbacaoSelecionada = new Averbacao();
		this.pagadorProcesso = new PagadorRecebedor();
		listarPessoas();
	}

	public void clearSelectedLovsPendentes() {
		this.selectedPagador = new PagadorRecebedor();
		this.nomePagador = null;
		this.idPagador = 0;

		this.selectedResponsavel = new Responsavel();
		this.nomeResponsavel = null;
		this.idResponsavel = 0;

		this.selectedImovel = new ImovelCobranca();
		this.nomeImovel = null;
		this.idImovel = 0;

		this.seguradoSelecionado = new Segurado();
		this.seguradoSelecionado.setPessoa(new PagadorRecebedor());

		this.socioSelecionado = new PagadorRecebedorSocio();
		this.socioSelecionado.setPessoa(new PagadorRecebedor());

		this.pagadorSecundarioSelecionado = new PagadorRecebedorAdicionais();
		this.pagadorSecundarioSelecionado.setPessoa(new PagadorRecebedor());

		this.addSegurador = false;
		this.addSocio = false;
		this.addPagador = false;
		this.mostrarTodosProcessos = false;
	}

	public void loadSelectedLovs() {
		clearSelectedRecebedores();
		this.seguradoSelecionado = new Segurado();
		this.seguradoSelecionado.setPessoa(new PagadorRecebedor());
		this.socioSelecionado = new PagadorRecebedorSocio();
		this.socioSelecionado.setPessoa(new PagadorRecebedor());
		this.pagadorSecundarioSelecionado = new PagadorRecebedorAdicionais();
		this.pagadorSecundarioSelecionado.setPessoa(new PagadorRecebedor());
		this.addSegurador = false;
		this.addSocio = false;
		this.addPagador = false;
		this.mostrarTodosProcessos = false;

		this.contasPagarSelecionada = new ContasPagar();
		this.contasPagarSelecionada.setPagadorRecebedor(new PagadorRecebedor());
		this.contasPagarSelecionada.setResponsavel(new Responsavel());
		this.processoSelecionado = new CcbProcessosJudiciais();
		this.pagadorProcesso = new PagadorRecebedor();

		this.selectedPagador = this.objetoContratoCobranca.getPagador();
		this.nomePagador = this.objetoContratoCobranca.getPagador().getNome();
		this.idPagador = this.objetoContratoCobranca.getPagador().getId();

		this.selectedResponsavel = this.objetoContratoCobranca.getResponsavel();
		this.nomeResponsavel = this.objetoContratoCobranca.getResponsavel().getNome();
		this.idResponsavel = this.objetoContratoCobranca.getResponsavel().getId();

		this.selectedImovel = this.objetoContratoCobranca.getImovel();
		if (this.selectedImovel != null) {
			if (this.objetoContratoCobranca.getImovel().getNome() != null) {
				this.nomeImovel = this.objetoContratoCobranca.getImovel().getNome();
			} else {
				this.nomeImovel = this.objetoContratoCobranca.getImovel().getTipo();
			}
			this.idImovel = this.objetoContratoCobranca.getImovel().getId();
		}

		if (this.objetoContratoCobranca.getRecebedor() != null) {
			this.selectedRecebedor = this.objetoContratoCobranca.getRecebedor();
			this.nomeRecebedor = this.objetoContratoCobranca.getRecebedor().getNome();
			this.idRecebedor = this.objetoContratoCobranca.getRecebedor().getId();
		}

		if (this.objetoContratoCobranca.getRecebedor2() != null) {
			this.selectedRecebedor2 = this.objetoContratoCobranca.getRecebedor2();
			this.nomeRecebedor2 = this.objetoContratoCobranca.getRecebedor2().getNome();
			this.idRecebedor2 = this.objetoContratoCobranca.getRecebedor2().getId();

			this.renderRecebedor2 = true;
		}

		if (this.objetoContratoCobranca.getRecebedor3() != null) {
			this.selectedRecebedor3 = this.objetoContratoCobranca.getRecebedor3();
			this.nomeRecebedor3 = this.objetoContratoCobranca.getRecebedor3().getNome();
			this.idRecebedor3 = this.objetoContratoCobranca.getRecebedor3().getId();

			this.renderRecebedor3 = true;
		}

		if (this.objetoContratoCobranca.getRecebedor4() != null) {
			this.selectedRecebedor4 = this.objetoContratoCobranca.getRecebedor4();
			this.nomeRecebedor4 = this.objetoContratoCobranca.getRecebedor4().getNome();
			this.idRecebedor4 = this.objetoContratoCobranca.getRecebedor4().getId();

			this.renderRecebedor4 = true;
		}

		if (this.objetoContratoCobranca.getRecebedor5() != null) {
			this.selectedRecebedor5 = this.objetoContratoCobranca.getRecebedor5();
			this.nomeRecebedor5 = this.objetoContratoCobranca.getRecebedor5().getNome();
			this.idRecebedor5 = this.objetoContratoCobranca.getRecebedor5().getId();

			this.renderRecebedor5 = true;
		}

		if (this.objetoContratoCobranca.getRecebedor6() != null) {
			this.selectedRecebedor6 = this.objetoContratoCobranca.getRecebedor6();
			this.nomeRecebedor6 = this.objetoContratoCobranca.getRecebedor6().getNome();
			this.idRecebedor6 = this.objetoContratoCobranca.getRecebedor6().getId();

			this.renderRecebedor6 = true;
		}

		if (this.objetoContratoCobranca.getRecebedor7() != null) {
			this.selectedRecebedor7 = this.objetoContratoCobranca.getRecebedor7();
			this.nomeRecebedor7 = this.objetoContratoCobranca.getRecebedor7().getNome();
			this.idRecebedor7 = this.objetoContratoCobranca.getRecebedor7().getId();

			this.renderRecebedor7 = true;
		}

		if (this.objetoContratoCobranca.getRecebedor8() != null) {
			this.selectedRecebedor8 = this.objetoContratoCobranca.getRecebedor8();
			this.nomeRecebedor8 = this.objetoContratoCobranca.getRecebedor8().getNome();
			this.idRecebedor8 = this.objetoContratoCobranca.getRecebedor8().getId();

			this.renderRecebedor8 = true;
		}

		if (this.objetoContratoCobranca.getRecebedor9() != null) {
			this.selectedRecebedor9 = this.objetoContratoCobranca.getRecebedor9();
			this.nomeRecebedor9 = this.objetoContratoCobranca.getRecebedor9().getNome();
			this.idRecebedor9 = this.objetoContratoCobranca.getRecebedor9().getId();

			this.renderRecebedor9 = true;
		}

		if (this.objetoContratoCobranca.getRecebedor10() != null) {
			this.selectedRecebedor10 = this.objetoContratoCobranca.getRecebedor10();
			this.nomeRecebedor10 = this.objetoContratoCobranca.getRecebedor10().getNome();
			this.idRecebedor10 = this.objetoContratoCobranca.getRecebedor10().getId();

			this.renderRecebedor10 = true;
		}

		if (this.objetoContratoCobranca.getRecebedorParcelaFinal1() != null) {
			this.selectedRecebedorFinal1 = this.objetoContratoCobranca.getRecebedorParcelaFinal1();
			this.nomeRecebedorFinal1 = this.objetoContratoCobranca.getRecebedorParcelaFinal1().getNome();
			this.idRecebedorFinal1 = this.objetoContratoCobranca.getRecebedorParcelaFinal1().getId();
		}

		if (this.objetoContratoCobranca.getRecebedorParcelaFinal2() != null) {
			this.selectedRecebedorFinal2 = this.objetoContratoCobranca.getRecebedorParcelaFinal2();
			this.nomeRecebedorFinal2 = this.objetoContratoCobranca.getRecebedorParcelaFinal2().getNome();
			this.idRecebedorFinal2 = this.objetoContratoCobranca.getRecebedorParcelaFinal2().getId();
		}

		if (this.objetoContratoCobranca.getRecebedorParcelaFinal3() != null) {
			this.selectedRecebedorFinal3 = this.objetoContratoCobranca.getRecebedorParcelaFinal3();
			this.nomeRecebedorFinal3 = this.objetoContratoCobranca.getRecebedorParcelaFinal3().getNome();
			this.idRecebedorFinal3 = this.objetoContratoCobranca.getRecebedorParcelaFinal3().getId();
		}

		if (this.objetoContratoCobranca.getRecebedorParcelaFinal4() != null) {
			this.selectedRecebedorFinal4 = this.objetoContratoCobranca.getRecebedorParcelaFinal4();
			this.nomeRecebedorFinal4 = this.objetoContratoCobranca.getRecebedorParcelaFinal4().getNome();
			this.idRecebedorFinal4 = this.objetoContratoCobranca.getRecebedorParcelaFinal4().getId();
		}

		if (this.objetoContratoCobranca.getRecebedorParcelaFinal5() != null) {
			this.selectedRecebedorFinal5 = this.objetoContratoCobranca.getRecebedorParcelaFinal5();
			this.nomeRecebedorFinal5 = this.objetoContratoCobranca.getRecebedorParcelaFinal5().getNome();
			this.idRecebedorFinal5 = this.objetoContratoCobranca.getRecebedorParcelaFinal5().getId();
		}

		if (this.objetoContratoCobranca.getRecebedorParcelaFinal6() != null) {
			this.selectedRecebedorFinal6 = this.objetoContratoCobranca.getRecebedorParcelaFinal6();
			this.nomeRecebedorFinal6 = this.objetoContratoCobranca.getRecebedorParcelaFinal6().getNome();
			this.idRecebedorFinal6 = this.objetoContratoCobranca.getRecebedorParcelaFinal6().getId();
		}

		if (this.objetoContratoCobranca.getRecebedorParcelaFinal7() != null) {
			this.selectedRecebedorFinal7 = this.objetoContratoCobranca.getRecebedorParcelaFinal7();
			this.nomeRecebedorFinal7 = this.objetoContratoCobranca.getRecebedorParcelaFinal7().getNome();
			this.idRecebedorFinal7 = this.objetoContratoCobranca.getRecebedorParcelaFinal7().getId();
		}

		if (this.objetoContratoCobranca.getRecebedorParcelaFinal8() != null) {
			this.selectedRecebedorFinal8 = this.objetoContratoCobranca.getRecebedorParcelaFinal8();
			this.nomeRecebedorFinal8 = this.objetoContratoCobranca.getRecebedorParcelaFinal8().getNome();
			this.idRecebedorFinal8 = this.objetoContratoCobranca.getRecebedorParcelaFinal8().getId();
		}

		if (this.objetoContratoCobranca.getRecebedorParcelaFinal9() != null) {
			this.selectedRecebedorFinal9 = this.objetoContratoCobranca.getRecebedorParcelaFinal9();
			this.nomeRecebedorFinal9 = this.objetoContratoCobranca.getRecebedorParcelaFinal9().getNome();
			this.idRecebedorFinal9 = this.objetoContratoCobranca.getRecebedorParcelaFinal9().getId();
		}

		if (this.objetoContratoCobranca.getRecebedorParcelaFinal10() != null) {
			this.selectedRecebedorFinal10 = this.objetoContratoCobranca.getRecebedorParcelaFinal10();
			this.nomeRecebedorFinal10 = this.objetoContratoCobranca.getRecebedorParcelaFinal10().getNome();
			this.idRecebedorFinal10 = this.objetoContratoCobranca.getRecebedorParcelaFinal10().getId();
		}
	}

	public void clearSelectedLovs() {
		this.selectedPagador = new PagadorRecebedor();
		this.nomePagador = null;
		this.idPagador = 0;

		this.selectedResponsavel = new Responsavel();
		this.nomeResponsavel = null;
		this.idResponsavel = 0;

		this.selectedImovel = new ImovelCobranca();
		this.nomeImovel = null;
		this.idImovel = 0;

		clearRecebedor();
		clearRecebedor2();
		clearRecebedor3();
		clearRecebedor4();
		clearRecebedor5();
		clearRecebedor6();
		clearRecebedor7();
		clearRecebedor8();
		clearRecebedor9();
		clearRecebedor10();

		clearRecebedorFinal1();
		clearRecebedorFinal2();
		clearRecebedorFinal3();
		clearRecebedorFinal4();
		clearRecebedorFinal5();
		clearRecebedorFinal6();
		clearRecebedorFinal7();
		clearRecebedorFinal8();
		clearRecebedorFinal9();
		clearRecebedorFinal10();
	}

	public void reParcelarContrato() {
		return;
	}

	public List<ContratoCobrancaParcelasInvestidor> ordenaParcleasInvstidor(
			List<ContratoCobrancaParcelasInvestidor> lista) {

		Collections.sort(lista, new Comparator<ContratoCobrancaParcelasInvestidor>() {
			@Override
			public int compare(ContratoCobrancaParcelasInvestidor one, ContratoCobrancaParcelasInvestidor other) {
				int result = one.getDataVencimento().compareTo(other.getDataVencimento());
				if (result == 0) {
					try {
						Integer oneParcela = Integer.parseInt(one.getNumeroParcela());
						Integer otherParcela = Integer.parseInt(other.getNumeroParcela());
						result = oneParcela.compareTo(otherParcela);
					} catch (Exception e) {
						result = 0;
					}
				}
				return result;
			}
		});

		return lista;
	}

	public List<ContratoCobrancaParcelasInvestidor> geraParcelasInvestidor(int investidorPosicao) {
		List<ContratoCobrancaParcelasInvestidor> parcelasInvestidor = new ArrayList<ContratoCobrancaParcelasInvestidor>();
		ContratoCobrancaParcelasInvestidor parcelaInvestidor;
		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();

		Date dataParcela;
		BigDecimal taxaRemuneracao = BigDecimal.ZERO;

		String tipoCalculoInvestidor;
		BigDecimal vlrInvestidor;
		Integer qtdeParcelasInvestidor;

		PagadorRecebedor investidor = new PagadorRecebedor();
		boolean isEnvelope = false;

		switch (investidorPosicao) {
		case 1:
			investidor = this.objetoContratoCobranca.getRecebedor();
			taxaRemuneracao = this.objetoContratoCobranca.getTaxaRemuneracaoInvestidor1();
			isEnvelope = this.objetoContratoCobranca.isRecebedorEnvelope();

			tipoCalculoInvestidor = this.objetoContratoCobranca.getTipoCalculoInvestidor1();
			vlrInvestidor = this.objetoContratoCobranca.getVlrInvestidor1();
			qtdeParcelasInvestidor = this.objetoContratoCobranca.getQtdeParcelasInvestidor1();
			break;
		case 2:
			investidor = this.objetoContratoCobranca.getRecebedor2();
			taxaRemuneracao = this.objetoContratoCobranca.getTaxaRemuneracaoInvestidor2();
			isEnvelope = this.objetoContratoCobranca.isRecebedorEnvelope2();

			tipoCalculoInvestidor = this.objetoContratoCobranca.getTipoCalculoInvestidor2();
			vlrInvestidor = this.objetoContratoCobranca.getVlrInvestidor2();
			qtdeParcelasInvestidor = this.objetoContratoCobranca.getQtdeParcelasInvestidor2();
			break;
		case 3:
			investidor = this.objetoContratoCobranca.getRecebedor3();
			taxaRemuneracao = this.objetoContratoCobranca.getTaxaRemuneracaoInvestidor3();
			isEnvelope = this.objetoContratoCobranca.isRecebedorEnvelope3();

			tipoCalculoInvestidor = this.objetoContratoCobranca.getTipoCalculoInvestidor3();
			vlrInvestidor = this.objetoContratoCobranca.getVlrInvestidor3();
			qtdeParcelasInvestidor = this.objetoContratoCobranca.getQtdeParcelasInvestidor3();
			break;
		case 4:
			investidor = this.objetoContratoCobranca.getRecebedor4();
			taxaRemuneracao = this.objetoContratoCobranca.getTaxaRemuneracaoInvestidor4();
			isEnvelope = this.objetoContratoCobranca.isRecebedorEnvelope4();

			tipoCalculoInvestidor = this.objetoContratoCobranca.getTipoCalculoInvestidor4();
			vlrInvestidor = this.objetoContratoCobranca.getVlrInvestidor4();
			qtdeParcelasInvestidor = this.objetoContratoCobranca.getQtdeParcelasInvestidor4();
			break;
		case 5:
			investidor = this.objetoContratoCobranca.getRecebedor5();
			taxaRemuneracao = this.objetoContratoCobranca.getTaxaRemuneracaoInvestidor5();
			isEnvelope = this.objetoContratoCobranca.isRecebedorEnvelope5();

			tipoCalculoInvestidor = this.objetoContratoCobranca.getTipoCalculoInvestidor5();
			vlrInvestidor = this.objetoContratoCobranca.getVlrInvestidor5();
			qtdeParcelasInvestidor = this.objetoContratoCobranca.getQtdeParcelasInvestidor5();
			break;
		case 6:
			investidor = this.objetoContratoCobranca.getRecebedor6();
			taxaRemuneracao = this.objetoContratoCobranca.getTaxaRemuneracaoInvestidor6();
			isEnvelope = this.objetoContratoCobranca.isRecebedorEnvelope6();

			tipoCalculoInvestidor = this.objetoContratoCobranca.getTipoCalculoInvestidor6();
			vlrInvestidor = this.objetoContratoCobranca.getVlrInvestidor6();
			qtdeParcelasInvestidor = this.objetoContratoCobranca.getQtdeParcelasInvestidor6();
			break;
		case 7:
			investidor = this.objetoContratoCobranca.getRecebedor7();
			taxaRemuneracao = this.objetoContratoCobranca.getTaxaRemuneracaoInvestidor7();
			isEnvelope = this.objetoContratoCobranca.isRecebedorEnvelope7();

			tipoCalculoInvestidor = this.objetoContratoCobranca.getTipoCalculoInvestidor7();
			vlrInvestidor = this.objetoContratoCobranca.getVlrInvestidor7();
			qtdeParcelasInvestidor = this.objetoContratoCobranca.getQtdeParcelasInvestidor7();
			break;
		case 8:
			investidor = this.objetoContratoCobranca.getRecebedor8();
			taxaRemuneracao = this.objetoContratoCobranca.getTaxaRemuneracaoInvestidor8();
			isEnvelope = this.objetoContratoCobranca.isRecebedorEnvelope8();

			tipoCalculoInvestidor = this.objetoContratoCobranca.getTipoCalculoInvestidor8();
			vlrInvestidor = this.objetoContratoCobranca.getVlrInvestidor8();
			qtdeParcelasInvestidor = this.objetoContratoCobranca.getQtdeParcelasInvestidor8();
			break;
		case 9:
			investidor = this.objetoContratoCobranca.getRecebedor9();
			taxaRemuneracao = this.objetoContratoCobranca.getTaxaRemuneracaoInvestidor9();
			isEnvelope = this.objetoContratoCobranca.isRecebedorEnvelope9();

			tipoCalculoInvestidor = this.objetoContratoCobranca.getTipoCalculoInvestidor9();
			vlrInvestidor = this.objetoContratoCobranca.getVlrInvestidor9();
			qtdeParcelasInvestidor = this.objetoContratoCobranca.getQtdeParcelasInvestidor9();
			break;
		case 10:
			investidor = this.objetoContratoCobranca.getRecebedor10();
			taxaRemuneracao = this.objetoContratoCobranca.getTaxaRemuneracaoInvestidor10();
			isEnvelope = this.objetoContratoCobranca.isRecebedorEnvelope10();

			tipoCalculoInvestidor = this.objetoContratoCobranca.getTipoCalculoInvestidor10();
			vlrInvestidor = this.objetoContratoCobranca.getVlrInvestidor10();
			qtdeParcelasInvestidor = this.objetoContratoCobranca.getQtdeParcelasInvestidor10();
			break;
		}

		// calcular simulador
		SimulacaoVO simulador = calcularInvestimento(investidorPosicao);
		BigDecimal totalJuros = BigDecimal.ZERO;
		if (simulador == null)
			return new ArrayList<ContratoCobrancaParcelasInvestidor>();

		for (SimulacaoDetalheVO parcela : simulador.getParcelas()) {

			if (BigInteger.ZERO.compareTo(parcela.getNumeroParcela()) == 0)
				continue;

//		for (int i = 0; i < iQtdParcelas; i++) {
			if (isEnvelope) {
				parcelaInvestidor = new ContratoCobrancaParcelasInvestidor();

				dataParcela = contratoCobrancaDao.geraDataParcela(parcela.getNumeroParcela().intValue(),
						simulador.getDataSimulacao());

				parcelaInvestidor.setDataVencimento(dataParcela);
				parcelaInvestidor.setNumeroParcela(CommonsUtil.stringValue(parcela.getNumeroParcela()));
				parcelaInvestidor.setParcelaMensal(parcela.getValorParcela());
				parcelaInvestidor.setValorLiquido(parcela.getValorParcela());
				parcelaInvestidor.setBaixado(false);
				parcelaInvestidor.setInvestidor(investidor);
				parcelaInvestidor.setNumeroContrato(this.objetoContratoCobranca.getNumeroContrato());

				parcelaInvestidor.setJuros(BigDecimal.ZERO);
				parcelaInvestidor.setAmortizacao(BigDecimal.ZERO);
				parcelaInvestidor.setSaldoCredor(BigDecimal.ZERO);
				parcelaInvestidor.setSaldoCredorAtualizado(BigDecimal.ZERO);
				parcelaInvestidor.setIrRetido(BigDecimal.ZERO);

				// adiciona a lista de retorno
				parcelasInvestidor.add(parcelaInvestidor);
			} else {
				parcelaInvestidor = new ContratoCobrancaParcelasInvestidor();

				dataParcela = contratoCobrancaDao.geraDataParcela(parcela.getNumeroParcela().intValue(),
						simulador.getDataSimulacao());

				parcelaInvestidor.setDataVencimento(dataParcela);
				parcelaInvestidor.setNumeroParcela(CommonsUtil.stringValue(parcela.getNumeroParcela()));

				parcelaInvestidor.setSaldoCredor(parcela.getSaldoDevedorInicial());

				// se a taxa de remuneração for maior que zero
				if (taxaRemuneracao.compareTo(BigDecimal.ZERO) == 1) {
					if (BigDecimal.ZERO.compareTo(parcela.getSaldoDevedorInicial()) == 0) {
						parcelaInvestidor.setJuros(totalJuros.add(parcela.getJuros()));
						parcelaInvestidor.setParcelaMensal(parcela.getValorParcela().add(totalJuros));
						parcelaInvestidor.setCapitalizacao(parcela.getJuros());
					} else {
						parcelaInvestidor.setJuros(BigDecimal.ZERO);
						parcelaInvestidor.setParcelaMensal(BigDecimal.ZERO);
						totalJuros = totalJuros.add(parcela.getJuros());
						parcelaInvestidor.setCapitalizacao(parcela.getJuros());
					}
					parcelaInvestidor.setAmortizacao(parcela.getAmortizacao());
					parcelaInvestidor.setSaldoCredorAtualizado(parcela.getSaldoDevedorInicial());
				} else {
					parcelaInvestidor.setJuros(BigDecimal.ZERO);
					parcelaInvestidor.setAmortizacao(BigDecimal.ZERO);
					parcelaInvestidor.setSaldoCredorAtualizado(BigDecimal.ZERO);
					parcelaInvestidor.setCapitalizacao(BigDecimal.ZERO);
				}

				if (BigDecimal.ZERO.compareTo(parcelaInvestidor.getJurosBaixa()) < 0) {
					if (!this.objetoContratoCobranca.getEmpresa().equals("GALLERIA CORRESPONDENTE BANCARIO EIRELI")) {
						BigDecimal txIR = BigDecimal.ZERO;

						if ((parcela.getNumeroParcela().intValue()) < 6) {
							txIR = BigDecimal.valueOf(0.225);
						} else if ((parcela.getNumeroParcela().intValue()) >= 6
								&& (parcela.getNumeroParcela().intValue()) < 12) {
							txIR = BigDecimal.valueOf(0.2);
						} else if ((parcela.getNumeroParcela().intValue()) >= 12
								&& (parcela.getNumeroParcela().intValue()) < 24) {
							txIR = BigDecimal.valueOf(0.175);
						} else if ((parcela.getNumeroParcela().intValue()) >= 24) {
							txIR = BigDecimal.valueOf(0.15);
						}

						parcelaInvestidor.setIrRetido(parcelaInvestidor.getJurosBaixa().multiply(txIR));

						if (BigDecimal.ZERO.compareTo(parcelaInvestidor.getParcelaMensal()) < 0)
							parcelaInvestidor.setValorLiquido(
									parcelaInvestidor.getParcelaMensal().subtract(parcelaInvestidor.getIrRetido()));

					} else {
						parcelaInvestidor.setValorLiquido(parcela.getValorParcela());
					}
				} else {
					parcelaInvestidor.setValorLiquido(BigDecimal.ZERO);
					parcelaInvestidor.setIrRetido(BigDecimal.ZERO);
				}

				parcelaInvestidor.setBaixado(false);

				parcelaInvestidor.setInvestidor(investidor);

				parcelaInvestidor.setNumeroContrato(this.objetoContratoCobranca.getNumeroContrato());

				// adiciona a lista de retorno
				parcelasInvestidor.add(parcelaInvestidor);
			}
		}
		// se é contrato com amortização somente na ultima parcela, zera capitalizacao
		if (simulador.getTipoCalculo().equals("Americano")
				&& (simulador.getQtdParcelas().subtract(simulador.getCarencia()).compareTo(BigInteger.ONE) == 0)) {
			if (parcelasInvestidor.size() > 0) {
				parcelasInvestidor.get(parcelasInvestidor.size() - 1).setCapitalizacao(BigDecimal.ZERO);
			}

		}

		return parcelasInvestidor;
	}

	public boolean verificaSeGeraParcelasInvestidor(List<ContratoCobrancaParcelasInvestidor> listaParcelas,
			int posicaoInvestidor) {
		if (listaParcelas == null) {
			return true;
		} else {
			// Verifica se o investidor teve alterações nas parcelas
			// Se sim, não deve-se gerar parcelas de investidor novamente
			boolean geraParcelasInvestidor = true;

			switch (posicaoInvestidor) {
			case 1:
				if (this.objetoContratoCobranca.isParcelasAlteradas1()) {
					geraParcelasInvestidor = false;
				}
				break;
			case 2:
				if (this.objetoContratoCobranca.isParcelasAlteradas2()) {
					geraParcelasInvestidor = false;
				}
				break;
			case 3:
				if (this.objetoContratoCobranca.isParcelasAlteradas3()) {
					geraParcelasInvestidor = false;
				}
				break;
			case 4:
				if (this.objetoContratoCobranca.isParcelasAlteradas4()) {
					geraParcelasInvestidor = false;
				}
				break;
			case 5:
				if (this.objetoContratoCobranca.isParcelasAlteradas5()) {
					geraParcelasInvestidor = false;
				}
				break;
			case 6:
				if (this.objetoContratoCobranca.isParcelasAlteradas6()) {
					geraParcelasInvestidor = false;
				}
				break;
			case 7:
				if (this.objetoContratoCobranca.isParcelasAlteradas7()) {
					geraParcelasInvestidor = false;
				}
				break;
			case 8:
				if (this.objetoContratoCobranca.isParcelasAlteradas8()) {
					geraParcelasInvestidor = false;
				}
				break;
			case 9:
				if (this.objetoContratoCobranca.isParcelasAlteradas9()) {
					geraParcelasInvestidor = false;
				}
				break;
			case 10:
				if (this.objetoContratoCobranca.isParcelasAlteradas10()) {
					geraParcelasInvestidor = false;
				}
				break;
			default:
			}

			if (geraParcelasInvestidor) {
				for (ContratoCobrancaParcelasInvestidor c : listaParcelas) {
					if (c.getDataBaixa() != null) {
						return false;
					}
				}
			} else {
				return false;
			}
		}

		return true;
	}

	/***
	 * VERIFICA SE RECEBEDOR É GALLERIA
	 * 
	 * @param recebedor
	 * @return
	 */
	public boolean recebedoIsGalleria(PagadorRecebedor recebedor) {
		boolean retorno = false;

		if (recebedor.getId() == 15 || recebedor.getId() == 34 || recebedor.getId() == 14 || recebedor.getId() == 182
				|| recebedor.getId() == 417 || recebedor.getId() == 803) {
			retorno = true;
		}

		return retorno;
	}

	/****
	 * CALCULA RETENCAO, REPASSE E COMISSAO
	 * 
	 * @return
	 */
	public void calculaValoresContratoTodasParcelas(PagadorRecebedor recebedor, boolean ocultaRecebedor,
			boolean recebedorEnvelope, List<ContratoCobrancaParcelasInvestidor> contratoCobrancaParcelasInvestidor) {
		if (recebedor != null) {
			// calcula repasse
			if (ocultaRecebedor && recebedorEnvelope) {
				for (ContratoCobrancaParcelasInvestidor parcelas : contratoCobrancaParcelasInvestidor) {
					this.vlrComissaoNew = this.vlrComissaoNew.add(parcelas.getParcelaMensal());
				}
			}
			// Se galleria
			if (recebedoIsGalleria(recebedor)) {
				for (ContratoCobrancaParcelasInvestidor parcelas : contratoCobrancaParcelasInvestidor) {
					this.vlrRetencaoNew = this.vlrRetencaoNew.add(parcelas.getParcelaMensal());
				}
			} else {
				// Se não galleria
				if (!ocultaRecebedor && !recebedorEnvelope) {
					for (ContratoCobrancaParcelasInvestidor parcelas : contratoCobrancaParcelasInvestidor) {
						this.vlrRepasseNew = this.vlrRepasseNew.add(parcelas.getParcelaMensal());
					}
				}
			}
		}
	}

	/****
	 * CALCULA RETENCAO, REPASSE E COMISSAO
	 * 
	 * @return
	 */
	public void calculaValoresContratoParcelaRecebedor(PagadorRecebedor recebedor, boolean ocultaRecebedor,
			boolean recebedorEnvelope, BigDecimal valorRecebedor, BigDecimal valorRecebedorFinal) {
		if (recebedor != null) {
			// calcula repasse
			if (ocultaRecebedor || recebedorEnvelope) {
				if (valorRecebedor != null) {
					this.vlrComissaoNew = this.vlrComissaoNew.add(valorRecebedor);
				}
				if (valorRecebedorFinal != null) {
					this.vlrComissaoFinalNew = this.vlrComissaoFinalNew.add(valorRecebedorFinal);
				}
			}
			// Se galleria
			if (recebedoIsGalleria(recebedor)) {
				if (valorRecebedor != null) {
					this.vlrRetencaoNew = this.vlrRetencaoNew.add(valorRecebedor);
				}
				if (valorRecebedorFinal != null) {
					this.vlrRetencaoFinalNew = this.vlrRetencaoFinalNew.add(valorRecebedorFinal);
				}
			} else {
				// Se não galleria
				if (!ocultaRecebedor && !recebedorEnvelope) {
					if (valorRecebedor != null) {
						this.vlrRepasseNew = this.vlrRepasseNew.add(valorRecebedor);
					}
					if (valorRecebedorFinal != null) {
						this.vlrRepasseFinalNew = this.vlrRepasseFinalNew.add(valorRecebedorFinal);
					}
				}
			}
		}
	}

	/***
	 * CALCULA VALOR INVESTIDOR vlrRepasse ADM vlrRetencao REPASSE vlrComissao
	 * 
	 */
	public void calculaValoresContratoParcelaRecebedorTela() {
		this.vlrRepasseNew = BigDecimal.ZERO;
		this.vlrRetencaoNew = BigDecimal.ZERO;
		this.vlrComissaoNew = BigDecimal.ZERO;

		this.vlrRepasseFinalNew = BigDecimal.ZERO;
		this.vlrRetencaoFinalNew = BigDecimal.ZERO;
		this.vlrComissaoFinalNew = BigDecimal.ZERO;

		if (this.selectedRecebedor != null) {
			calculaValoresContratoParcelaRecebedor(this.selectedRecebedor,
					this.objetoContratoCobranca.isOcultaRecebedor(), this.objetoContratoCobranca.isRecebedorEnvelope(),
					this.objetoContratoCobranca.getVlrRecebedor(), this.objetoContratoCobranca.getVlrFinalRecebedor1());
		}

		if (this.selectedRecebedor2 != null) {
			calculaValoresContratoParcelaRecebedor(this.selectedRecebedor2,
					this.objetoContratoCobranca.isOcultaRecebedor2(),
					this.objetoContratoCobranca.isRecebedorEnvelope2(), this.objetoContratoCobranca.getVlrRecebedor2(),
					this.objetoContratoCobranca.getVlrFinalRecebedor2());
		}

		if (this.selectedRecebedor3 != null) {
			calculaValoresContratoParcelaRecebedor(this.selectedRecebedor3,
					this.objetoContratoCobranca.isOcultaRecebedor3(),
					this.objetoContratoCobranca.isRecebedorEnvelope3(), this.objetoContratoCobranca.getVlrRecebedor3(),
					this.objetoContratoCobranca.getVlrFinalRecebedor3());
		}

		if (this.selectedRecebedor4 != null) {
			calculaValoresContratoParcelaRecebedor(this.selectedRecebedor4,
					this.objetoContratoCobranca.isOcultaRecebedor4(),
					this.objetoContratoCobranca.isRecebedorEnvelope4(), this.objetoContratoCobranca.getVlrRecebedor4(),
					this.objetoContratoCobranca.getVlrFinalRecebedor4());
		}

		if (this.selectedRecebedor5 != null) {
			calculaValoresContratoParcelaRecebedor(this.selectedRecebedor5,
					this.objetoContratoCobranca.isOcultaRecebedor5(),
					this.objetoContratoCobranca.isRecebedorEnvelope5(), this.objetoContratoCobranca.getVlrRecebedor5(),
					this.objetoContratoCobranca.getVlrFinalRecebedor5());
		}

		if (this.selectedRecebedor6 != null) {
			calculaValoresContratoParcelaRecebedor(this.selectedRecebedor6,
					this.objetoContratoCobranca.isOcultaRecebedor6(),
					this.objetoContratoCobranca.isRecebedorEnvelope6(), this.objetoContratoCobranca.getVlrRecebedor6(),
					this.objetoContratoCobranca.getVlrFinalRecebedor6());
		}

		if (this.selectedRecebedor7 != null) {
			calculaValoresContratoParcelaRecebedor(this.selectedRecebedor7,
					this.objetoContratoCobranca.isOcultaRecebedor7(),
					this.objetoContratoCobranca.isRecebedorEnvelope7(), this.objetoContratoCobranca.getVlrRecebedor7(),
					this.objetoContratoCobranca.getVlrFinalRecebedor7());
		}

		if (this.selectedRecebedor8 != null) {
			calculaValoresContratoParcelaRecebedor(this.selectedRecebedor8,
					this.objetoContratoCobranca.isOcultaRecebedor8(),
					this.objetoContratoCobranca.isRecebedorEnvelope8(), this.objetoContratoCobranca.getVlrRecebedor8(),
					this.objetoContratoCobranca.getVlrFinalRecebedor8());
		}

		if (this.selectedRecebedor9 != null) {
			calculaValoresContratoParcelaRecebedor(this.selectedRecebedor9,
					this.objetoContratoCobranca.isOcultaRecebedor9(),
					this.objetoContratoCobranca.isRecebedorEnvelope9(), this.objetoContratoCobranca.getVlrRecebedor9(),
					this.objetoContratoCobranca.getVlrFinalRecebedor9());
		}

		if (this.selectedRecebedor10 != null) {
			calculaValoresContratoParcelaRecebedor(this.selectedRecebedor10,
					this.objetoContratoCobranca.isOcultaRecebedor10(),
					this.objetoContratoCobranca.isRecebedorEnvelope10(),
					this.objetoContratoCobranca.getVlrRecebedor10(),
					this.objetoContratoCobranca.getVlrFinalRecebedor10());
		}

		// seta novos valores
		this.vlrRepasse = this.vlrRepasseNew;
		this.vlrRetencao = this.vlrRetencaoNew;
		this.vlrComissao = this.vlrComissaoNew;

		this.vlrRepasseFinal = this.vlrRepasseFinalNew;
		this.vlrRetencaoFinal = this.vlrRetencaoFinalNew;
		this.vlrComissaoFinal = this.vlrComissaoFinalNew;
	}

	public String gerarContrato() {
		FacesContext context = FacesContext.getCurrentInstance();
		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();
		String msgRetorno = null;
		boolean erroValidacaoLov = false;
		boolean erroValidacaoBaixa = false;

		PagadorRecebedorDao pagadorRecebedorDao = new PagadorRecebedorDao();

		this.objetoContratoCobranca.setVlrInvestimento(this.objetoContratoCobranca.getVlrParcela());

		// em caso de regerar
		/*
		 * if (this.objetoContratoCobranca.getListContratoCobrancaDetalhes().size() > 0)
		 * { for (ContratoCobrancaDetalhes cbd :
		 * this.objetoContratoCobranca.getListContratoCobrancaDetalhes()) { if
		 * (cbd.isParcelaPaga()) { context.addMessage(null, new FacesMessage(
		 * FacesMessage.SEVERITY_ERROR,
		 * "Contrato Cobrança: Erro de validação: Já houve baixa de parcela(s) " +
		 * "para este contrato, não é possível efetuar a alteração.", ""));
		 * erroValidacaoBaixa = true; break; } } }
		 */
		BigDecimalConverter bigDecimalConverter = new BigDecimalConverter();

//		this.objetoContratoCobranca.setVlrParcelaStr(
//				bigDecimalConverter.getAsString(null, null, this.objetoContratoCobranca.getVlrParcela()));

		// INICIO - Validacao das LoVs
		if (this.selectedPagador == null) {
			context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR,
					"Contrato Cobrança: Erro de validação: é obrigatória a seleção do Pagador.", ""));
			erroValidacaoLov = true;
		} else {
			this.objetoContratoCobranca.setPagador(pagadorRecebedorDao.findById(this.selectedPagador.getId()));
		}

		if (this.selectedRecebedor == null
				&& SiscoatConstants.PAGADOR_GALLERIA.contains(this.selectedPagador.getId())) {
			context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR,
					"Contrato Cobrança: Erro de validação: é obrigatória a seleção do Recebedor.", ""));
			erroValidacaoLov = true;

			this.objetoContratoCobranca
					.setListContratoCobrancaParcelasInvestidor1(new ArrayList<ContratoCobrancaParcelasInvestidor>());
		} else {
			// Popula recebedor final
			if (!this.objetoContratoCobranca.isOcultaRecebedor()
					&& !this.objetoContratoCobranca.isRecebedorEnvelope()) {
				this.objetoContratoCobranca.setRecebedorParcelaFinal1(this.selectedRecebedor);
			}

			if (this.selectedRecebedor == null) {
				this.objetoContratoCobranca.setRecebedor(null);
				this.objetoContratoCobranca.setVlrRecebedor(null);
				this.objetoContratoCobranca.setDataInclusaoRecebedor1(null);
				this.objetoContratoCobranca.setListContratoCobrancaParcelasInvestidor1(
						new ArrayList<ContratoCobrancaParcelasInvestidor>());
				this.objetoContratoCobranca.setRecebedorParcelaFinal1(null);
			} else {
				this.objetoContratoCobranca.setRecebedor(pagadorRecebedorDao.findById(this.selectedRecebedor.getId()));
				this.objetoContratoCobranca.setDataInclusaoRecebedor1(dataHoje);
				if (verificaSeGeraParcelasInvestidor(
						this.objetoContratoCobranca.getListContratoCobrancaParcelasInvestidor1(), 1)) {
					this.objetoContratoCobranca.setListContratoCobrancaParcelasInvestidor1(geraParcelasInvestidor(1));
				}
			}
		}

		if (this.selectedRecebedor2 == null) {
			this.objetoContratoCobranca.setRecebedor2(null);
			this.objetoContratoCobranca.setVlrRecebedor2(null);
			this.objetoContratoCobranca.setDataInclusaoRecebedor2(null);
			this.objetoContratoCobranca
					.setListContratoCobrancaParcelasInvestidor2(new ArrayList<ContratoCobrancaParcelasInvestidor>());
			this.objetoContratoCobranca.setRecebedorParcelaFinal2(null);
		} else {
			// Popula recebedor final
			if (!this.objetoContratoCobranca.isOcultaRecebedor2()
					&& !this.objetoContratoCobranca.isRecebedorEnvelope2()) {
				this.objetoContratoCobranca.setRecebedorParcelaFinal2(this.selectedRecebedor2);
			}

			this.objetoContratoCobranca.setRecebedor2(pagadorRecebedorDao.findById(this.selectedRecebedor2.getId()));
			this.objetoContratoCobranca.setDataInclusaoRecebedor2(dataHoje);
			if (verificaSeGeraParcelasInvestidor(
					this.objetoContratoCobranca.getListContratoCobrancaParcelasInvestidor2(), 2)) {
				this.objetoContratoCobranca.setListContratoCobrancaParcelasInvestidor2(geraParcelasInvestidor(2));
			}
		}

		if (this.selectedRecebedor3 == null) {
			this.objetoContratoCobranca.setRecebedor3(null);
			this.objetoContratoCobranca.setVlrRecebedor3(null);
			this.objetoContratoCobranca.setDataInclusaoRecebedor3(null);
			this.objetoContratoCobranca
					.setListContratoCobrancaParcelasInvestidor3(new ArrayList<ContratoCobrancaParcelasInvestidor>());
			this.objetoContratoCobranca.setRecebedorParcelaFinal3(null);
		} else {
			// Popula recebedor final
			if (!this.objetoContratoCobranca.isOcultaRecebedor3()
					&& !this.objetoContratoCobranca.isRecebedorEnvelope3()) {
				this.objetoContratoCobranca.setRecebedorParcelaFinal3(this.selectedRecebedor3);
			}

			this.objetoContratoCobranca.setRecebedor3(pagadorRecebedorDao.findById(this.selectedRecebedor3.getId()));
			this.objetoContratoCobranca.setDataInclusaoRecebedor3(dataHoje);
			if (verificaSeGeraParcelasInvestidor(
					this.objetoContratoCobranca.getListContratoCobrancaParcelasInvestidor3(), 3)) {
				this.objetoContratoCobranca.setListContratoCobrancaParcelasInvestidor3(geraParcelasInvestidor(3));
			}
		}

		if (this.selectedRecebedor4 == null) {
			this.objetoContratoCobranca.setRecebedor4(null);
			this.objetoContratoCobranca.setVlrRecebedor4(null);
			this.objetoContratoCobranca.setDataInclusaoRecebedor4(null);
			this.objetoContratoCobranca
					.setListContratoCobrancaParcelasInvestidor4(new ArrayList<ContratoCobrancaParcelasInvestidor>());
			this.objetoContratoCobranca.setRecebedorParcelaFinal4(null);
		} else {
			// Popula recebedor final
			if (!this.objetoContratoCobranca.isOcultaRecebedor4()
					&& !this.objetoContratoCobranca.isRecebedorEnvelope4()) {
				this.objetoContratoCobranca.setRecebedorParcelaFinal4(this.selectedRecebedor4);
			}

			this.objetoContratoCobranca.setRecebedor4(pagadorRecebedorDao.findById(this.selectedRecebedor4.getId()));
			this.objetoContratoCobranca.setDataInclusaoRecebedor4(dataHoje);
			if (verificaSeGeraParcelasInvestidor(
					this.objetoContratoCobranca.getListContratoCobrancaParcelasInvestidor4(), 4)) {
				this.objetoContratoCobranca.setListContratoCobrancaParcelasInvestidor4(geraParcelasInvestidor(4));
			}
		}

		if (this.selectedRecebedor5 == null) {
			this.objetoContratoCobranca.setRecebedor5(null);
			this.objetoContratoCobranca.setVlrRecebedor5(null);
			this.objetoContratoCobranca.setDataInclusaoRecebedor5(null);
			this.objetoContratoCobranca
					.setListContratoCobrancaParcelasInvestidor5(new ArrayList<ContratoCobrancaParcelasInvestidor>());
			this.objetoContratoCobranca.setRecebedorParcelaFinal5(null);
		} else {
			// Popula recebedor final
			if (!this.objetoContratoCobranca.isOcultaRecebedor5()
					&& !this.objetoContratoCobranca.isRecebedorEnvelope5()) {
				this.objetoContratoCobranca.setRecebedorParcelaFinal5(this.selectedRecebedor5);
			}

			this.objetoContratoCobranca.setRecebedor5(pagadorRecebedorDao.findById(this.selectedRecebedor5.getId()));
			this.objetoContratoCobranca.setDataInclusaoRecebedor5(dataHoje);
			if (verificaSeGeraParcelasInvestidor(
					this.objetoContratoCobranca.getListContratoCobrancaParcelasInvestidor5(), 5)) {
				this.objetoContratoCobranca.setListContratoCobrancaParcelasInvestidor5(geraParcelasInvestidor(5));
			}
		}

		if (this.selectedRecebedor6 == null) {
			this.objetoContratoCobranca.setRecebedor6(null);
			this.objetoContratoCobranca.setVlrRecebedor6(null);
			this.objetoContratoCobranca.setDataInclusaoRecebedor6(null);
			this.objetoContratoCobranca
					.setListContratoCobrancaParcelasInvestidor6(new ArrayList<ContratoCobrancaParcelasInvestidor>());
			this.objetoContratoCobranca.setRecebedorParcelaFinal6(null);
		} else {

			// Popula recebedor final
			if (!this.objetoContratoCobranca.isOcultaRecebedor6()
					&& !this.objetoContratoCobranca.isRecebedorEnvelope6()) {
				this.objetoContratoCobranca.setRecebedorParcelaFinal6(this.selectedRecebedor6);
			}

			this.objetoContratoCobranca.setRecebedor6(pagadorRecebedorDao.findById(this.selectedRecebedor6.getId()));
			this.objetoContratoCobranca.setDataInclusaoRecebedor6(dataHoje);
			if (verificaSeGeraParcelasInvestidor(
					this.objetoContratoCobranca.getListContratoCobrancaParcelasInvestidor6(), 6)) {
				this.objetoContratoCobranca.setListContratoCobrancaParcelasInvestidor6(geraParcelasInvestidor(6));
			}
		}

		if (this.selectedRecebedor7 == null) {
			this.objetoContratoCobranca.setRecebedor7(null);
			this.objetoContratoCobranca.setVlrRecebedor7(null);
			this.objetoContratoCobranca.setDataInclusaoRecebedor7(null);
			this.objetoContratoCobranca
					.setListContratoCobrancaParcelasInvestidor7(new ArrayList<ContratoCobrancaParcelasInvestidor>());
			this.objetoContratoCobranca.setRecebedorParcelaFinal7(null);
		} else {
			// Popula recebedor final
			if (!this.objetoContratoCobranca.isOcultaRecebedor7()
					&& !this.objetoContratoCobranca.isRecebedorEnvelope7()) {
				this.objetoContratoCobranca.setRecebedorParcelaFinal7(this.selectedRecebedor7);
			}

			this.objetoContratoCobranca.setRecebedor7(pagadorRecebedorDao.findById(this.selectedRecebedor7.getId()));
			this.objetoContratoCobranca.setDataInclusaoRecebedor7(dataHoje);
			if (verificaSeGeraParcelasInvestidor(
					this.objetoContratoCobranca.getListContratoCobrancaParcelasInvestidor7(), 7)) {
				this.objetoContratoCobranca.setListContratoCobrancaParcelasInvestidor7(geraParcelasInvestidor(7));
			}
		}

		if (this.selectedRecebedor8 == null) {
			this.objetoContratoCobranca.setRecebedor8(null);
			this.objetoContratoCobranca.setVlrRecebedor8(null);
			this.objetoContratoCobranca.setDataInclusaoRecebedor8(null);
			this.objetoContratoCobranca
					.setListContratoCobrancaParcelasInvestidor8(new ArrayList<ContratoCobrancaParcelasInvestidor>());
			this.objetoContratoCobranca.setRecebedorParcelaFinal8(null);
		} else {

			// Popula recebedor final
			if (!this.objetoContratoCobranca.isOcultaRecebedor8()
					&& !this.objetoContratoCobranca.isRecebedorEnvelope8()) {
				this.objetoContratoCobranca.setRecebedorParcelaFinal8(this.selectedRecebedor8);
			}

			this.objetoContratoCobranca.setRecebedor8(pagadorRecebedorDao.findById(this.selectedRecebedor8.getId()));
			this.objetoContratoCobranca.setDataInclusaoRecebedor8(dataHoje);
			if (verificaSeGeraParcelasInvestidor(
					this.objetoContratoCobranca.getListContratoCobrancaParcelasInvestidor8(), 8)) {
				this.objetoContratoCobranca.setListContratoCobrancaParcelasInvestidor8(geraParcelasInvestidor(8));
			}
		}

		if (this.selectedRecebedor9 == null) {
			this.objetoContratoCobranca.setRecebedor9(null);
			this.objetoContratoCobranca.setVlrRecebedor9(null);
			this.objetoContratoCobranca.setDataInclusaoRecebedor9(null);
			this.objetoContratoCobranca
					.setListContratoCobrancaParcelasInvestidor9(new ArrayList<ContratoCobrancaParcelasInvestidor>());
			this.objetoContratoCobranca.setRecebedorParcelaFinal9(null);
		} else {
			// Popula recebedor final
			if (!this.objetoContratoCobranca.isOcultaRecebedor9()
					&& !this.objetoContratoCobranca.isRecebedorEnvelope9()) {
				this.objetoContratoCobranca.setRecebedorParcelaFinal9(this.selectedRecebedor9);
			}

			this.objetoContratoCobranca.setRecebedor9(pagadorRecebedorDao.findById(this.selectedRecebedor9.getId()));
			this.objetoContratoCobranca.setDataInclusaoRecebedor9(dataHoje);
			if (verificaSeGeraParcelasInvestidor(
					this.objetoContratoCobranca.getListContratoCobrancaParcelasInvestidor9(), 9)) {
				this.objetoContratoCobranca.setListContratoCobrancaParcelasInvestidor9(geraParcelasInvestidor(9));
			}
		}

		if (this.selectedRecebedor10 == null) {
			this.objetoContratoCobranca.setRecebedor10(null);
			this.objetoContratoCobranca.setVlrRecebedor10(null);
			this.objetoContratoCobranca.setDataInclusaoRecebedor10(null);
			this.objetoContratoCobranca
					.setListContratoCobrancaParcelasInvestidor10(new ArrayList<ContratoCobrancaParcelasInvestidor>());
			this.objetoContratoCobranca.setRecebedorParcelaFinal10(null);
		} else {
			// Popula recebedor final
			if (!this.objetoContratoCobranca.isOcultaRecebedor10()
					&& !this.objetoContratoCobranca.isRecebedorEnvelope10()) {
				this.objetoContratoCobranca.setRecebedorParcelaFinal10(this.selectedRecebedor10);
			}

			this.objetoContratoCobranca.setRecebedor10(pagadorRecebedorDao.findById(this.selectedRecebedor10.getId()));
			this.objetoContratoCobranca.setDataInclusaoRecebedor10(dataHoje);
			if (verificaSeGeraParcelasInvestidor(
					this.objetoContratoCobranca.getListContratoCobrancaParcelasInvestidor10(), 10)) {
				this.objetoContratoCobranca.setListContratoCobrancaParcelasInvestidor10(geraParcelasInvestidor(10));
			}
		}

		/***
		 * CALCULA VALOR INVESTIDOR vlrRepasse ADM vlrRetencao REPASSE vlrComissao
		 * 
		 */

		this.vlrRepasseNew = BigDecimal.ZERO;
		this.vlrRetencaoNew = BigDecimal.ZERO;
		this.vlrComissaoNew = BigDecimal.ZERO;

		this.vlrRepasseFinalNew = BigDecimal.ZERO;
		this.vlrRetencaoFinalNew = BigDecimal.ZERO;
		this.vlrComissaoFinalNew = BigDecimal.ZERO;

		if (this.selectedRecebedor != null) {
			calculaValoresContratoParcelaRecebedor(this.selectedRecebedor,
					this.objetoContratoCobranca.isOcultaRecebedor(), this.objetoContratoCobranca.isRecebedorEnvelope(),
					this.objetoContratoCobranca.getVlrRecebedor(), this.objetoContratoCobranca.getVlrFinalRecebedor1());
		}

		if (this.selectedRecebedor2 != null) {
			calculaValoresContratoParcelaRecebedor(this.selectedRecebedor2,
					this.objetoContratoCobranca.isOcultaRecebedor2(),
					this.objetoContratoCobranca.isRecebedorEnvelope2(), this.objetoContratoCobranca.getVlrRecebedor2(),
					this.objetoContratoCobranca.getVlrFinalRecebedor2());
		}

		if (this.selectedRecebedor3 != null) {
			calculaValoresContratoParcelaRecebedor(this.selectedRecebedor3,
					this.objetoContratoCobranca.isOcultaRecebedor3(),
					this.objetoContratoCobranca.isRecebedorEnvelope3(), this.objetoContratoCobranca.getVlrRecebedor3(),
					this.objetoContratoCobranca.getVlrFinalRecebedor3());
		}

		if (this.selectedRecebedor4 != null) {
			calculaValoresContratoParcelaRecebedor(this.selectedRecebedor4,
					this.objetoContratoCobranca.isOcultaRecebedor4(),
					this.objetoContratoCobranca.isRecebedorEnvelope4(), this.objetoContratoCobranca.getVlrRecebedor4(),
					this.objetoContratoCobranca.getVlrFinalRecebedor4());
		}

		if (this.selectedRecebedor5 != null) {
			calculaValoresContratoParcelaRecebedor(this.selectedRecebedor5,
					this.objetoContratoCobranca.isOcultaRecebedor5(),
					this.objetoContratoCobranca.isRecebedorEnvelope5(), this.objetoContratoCobranca.getVlrRecebedor5(),
					this.objetoContratoCobranca.getVlrFinalRecebedor5());
		}

		if (this.selectedRecebedor6 != null) {
			calculaValoresContratoParcelaRecebedor(this.selectedRecebedor6,
					this.objetoContratoCobranca.isOcultaRecebedor6(),
					this.objetoContratoCobranca.isRecebedorEnvelope6(), this.objetoContratoCobranca.getVlrRecebedor6(),
					this.objetoContratoCobranca.getVlrFinalRecebedor6());
		}

		if (this.selectedRecebedor7 != null) {
			calculaValoresContratoParcelaRecebedor(this.selectedRecebedor7,
					this.objetoContratoCobranca.isOcultaRecebedor7(),
					this.objetoContratoCobranca.isRecebedorEnvelope7(), this.objetoContratoCobranca.getVlrRecebedor7(),
					this.objetoContratoCobranca.getVlrFinalRecebedor7());
		}

		if (this.selectedRecebedor8 != null) {
			calculaValoresContratoParcelaRecebedor(this.selectedRecebedor8,
					this.objetoContratoCobranca.isOcultaRecebedor8(),
					this.objetoContratoCobranca.isRecebedorEnvelope8(), this.objetoContratoCobranca.getVlrRecebedor8(),
					this.objetoContratoCobranca.getVlrFinalRecebedor8());
		}

		if (this.selectedRecebedor9 != null) {
			calculaValoresContratoParcelaRecebedor(this.selectedRecebedor9,
					this.objetoContratoCobranca.isOcultaRecebedor9(),
					this.objetoContratoCobranca.isRecebedorEnvelope9(), this.objetoContratoCobranca.getVlrRecebedor9(),
					this.objetoContratoCobranca.getVlrFinalRecebedor9());
		}

		if (this.selectedRecebedor10 != null) {
			calculaValoresContratoParcelaRecebedor(this.selectedRecebedor10,
					this.objetoContratoCobranca.isOcultaRecebedor10(),
					this.objetoContratoCobranca.isRecebedorEnvelope10(),
					this.objetoContratoCobranca.getVlrRecebedor10(),
					this.objetoContratoCobranca.getVlrFinalRecebedor10());
		}

		// seta novos valores
		this.vlrRepasse = this.vlrRepasseNew;
		this.vlrRetencao = this.vlrRetencaoNew;
		this.vlrComissao = this.vlrComissaoNew;

		this.vlrRepasseFinal = this.vlrRepasseFinalNew;
		this.vlrRetencaoFinal = this.vlrRetencaoFinalNew;
		this.vlrComissaoFinal = this.vlrComissaoFinalNew;

		if (!this.validarProcentagensSeguro()) {
			context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR,
					"A soma das porcentagens dos segurados não é 100%", ""));
			erroValidacaoLov = true;
		}

		if (this.selectedImovel == null) {
			context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR,
					"Contrato Cobrança: Erro de validação: é obrigatória a seleção do Imóvel.", ""));
			erroValidacaoLov = true;
		} else {
			ImovelCobrancaDao imovelCobrancaDao = new ImovelCobrancaDao();
			this.objetoContratoCobranca.setImovel(imovelCobrancaDao.findById(this.selectedImovel.getId()));
		}

		if (this.selectedResponsavel == null) {
			context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR,
					"Contrato Cobrança: Erro de validação: é obrigatória a seleção do Responsável.", ""));
			erroValidacaoLov = true;
		} else {
			ResponsavelDao responsavelDao = new ResponsavelDao();
			this.objetoContratoCobranca.setResponsavel(responsavelDao.findById(this.selectedResponsavel.getId()));
		}

		// se houve erro(s) na validações acima, retorna nulo e mensagem de erro
		if (erroValidacaoLov || erroValidacaoBaixa) {
			return "";
		}
		// FIM - Validacao das LoVs

		// limpa a lista de parcelas existentes para criação do novo contrato
		/*
		 * List<ContratoCobrancaDetalhes> parcelasPagas = new
		 * ArrayList<ContratoCobrancaDetalhes>(); if (!erroValidacaoBaixa &&
		 * this.objetoContratoCobranca.getListContratoCobrancaDetalhes().size() > 0 &&
		 * this.updateMode) { ContratoCobrancaDetalhesDao contratoCobrancaDetalhesDao =
		 * new ContratoCobrancaDetalhesDao(); List<Long> idsContratoCobrancaDetalhes =
		 * new ArrayList<Long>();
		 * 
		 * for (ContratoCobrancaDetalhes c :
		 * this.objetoContratoCobranca.getListContratoCobrancaDetalhes()) { if
		 * (c.isParcelaPaga()) { parcelasPagas.add(c); } }
		 * 
		 * for (ContratoCobrancaDetalhes c :
		 * this.objetoContratoCobranca.getListContratoCobrancaDetalhes()) {
		 * idsContratoCobrancaDetalhes.add(c.getId()); }
		 * 
		 * this.objetoContratoCobranca.getListContratoCobrancaDetalhes().removeAll(this.
		 * objetoContratoCobranca.getListContratoCobrancaDetalhes());
		 * 
		 * contratoCobrancaDao.merge(this.objetoContratoCobranca);
		 * 
		 * for (Long id : idsContratoCobrancaDetalhes) {
		 * contratoCobrancaDetalhesDao.delete(contratoCobrancaDetalhesDao.findById(id));
		 * } }
		 */
		if (this.objetoContratoCobranca.getListContratoCobrancaDetalhes().size() <= 0) {
			geraContratoCobrancaDetalhes(contratoCobrancaDao);
		} else {
			// se a quantidade de parcelas for igual, atualiza os valores e refaz as datas
			// de vencimento
			if (Integer.valueOf(this.qtdeParcelas) == this.objetoContratoCobranca.getQtdeParcelas()) {
				// atualiza Repasse / Retenção / Comissão caso seja diferente
				for (ContratoCobrancaDetalhes ccd : this.objetoContratoCobranca.getListContratoCobrancaDetalhes()) {
					if (!ccd.isParcelaPaga()) {
						if (ccd.getVlrRepasse() != this.vlrRepasse || ccd.getVlrRetencao() != this.vlrRetencao
								|| ccd.getVlrComissao() != this.vlrComissao) {
							ccd.setVlrRepasse(this.vlrRepasse);
							ccd.setVlrRetencao(this.vlrRetencao);
							ccd.setVlrComissao(this.vlrComissao);
						} else {
							break;
						}
					}
				}
			}
		}
		this.objetoContratoCobranca.populaStatusEsteira(getUsuarioLogadoNull());
		try {
			if (objetoContratoCobranca.getId() <= 0) {
				contratoCobrancaDao.create(objetoContratoCobranca);
				msgRetorno = "inserido";
			} else {
				if (this.objetoContratoCobranca.isGeraParcelaFinal()) {
					if (this.objetoContratoCobranca.getListContratoCobrancaDetalhes().size() > 0) {
						if (!this.objetoContratoCobranca.getListContratoCobrancaDetalhes()
								.get(this.objetoContratoCobranca.getListContratoCobrancaDetalhes().size() - 1)
								.isParcelaPaga()) {
							this.objetoContratoCobranca.getListContratoCobrancaDetalhes()
									.get(this.objetoContratoCobranca.getListContratoCobrancaDetalhes().size() - 1)
									.setVlrComissao(this.vlrComissaoFinal);
							this.objetoContratoCobranca.getListContratoCobrancaDetalhes()
									.get(this.objetoContratoCobranca.getListContratoCobrancaDetalhes().size() - 1)
									.setVlrRepasse(this.vlrRepasseFinal);
							this.objetoContratoCobranca.getListContratoCobrancaDetalhes()
									.get(this.objetoContratoCobranca.getListContratoCobrancaDetalhes().size() - 1)
									.setVlrRetencao(this.vlrRetencaoFinal);
						}
					}
				}

				contratoCobrancaDao.merge(objetoContratoCobranca);
				msgRetorno = "atualizado";
			}

			context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_INFO,
					"Contrato Cobrança: Registro " + msgRetorno + " com sucesso!", ""));

		} catch (DAOException e) {

			context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR, "Contrato Cobrança: " + e, ""));

			return "";
		} catch (DBConnectionException e) {
			context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR, "Contrato Cobrança: " + e, ""));

			return "";
		}

		this.contratoGerado = true;

		return "/Atendimento/Cobranca/ContratoCobrancaDetalhes.xhtml";
	}

	private void geraContratoCobrancaDetalhes(ContratoCobrancaDao contratoCobrancaDao) {
		// se esta editando pela primeira vez o contrato aprovado
		// gera remuneracao responsaveis
		geraContasPagarRemuneracao(this.objetoContratoCobranca);
		agendarWhatsappCobranca();

		// processa parcelas
		/*
		 * todo calculo de juros composto BigDecimal valorParcela = BigDecimal.ZERO;
		 * valorParcela =
		 * valorParcela.add(this.objetoContratoCobranca.getVlrInvestimento());
		 * valorParcela =
		 * valorParcela.add(this.objetoContratoCobranca.getTxAdministracao());
		 * valorParcela =
		 * valorParcela.subtract(this.objetoContratoCobranca.getVlrRepasse());
		 * valorParcela = valorParcela.divide(new
		 * BigDecimal(this.objetoContratoCobranca.getQtdeParcelas()), 2,
		 * RoundingMode.CEILING);
		 */

		TimeZone zone = TimeZone.getDefault();
		Locale locale = new Locale("pt", "BR");
		Calendar dataInicio = Calendar.getInstance(zone, locale);

		if (this.objetoContratoCobranca.getDataInicio() == null) {
			dataInicio.setTime(DateUtil.gerarDataHoje());
		} else {
			dataInicio.setTime(this.objetoContratoCobranca.getDataInicio());
		}

		// Date dataParcela = this.objetoContratoCobranca.getDataInicio();

		// Adiciona parcelas de pagamento

		GeracaoBoletoMB geracaoBoletoMB = new GeracaoBoletoMB();

		this.fileBoleto = null;

		if (this.objetoContratoCobranca.getStatusLead() != null) {
			if (this.objetoContratoCobranca.getStatusLead().equals("Completo")) {
				if (!SiscoatConstants.PAGADOR_GALLERIA.contains(this.selectedPagador.getId())) {

					SimulacaoVO simulador = new SimulacaoVO();

					String origemCalculo = "IPCA Novo";

					if (this.objetoContratoCobranca.getTipoCalculo().equals("Price [IPCA Novo]")) {
						simulador = calcularParcelasPriceIPCANovo();
					} else {
						if (this.objetoContratoCobranca.isCorrigidoNovoIPCA()) {
							if (this.objetoContratoCobranca.getTipoCalculo().equals("Price")) {
								simulador = calcularParcelasPriceIPCANovo();
							}
							if (this.objetoContratoCobranca.getTipoCalculo().equals("SAC")) {
								simulador = calcularParcelasSACIPCANovo();
							}
							if (this.objetoContratoCobranca.getTipoCalculo().equals("Americano")) {
								// simulador = calcularParcelasPriceIPCANovo();
							}
						} else {
							simulador = calcularParcelas();
							origemCalculo = "legado";
						}
					}

					BigDecimal saldoAnterior = BigDecimal.ZERO;
					if (simulador.getParcelas().size() > 0) {
						for (SimulacaoDetalheVO parcela : simulador.getParcelas()) {

							ContratoCobrancaDetalhes contratoCobrancaDetalhes = criaContratoCobrancaDetalhe(
									contratoCobrancaDao, parcela, this.objetoContratoCobranca.getDataInicio(),
									saldoAnterior, origemCalculo);

							this.objetoContratoCobranca.getListContratoCobrancaDetalhes().add(contratoCobrancaDetalhes);
							saldoAnterior = contratoCobrancaDetalhes.getVlrSaldoParcela();

							// gera boleto

							if (this.objetoContratoCobranca.getEmpresa() != null) {
								if (this.isGeraBoletoInclusaoContrato()) {
									geracaoBoletoMB.geraBoletosBradesco("Locação",
											this.objetoContratoCobranca.getNumeroContrato(),
											this.objetoContratoCobranca.getPagador().getNome(),
											this.objetoContratoCobranca.getPagador().getCpf(),
											this.objetoContratoCobranca.getPagador().getCnpj(),
											this.objetoContratoCobranca.getPagador().getEndereco()
													+ this.objetoContratoCobranca.getPagador().getNumero(),
											this.objetoContratoCobranca.getPagador().getBairro(),
											this.objetoContratoCobranca.getPagador().getCep(),
											this.objetoContratoCobranca.getPagador().getCidade(),
											this.objetoContratoCobranca.getPagador().getEstado(),
											contratoCobrancaDetalhes.getDataVencimento(),
											this.objetoContratoCobranca.getVlrParcela(),
											contratoCobrancaDetalhes.getNumeroParcela());
								}
							}
						}
					}
				}
			}
		}

		if (this.isGeraBoletoInclusaoContrato()) {
			geracaoBoletoMB
					.geraPDFBoletos("Boletos Bradesco - Contrato: " + this.objetoContratoCobranca.getNumeroContrato());

			this.fileBoleto = geracaoBoletoMB.getFile();
		}
	}

	public ContratoCobrancaDetalhes criaContratoCobrancaDetalhe(ContratoCobrancaDao contratoCobrancaDao,
			SimulacaoDetalheVO parcela, Date dataBaseParecela, BigDecimal saldoAnterior, String origemCalculo) {
		ContratoCobrancaDetalhes contratoCobrancaDetalhes = new ContratoCobrancaDetalhes();

		Date dataParcela = contratoCobrancaDao.geraDataParcela(parcela.getNumeroParcela().intValue(), dataBaseParecela);

		contratoCobrancaDetalhes.setVlrSaldoInicial(saldoAnterior);
		contratoCobrancaDetalhes.setDataVencimento(dataParcela);
		contratoCobrancaDetalhes.setDataVencimentoAtual(dataParcela);
		contratoCobrancaDetalhes.setNumeroParcela(String.valueOf(parcela.getNumeroParcela().intValue()));
		contratoCobrancaDetalhes.setParcelaPaga(false);
		contratoCobrancaDetalhes.setVlrJurosParcela(parcela.getJuros().setScale(2, BigDecimal.ROUND_HALF_EVEN));

		contratoCobrancaDetalhes.setVlrJuros(this.objetoContratoCobranca.getTxJuros());
		contratoCobrancaDetalhes.setTxMulta(this.objetoContratoCobranca.getTxMulta());
		contratoCobrancaDetalhes.setVlrParcela(parcela.getValorParcela().setScale(2, BigDecimal.ROUND_HALF_EVEN));
		contratoCobrancaDetalhes
				.setVlrAmortizacaoParcela(parcela.getAmortizacao().setScale(2, BigDecimal.ROUND_HALF_EVEN));

		if (this.objetoContratoCobranca.isCorrigidoNovoIPCA()) {
			contratoCobrancaDetalhes
					.setVlrSaldoParcela(parcela.getSaldoDevedorFinal().setScale(2, BigDecimal.ROUND_HALF_EVEN));
		} else {
			contratoCobrancaDetalhes
					.setVlrSaldoParcela(parcela.getSaldoDevedorInicial().setScale(2, BigDecimal.ROUND_HALF_EVEN));
		}

		contratoCobrancaDetalhes.setSeguroDFI(parcela.getSeguroDFI().setScale(2, BigDecimal.ROUND_HALF_EVEN));
		contratoCobrancaDetalhes.setSeguroMIP(parcela.getSeguroMIP().setScale(2, BigDecimal.ROUND_HALF_EVEN));
		contratoCobrancaDetalhes.setTaxaAdm(parcela.getTxAdm().setScale(2, BigDecimal.ROUND_HALF_EVEN));

//		contratoCobrancaDetalhes.setVlrRepasse(this.vlrRepasse);
//		contratoCobrancaDetalhes.setVlrRetencao(this.vlrRetencao);
//		contratoCobrancaDetalhes.setVlrComissao(this.vlrComissao);

		if (parcela.getValorParcela().compareTo(BigDecimal.ZERO) == 0) {
			contratoCobrancaDetalhes.setParcelaPaga(true);
			contratoCobrancaDetalhes.setOrigemBaixa("criaContratoCobrancaDetalhe");
			contratoCobrancaDetalhes.setDataPagamento(dataParcela);
			contratoCobrancaDetalhes.setVlrParcela(BigDecimal.ZERO);
		}

		if (DateUtil.isAfterDate(contratoCobrancaDetalhes.getDataVencimento(), DateUtil.getDataHoje())
				&& !contratoCobrancaDetalhes.isParcelaPaga()) {
			contratoCobrancaDetalhes.setParcelaVencida(true);
		} else
			contratoCobrancaDetalhes.setParcelaVencida(false);

		if (DateUtil.isDataHoje(contratoCobrancaDetalhes.getDataVencimento())
				&& !contratoCobrancaDetalhes.isParcelaPaga()) {
			contratoCobrancaDetalhes.setParcelaVencendo(true);
		} else
			contratoCobrancaDetalhes.setParcelaVencendo(false);

		return contratoCobrancaDetalhes;

	}

	private SimulacaoVO calcularParcelas() {
		BigDecimal tarifaIOFDiario;
		BigDecimal tarifaIOFAdicional = BigDecimal.valueOf(0.38).divide(BigDecimal.valueOf(100));

		if (this.qtdeParcelas != null) {
			this.objetoContratoCobranca.setQtdeParcelas(Integer.valueOf(this.qtdeParcelas));
		}

//			BigDecimal custoEmissaoValor = SiscoatConstants.CUSTO_EMISSAO_MINIMO;
//			if (this.objetoContratoCobranca.getVlrInvestimento().multiply(SiscoatConstants.CUSTO_EMISSAO_PERCENTUAL.divide(BigDecimal.valueOf(100)))
//					.compareTo(SiscoatConstants.CUSTO_EMISSAO_MINIMO) > 0) {
//				custoEmissaoValor = this.objetoContratoCobranca.getVlrInvestimento().multiply(SiscoatConstants.CUSTO_EMISSAO_PERCENTUAL.divide(BigDecimal.valueOf(100)));
//			}

		SimulacaoVO simulador = new SimulacaoVO();

		if (this.objetoContratoCobranca.getPagador().getCpf() != null) {
			if (DateUtil.isAfterDate(this.objetoContratoCobranca.getDataInicio(), SiscoatConstants.TROCA_IOF)) {
				tarifaIOFDiario = SiscoatConstants.TARIFA_IOF_PF_ANTIGA.divide(BigDecimal.valueOf(100));
			} else {
				tarifaIOFDiario = SiscoatConstants.TARIFA_IOF_PF.divide(BigDecimal.valueOf(100));
			}
			simulador.setTipoPessoa("PF");
		} else {
			if (DateUtil.isAfterDate(this.objetoContratoCobranca.getDataInicio(), SiscoatConstants.TROCA_IOF)) {
				tarifaIOFDiario = SiscoatConstants.TARIFA_IOF_PJ_ANTIGA.divide(BigDecimal.valueOf(100));
			} else {
				tarifaIOFDiario = SiscoatConstants.TARIFA_IOF_PJ.divide(BigDecimal.valueOf(100));
			}
			simulador.setTipoPessoa("PJ");
		}

		simulador.setDataSimulacao(DateUtil.getDataHoje());
		simulador.setTarifaIOFDiario(tarifaIOFDiario);
		simulador.setTarifaIOFAdicional(tarifaIOFAdicional);
		simulador.setSeguroMIP(SiscoatConstants.SEGURO_MIP);
		simulador.setSeguroDFI(SiscoatConstants.SEGURO_DFI);
		// valores
		simulador.setValorCredito(this.objetoContratoCobranca.getValorCCB());
		simulador.setTaxaJuros(this.objetoContratoCobranca.getTxJurosParcelas());
		simulador.setCarencia(BigInteger.valueOf(this.objetoContratoCobranca.getMesesCarencia()));
		simulador.setQtdParcelas(BigInteger.valueOf(this.objetoContratoCobranca.getQtdeParcelas()));
		simulador.setValorImovel(this.objetoContratoCobranca.getValorImovel());
//			simulador.setCustoEmissaoValor(custoEmissaoValor);
		simulador.setTipoCalculo(this.objetoContratoCobranca.getTipoCalculo());
		simulador.setNaoCalcularDFI(
				!(this.objetoContratoCobranca.isTemSeguroDFI() && this.objetoContratoCobranca.isTemSeguro()));
		simulador.setNaoCalcularMIP(
				!(this.objetoContratoCobranca.isTemSeguroMIP() && this.objetoContratoCobranca.isTemSeguro()));
		simulador.setNaoCalcularTxAdm(!this.objetoContratoCobranca.isTemTxAdm());

		simulador.setCorrigidoNovoIPCA(this.objetoContratoCobranca.isCorrigidoNovoIPCA());

		simulador.calcular();
		return simulador;
	}

	public SimulacaoVO calcularParcelasPriceIPCANovo() {

		this.simulacaoIPCACalculoV2 = new SimulacaoIPCACalculoV2();

		if (this.qtdeParcelas != null) {
			this.objetoContratoCobranca.setQtdeParcelas(Integer.valueOf(this.qtdeParcelas));
		}

		// simulacaoIPCACalculoV2.setDataInicio(DateUtil.getDataHoje());
		simulacaoIPCACalculoV2.setDataInicio(this.objetoContratoCobranca.getDataInicio());

		simulacaoIPCACalculoV2.setPrazo(BigInteger.valueOf(this.objetoContratoCobranca.getQtdeParcelas()));

		simulacaoIPCACalculoV2.setTaxaJuros(this.objetoContratoCobranca.getTxJurosParcelas());

		simulacaoIPCACalculoV2.setCarencia(BigInteger.valueOf(this.objetoContratoCobranca.getMesesCarencia()));

		simulacaoIPCACalculoV2.setValorCredito(this.objetoContratoCobranca.getValorCCB());

		simulacaoIPCACalculoV2.setValorImovel(this.objetoContratoCobranca.getValorImovel());

		simulacaoIPCACalculoV2.setSeguroMIP(SiscoatConstants.SEGURO_MIP_5_DIGITOS);

		simulacaoIPCACalculoV2.setSeguroDFI(SiscoatConstants.SEGURO_DFI_6_DIGITOS);

		if (this.objetoContratoCobranca.isTemSeguroDFI() && this.objetoContratoCobranca.isTemSeguro()) {
			simulacaoIPCACalculoV2.setCalculaSeguroDFI(true);
		} else {
			simulacaoIPCACalculoV2.setCalculaSeguroDFI(false);
		}

		if (this.objetoContratoCobranca.isTemSeguroMIP() && this.objetoContratoCobranca.isTemSeguro()) {
			simulacaoIPCACalculoV2.setCalculaSeguroMIP(true);
		} else {
			simulacaoIPCACalculoV2.setCalculaSeguroMIP(false);
		}

		if (this.objetoContratoCobranca.isTemTxAdm()) {
			simulacaoIPCACalculoV2.setCalculaTxAdm(true);
		}

		simulacaoIPCACalculoV2.calcularPriceIPCANovo();

		this.simuladorParcelas = convertIPCA2toSimuladorV0();

		return this.simuladorParcelas;
	}

	public SimulacaoVO calcularParcelasSACIPCANovo() {

		this.simulacaoIPCACalculoV2 = new SimulacaoIPCACalculoV2();

		if (this.qtdeParcelas != null) {
			this.objetoContratoCobranca.setQtdeParcelas(Integer.valueOf(this.qtdeParcelas));
		}

		// simulacaoIPCACalculoV2.setDataInicio(DateUtil.getDataHoje());
		simulacaoIPCACalculoV2.setDataInicio(this.objetoContratoCobranca.getDataInicio());

		simulacaoIPCACalculoV2.setPrazo(BigInteger.valueOf(this.objetoContratoCobranca.getQtdeParcelas()));

		simulacaoIPCACalculoV2.setTaxaJuros(this.objetoContratoCobranca.getTxJurosParcelas());

		simulacaoIPCACalculoV2.setCarencia(BigInteger.valueOf(this.objetoContratoCobranca.getMesesCarencia()));

		simulacaoIPCACalculoV2.setValorCredito(this.objetoContratoCobranca.getValorCCB());

		simulacaoIPCACalculoV2.setValorImovel(this.objetoContratoCobranca.getValorImovel());

		simulacaoIPCACalculoV2.setSeguroMIP(SiscoatConstants.SEGURO_MIP_5_DIGITOS);

		simulacaoIPCACalculoV2.setSeguroDFI(SiscoatConstants.SEGURO_DFI_6_DIGITOS);

		if (this.objetoContratoCobranca.isTemSeguroDFI() && this.objetoContratoCobranca.isTemSeguro()) {
			simulacaoIPCACalculoV2.setCalculaSeguroDFI(true);
		} else {
			simulacaoIPCACalculoV2.setCalculaSeguroDFI(false);
		}

		if (this.objetoContratoCobranca.isTemSeguroMIP() && this.objetoContratoCobranca.isTemSeguro()) {
			simulacaoIPCACalculoV2.setCalculaSeguroMIP(true);
		} else {
			simulacaoIPCACalculoV2.setCalculaSeguroMIP(false);
		}

		if (this.objetoContratoCobranca.isTemTxAdm()) {
			simulacaoIPCACalculoV2.setCalculaTxAdm(true);
		}

		simulacaoIPCACalculoV2.calcularSACIPCANovo();

		this.simuladorParcelas = convertIPCA2toSimuladorV0();

		return this.simuladorParcelas;
	}

	public SimulacaoVO convertIPCA2toSimuladorV0() {
		SimulacaoVO simulacaoVO = new SimulacaoVO();
		List<SimulacaoDetalheVO> parcelas = new ArrayList<SimulacaoDetalheVO>();
		SimulacaoDetalheVO parcela = new SimulacaoDetalheVO();

		for (SimulacaoIPCADadosV2 parcelasIPCAV2 : this.simulacaoIPCACalculoV2.getListSimulacaoIPCADadosV2()) {
			parcela = new SimulacaoDetalheVO();

			parcela.setNumeroParcela(parcelasIPCAV2.getNumeroParcela());

			parcela.setSaldoDevedorInicial(parcelasIPCAV2.getSaldoDevedorInicial());

			parcela.setSaldoDevedorFinal(parcelasIPCAV2.getSaldoDevedorFinal());

			if (parcelasIPCAV2.getAmortizacao().compareTo(BigDecimal.ZERO) >= 0) {
				parcela.setAmortizacao(parcelasIPCAV2.getAmortizacao());
			} else {
				parcela.setAmortizacao(BigDecimal.ZERO);
			}

			parcela.setIpca(parcelasIPCAV2.getIpca());

			parcela.setTaxaIpca(parcelasIPCAV2.getTaxaIPCA());

			parcela.setJuros(parcelasIPCAV2.getJuros());

			parcela.setSeguroMIP(parcelasIPCAV2.getSeguroMIP());

			parcela.setSeguroDFI(parcelasIPCAV2.getSeguroDFI());

			parcela.setValorParcela(parcelasIPCAV2.getValorParcela());

			if (parcelasIPCAV2.getTaxaADM() != null) {
				parcela.setTxAdm(parcelasIPCAV2.getTaxaADM());
			} else {
				parcela.setTxAdm(BigDecimal.ZERO);
			}

			parcelas.add(parcela);
		}

		simulacaoVO.setParcelas(parcelas);

		return simulacaoVO;
	}

	private SimulacaoVO calcularInvestimento(int numeroInvestidor) {
		BigDecimal tarifaIOFDiario;
		BigDecimal tarifaIOFAdicional = BigDecimal.valueOf(0.38).divide(BigDecimal.valueOf(100));

//			BigDecimal custoEmissaoValor = SiscoatConstants.CUSTO_EMISSAO_MINIMO;
//			if (this.objetoContratoCobranca.getVlrInvestimento().multiply(SiscoatConstants.CUSTO_EMISSAO_PERCENTUAL.divide(BigDecimal.valueOf(100)))
//					.compareTo(SiscoatConstants.CUSTO_EMISSAO_MINIMO) > 0) {
//				custoEmissaoValor = this.objetoContratoCobranca.getVlrInvestimento().multiply(SiscoatConstants.CUSTO_EMISSAO_PERCENTUAL.divide(BigDecimal.valueOf(100)));
//			}
		boolean isEnvelope = false;

		SimulacaoVO simulador = new SimulacaoVO();

		if (this.objetoContratoCobranca.getPagador().getCpf() != null) {
			if (DateUtil.isAfterDate(this.objetoContratoCobranca.getDataInicio(), SiscoatConstants.TROCA_IOF)) {
				tarifaIOFDiario = SiscoatConstants.TARIFA_IOF_PF_ANTIGA.divide(BigDecimal.valueOf(100));
			} else {
				tarifaIOFDiario = SiscoatConstants.TARIFA_IOF_PF.divide(BigDecimal.valueOf(100));
			}
			simulador.setTipoPessoa("PF");
		} else {
			if (DateUtil.isAfterDate(this.objetoContratoCobranca.getDataInicio(), SiscoatConstants.TROCA_IOF)) {
				tarifaIOFDiario = SiscoatConstants.TARIFA_IOF_PJ_ANTIGA.divide(BigDecimal.valueOf(100));
			} else {
				tarifaIOFDiario = SiscoatConstants.TARIFA_IOF_PJ.divide(BigDecimal.valueOf(100));
			}
			simulador.setTipoPessoa("PJ");
		}

		if (numeroInvestidor == 1) {
			simulador.setValorCredito(this.objetoContratoCobranca.getVlrInvestidor1());
			simulador.setTaxaJuros(this.objetoContratoCobranca.getTaxaRemuneracaoInvestidor1());
			simulador.setQtdParcelas(
					BigInteger.valueOf(CommonsUtil.intValue(this.objetoContratoCobranca.getQtdeParcelasInvestidor1())));
			simulador.setTipoCalculo(this.objetoContratoCobranca.getTipoCalculoInvestidor1());
			isEnvelope = this.objetoContratoCobranca.isRecebedorEnvelope();
			simulador.setCarencia(BigInteger.valueOf(this.objetoContratoCobranca.getCarenciaInvestidor1()));
			simulador.setDataSimulacao(this.objetoContratoCobranca.getDataInicioInvestidor1());
		} else if (numeroInvestidor == 2) {
			simulador.setValorCredito(this.objetoContratoCobranca.getVlrInvestidor2());
			simulador.setTaxaJuros(this.objetoContratoCobranca.getTaxaRemuneracaoInvestidor2());
			simulador.setQtdParcelas(
					BigInteger.valueOf(CommonsUtil.intValue(this.objetoContratoCobranca.getQtdeParcelasInvestidor2())));
			simulador.setTipoCalculo(this.objetoContratoCobranca.getTipoCalculoInvestidor2());
			isEnvelope = this.objetoContratoCobranca.isRecebedorEnvelope2();
			simulador.setCarencia(BigInteger.valueOf(this.objetoContratoCobranca.getCarenciaInvestidor2()));
			simulador.setDataSimulacao(this.objetoContratoCobranca.getDataInicioInvestidor2());
		} else if (numeroInvestidor == 3) {
			simulador.setValorCredito(this.objetoContratoCobranca.getVlrInvestidor3());
			simulador.setTaxaJuros(this.objetoContratoCobranca.getTaxaRemuneracaoInvestidor3());
			simulador.setQtdParcelas(
					BigInteger.valueOf(CommonsUtil.intValue(this.objetoContratoCobranca.getQtdeParcelasInvestidor3())));
			simulador.setTipoCalculo(this.objetoContratoCobranca.getTipoCalculoInvestidor3());
			isEnvelope = this.objetoContratoCobranca.isRecebedorEnvelope3();
			simulador.setCarencia(BigInteger.valueOf(this.objetoContratoCobranca.getCarenciaInvestidor3()));
			simulador.setDataSimulacao(this.objetoContratoCobranca.getDataInicioInvestidor3());
		} else if (numeroInvestidor == 4) {
			simulador.setValorCredito(this.objetoContratoCobranca.getVlrInvestidor4());
			simulador.setTaxaJuros(this.objetoContratoCobranca.getTaxaRemuneracaoInvestidor4());
			simulador.setQtdParcelas(
					BigInteger.valueOf(CommonsUtil.intValue(this.objetoContratoCobranca.getQtdeParcelasInvestidor4())));
			simulador.setTipoCalculo(this.objetoContratoCobranca.getTipoCalculoInvestidor4());
			isEnvelope = this.objetoContratoCobranca.isRecebedorEnvelope4();
			simulador.setCarencia(BigInteger.valueOf(this.objetoContratoCobranca.getCarenciaInvestidor4()));
			simulador.setDataSimulacao(this.objetoContratoCobranca.getDataInicioInvestidor4());
		} else if (numeroInvestidor == 5) {
			simulador.setValorCredito(this.objetoContratoCobranca.getVlrInvestidor5());
			simulador.setTaxaJuros(this.objetoContratoCobranca.getTaxaRemuneracaoInvestidor5());
			simulador.setQtdParcelas(
					BigInteger.valueOf(CommonsUtil.intValue(this.objetoContratoCobranca.getQtdeParcelasInvestidor5())));
			simulador.setTipoCalculo(this.objetoContratoCobranca.getTipoCalculoInvestidor5());
			isEnvelope = this.objetoContratoCobranca.isRecebedorEnvelope5();
			simulador.setCarencia(BigInteger.valueOf(this.objetoContratoCobranca.getCarenciaInvestidor5()));
			simulador.setDataSimulacao(this.objetoContratoCobranca.getDataInicioInvestidor5());
		} else if (numeroInvestidor == 6) {
			simulador.setValorCredito(this.objetoContratoCobranca.getVlrInvestidor6());
			simulador.setTaxaJuros(this.objetoContratoCobranca.getTaxaRemuneracaoInvestidor6());
			simulador.setQtdParcelas(
					BigInteger.valueOf(CommonsUtil.intValue(this.objetoContratoCobranca.getQtdeParcelasInvestidor6())));
			simulador.setTipoCalculo(this.objetoContratoCobranca.getTipoCalculoInvestidor6());
			isEnvelope = this.objetoContratoCobranca.isRecebedorEnvelope6();
			simulador.setCarencia(BigInteger.valueOf(this.objetoContratoCobranca.getCarenciaInvestidor6()));
			simulador.setDataSimulacao(this.objetoContratoCobranca.getDataInicioInvestidor6());
		} else if (numeroInvestidor == 7) {
			simulador.setValorCredito(this.objetoContratoCobranca.getVlrInvestidor7());
			simulador.setTaxaJuros(this.objetoContratoCobranca.getTaxaRemuneracaoInvestidor7());
			simulador.setQtdParcelas(
					BigInteger.valueOf(CommonsUtil.intValue(this.objetoContratoCobranca.getQtdeParcelasInvestidor7())));
			simulador.setTipoCalculo(this.objetoContratoCobranca.getTipoCalculoInvestidor7());
			isEnvelope = this.objetoContratoCobranca.isRecebedorEnvelope7();
			simulador.setCarencia(BigInteger.valueOf(this.objetoContratoCobranca.getCarenciaInvestidor7()));
			simulador.setDataSimulacao(this.objetoContratoCobranca.getDataInicioInvestidor7());
		} else if (numeroInvestidor == 8) {
			simulador.setValorCredito(this.objetoContratoCobranca.getVlrInvestidor8());
			simulador.setTaxaJuros(this.objetoContratoCobranca.getTaxaRemuneracaoInvestidor8());
			simulador.setQtdParcelas(
					BigInteger.valueOf(CommonsUtil.intValue(this.objetoContratoCobranca.getQtdeParcelasInvestidor8())));
			simulador.setTipoCalculo(this.objetoContratoCobranca.getTipoCalculoInvestidor8());
			isEnvelope = this.objetoContratoCobranca.isRecebedorEnvelope8();
			simulador.setCarencia(BigInteger.valueOf(this.objetoContratoCobranca.getCarenciaInvestidor8()));
			simulador.setDataSimulacao(this.objetoContratoCobranca.getDataInicioInvestidor8());
		} else if (numeroInvestidor == 9) {
			simulador.setValorCredito(this.objetoContratoCobranca.getVlrInvestidor9());
			simulador.setTaxaJuros(this.objetoContratoCobranca.getTaxaRemuneracaoInvestidor9());
			simulador.setQtdParcelas(
					BigInteger.valueOf(CommonsUtil.intValue(this.objetoContratoCobranca.getQtdeParcelasInvestidor9())));
			simulador.setTipoCalculo(this.objetoContratoCobranca.getTipoCalculoInvestidor9());
			isEnvelope = this.objetoContratoCobranca.isRecebedorEnvelope9();
			simulador.setCarencia(BigInteger.valueOf(this.objetoContratoCobranca.getCarenciaInvestidor9()));
			simulador.setDataSimulacao(this.objetoContratoCobranca.getDataInicioInvestidor9());
		} else if (numeroInvestidor == 10) {
			simulador.setValorCredito(this.objetoContratoCobranca.getVlrInvestidor10());
			simulador.setTaxaJuros(this.objetoContratoCobranca.getTaxaRemuneracaoInvestidor10());
			simulador.setQtdParcelas(BigInteger
					.valueOf(CommonsUtil.intValue(this.objetoContratoCobranca.getQtdeParcelasInvestidor10())));
			simulador.setTipoCalculo(this.objetoContratoCobranca.getTipoCalculoInvestidor10());
			isEnvelope = this.objetoContratoCobranca.isRecebedorEnvelope10();
			simulador.setCarencia(BigInteger.valueOf(this.objetoContratoCobranca.getCarenciaInvestidor10()));
			simulador.setDataSimulacao(this.objetoContratoCobranca.getDataInicioInvestidor10());
		}

		if (simulador.getQtdParcelas().compareTo(BigInteger.ZERO) == 0) {
			return null;
		}

		if (isEnvelope) {
			simulador.setTipoCalculo("Envelope");
		}

		// simulador.setDataSimulacao(DateUtil.getDataHoje());
		simulador.setTarifaIOFDiario(tarifaIOFDiario);
		simulador.setTarifaIOFAdicional(tarifaIOFAdicional);
		simulador.setSeguroMIP(BigDecimal.ZERO);
		simulador.setSeguroDFI(BigDecimal.ZERO);
		// valores
		simulador.setValorImovel(this.objetoContratoCobranca.getValorImovel());
//			simulador.setCustoEmissaoValor(custoEmissaoValor);		
		simulador.setNaoCalcularDFI(true);
		simulador.setNaoCalcularMIP(true);
		simulador.setNaoCalcularTxAdm(true);

		if (simulador.getTipoCalculo().equals("Americano")
				&& (simulador.getQtdParcelas().subtract(simulador.getCarencia()).compareTo(BigInteger.ONE) == 0)) {
			simulador.calcularAmericanoInvestidor();
		} else {
			simulador.calcular();
		}

		return simulador;
	}

	private SimulacaoVO calcularReParcelamento() {
		BigDecimal tarifaIOFDiario;
		BigDecimal tarifaIOFAdicional = SiscoatConstants.TARIFA_IOF_ADICIONAL.divide(BigDecimal.valueOf(100));

//			BigDecimal custoEmissaoValor = SiscoatConstants.CUSTO_EMISSAO_MINIMO;
//			if (this.objetoContratoCobranca.getVlrInvestimento().multiply(SiscoatConstants.CUSTO_EMISSAO_PERCENTUAL.divide(BigDecimal.valueOf(100)))
//					.compareTo(SiscoatConstants.CUSTO_EMISSAO_MINIMO) > 0) {
//				custoEmissaoValor = this.objetoContratoCobranca.getVlrInvestimento().multiply(SiscoatConstants.CUSTO_EMISSAO_PERCENTUAL.divide(BigDecimal.valueOf(100)));
//			}

		SimulacaoVO simulador = new SimulacaoVO();

		if (CommonsUtil.intValue(this.qtdeParcelas) >= this.objetoContratoCobranca.getQtdeParcelas()
				&& this.objetoContratoCobranca.isGeraParcelaFinal()
				&& !CommonsUtil.semValor(this.objetoContratoCobranca.getVlrParcelaFinal())) {
			// this.objetoContratoCobranca.setQtdeParcelas(this.objetoContratoCobranca.getQtdeParcelas()
			// + 1);
			this.setQtdeParcelas(CommonsUtil.stringValue(this.objetoContratoCobranca.getQtdeParcelas()));
			this.objetoContratoCobranca.setGeraParcelaFinal(false);
		}

		if (this.objetoContratoCobranca.getPagador().getCpf() != null) {
			if (DateUtil.isAfterDate(this.objetoContratoCobranca.getDataInicio(), SiscoatConstants.TROCA_IOF)) {
				tarifaIOFDiario = SiscoatConstants.TARIFA_IOF_PF_ANTIGA.divide(BigDecimal.valueOf(100));
			} else {
				tarifaIOFDiario = SiscoatConstants.TARIFA_IOF_PF.divide(BigDecimal.valueOf(100));
			}
			simulador.setTipoPessoa("PF");
		} else {
			if (DateUtil.isAfterDate(this.objetoContratoCobranca.getDataInicio(), SiscoatConstants.TROCA_IOF)) {
				tarifaIOFDiario = SiscoatConstants.TARIFA_IOF_PJ_ANTIGA.divide(BigDecimal.valueOf(100));
			} else {
				tarifaIOFDiario = SiscoatConstants.TARIFA_IOF_PJ.divide(BigDecimal.valueOf(100));
			}
			simulador.setTipoPessoa("PJ");
		}

		simulador.setDataSimulacao(DateUtil.getDataHoje());
		simulador.setTarifaIOFDiario(tarifaIOFDiario);
		simulador.setTarifaIOFAdicional(tarifaIOFAdicional);
		simulador.setSeguroMIP(SiscoatConstants.SEGURO_MIP);
		simulador.setSeguroDFI(SiscoatConstants.SEGURO_DFI);
		// valores
		simulador.setValorCredito(this.saldoDevedorReparcelamento);
		simulador.setTaxaJuros(this.objetoContratoCobranca.getTxJurosParcelas());
		simulador.setCarencia(this.carenciaReparcelamento);
		if (this.numeroParcelaReparcelamento.compareTo(BigInteger.ZERO) == 1) {
			simulador.setQtdParcelas(BigInteger.valueOf(this.objetoContratoCobranca.getQtdeParcelas())
					.subtract(this.numeroParcelaReparcelamento.subtract(BigInteger.ONE)));
		} else {
			simulador.setQtdParcelas(BigInteger.valueOf(this.objetoContratoCobranca.getQtdeParcelas()));
		}

		simulador.setValorImovel(this.objetoContratoCobranca.getValorImovel());
//			simulador.setCustoEmissaoValor(custoEmissaoValor);
		simulador.setTipoCalculo(this.objetoContratoCobranca.getTipoCalculo());
		simulador.setNaoCalcularDFI(
				!(this.objetoContratoCobranca.isTemSeguroDFI() && this.objetoContratoCobranca.isTemSeguro()));
		simulador.setNaoCalcularMIP(
				!(this.objetoContratoCobranca.isTemSeguroMIP() && this.objetoContratoCobranca.isTemSeguro()));
		simulador.setNaoCalcularTxAdm(!(this.objetoContratoCobranca.isTemTxAdm()));

		simulador.calcular();
		if (this.numeroParcelaReparcelamento.compareTo(BigInteger.ZERO) != 0) {
			simulador.getParcelas().remove(0);
			for (SimulacaoDetalheVO parcela : simulador.getParcelas()) {
				parcela.setNumeroParcela(
						parcela.getNumeroParcela().add(numeroParcelaReparcelamento).subtract(BigInteger.ONE));
			}
		}
		return simulador;

	}

	public void mostrarParcela() {
		try {
			if (this.objetoContratoCobranca.getTipoCalculo().equals("Price [IPCA Novo]")) {
				this.simuladorParcelas = calcularParcelasPriceIPCANovo();
			} else {
				if (this.objetoContratoCobranca.isCorrigidoNovoIPCA()) {
					if (this.objetoContratoCobranca.getTipoCalculo().equals("Price")) {
						this.simuladorParcelas = calcularParcelasPriceIPCANovo();
					}
					if (this.objetoContratoCobranca.getTipoCalculo().equals("SAC")) {
						this.simuladorParcelas = calcularParcelasSACIPCANovo();
					}
					if (this.objetoContratoCobranca.getTipoCalculo().equals("Americano")) {
						// this.simuladorParcelas = calcularParcelasPriceIPCANovo();
					}
				} else {
					this.simuladorParcelas = calcularParcelas();
				}
			}

		} catch (Exception e) {
		}
	}

	public void mostrarInvestimento(int numeroInvestidor) {
		try {
			this.simuladorParcelas = calcularInvestimento(numeroInvestidor);
		} catch (Exception e) {
		}
	}

	public void mostrarReParcelamento() {
		try {
			this.objetoContratoCobranca.setQtdeParcelas(CommonsUtil.intValue(this.qtdeParcelas));

			try {
				if (this.objetoContratoCobranca.getTipoCalculo().equals("Price [IPCA Novo]")) {
					this.simuladorParcelas = calcularParcelasPriceIPCANovo();
				} else {
					this.simuladorParcelas = calcularReParcelamento();
				}

				if (this.objetoContratoCobranca.getTipoCalculo().equals("Price [IPCA Novo]")) {
					this.simuladorParcelas = calcularParcelasPriceIPCANovo();
				} else {
					if (this.objetoContratoCobranca.isCorrigidoNovoIPCA()) {
						if (this.objetoContratoCobranca.getTipoCalculo().equals("Price")) {
							this.simuladorParcelas = calcularParcelasPriceIPCANovo();
						}
						if (this.objetoContratoCobranca.getTipoCalculo().equals("SAC")) {
							this.simuladorParcelas = calcularParcelasSACIPCANovo();
						}
						if (this.objetoContratoCobranca.getTipoCalculo().equals("Americano")) {
							// this.simuladorParcelas = calcularParcelasPriceIPCANovo();
						}
					} else {
						this.simuladorParcelas = calcularReParcelamento();
					}
				}
			} catch (Exception e) {
			}
		} catch (Exception e) {
		}
	}

	public void concluirReparcelamento() {
		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();
		IPCADao ipcaDao = new IPCADao();
		ContratoCobrancaDetalhesDao contratoCobrancaDetalhesDao = new ContratoCobrancaDetalhesDao();

		BigInteger ultimaParcela = BigInteger.ZERO;
		boolean geraDataVencimento = this.numeroParcelaReparcelamento.compareTo(BigInteger.ZERO) == 0;

		Date dataVencimentoNova = null;
		if (geraDataVencimento) {
			dataVencimentoNova = this.objetoContratoCobranca.getDataInicio();
		} else {
			dataVencimentoNova = this.dataParcela;
		}

		for (SimulacaoDetalheVO parcela : this.simuladorParcelas.getParcelas()) {
			boolean encontrouParcela = false;
			BigDecimal saldoAnterior = BigDecimal.ZERO;

			for (ContratoCobrancaDetalhes detalhe : this.objetoContratoCobranca.getListContratoCobrancaDetalhes()) {

				if (CommonsUtil.mesmoValor(parcela.getNumeroParcela().toString(), detalhe.getNumeroParcela())) {

					Date dataParcela = null;

					if (!detalhe.isAmortizacao())
						dataParcela = contratoCobrancaDao
								.geraDataParcela((CommonsUtil.intValue(parcela.getNumeroParcela())
										- this.numeroParcelaReparcelamento.intValue()), dataVencimentoNova);

					if (detalhe.isParcelaPaga()) {

						if (CommonsUtil.mesmoValor(BigInteger.ZERO, this.numeroParcelaReparcelamento)) {
							detalhe.setDataVencimento(dataParcela);
							detalhe.setVlrSaldoInicial(saldoAnterior);
							// detalhe.setVlrSaldoParcela(parcela.getSaldoDevedorInicial());

							if (this.objetoContratoCobranca.isCorrigidoNovoIPCA()) {
								detalhe.setVlrSaldoParcela(
										parcela.getSaldoDevedorFinal().setScale(2, BigDecimal.ROUND_HALF_EVEN));
							} else {
								detalhe.setVlrSaldoParcela(
										parcela.getSaldoDevedorInicial().setScale(2, BigDecimal.ROUND_HALF_EVEN));
							}
						}

						encontrouParcela = true;
						if (CommonsUtil.mesmoValor(BigDecimal.ZERO, parcela.getValorParcela()))
							break;

						if (CommonsUtil.mesmoValor(BigDecimal.ZERO, detalhe.getVlrParcela()))
							detalhe.setParcelaPaga(false);
						detalhe.setOrigemBaixa("concluirReparcelamento");
					}

					if (detalhe.getDataVencimentoAtual().compareTo(detalhe.getDataVencimento()) < 1) {
						detalhe.setDataVencimentoAtual(dataParcela);
					}

					detalhe.setDataVencimento(dataParcela);

					detalhe.setVlrSaldoInicial(saldoAnterior);
					// detalhe.setVlrSaldoParcela(
					// parcela.getSaldoDevedorInicial().setScale(2, BigDecimal.ROUND_HALF_EVEN));

					if (this.objetoContratoCobranca.isCorrigidoNovoIPCA()) {
						detalhe.setVlrSaldoParcela(
								parcela.getSaldoDevedorFinal().setScale(2, BigDecimal.ROUND_HALF_EVEN));
					} else {
						detalhe.setVlrSaldoParcela(
								parcela.getSaldoDevedorInicial().setScale(2, BigDecimal.ROUND_HALF_EVEN));
					}

					detalhe.setVlrParcela(parcela.getValorParcela().setScale(2, BigDecimal.ROUND_HALF_EVEN));
					detalhe.setVlrJurosParcela(parcela.getJuros().setScale(2, BigDecimal.ROUND_HALF_EVEN));
					detalhe.setVlrAmortizacaoParcela(parcela.getAmortizacao().setScale(2, BigDecimal.ROUND_HALF_EVEN));
					detalhe.setSeguroDFI(parcela.getSeguroDFI());
					detalhe.setSeguroMIP(parcela.getSeguroMIP());
					detalhe.setTaxaAdm(parcela.getTxAdm());
					if (parcela.getValorParcela().compareTo(BigDecimal.ZERO) == 0) {
						detalhe.setParcelaPaga(true);
						detalhe.setOrigemBaixa("concluirReparcelamento");
						detalhe.setDataPagamento(detalhe.getDataVencimento());
						detalhe.setVlrParcela(BigDecimal.ZERO);
					}

					if (DateUtil.isAfterDate(detalhe.getDataVencimento(), DateUtil.getDataHoje())
							&& !detalhe.isParcelaPaga()) {
						detalhe.setParcelaVencida(true);
					} else
						detalhe.setParcelaVencida(false);

					if (DateUtil.isDataHoje(detalhe.getDataVencimento()) && !detalhe.isParcelaPaga()) {
						detalhe.setParcelaVencendo(true);
					} else
						detalhe.setParcelaVencendo(false);

					if (!CommonsUtil.semValor(detalhe.getIpca())) {
						detalhe.setIpca(null);
						calcularIPCA(ipcaDao, contratoCobrancaDetalhesDao, detalhe);
					}

					encontrouParcela = true;
					break;
				}
				saldoAnterior = detalhe.getVlrSaldoParcela();
			}
			if (!encontrouParcela) {
				this.objetoContratoCobranca.getListContratoCobrancaDetalhes().add(criaContratoCobrancaDetalhe(
						contratoCobrancaDao, parcela, dataVencimentoNova, saldoAnterior, "legado"));
			}

			ultimaParcela = parcela.getNumeroParcela();
		}

		// valida se tem parcela para se retirada, tem que ser ao contrario o for
		for (Integer iDetalhe = this.objetoContratoCobranca.getListContratoCobrancaDetalhes().size()
				- 1; iDetalhe >= 0; iDetalhe--) {
			ContratoCobrancaDetalhes detalhe = this.objetoContratoCobranca.getListContratoCobrancaDetalhes()
					.get(iDetalhe);
			if (!CommonsUtil.mesmoValor(detalhe.getNumeroParcela(), "Armotização") && !detalhe.isParcelaPaga()) {
				if (CommonsUtil.intValue(detalhe.getNumeroParcela()) > ultimaParcela.intValue()) {
					this.objetoContratoCobranca.getListContratoCobrancaDetalhes().remove(detalhe);
				}
			}
		}
	}

	public void reparcelarPelaUltimaParcelaValidada() {
		this.simuladorParcelas = new SimulacaoVO();

		for (int iDetalhe = 0; iDetalhe < this.objetoContratoCobranca.getListContratoCobrancaDetalhes()
				.size(); iDetalhe++) {
			ContratoCobrancaDetalhes detalhe = this.objetoContratoCobranca.getListContratoCobrancaDetalhes()
					.get(iDetalhe);
			if (!detalhe.isParcelaPaga()) {
				if (CommonsUtil.mesmoValor(iDetalhe, 0)) {
					this.setNumeroParcelaReparcelamento(
							BigInteger.valueOf(CommonsUtil.intValue(detalhe.getNumeroParcela())));
					this.setDataParcela(detalhe.getDataVencimento());
					this.setCarenciaReparcelamento(BigInteger.valueOf(objetoContratoCobranca.getMesesCarencia()));
					if (detalhe.getVlrSaldoParcela() != null) {
						this.setSaldoDevedorReparcelamento(detalhe.getVlrSaldoParcela());
					} else {
						this.setSaldoDevedorReparcelamento(this.objetoContratoCobranca.getValorCCB());
					}
				}
				break;
			} else {
				this.setSaldoDevedorReparcelamento(detalhe.getVlrSaldoParcela());
				if (!detalhe.isAmortizacao()) {

					ContratoCobrancaDetalhes detalheProximo = this.objetoContratoCobranca
							.getListContratoCobrancaDetalhes().get(iDetalhe + 1);
					if (!detalheProximo.isAmortizacao()) {
						this.setDataParcela(detalheProximo.getDataVencimento());
						this.setNumeroParcelaReparcelamento(
								BigInteger.valueOf(CommonsUtil.intValue(detalheProximo.getNumeroParcela())));
					}
				}
				this.setCarenciaReparcelamento(BigInteger.ZERO);
			}
		}
	}

	public void concluirReparcelamentoAutomatico() {
		FacesContext context = FacesContext.getCurrentInstance();
		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();
		try {
			contratoCobrancaDao.merge(this.objetoContratoCobranca);
			context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_INFO,
					"Contrato Cobrança: As parcelas foram re-geradas com sucesso!!!", ""));
		} catch (Exception e) {
			context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR, "Contrato Cobrança: " + e, ""));
		}
	}

	public List<String> contaPagarDescricaoLista() {
		List<String> listaNome = new ArrayList<>();
		listaNome.add("Cartório");
		listaNome.add("Certidão");
		listaNome.add("Condomínio");
		listaNome.add("Crédito Cliente");
		listaNome.add("Devolução");
		listaNome.add("Honorário");
		listaNome.add("IPTU");
		listaNome.add("IQ");
		listaNome.add("ITBI");
		listaNome.add("Laudo");
		listaNome.add("Processo");

		return listaNome.stream().collect(Collectors.toList());
	}

	public void pesquisaSegurado() {
		this.tituloPagadorRecebedorDialog = "Segurados";
		this.tipoPesquisaPagadorRecebedor = "Segurado";
		this.updatePagadorRecebedor = ":form:SeguradoresPanel";
		this.seguradoSelecionado = new Segurado();
		this.seguradoSelecionado.setPessoa(new PagadorRecebedor());
	}

	public void pesquisaPessoaAnaliseDocumento() {
		this.tituloPagadorRecebedorDialog = "Pessoas";
		this.tipoPesquisaPagadorRecebedor = "Analise Documento";

		if (CommonsUtil.semValor(this.documentoAnaliseAdicionar))
			this.documentoAnaliseAdicionar = new DocumentoAnalise();

		this.updatePagadorRecebedor = "adicionarPessoaAnaliseForm";
		this.documentoAnaliseAdicionar.setPagador(new PagadorRecebedor());
	}

	public void pesquisaSeguradoConsulta() {
		this.tituloPagadorRecebedorDialog = "Segurados";
		this.tipoPesquisaPagadorRecebedor = "Segurado";
		this.updatePagadorRecebedor = ":formSegurados:SeguradoresPanel";
		this.seguradoSelecionado = new Segurado();
		this.seguradoSelecionado.setPessoa(new PagadorRecebedor());
	}

	public void pesquisaPagador() {
		this.tituloPagadorRecebedorDialog = "Pagadores";
		this.tipoPesquisaPagadorRecebedor = "Pagador";
		this.updatePagadorRecebedor = ":form:OutrosPagadores";
		this.pagadorSecundarioSelecionado = new PagadorRecebedorAdicionais();
		this.pagadorSecundarioSelecionado.setPessoa(new PagadorRecebedor());
	}

	public void pesquisaCcbSocio() {
		this.tituloPagadorRecebedorDialog = "Sócios";
		this.tipoPesquisaPagadorRecebedor = "Socio";
		this.updatePagadorRecebedor = ":form:SociosPanel";
		this.socioSelecionado = new PagadorRecebedorSocio();
		this.socioSelecionado.setPessoa(new PagadorRecebedor());
	}

	public void populateSelectedPagadorRecebedor() {
		if (CommonsUtil.mesmoValor("Segurado", tipoPesquisaPagadorRecebedor)) {
			this.seguradoSelecionado.setPessoa(this.selectedPagadorGenerico);
		} else if (CommonsUtil.mesmoValor("Socio", tipoPesquisaPagadorRecebedor)) {
			this.socioSelecionado.setPessoa(this.selectedPagadorGenerico);
		} else if (CommonsUtil.mesmoValor("Pagador", tipoPesquisaPagadorRecebedor)) {
			this.pagadorSecundarioSelecionado.setPessoa(this.selectedPagadorGenerico);
		} else if (CommonsUtil.mesmoValor("Participante", tipoPesquisaPagadorRecebedor)) {
			this.participanteSelecionado.setPessoa(this.selectedPagadorGenerico);
		} else if (CommonsUtil.mesmoValor("SocioCCB", tipoPesquisaPagadorRecebedor)) {
			this.socioCcbSelecionado.setPessoa(this.selectedPagadorGenerico);
		} else if (CommonsUtil.mesmoValor("Analise Documento", tipoPesquisaPagadorRecebedor)) {

			if (!CommonsUtil.semValor(selectedPagadorGenerico.getNome())
					&& (!CommonsUtil.semValor(selectedPagadorGenerico.getCpf())
							|| !CommonsUtil.semValor(selectedPagadorGenerico.getCnpj()))) {
				this.documentoAnaliseAdicionar.setPagador(this.selectedPagadorGenerico);
				this.documentoAnaliseAdicionar.setIdentificacao(this.documentoAnaliseAdicionar.getPagador().getNome());
				if (!CommonsUtil.semValor(this.documentoAnaliseAdicionar.getPagador().getCpf())) {
					this.documentoAnaliseAdicionar.setCnpjcpf(this.documentoAnaliseAdicionar.getPagador().getCpf());
					this.documentoAnaliseAdicionar.setTipoPessoa("PF");
				} else {
					this.documentoAnaliseAdicionar.setCnpjcpf(this.documentoAnaliseAdicionar.getPagador().getCnpj());
					this.documentoAnaliseAdicionar.setTipoPessoa("PJ");
				}
			}
		}
	}

	public void concluirSegurado() {
		this.tituloPagadorRecebedorDialog = "";
		this.tipoPesquisaPagadorRecebedor = "";
		this.updatePagadorRecebedor = "";
		this.seguradoSelecionado.setContratoCobranca(this.objetoContratoCobranca);
		this.seguradoSelecionado.setPosicao(this.objetoContratoCobranca.getListSegurados().size() + 1);
		this.objetoContratoCobranca.getListSegurados().add(this.seguradoSelecionado);
		SeguradoDAO seguradoDAO = new SeguradoDAO();
		seguradoDAO.create(seguradoSelecionado);
		this.seguradoSelecionado = new Segurado();
		this.seguradoSelecionado.setPessoa(new PagadorRecebedor());
		this.addSegurador = false;
	}

	public void concluirPagador() {
		FacesContext context = FacesContext.getCurrentInstance();
		try {
			this.pagadorSecundarioSelecionado.setContratoCobranca(this.objetoContratoCobranca);
			this.pagadorSecundarioSelecionado
					.setNomeParticipanteCheckList(this.pagadorSecundarioSelecionado.getPessoa().getNome());
			this.pagadorSecundarioSelecionado.getPessoa()
					.setNomeCC(this.pagadorSecundarioSelecionado.getPessoa().getNome());
			this.pagadorSecundarioSelecionado.getPessoa()
					.setCpfCC(this.pagadorSecundarioSelecionado.getPessoa().getCpf());
			this.objetoContratoCobranca.getListaPagadores().add(this.pagadorSecundarioSelecionado);
			criarPagadorRecebedorNoSistema(this.pagadorSecundarioSelecionado.getPessoa());
			this.pagadorSecundarioSelecionado = new PagadorRecebedorAdicionais();
			this.pagadorSecundarioSelecionado.setPessoa(new PagadorRecebedor());
			this.addPagador = false;
		} catch (Exception e) {
			context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR, "Contrato Cobrança: " + e, ""));
		}
	}

	public void concluirSocio() {
		this.socioSelecionado.setContratoCobranca(this.objetoContratoCobranca);
		this.socioSelecionado.setNomeParticipanteCheckList(this.socioSelecionado.getPessoa().getNome());
		this.socioSelecionado.getPessoa().setNomeCC(this.socioSelecionado.getPessoa().getNome());
		this.socioSelecionado.getPessoa().setCpfCC(this.socioSelecionado.getPessoa().getCpf());
		this.objetoContratoCobranca.getListSocios().add(this.socioSelecionado);
		criarPagadorRecebedorNoSistema(this.socioSelecionado.getPessoa());
		this.socioSelecionado = new PagadorRecebedorSocio();
		this.socioSelecionado.setPessoa(new PagadorRecebedor());
		this.addSocio = false;
	}

	public void concluirConta() {
		this.contasPagarSelecionada.setContrato(this.objetoContratoCobranca);
		this.contasPagarSelecionada.setNumeroDocumento(this.objetoContratoCobranca.getNumeroContrato());
		this.contasPagarSelecionada.setPagadorRecebedor(this.objetoPagadorRecebedor);
		this.contasPagarSelecionada.setTipoDespesa("C");
		this.contasPagarSelecionada.setResponsavel(this.objetoContratoCobranca.getResponsavel());
		if (!CommonsUtil.semValor(this.contasPagarSelecionada.getValor())) {
			if (!CommonsUtil.semValor(this.objetoContratoCobranca.getContaPagarValorTotal())) {
				this.objetoContratoCobranca.setContaPagarValorTotal(this.objetoContratoCobranca
						.getContaPagarValorTotal().add(this.contasPagarSelecionada.getValor()));
			} else {
				this.objetoContratoCobranca.setContaPagarValorTotal(this.contasPagarSelecionada.getValor());
			}
			if (!CommonsUtil.semValor(this.contasPagarSelecionada.getValorPagamento())) {
				if (CommonsUtil.mesmoValor(this.contasPagarSelecionada.getValorPagamento(),
						this.contasPagarSelecionada.getValor())) {
					this.contasPagarSelecionada.setContaPaga(true);
				}
				this.objetoContratoCobranca.setContaPagarValorTotal(this.objetoContratoCobranca
						.getContaPagarValorTotal().subtract(this.contasPagarSelecionada.getValorPagamento()));
			}
		}

		if (this.contasPagarSelecionada.isContaPaga()
				&& CommonsUtil.semValor(this.contasPagarSelecionada.getDataPagamento())) {
			this.contasPagarSelecionada.setDataPagamento(DateUtil.gerarDataHoje());
		}

		this.objetoContratoCobranca.getListContasPagar().add(this.contasPagarSelecionada);

		if (!CommonsUtil.semValor(this.objetoCcb)) {
			if (!this.objetoCcb.getDespesasAnexo2().contains(contasPagarSelecionada)) {
				this.objetoCcb.getDespesasAnexo2().add(this.contasPagarSelecionada);
			}
		}

		BigDecimal valorDespesas = calcularValorTotalContasPagar();
		this.objetoContratoCobranca.setContaPagarValorTotal(valorDespesas);
		ContasPagarDao contasPagarDao = new ContasPagarDao();
		if (contasPagarSelecionada.getId() <= 0) {
			contasPagarDao.create(contasPagarSelecionada);
		} else {
			contasPagarDao.merge(contasPagarSelecionada);
		}
		this.contasPagarSelecionada = new ContasPagar();
		this.addContasPagar = false;
		this.objetoContratoCobranca.calcularValorTotalContasPagas();

	}

	public void concluirContaPagamentoCliente() {
		this.contasPagarSelecionada.setContrato(this.objetoContratoCobranca);
		this.contasPagarSelecionada.setNumeroDocumento(this.objetoContratoCobranca.getNumeroContrato());
		this.contasPagarSelecionada.setPagadorRecebedor(this.objetoPagadorRecebedor);
		this.contasPagarSelecionada.setTipoDespesa("C");
		this.contasPagarSelecionada.setDescricao("Pagamento Cliente");
		this.contasPagarSelecionada.setResponsavel(this.objetoContratoCobranca.getResponsavel());
		this.contasPagarSelecionada.setValor(this.objetoContratoCobranca.getValorCartaSplit());

		if (!CommonsUtil.semValor(this.objetoContratoCobranca.getValorCartaSplit())) {
			if (!CommonsUtil.semValor(this.objetoContratoCobranca.getContaPagarValorTotal())) {
				this.objetoContratoCobranca.setContaPagarValorTotal(this.objetoContratoCobranca
						.getContaPagarValorTotal().add(this.objetoContratoCobranca.getValorCartaSplit()));
			} else {
				this.objetoContratoCobranca.setContaPagarValorTotal(this.objetoContratoCobranca.getValorCartaSplit());
			}
			if (!CommonsUtil.semValor(this.contasPagarSelecionada.getValorPagamento())) {
				if (CommonsUtil.mesmoValor(this.contasPagarSelecionada.getValorPagamento(),
						this.objetoContratoCobranca.getValorCartaSplit())) {
					this.contasPagarSelecionada.setContaPaga(true);
				}
				this.objetoContratoCobranca.setContaPagarValorTotal(this.objetoContratoCobranca
						.getContaPagarValorTotal().subtract(this.contasPagarSelecionada.getValorPagamento()));
			}
		}

		this.objetoContratoCobranca.getListContasPagar().add(this.contasPagarSelecionada);

		BigDecimal valorDespesas = calcularValorTotalContasPagar();
		this.objetoContratoCobranca.setContaPagarValorTotal(valorDespesas);
		ContasPagarDao contasPagarDao = new ContasPagarDao();
		if (contasPagarSelecionada.getId() <= 0) {
			contasPagarDao.create(contasPagarSelecionada);
		} else {
			contasPagarDao.merge(contasPagarSelecionada);
		}
		this.contasPagarSelecionada = new ContasPagar();
		this.addContasPagar = false;
		this.objetoContratoCobranca.calcularValorTotalContasPagas();

	}

	public void updateFieldsOrdemPagamentoStarkBank() {
		if (this.contasPagarSelecionada.getDescricao().equals("Laudo")) {
			if (this.contasPagarSelecionada.getFormaTransferencia().equals("Pix")) {
				this.objetoContratoCobranca.setNomeBancarioContaPagar("Galleria Correspondente Bancário Eireli");
				this.objetoContratoCobranca.setCpfCnpjBancarioContaPagar("34.787.885/0001-32");
				this.objetoContratoCobranca.setBancoBancarioContaPagar("Banco do Brasil");
				this.objetoContratoCobranca.setAgenciaBancarioContaPagar("1515-6");
				this.objetoContratoCobranca.setContaBancarioContaPagar("131094-1");
				this.objetoContratoCobranca.setChavePIXBancarioContaPagar("34.787.885/0001-32");
			}

			if (this.contasPagarSelecionada.getFormaTransferencia().equals("TED")) {
				this.objetoContratoCobranca.setNomeBancarioContaPagar("Galleria Correspondente Bancário Eireli");
				this.objetoContratoCobranca.setCpfCnpjBancarioContaPagar("34.787.885/0001-32");
				this.objetoContratoCobranca.setBancoBancarioContaPagar("Banco do Brasil");
				this.objetoContratoCobranca.setAgenciaBancarioContaPagar("1515-6");
				this.objetoContratoCobranca.setContaBancarioContaPagar("131094-1");
			}

			if (this.contasPagarSelecionada.getFormaTransferencia().equals("Boleto")) {
				this.contasPagarSelecionada.setNumeroDocumentoPagadorStarkBank("34.787.885/0001-32");
			}
		}
	}

	public void pagamentoStarkBank() {
		FacesContext context = FacesContext.getCurrentInstance();

		this.contasPagarSelecionada.setContrato(this.objetoContratoCobranca);
		this.contasPagarSelecionada.setNumeroDocumento(this.objetoContratoCobranca.getNumeroContrato());
		this.contasPagarSelecionada.setPagadorRecebedor(this.objetoPagadorRecebedor);
		this.contasPagarSelecionada.setTipoDespesa("C");
		this.contasPagarSelecionada.setResponsavel(this.objetoContratoCobranca.getResponsavel());

		if (!CommonsUtil.semValor(this.contasPagarSelecionada.getValor())) {
			if (!CommonsUtil.semValor(this.contasPagarSelecionada.getValorPagamento())) {
				StarkBankAPI starkBankAPI = new StarkBankAPI();

				if (this.contasPagarSelecionada.getFormaTransferencia().equals("Boleto")) {

					this.contasPagarSelecionada.setDescricaoStarkBank("Pagamento de Conta");

					StarkBankBaixa baixa = registraBaixaStarkBank(this.contasPagarSelecionada.getDataPagamento(),
							this.contasPagarSelecionada.getNumeroDocumentoPagadorStarkBank(), null,
							this.contasPagarSelecionada.getLinhaDigitavelStarkBank(),
							this.objetoPagadorRecebedor.getNome(), this.contasPagarSelecionada.getValorPagamento(),
							this.contasPagarSelecionada, "Boleto", "Aguardando Aprovação");

					this.contasPagarSelecionada.getListContasPagarBaixas().add(baixa);

					context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_INFO,
							"Pagamento StarkBank: Ordem de Pagamento de Boleto inserida com sucesso!", ""));
				}

				if (this.contasPagarSelecionada.getFormaTransferencia().equals("Pix")) {
					StarkBankBaixa baixa = registraBaixaStarkBank(DateUtil.gerarDataHoje(),
							this.objetoContratoCobranca.getCpfCnpjBancarioContaPagar(), null, null,
							this.objetoPagadorRecebedor.getNome(), this.contasPagarSelecionada.getValorPagamento(),
							this.contasPagarSelecionada, "PIX", "Aguardando Aprovação");

					this.contasPagarSelecionada.getListContasPagarBaixas().add(baixa);

					context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_INFO,
							"Pagamento StarkBank: Ordem de Pagamento de PIX inserida com sucesso!", ""));
				}

				if (this.contasPagarSelecionada.getFormaTransferencia().equals("TED")) {

					StarkBankBaixa baixa = registraBaixaStarkBank(DateUtil.gerarDataHoje(),
							this.objetoContratoCobranca.getCpfCnpjBancarioContaPagar(), null, null,
							this.objetoPagadorRecebedor.getNome(), this.contasPagarSelecionada.getValorPagamento(),
							this.contasPagarSelecionada, "TED", "Aguardando Aprovação");

					this.contasPagarSelecionada.getListContasPagarBaixas().add(baixa);

					context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_INFO,
							"Pagamento StarkBank: Ordem de Pagamento de TED inserida com sucesso!", ""));
				}

				ContasPagarDao contasPagarDao = new ContasPagarDao();
				if (this.contasPagarSelecionada.getId() <= 0) {
					contasPagarDao.create(this.contasPagarSelecionada);
				} else {
					contasPagarDao.merge(this.contasPagarSelecionada);
				}
			}
		}
	}

	public ContasPagar buscaDespesaCartaSplit(String despesa, String numeroContrato) {
		ContasPagarDao contasPagarDao = new ContasPagarDao();
		List<ContasPagar> despesaBD = new ArrayList<ContasPagar>();

		try {
			despesaBD = contasPagarDao.buscarDespesa(despesa, numeroContrato);
		} catch (Exception e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}

		if (despesaBD.size() > 0) {
			return despesaBD.get(0);
		} else {
			return null;
		}
	}

	public void pagamentoStarkBankCartaSplitGalleria() {
		FacesContext context = FacesContext.getCurrentInstance();

		ContasPagar contaCartaSplit = new ContasPagar();
		contaCartaSplit.setContaCartaSplit(true);
		contaCartaSplit.setContrato(this.objetoContratoCobranca);
		contaCartaSplit.setDataVencimento(DateUtil.gerarDataHoje());
		contaCartaSplit.setDescricao("Pagamento Carta Split - Galleria");
		// contaCartaSplit.setPagadorRecebedor(recebedor);
		contaCartaSplit.setNumeroDocumento(this.objetoContratoCobranca.getNumeroContrato());
		contaCartaSplit.setResponsavel(this.objetoContratoCobranca.getResponsavel());
		contaCartaSplit.setTipoDespesa("C");
		contaCartaSplit.setValor(this.objetoContratoCobranca.getValorCartaSplitGalleria());
		contaCartaSplit.setValorPagamento(this.objetoContratoCobranca.getValorCartaSplitGalleria());

		contaCartaSplit.setBancoTed(this.objetoContratoCobranca.getBancoBancarioCartaSplitGalleria());
		contaCartaSplit.setAgenciaTed(this.objetoContratoCobranca.getAgenciaBancarioCartaSplitGalleria());
		contaCartaSplit.setContaTed(this.objetoContratoCobranca.getContaBancarioCartaSplitGalleria());
		contaCartaSplit.setPix(this.objetoContratoCobranca.getPixCartaSplitGalleria());
		contaCartaSplit.setNomeTed(this.objetoContratoCobranca.getNomeBancarioCartaSplitGalleria());

		ContasPagarDao contasPagarDao = new ContasPagarDao();
		if (contaCartaSplit.getId() <= 0) {
			contasPagarDao.create(contaCartaSplit);
		} else {
			contasPagarDao.merge(contaCartaSplit);
		}

		/*
		 * if (contaCartaSplit.getFormaTransferencia().equals("Boleto")) {
		 * 
		 * contaCartaSplit.setDescricaoStarkBank("Pagamento de Conta");
		 * 
		 * StarkBankBaixa baixa =
		 * registraBaixaStarkBank(contaCartaSplit.getDataPagamento(),
		 * contaCartaSplit.getNumeroDocumentoPagadorStarkBank(), null,
		 * contaCartaSplit.getLinhaDigitavelStarkBank(), recebedor.getNome(),
		 * contaCartaSplit.getValorPagamento(), contaCartaSplit, "Boleto",
		 * "Aguardando Aprovação");
		 * 
		 * contaCartaSplit.getListContasPagarBaixas().add(baixa);
		 * 
		 * context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_INFO,
		 * "Pagamento StarkBank: Ordem de Pagamento de Boleto inserida com sucesso!",
		 * "")); }
		 */

		if (this.objetoContratoCobranca.getPixCartaSplitGalleria() != null
				|| !this.objetoContratoCobranca.getPixCartaSplitGalleria().equals("")) {
			contaCartaSplit.setFormaTransferencia("Pix");

			StarkBankBaixa baixa = registraBaixaStarkBank(DateUtil.gerarDataHoje(),
					this.objetoContratoCobranca.getCpfCnpjBancarioCartaSplitGalleria(), null, null,
					contaCartaSplit.getNomeTed(), this.objetoContratoCobranca.getValorCartaSplitGalleria(),
					contaCartaSplit, "Pix", "Aguardando Aprovação");

			contaCartaSplit.getListContasPagarBaixas().add(baixa);

			context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_INFO,
					"Pagamento StarkBank: Ordem de Pagamento de PIX inserida com sucesso!", ""));
		} else {
			contaCartaSplit.setFormaTransferencia("TED");
			StarkBankBaixa baixa = registraBaixaStarkBank(DateUtil.gerarDataHoje(),
					this.objetoContratoCobranca.getCpfCnpjBancarioCartaSplitGalleria(), null, null,
					contaCartaSplit.getNomeTed(), this.objetoContratoCobranca.getValorCartaSplitGalleria(),
					contaCartaSplit, "TED", "Aguardando Aprovação");

			contaCartaSplit.getListContasPagarBaixas().add(baixa);

			context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_INFO,
					"Pagamento StarkBank: Ordem de Pagamento de TED inserida com sucesso!", ""));
		}

		// contaCartaSplit.setDataPagamento(DateUtil.gerarDataHoje());
		// contaCartaSplit.setValorPagamento(valor);

		if (contaCartaSplit.getId() <= 0) {
			contasPagarDao.create(contaCartaSplit);
		} else {
			contasPagarDao.merge(contaCartaSplit);
		}
	}

	public void pagamentoStarkBankCartaSplitCustoEmissao() {
		FacesContext context = FacesContext.getCurrentInstance();

		ContasPagar contaCartaSplit = new ContasPagar();
		contaCartaSplit.setContaCartaSplit(true);
		contaCartaSplit.setContrato(this.objetoContratoCobranca);
		contaCartaSplit.setDataVencimento(DateUtil.gerarDataHoje());
		contaCartaSplit.setDescricao("Pagamento Carta Split - IOF");
		// contaCartaSplit.setPagadorRecebedor(recebedor);
		contaCartaSplit.setNumeroDocumento(this.objetoContratoCobranca.getNumeroContrato());
		contaCartaSplit.setResponsavel(this.objetoContratoCobranca.getResponsavel());
		contaCartaSplit.setTipoDespesa("C");
		contaCartaSplit.setValor(this.objetoContratoCobranca.getValorCustoEmissao());
		contaCartaSplit.setValorPagamento(this.objetoContratoCobranca.getValorCustoEmissao());

		contaCartaSplit.setBancoTed(this.objetoContratoCobranca.getBancoBancarioCustoEmissao());
		contaCartaSplit.setAgenciaTed(this.objetoContratoCobranca.getAgenciaBancarioCustoEmissao());
		contaCartaSplit.setContaTed(this.objetoContratoCobranca.getContaBancarioCustoEmissao());
		contaCartaSplit.setPix(this.objetoContratoCobranca.getPixCustoEmissao());
		contaCartaSplit.setNomeTed(this.objetoContratoCobranca.getNomeBancarioCustoEmissao());

		ContasPagarDao contasPagarDao = new ContasPagarDao();
		if (contaCartaSplit.getId() <= 0) {
			contasPagarDao.create(contaCartaSplit);
		} else {
			contasPagarDao.merge(contaCartaSplit);
		}

		/*
		 * if (contaCartaSplit.getFormaTransferencia().equals("Boleto")) {
		 * 
		 * contaCartaSplit.setDescricaoStarkBank("Pagamento de Conta");
		 * 
		 * StarkBankBaixa baixa =
		 * registraBaixaStarkBank(contaCartaSplit.getDataPagamento(),
		 * contaCartaSplit.getNumeroDocumentoPagadorStarkBank(), null,
		 * contaCartaSplit.getLinhaDigitavelStarkBank(), recebedor.getNome(),
		 * contaCartaSplit.getValorPagamento(), contaCartaSplit, "Boleto",
		 * "Aguardando Aprovação");
		 * 
		 * contaCartaSplit.getListContasPagarBaixas().add(baixa);
		 * 
		 * context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_INFO,
		 * "Pagamento StarkBank: Ordem de Pagamento de Boleto inserida com sucesso!",
		 * "")); }
		 */

		if (this.objetoContratoCobranca.getPixCustoEmissao() != null
				|| !this.objetoContratoCobranca.getPixCustoEmissao().equals("")) {
			contaCartaSplit.setFormaTransferencia("Pix");

			StarkBankBaixa baixa = registraBaixaStarkBank(DateUtil.gerarDataHoje(),
					this.objetoContratoCobranca.getCpfCnpjBancarioCustoEmissao(), null, null,
					contaCartaSplit.getNomeTed(), this.objetoContratoCobranca.getValorCustoEmissao(), contaCartaSplit,
					"Pix", "Aguardando Aprovação");

			contaCartaSplit.getListContasPagarBaixas().add(baixa);

			context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_INFO,
					"Pagamento StarkBank: Ordem de Pagamento de PIX inserida com sucesso!", ""));
		} else {
			contaCartaSplit.setFormaTransferencia("TED");
			StarkBankBaixa baixa = registraBaixaStarkBank(DateUtil.gerarDataHoje(),
					this.objetoContratoCobranca.getCpfCnpjBancarioCustoEmissao(), null, null,
					contaCartaSplit.getNomeTed(), this.objetoContratoCobranca.getValorCustoEmissao(), contaCartaSplit,
					"TED", "Aguardando Aprovação");

			contaCartaSplit.getListContasPagarBaixas().add(baixa);

			context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_INFO,
					"Pagamento StarkBank: Ordem de Pagamento de TED inserida com sucesso!", ""));
		}

		// contaCartaSplit.setDataPagamento(DateUtil.gerarDataHoje());
		// contaCartaSplit.setValorPagamento(valor);

		if (contaCartaSplit.getId() <= 0) {
			contasPagarDao.create(contaCartaSplit);
		} else {
			contasPagarDao.merge(contaCartaSplit);
		}
	}

	public void pagamentoStarkBankCartaSplit() {
		FacesContext context = FacesContext.getCurrentInstance();

		ContasPagar contaCartaSplit = new ContasPagar();
		contaCartaSplit.setContaCartaSplit(true);
		contaCartaSplit.setContrato(this.objetoContratoCobranca);
		contaCartaSplit.setDataVencimento(DateUtil.gerarDataHoje());
		contaCartaSplit.setDescricao("Pagamento Carta Split - Cliente");
		// contaCartaSplit.setPagadorRecebedor(recebedor);
		contaCartaSplit.setNumeroDocumento(this.objetoContratoCobranca.getNumeroContrato());
		contaCartaSplit.setResponsavel(this.objetoContratoCobranca.getResponsavel());
		contaCartaSplit.setTipoDespesa("C");
		contaCartaSplit.setValor(this.objetoContratoCobranca.getValorCartaSplit());
		contaCartaSplit.setValorPagamento(this.objetoContratoCobranca.getValorCartaSplit());

		contaCartaSplit.setBancoTed(this.objetoContratoCobranca.getBancoBancarioCartaSplit());
		contaCartaSplit.setAgenciaTed(this.objetoContratoCobranca.getAgenciaBancarioCartaSplit());
		contaCartaSplit.setContaTed(this.objetoContratoCobranca.getContaBancarioCartaSplit());
		contaCartaSplit.setPix(this.objetoContratoCobranca.getPixCartaSplit());
		contaCartaSplit.setNomeTed(this.objetoContratoCobranca.getNomeBancarioCartaSplit());

		ContasPagarDao contasPagarDao = new ContasPagarDao();
		if (contaCartaSplit.getId() <= 0) {
			contasPagarDao.create(contaCartaSplit);
		} else {
			contasPagarDao.merge(contaCartaSplit);
		}

		/*
		 * if (contaCartaSplit.getFormaTransferencia().equals("Boleto")) {
		 * 
		 * contaCartaSplit.setDescricaoStarkBank("Pagamento de Conta");
		 * 
		 * StarkBankBaixa baixa =
		 * registraBaixaStarkBank(contaCartaSplit.getDataPagamento(),
		 * contaCartaSplit.getNumeroDocumentoPagadorStarkBank(), null,
		 * contaCartaSplit.getLinhaDigitavelStarkBank(), recebedor.getNome(),
		 * contaCartaSplit.getValorPagamento(), contaCartaSplit, "Boleto",
		 * "Aguardando Aprovação");
		 * 
		 * contaCartaSplit.getListContasPagarBaixas().add(baixa);
		 * 
		 * context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_INFO,
		 * "Pagamento StarkBank: Ordem de Pagamento de Boleto inserida com sucesso!",
		 * "")); }
		 */

		if (this.objetoContratoCobranca.getPixCartaSplit() != null
				|| !this.objetoContratoCobranca.getPixCartaSplit().equals("")) {
			contaCartaSplit.setFormaTransferencia("PIX");

			StarkBankBaixa baixa = registraBaixaStarkBank(DateUtil.gerarDataHoje(),
					this.objetoContratoCobranca.getCpfCnpjBancarioCartaSplit(), null, null,
					contaCartaSplit.getNomeTed(), this.objetoContratoCobranca.getValorCartaSplit(), contaCartaSplit,
					"PIX", "Aguardando Aprovação");

			contaCartaSplit.getListContasPagarBaixas().add(baixa);

			context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_INFO,
					"Pagamento StarkBank: Ordem de Pagamento de PIX inserida com sucesso!", ""));
		} else {
			contaCartaSplit.setFormaTransferencia("TED");
			StarkBankBaixa baixa = registraBaixaStarkBank(DateUtil.gerarDataHoje(),
					this.objetoContratoCobranca.getCpfCnpjBancarioCartaSplit(), null, null,
					contaCartaSplit.getNomeTed(), this.objetoContratoCobranca.getValorCartaSplit(), contaCartaSplit,
					"TED", "Aguardando Aprovação");

			contaCartaSplit.getListContasPagarBaixas().add(baixa);

			context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_INFO,
					"Pagamento StarkBank: Ordem de Pagamento de TED inserida com sucesso!", ""));
		}

		// contaCartaSplit.setDataPagamento(DateUtil.gerarDataHoje());
		// contaCartaSplit.setValorPagamento(valor);

		if (contaCartaSplit.getId() <= 0) {
			contasPagarDao.create(contaCartaSplit);
		} else {
			contasPagarDao.merge(contaCartaSplit);
		}
	}

	public String consultaPagamentosStarkBankPendentes() {

		StarkBankBaixaDAO starkBankBaixaDAO = new StarkBankBaixaDAO();
		this.pagamentosStarkBankPendentes = new ArrayList<StarkBankBaixa>();
		this.pagamentosStarkBankPendentesCartaSplit = new ArrayList<StarkBankBaixa>();

		this.pagamentosStarkBankPendentes = starkBankBaixaDAO.findByFilter("statusPagamento", "Aguardando Aprovação");
		
		// popula despesas carta split
		for (StarkBankBaixa baixas : this.pagamentosStarkBankPendentes) {
			if (baixas.getContasPagar() != null) {
				if (baixas.getContasPagar().getDescricao().contains("Pagamento Carta Split")) {
					this.pagamentosStarkBankPendentesCartaSplit.add(baixas);
				}
			}
		}
		
		// remove despesas carta plit
		for (StarkBankBaixa baixas : this.pagamentosStarkBankPendentesCartaSplit) {
			this.pagamentosStarkBankPendentes.remove(baixas);
		}

		return "/Atendimento/Cobranca/ConsultaPagamentosStarkBankPendentes.xhtml";
	}

	public String processaPagamentoStarkBank() {
		FacesContext context = FacesContext.getCurrentInstance();
		
		boolean finalizaOperacao = false;
		
		if (!CommonsUtil.semValor(this.objetoBaixaPagamentoStarkBank.getContasPagar().getContrato().getContaPagarValorTotal())) {
			this.objetoBaixaPagamentoStarkBank.getContasPagar().getContrato().setContaPagarValorTotal(this.objetoBaixaPagamentoStarkBank.getContasPagar().getContrato()
					.getContaPagarValorTotal().add(this.objetoBaixaPagamentoStarkBank.getContasPagar().getValor()));
		} else {
			this.objetoBaixaPagamentoStarkBank.getContasPagar().getContrato().setContaPagarValorTotal(this.objetoBaixaPagamentoStarkBank.getContasPagar().getValor());
		}
		
		System.out.println("processaPagamentoStarkBank");

		//if (!CommonsUtil.semValor(this.objetoBaixaPagamentoStarkBank.getContasPagar().getValorPagamento())) {
			StarkBankAPI starkBankAPI = new StarkBankAPI();

			if (this.objetoBaixaPagamentoStarkBank.getContasPagar().getFormaTransferencia().equals("Boleto")) {
				
				System.out.println("processaPagamentoStarkBank - Boleto");

				this.objetoBaixaPagamentoStarkBank.getContasPagar().setDescricaoStarkBank("Pagamento de Conta");

				StarkBankBoleto starkBankBoleto = starkBankAPI.paymentBoleto(
						this.objetoBaixaPagamentoStarkBank.getContasPagar().getLinhaDigitavelStarkBank(), this.objetoBaixaPagamentoStarkBank.getContasPagar().getContrato(),
						this.objetoBaixaPagamentoStarkBank.getContasPagar().getContrato().getPagador(), this.objetoBaixaPagamentoStarkBank.getContasPagar().getDescricaoStarkBank(),
						this.objetoBaixaPagamentoStarkBank.getContasPagar().getNumeroDocumentoPagadorStarkBank(),
						this.objetoBaixaPagamentoStarkBank.getContasPagar().getDescricao());

				if (starkBankBoleto != null) {
					// this.contasPagarSelecionada.setComprovantePagamentoStarkBank(starkBankBoleto);
					StarkBankBaixa baixa = updateBaixaStarkBank(this.objetoBaixaPagamentoStarkBank,							
							String.valueOf(starkBankBoleto.getId()),
							starkBankBoleto.getCreated(),
							this.objetoBaixaPagamentoStarkBank.getContasPagar().getValor(),
							"Aprovado",
							starkBankBoleto.getLine());

					this.objetoBaixaPagamentoStarkBank.getContasPagar().getContrato().setContaPagarValorTotal(this.objetoBaixaPagamentoStarkBank.getContasPagar().getContrato().getContaPagarValorTotal()
							.subtract(this.objetoBaixaPagamentoStarkBank.getContasPagar().getValor()));

					context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_INFO,
							"Pagamento StarkBank: Boleto pago sucesso!", ""));

					finalizaOperacao = true;
				}
			}

			if (this.objetoBaixaPagamentoStarkBank.getContasPagar().getFormaTransferencia().equals("Pix") || 
					this.objetoBaixaPagamentoStarkBank.getContasPagar().getFormaTransferencia().equals("PIX")) {
				
				System.out.println("processaPagamentoStarkBank - Pix");
				
				StarkBankPix starkBankPix;
				
				if (this.objetoBaixaPagamentoStarkBank.getContasPagar().getDescricao().contains("Pagamento Carta Split")) {
					System.out.println("processaPagamentoStarkBank - Galleria - Pix");
					starkBankPix = starkBankAPI.paymentPix(
							this.objetoBaixaPagamentoStarkBank.getContasPagar().getPix(),
							this.objetoBaixaPagamentoStarkBank.getContasPagar().getAgenciaTed(),
							this.objetoBaixaPagamentoStarkBank.getContasPagar().getContaTed(),
							"34.787.885/0001-32",
							this.objetoBaixaPagamentoStarkBank.getContasPagar().getNomeTed(),
							this.objetoBaixaPagamentoStarkBank.getContasPagar().getValorPagamento(),
							this.objetoBaixaPagamentoStarkBank.getContasPagar().getFormaTransferencia(),
							this.objetoBaixaPagamentoStarkBank.getContasPagar().getDescricao());
				} else {
					System.out.println("processaPagamentoStarkBank - Pix");
					starkBankPix = starkBankAPI.paymentPix(
							this.objetoBaixaPagamentoStarkBank.getContasPagar().getContrato().getChavePIXBancarioContaPagar(),
							this.objetoBaixaPagamentoStarkBank.getContasPagar().getContrato().getAgenciaBancarioContaPagar(),
							this.objetoBaixaPagamentoStarkBank.getContasPagar().getContrato().getContaBancarioContaPagar(),
							this.objetoBaixaPagamentoStarkBank.getContasPagar().getContrato().getCpfCnpjBancarioContaPagar(),
							this.objetoBaixaPagamentoStarkBank.getContasPagar().getContrato().getNomeBancarioContaPagar(),
							this.objetoBaixaPagamentoStarkBank.getContasPagar().getValorPagamento(),
							this.objetoBaixaPagamentoStarkBank.getContasPagar().getFormaTransferencia(),
							this.objetoBaixaPagamentoStarkBank.getContasPagar().getDescricao());
				}
				
				if (starkBankPix != null) {	
					System.out.println("processaPagamentoStarkBank - Update Baixa");
					StarkBankBaixa baixa = updateBaixaStarkBank(this.objetoBaixaPagamentoStarkBank,							
							String.valueOf(starkBankPix.getId()),
							starkBankPix.getCreated(),
							starkBankPix.getAmount(),
							"Aprovado",
							null);

					this.objetoBaixaPagamentoStarkBank.getContasPagar().getContrato().setContaPagarValorTotal(this.objetoBaixaPagamentoStarkBank.getContasPagar().getContrato()
							.getContaPagarValorTotal().subtract(this.objetoBaixaPagamentoStarkBank.getContasPagar().getValor()));

					context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_INFO,
							"Pagamento StarkBank: PIX efetuado com sucesso!", ""));

					finalizaOperacao = true;
				}
			}

			if (this.objetoBaixaPagamentoStarkBank.getContasPagar().getFormaTransferencia().equals("TED")) {
				System.out.println("processaPagamentoStarkBank - TED");
				
				StarkBankPix starkBankPix;
				
				if (this.objetoBaixaPagamentoStarkBank.getContasPagar().getDescricao().contains("Pagamento Carta Split")) {
					System.out.println("processaPagamentoStarkBank - Galleria - TED");

					String nomePagador = null;
					String documentoPagador = null;
					
					if (this.objetoBaixaPagamentoStarkBank.getContasPagar().getContrato().getPagador().getCpf() != null &&
							!this.objetoBaixaPagamentoStarkBank.getContasPagar().getContrato().getPagador().getCpf().equals("")) {
						nomePagador = this.objetoBaixaPagamentoStarkBank.getContasPagar().getContrato().getPagador().getNome();
						documentoPagador = this.objetoBaixaPagamentoStarkBank.getContasPagar().getContrato().getPagador().getCpf();
					} else {
						nomePagador = this.objetoBaixaPagamentoStarkBank.getContasPagar().getContrato().getPagador().getNome();
						documentoPagador = this.objetoBaixaPagamentoStarkBank.getContasPagar().getContrato().getPagador().getCnpj();
					}
					
					if (documentoPagador != null) {
						documentoPagador = documentoPagador.replace(".", "").replace("-","").replace("/", "");
					}
					
					starkBankPix = starkBankAPI.paymentTED(
							this.objetoBaixaPagamentoStarkBank.getContasPagar().getBancoTed(),
							this.objetoBaixaPagamentoStarkBank.getContasPagar().getAgenciaTed(),
							this.objetoBaixaPagamentoStarkBank.getContasPagar().getContaTed(),
							documentoPagador,
							nomePagador,
							this.objetoBaixaPagamentoStarkBank.getContasPagar().getValorPagamento(),
							this.objetoBaixaPagamentoStarkBank.getContasPagar().getFormaTransferencia(),
							this.objetoBaixaPagamentoStarkBank.getContasPagar().getDescricao());
				} else {
					starkBankPix = starkBankAPI.paymentTED(
							this.objetoBaixaPagamentoStarkBank.getContasPagar().getContrato().getBancoBancarioContaPagar(),
							this.objetoBaixaPagamentoStarkBank.getContasPagar().getContrato().getAgenciaBancarioContaPagar(),
							this.objetoBaixaPagamentoStarkBank.getContasPagar().getContrato().getContaBancarioContaPagar(),
							this.objetoBaixaPagamentoStarkBank.getContasPagar().getContrato().getCpfCnpjBancarioContaPagar(),
							this.objetoBaixaPagamentoStarkBank.getContasPagar().getContrato().getNomeBancarioContaPagar(),
							this.objetoBaixaPagamentoStarkBank.getContasPagar().getValorPagamento(),
							this.objetoBaixaPagamentoStarkBank.getContasPagar().getFormaTransferencia(),
							this.objetoBaixaPagamentoStarkBank.getContasPagar().getDescricao());
				}
				
				if (starkBankPix != null) {
					StarkBankBaixa baixa = updateBaixaStarkBank(this.objetoBaixaPagamentoStarkBank,							
							String.valueOf(starkBankPix.getId()),
							starkBankPix.getCreated(),
							starkBankPix.getAmount(),
							"Aprovado",
							null);

					this.objetoBaixaPagamentoStarkBank.getContasPagar().getContrato().setContaPagarValorTotal(this.objetoBaixaPagamentoStarkBank.getContasPagar().getContrato()
							.getContaPagarValorTotal().subtract(this.objetoBaixaPagamentoStarkBank.getContasPagar().getValor()));

					context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_INFO,
							"Pagamento StarkBank: TED efetuado com sucesso!", ""));

					finalizaOperacao = true;
				}
			}
		
			if (finalizaOperacao) {
				BigDecimal saldoConta = getSaldoContaPagar(this.objetoBaixaPagamentoStarkBank.getContasPagar());
	
				this.objetoBaixaPagamentoStarkBank.getContasPagar().setValorPagamento(saldoConta);
	
				if (saldoConta.compareTo(this.objetoBaixaPagamentoStarkBank.getContasPagar().getValor()) >= 0) {
					this.objetoBaixaPagamentoStarkBank.getContasPagar().setContaPaga(true);
				}
	
				if (this.objetoBaixaPagamentoStarkBank.getContasPagar().isContaPaga()
						&& CommonsUtil.semValor(this.objetoBaixaPagamentoStarkBank.getContasPagar().getDataPagamento())) {
					this.objetoBaixaPagamentoStarkBank.getContasPagar().setDataPagamento(DateUtil.gerarDataHoje());
				}
	
				this.objetoBaixaPagamentoStarkBank.getContasPagar().getContrato().getListContasPagar().add(this.objetoBaixaPagamentoStarkBank.getContasPagar());
				/*
				if (!CommonsUtil.semValor(this.objetoCcb)) {
					if (!this.objetoCcb.getDespesasAnexo2().contains(contasPagarSelecionada)) {
						this.objetoCcb.getDespesasAnexo2().add(this.objetoBaixaPagamentoStarkBank.getContasPagar());
					}
				}
				*/
	
				BigDecimal valorDespesas = calcularValorTotalContasPagar();
				this.objetoBaixaPagamentoStarkBank.getContasPagar().getContrato().setContaPagarValorTotal(valorDespesas);
				ContasPagarDao contasPagarDao = new ContasPagarDao();
				if (this.objetoBaixaPagamentoStarkBank.getContasPagar().getId() <= 0) {
					contasPagarDao.create(this.objetoBaixaPagamentoStarkBank.getContasPagar());
				} else {
					contasPagarDao.merge(this.objetoBaixaPagamentoStarkBank.getContasPagar());
				}

				this.objetoBaixaPagamentoStarkBank.getContasPagar().getContrato().calcularValorTotalContasPagas();
	
				ContratoCobrancaDao cDao = new ContratoCobrancaDao();
				cDao.merge(this.objetoBaixaPagamentoStarkBank.getContasPagar().getContrato());
			}
		//}
		
		return consultaPagamentosStarkBankPendentes();
	}

	public String processaReprovaPagamentoStarkBank() {
		FacesContext context = FacesContext.getCurrentInstance();

		this.objetoBaixaPagamentoStarkBank.setStatusPagamento("Reprovado");

		StarkBankBaixaDAO sbBaixaDao = new StarkBankBaixaDAO();
		sbBaixaDao.merge(this.objetoBaixaPagamentoStarkBank);

		context.addMessage(null,
				new FacesMessage(FacesMessage.SEVERITY_INFO, "Pagamento StarkBank: Reprovado com sucesso!", ""));

		return consultaPagamentosStarkBankPendentes();
	}

	public void geraReciboPagamentoStarkBank(StarkBankBaixa baixaStarkBank) {
		/*
		 * this.transferenciasObservacoesIUGU = new TransferenciasObservacoesIUGU();
		 * this.transferenciasObservacoesIUGU.setId(1);
		 * this.transferenciasObservacoesIUGU.setIdTransferencia(
		 * "jdsfhdsfhjskfhjhslafdshf"); this.transferenciasObservacoesIUGU.
		 * setObservacao("asdklfhjksdhfjd dsjfhjhdsfjashgdfj ");
		 * 
		 * this.valorItem = new BigDecimal("30000.00");
		 */

		this.comprovanteStarkBankGerado = false;

		DecimalFormat df = new DecimalFormat("###,###,###,###,###.00");

		FacesContext context = FacesContext.getCurrentInstance();
		/*
		 * Referência iText - Gerador PDF
		 * http://www.dicas-l.com.br/arquivo/gerando_pdf_utilizando_java.php#.
		 * VGpT0_nF_h4
		 */

		Document doc = null;
		OutputStream os = null;

		try {
			/*
			 * Fonts Utilizadas no PDF
			 */
			Font header = new Font(FontFamily.HELVETICA, 12, Font.BOLD);

			Font titulo = new Font(FontFamily.HELVETICA, 10, Font.BOLD);
			Font tituloBranco = new Font(FontFamily.HELVETICA, 10, Font.BOLD);
			tituloBranco.setColor(BaseColor.WHITE);
			Font normal = new Font(FontFamily.HELVETICA, 10);
			Font subtitulo = new Font(FontFamily.HELVETICA, 10, Font.BOLD);
			Font subtituloIdent = new Font(FontFamily.HELVETICA, 10, Font.BOLD);
			Font destaque = new Font(FontFamily.HELVETICA, 8, Font.BOLD);

			TimeZone zone = TimeZone.getDefault();
			Locale locale = new Locale("pt", "BR");
			Calendar date = Calendar.getInstance(zone, locale);
			SimpleDateFormat sdfDataRel = new SimpleDateFormat("dd/MMM/yyyy", locale);
			SimpleDateFormat sdfDataRelComHoras = new SimpleDateFormat("dd/MM/yyyy HH:mm:ss", locale);

			ParametrosDao pDao = new ParametrosDao();
			/*
			 * Configuração inicial do PDF - Cria o documento tamanho A4, margens de 2,54cm
			 */

			doc = new Document(PageSize.A4.rotate(), 10, 80, 10, 80);
			this.nomeComprovanteStarkBank = "Recibo Pagamento -  " + nomePagador + ".pdf";
			this.pathComprovanteStarkBank = pDao.findByFilter("nome", "RECIBOS_IUGU").get(0).getValorString();

			os = new FileOutputStream(this.pathComprovanteStarkBank + this.nomeComprovanteStarkBank);

			// Associa a stream de saída ao
			PdfWriter.getInstance(doc, os);

			// Abre o documento
			doc.open();
			/*
			 * Paragraph p1 = new Paragraph("RECIBO DE PAGAMENTO - " + favorecido, titulo);
			 * p1.setAlignment(Element.ALIGN_CENTER); p1.setSpacingAfter(10); doc.add(p1);
			 */
			PdfPTable table = new PdfPTable(new float[] { 0.8f, 0.8f });
			table.setWidthPercentage(50.0f);

			BufferedImage buff = ImageIO.read(getClass().getResourceAsStream("/resource/logoStarkBank.jpg"));
			ByteArrayOutputStream bos = new ByteArrayOutputStream();
			ImageIO.write(buff, "jpg", bos);
			Image img = Image.getInstance(bos.toByteArray());

			img.setAlignment(Element.ALIGN_CENTER);

			PdfPCell cell1 = new PdfPCell(img);
			cell1.setBorder(0);
			cell1.setPaddingLeft(8f);
			cell1.setBorderWidthTop(1);
			cell1.setBorderColorTop(BaseColor.BLACK);
			cell1.setBorderWidthLeft(1);
			cell1.setBorderColorLeft(BaseColor.BLACK);
			cell1.setBorderWidthRight(1);
			cell1.setBorderColorRight(BaseColor.BLACK);
			cell1.setVerticalAlignment(Element.ALIGN_MIDDLE);
			cell1.setHorizontalAlignment(Element.ALIGN_LEFT);
			cell1.setBackgroundColor(BaseColor.WHITE);
			cell1.setUseBorderPadding(true);
			cell1.setPaddingTop(10f);
			cell1.setPaddingBottom(10f);
			cell1.setColspan(2);
			table.addCell(cell1);

			cell1 = new PdfPCell(new Phrase("StarkBank - Sistema de Pagamento online", header));
			cell1.setBorder(0);
			cell1.setBorderWidthLeft(1);
			cell1.setBorderColorLeft(BaseColor.BLACK);
			cell1.setBorderWidthRight(1);
			cell1.setBorderColorRight(BaseColor.BLACK);
			cell1.setPaddingLeft(8f);
			cell1.setBackgroundColor(BaseColor.WHITE);
			cell1.setVerticalAlignment(Element.ALIGN_MIDDLE);
			cell1.setHorizontalAlignment(Element.ALIGN_CENTER);
			cell1.setUseBorderPadding(true);
			cell1.setPaddingTop(5f);
			cell1.setPaddingBottom(15f);
			cell1.setColspan(2);
			table.addCell(cell1);

			if (baixaStarkBank.getFormaPagamento().equals("Boleto")) {
				cell1 = new PdfPCell(new Phrase("Comprovante de Pagamento - Boleto", tituloBranco));
			}
			if (baixaStarkBank.getFormaPagamento().equals("PIX")) {
				cell1 = new PdfPCell(new Phrase("Comprovante de Pagamento - PIX", tituloBranco));
			}
			if (baixaStarkBank.getFormaPagamento().equals("TED")) {
				cell1 = new PdfPCell(new Phrase("Comprovante de Pagamento - TED", tituloBranco));
			}

			cell1.setBorder(0);
			cell1.setBorderWidthLeft(1);
			cell1.setBorderColorLeft(BaseColor.BLACK);
			cell1.setBorderWidthRight(1);
			cell1.setBorderColorRight(BaseColor.BLACK);
			cell1.setPaddingLeft(8f);
			cell1.setVerticalAlignment(Element.ALIGN_MIDDLE);
			cell1.setHorizontalAlignment(Element.ALIGN_LEFT);
			cell1.setBackgroundColor(new BaseColor(92, 156, 204));
			cell1.setUseBorderPadding(true);
			cell1.setPaddingTop(5f);
			cell1.setPaddingBottom(5f);
			cell1.setColspan(2);
			table.addCell(cell1);

			cell1 = new PdfPCell(new Phrase("ID da Transação: " + baixaStarkBank.getIdTransacao(), titulo));
			cell1.setBorder(0);
			cell1.setBorderWidthLeft(1);
			cell1.setBorderColorLeft(BaseColor.BLACK);
			cell1.setBorderWidthRight(1);
			cell1.setBorderColorRight(BaseColor.BLACK);
			cell1.setPaddingLeft(8f);
			cell1.setVerticalAlignment(Element.ALIGN_MIDDLE);
			cell1.setHorizontalAlignment(Element.ALIGN_LEFT);
			cell1.setBackgroundColor(BaseColor.WHITE);
			cell1.setUseBorderPadding(true);
			cell1.setPaddingTop(10f);
			cell1.setPaddingBottom(2f);
			cell1.setColspan(2);
			table.addCell(cell1);

			cell1 = new PdfPCell(
					new Phrase("Data: " + sdfDataRelComHoras.format(baixaStarkBank.getDataPagamento()), titulo));
			cell1.setBorder(0);
			cell1.setBorderWidthLeft(1);
			cell1.setBorderColorLeft(BaseColor.BLACK);
			cell1.setBorderWidthRight(1);
			cell1.setBorderColorRight(BaseColor.BLACK);
			cell1.setPaddingLeft(8f);
			cell1.setVerticalAlignment(Element.ALIGN_MIDDLE);
			cell1.setHorizontalAlignment(Element.ALIGN_LEFT);
			cell1.setBackgroundColor(BaseColor.WHITE);
			cell1.setUseBorderPadding(true);
			cell1.setPaddingTop(2f);
			cell1.setPaddingBottom(10f);
			cell1.setColspan(2);
			table.addCell(cell1);

			cell1 = new PdfPCell(new Phrase("Valor R$ " + df.format(baixaStarkBank.getValor()), titulo));
			cell1.setBorder(0);
			cell1.setBorderWidthLeft(1);
			cell1.setBorderColorLeft(BaseColor.BLACK);
			cell1.setBorderWidthRight(1);
			cell1.setBorderColorRight(BaseColor.BLACK);
			cell1.setPaddingLeft(8f);
			cell1.setVerticalAlignment(Element.ALIGN_MIDDLE);
			cell1.setHorizontalAlignment(Element.ALIGN_LEFT);
			cell1.setBackgroundColor(BaseColor.WHITE);
			cell1.setUseBorderPadding(true);
			cell1.setPaddingTop(10f);
			cell1.setPaddingBottom(10f);
			cell1.setColspan(2);
			table.addCell(cell1);

			cell1 = new PdfPCell(new Phrase("CPF/CNPJ: " + baixaStarkBank.getDocumento(), titulo));
			cell1.setBorder(0);
			cell1.setBorderWidthLeft(1);
			cell1.setBorderColorLeft(BaseColor.BLACK);
			cell1.setBorderWidthRight(1);
			cell1.setBorderColorRight(BaseColor.BLACK);
			cell1.setPaddingLeft(8f);
			cell1.setVerticalAlignment(Element.ALIGN_MIDDLE);
			cell1.setHorizontalAlignment(Element.ALIGN_LEFT);
			cell1.setBackgroundColor(BaseColor.WHITE);
			cell1.setUseBorderPadding(true);
			cell1.setPaddingTop(10f);
			cell1.setPaddingBottom(2f);
			cell1.setColspan(2);
			table.addCell(cell1);

			cell1 = new PdfPCell(new Phrase("Nome: " + baixaStarkBank.getNomePagador(), titulo));
			cell1.setBorder(0);
			cell1.setBorderWidthBottom(1);
			cell1.setBorderColorBottom(BaseColor.BLACK);
			cell1.setBorderWidthLeft(1);
			cell1.setBorderColorLeft(BaseColor.BLACK);
			cell1.setBorderWidthRight(1);
			cell1.setBorderColorRight(BaseColor.BLACK);
			cell1.setPaddingLeft(8f);
			cell1.setVerticalAlignment(Element.ALIGN_MIDDLE);
			cell1.setHorizontalAlignment(Element.ALIGN_LEFT);
			cell1.setBackgroundColor(BaseColor.WHITE);
			cell1.setUseBorderPadding(true);
			cell1.setPaddingTop(20f);
			cell1.setPaddingBottom(10f);
			cell1.setColspan(2);
			table.addCell(cell1);

			if (baixaStarkBank.getFormaPagamento().equals("Boleto")) {
				cell1 = new PdfPCell(new Phrase("Obs.: Compensação no próximo dia útil.", titulo));
				cell1.setBorder(0);
				cell1.setBorderWidthBottom(1);
				cell1.setBorderColorBottom(BaseColor.BLACK);
				cell1.setBorderWidthLeft(1);
				cell1.setBorderColorLeft(BaseColor.BLACK);
				cell1.setBorderWidthRight(1);
				cell1.setBorderColorRight(BaseColor.BLACK);
				cell1.setPaddingLeft(8f);
				cell1.setVerticalAlignment(Element.ALIGN_MIDDLE);
				cell1.setHorizontalAlignment(Element.ALIGN_LEFT);
				cell1.setBackgroundColor(BaseColor.WHITE);
				cell1.setUseBorderPadding(true);
				cell1.setPaddingTop(20f);
				cell1.setPaddingBottom(10f);
				cell1.setColspan(2);
				table.addCell(cell1);
			}

			doc.add(table);

		} catch (FileNotFoundException e) {
			// TODO Auto-generated catch block
			context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR,
					"[Stark Bank - Recibo de Pagamento] Este contrato está aberto por algum outro programa, por favor, feche-o e tente novamente!"
							+ e,
					""));
		} catch (Exception e) {
			context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR,
					"[Stark Bank - Recibo de Pagamento] Ocorreu um problema ao gerar o PDF!" + e, ""));
		} finally {
			this.comprovanteStarkBankGerado = true;

			if (doc != null) {
				// fechamento do documento
				doc.close();
			}
			if (os != null) {
				// fechamento da stream de saída
				try {
					os.close();
				} catch (IOException e) {
					// TODO Auto-generated catch block
					e.printStackTrace();
				}
			}
		}
	}

	public BigDecimal getSaldoContaPagar(ContasPagar contaPagar) {
		BigDecimal saldo = BigDecimal.ZERO;

		for (StarkBankBaixa baixas : contaPagar.getListContasPagarBaixas()) {
			if (baixas.getValor() != null) {
				saldo = saldo.add(baixas.getValor());
			}
		}

		return saldo;
	}

	public BigDecimal getTotalBaixasStarkBank(ContasPagar contaPagar) {
		BigDecimal saldo = BigDecimal.ZERO;

		if (contaPagar.getListContasPagarBaixas().size() > 0) {
			for (StarkBankBaixa baixas : contaPagar.getListContasPagarBaixas()) {
				saldo = saldo.add(baixas.getValor());
			}
		} else {
			saldo = contaPagar.getValorPagamento();
		}

		return saldo;
	}

	public Date getDataUltimaBaixaStarkBank(ContasPagar contaPagar) {
		Date dataUltimoPagamento = null;

		if (contaPagar.getListContasPagarBaixas().size() > 0) {
			return contaPagar.getListContasPagarBaixas().get(contaPagar.getListContasPagarBaixas().size() - 1)
					.getDataPagamento();
		} else {
			return contaPagar.getDataPagamento();
		}
	}

	public StarkBankBaixa registraBaixaStarkBank(Date dataPagamento, String documento, String idTransacao,
			String linhaBoleto, String nomePagador, BigDecimal valorPago, ContasPagar contaPagar, String formaPagamento,
			String statusPagamento) {
		StarkBankBaixaDAO sbDAO = new StarkBankBaixaDAO();

		StarkBankBaixa starkBankBaixa = new StarkBankBaixa();
		starkBankBaixa.setDataPagamento(dataPagamento);
		starkBankBaixa.setDocumento(documento);
		starkBankBaixa.setIdTransacao(idTransacao);
		starkBankBaixa.setLinhaBoleto(linhaBoleto);
		starkBankBaixa.setNomePagador(nomePagador);
		starkBankBaixa.setValor(valorPago);
		starkBankBaixa.setFormaPagamento(formaPagamento);
		starkBankBaixa.setStatusPagamento(statusPagamento);
		starkBankBaixa.setContasPagar(contaPagar);

		sbDAO.create(starkBankBaixa);

		return starkBankBaixa;
	}

	public StarkBankBaixa updateBaixaStarkBank(StarkBankBaixa starkBankBaixa, String idTransacao, Date dataPagamento,
			BigDecimal valorPago, String statusPagamento, String linhaBoleto) {
		StarkBankBaixaDAO sbDAO = new StarkBankBaixaDAO();

		starkBankBaixa.setDataPagamento(dataPagamento);
		starkBankBaixa.setStatusPagamento(statusPagamento);
		starkBankBaixa.setIdTransacao(idTransacao);
		starkBankBaixa.setLinhaBoleto(linhaBoleto);
		starkBankBaixa.setValor(valorPago);

		sbDAO.merge(starkBankBaixa);

		return starkBankBaixa;
	}

	public void estornaBaixaStarkBank(ContasPagar contaPagar, StarkBankBaixa starkBankBaixa) {
		StarkBankBaixaDAO sbDAO = new StarkBankBaixaDAO();
		sbDAO.delete(starkBankBaixa);

		BigDecimal saldoConta = getSaldoContaPagar(this.contasPagarSelecionada);

		if (CommonsUtil.mesmoValor(saldoConta, contaPagar.getValor())) {
			contaPagar.setContaPaga(true);
		} else {
			contaPagar.setContaPaga(false);
		}

		ContasPagarDao contasPagarDao = new ContasPagarDao();
		if (contaPagar.getId() <= 0) {
			contasPagarDao.create(contaPagar);
		} else {
			contasPagarDao.merge(contaPagar);
		}
	}

	public void clearPagadorProcesso(CcbProcessosJudiciais processo) {
		processoSelecionado = processo;
		tipoPagadorProcesso = true;
		pagadorProcesso = new PagadorRecebedor();
	}

	public void clearProcessodialog(PagadorRecebedor pessoa) {
		processoSelecionado = new CcbProcessosJudiciais();
		processoSelecionado.setPagador(pessoa);
	}

	public void selectedTipoPagadorProcesso() {
		this.pagadorProcesso = new PagadorRecebedor();
	}

	public void procurarPFprocesso() {
		if (CommonsUtil.semValor(pagadorProcesso.getCpf())) {
			return;
		}
		PagadorRecebedorDao pDao = new PagadorRecebedorDao();
		if (pDao.findByFilter("cpf", pagadorProcesso.getCpf()).size() > 0) {
			pagadorProcesso = pDao.findByFilter("cpf", pagadorProcesso.getCpf()).get(0);
		} else {
			pagadorProcesso.setId(0);
			return;
		}
	}

	public void procurarPJprocesso() {
		if (CommonsUtil.semValor(pagadorProcesso.getCnpj())) {
			return;
		}
		PagadorRecebedorDao pDao = new PagadorRecebedorDao();
		if (pDao.findByFilter("cnpj", pagadorProcesso.getCnpj()).size() > 0) {
			pagadorProcesso = pDao.findByFilter("cnpj", pagadorProcesso.getCnpj()).get(0);
		} else {
			pagadorProcesso.setId(0);
			return;
		}
	}

	public void inserirPessoaProcesso() {
		PagadorRecebedorDao pDao = new PagadorRecebedorDao();
		if (pagadorProcesso.getId() > 0) {
			pDao.merge(pagadorProcesso);
		} else {
			pDao.create(pagadorProcesso);
		}

		if (CommonsUtil.semValor(pessoasProcessos)) {
			pessoasProcessos = new ArrayList<PagadorRecebedor>();
		}
		pessoasProcessos.add(pagadorProcesso);

		// processoSelecionado.setPagador(pagadorProcesso);
		// if(objetoContratoCobranca.getListProcessos().contains(processoSelecionado)) {
		// processoSelecionado = new CcbProcessosJudiciais();
		// }
		pagadorProcesso = new PagadorRecebedor();
	}

	public void listarPessoas() {
		pessoasProcessos = new ArrayList<PagadorRecebedor>();
		if (CommonsUtil.semValor(objetoContratoCobranca.getListProcessos())) {
			return;
		}
		PagadorRecebedorDao pDao = new PagadorRecebedorDao();
		for (CcbProcessosJudiciais processo : this.objetoContratoCobranca.getListProcessos()) {
			if (!CommonsUtil.semValor(processo.getPagador())) {
				PagadorRecebedor pessoa = pessoasProcessos.stream()
						.filter(p -> CommonsUtil.mesmoValor(p.getId(), processo.getPagador().getId())).findFirst()
						.orElse(null);
				if (CommonsUtil.semValor(pessoa)) {
					PagadorRecebedor pagador = pDao.findById(processo.getPagador().getId());
					pessoasProcessos.add(pagador);
				}
			}
		}
		listarProcessos();
		calcularValorTotalProcessos();
	}

	public void listarProcessos() {
		for (PagadorRecebedor pagador : pessoasProcessos) {
			pagador.setProcessos(new ArrayList<CcbProcessosJudiciais>());
			pagador.setValorProcessos(BigDecimal.ZERO);
			for (CcbProcessosJudiciais processo : this.objetoContratoCobranca.getListProcessos()) {
				if (CommonsUtil.semValor(processo.getPagador())) {
					continue;
				}
				if (CommonsUtil.mesmoValor(pagador.getId(), processo.getPagador().getId())) {
					if (CommonsUtil.semValor(pagador.getProcessos())) {
						pagador.setProcessos(new ArrayList<CcbProcessosJudiciais>());
					}
					pagador.getProcessos().add(processo);
					if (!CommonsUtil.semValor(processo.getValorAtualizado())) {
						pagador.setValorProcessos(pagador.getValorProcessos().add(processo.getValorAtualizado()));
					}
				}
			}
		}
	}

	public void addProcesso() {
		if (CommonsUtil.semValor(objetoContratoCobranca.getListProcessos())) {
			objetoContratoCobranca.setListProcessos(new HashSet<>());
		}
		processoSelecionado.getContaPagar().setValor(processoSelecionado.getValorAtualizado());
		processoSelecionado.getContaPagar().setDescricao("Processo N°: " + processoSelecionado.getNumero());
		processoSelecionado.getContaPagar().setFormaTransferencia("Boleto");
		processoSelecionado.getContaPagar().setNumeroDocumento(objetoContratoCobranca.getNumeroContrato());
		processoSelecionado.getContaPagar().setPagadorRecebedor(objetoContratoCobranca.getPagador());
		processoSelecionado.getContaPagar().setResponsavel(objetoContratoCobranca.getResponsavel());

		processoSelecionado.setContrato(objetoContratoCobranca);

		if (CommonsUtil.mesmoValor(processoSelecionado.getQuitar(), "Quitar")
				|| CommonsUtil.mesmoValor(processoSelecionado.getQuitar(), "Quitar ou indicar bens")) {
			processoSelecionado.setSelecionadoComite(true);
		}

		if (!CommonsUtil.semValor(processoSelecionado.getContaPagar())) {
			ContasPagarDao cpDao = new ContasPagarDao();
			if (processoSelecionado.getContaPagar().getId() <= 0) {
				cpDao.create(processoSelecionado.getContaPagar());
			} else {
				cpDao.merge(processoSelecionado.getContaPagar());
			}
		}

		CcbProcessosJudiciaisDao ccbProcessosJudiciaisDao = new CcbProcessosJudiciaisDao();
		if (processoSelecionado.getId() <= 0) {
			processoSelecionado.setOrigem("Manual: " + getUsuarioLogadoNull().getLogin());
			ccbProcessosJudiciaisDao.create(processoSelecionado);
			objetoContratoCobranca.getListProcessos().add(processoSelecionado);
		} else {
			String origem = processoSelecionado.getOrigem();
			if (origem.contains("Editado por:")) {
				String origemAux = origem.substring(0, origem.lastIndexOf(" "));
				origemAux = origemAux + " " + getNomeUsuarioLogado();
				processoSelecionado.setOrigem(origemAux);
			} else {
				origem = origem + " - Editado por: " + getNomeUsuarioLogado();
				processoSelecionado.setOrigem(origem);
			}
			ccbProcessosJudiciaisDao.merge(processoSelecionado);
			PrimeFaces current = PrimeFaces.current();
			current.executeScript("PF('processoDialog').hide();");
		}

		PagadorRecebedor pessoa = processoSelecionado.getPagador();

		listarProcessos();
		calcularValorTotalProcessos();
		processoSelecionado = new CcbProcessosJudiciais();
		processoSelecionado.setPagador(pessoa);
	}

	public void atualizarValorProcesso() {
		String[] numeroArray = processoSelecionado.getNumero().split("\\.");
		if (numeroArray.length <= 1)
			return;
		if (CommonsUtil.semValor(processoSelecionado.getValor()))
			return;
		String ano = numeroArray[1];
		DebitosJudiciaisRequest debitosJudiciaisRequest = new DebitosJudiciaisRequest();
		debitosJudiciaisRequest.setHonorario(CommonsUtil.bigDecimalValue(10));
		DebitosJudiciaisRequestValor debitosJudiciaisRequestValor = new DebitosJudiciaisRequestValor();
		debitosJudiciaisRequestValor.setDescricao(processoSelecionado.getNumero());
		debitosJudiciaisRequestValor.setVencimento("0101" + DateUtil.getAnoProcesso(processoSelecionado.getNumero()));
		debitosJudiciaisRequestValor.setValor(processoSelecionado.getValor());

		debitosJudiciaisRequest.getValores().add(debitosJudiciaisRequestValor);

		DrCalcService drCalcService = new DrCalcService();
		DebitosJudiciais debitosJudiciais = drCalcService.criarConsultaAtualizacaoMonetaria(debitosJudiciaisRequest);

		if (debitosJudiciais != null) {
			processoSelecionado.setValorAtualizado(debitosJudiciais.getValores().get(0).getTotal());
		}
	}

	public void onRowSelectProcessos(SelectEvent event) {
		if (event != null && event.getObject() != null && event.getObject() instanceof CcbProcessosJudiciais) {
			if (listProcessosSelecionado == null) {
				listProcessosSelecionado = new ArrayList<CcbProcessosJudiciais>();
			}
			if (!listProcessosSelecionado.contains((CcbProcessosJudiciais) event.getObject())) {
				listProcessosSelecionado.add((CcbProcessosJudiciais) event.getObject());
			}
		}
	}

	public void onRowUnselectProcessos(UnselectEvent event) {
		if (event != null && event.getObject() != null && event.getObject() instanceof CcbProcessosJudiciais
				&& listProcessosSelecionado != null
				&& listProcessosSelecionado.contains((CcbProcessosJudiciais) event.getObject())) {
			listProcessosSelecionado.remove((CcbProcessosJudiciais) event.getObject());
		}
	}

	public void onAllRowsSelectProcessos(ToggleSelectEvent event) {
		List<CcbProcessosJudiciais> listToggle = new ArrayList<CcbProcessosJudiciais>();
		if (event != null && event.getSource() != null && event.getSource() instanceof DataTable) {
			DataTable dataTable = (DataTable) event.getSource();
			listToggle = (List<CcbProcessosJudiciais>) dataTable.getValue();
		}
		if (event.isSelected()) {
			for (CcbProcessosJudiciais processo : listToggle) {
				if (!listProcessosSelecionado.contains(processo)) {
					listProcessosSelecionado.add(processo);
				}
			}
		} else {
			for (CcbProcessosJudiciais processo : listToggle) {
				if (listProcessosSelecionado.contains(processo)) {
					listProcessosSelecionado.remove(processo);
				}
			}
		}
	}

	public void atualizarValorProcessoEmLote() {
		DebitosJudiciaisRequest debitosJudiciaisRequest = new DebitosJudiciaisRequest();
		debitosJudiciaisRequest.setHonorario(CommonsUtil.bigDecimalValue(10));
		DebitosJudiciais debitosJudiciais = null;
		DebitosJudiciaisValores debitosJudiciaisValores = null;
		CcbProcessosJudiciaisDao processosJudiciaisDao = new CcbProcessosJudiciaisDao();
		ContasPagarDao contasPagarDao = new ContasPagarDao();
		List<CcbProcessosJudiciais> processos = new ArrayList<CcbProcessosJudiciais>();
		if (CommonsUtil.semValor(listProcessosSelecionado))
			processos.addAll(objetoContratoCobranca.getListProcessos());
		else
			processos = listProcessosSelecionado;
		for (CcbProcessosJudiciais processo : processos) {
			String[] numeroArray = processo.getNumero().split("\\.");
			if (numeroArray.length <= 1)
				continue;
			if (CommonsUtil.semValor(processo.getValor()))
				continue;
			DebitosJudiciaisRequestValor debitosJudiciaisRequestValor = new DebitosJudiciaisRequestValor();
			debitosJudiciaisRequestValor.setDescricao(CommonsUtil.formataNumeroProcesso(processo.getNumero()));
			debitosJudiciaisRequestValor.setVencimento("0101" + DateUtil.getAnoProcesso(processo.getNumero()));
			debitosJudiciaisRequestValor.setValor(CommonsUtil.bigDecimalValue(processo.getValor()));
			debitosJudiciaisRequest.getValores().add(debitosJudiciaisRequestValor);
		}

		if (!CommonsUtil.semValor(debitosJudiciaisRequest.getValores())) {
			DrCalcService drCalcService = new DrCalcService();
			debitosJudiciais = drCalcService.criarConsultaAtualizacaoMonetaria(debitosJudiciaisRequest);
		}
		for (CcbProcessosJudiciais processo : processos) {
			if (CommonsUtil.semValor(processo.getValor()))
				continue;
			if (debitosJudiciais != null) {
				debitosJudiciaisValores = debitosJudiciais.getValores().stream().filter(d -> CommonsUtil
						.mesmoValor(d.getDescricao(), CommonsUtil.formataNumeroProcesso(processo.getNumero())))
						.findFirst().orElse(null);

				if (!CommonsUtil.semValor(debitosJudiciaisValores)
						&& !CommonsUtil.semValor(debitosJudiciaisValores.getTotal())) {
					processo.getContaPagar().setValor(debitosJudiciaisValores.getTotal());
					contasPagarDao.merge(processo.getContaPagar());
					processo.setValorAtualizado(debitosJudiciaisValores.getTotal());
					processosJudiciaisDao.merge(processo);
				}
			}
		}
		listProcessosSelecionado = new ArrayList<CcbProcessosJudiciais>();
	}

	public void editProcesso(CcbProcessosJudiciais processo) {
		processoSelecionado = processo;
	}

	public void removeProcesso(CcbProcessosJudiciais processo) {
		PagadorRecebedor pessoa = processo.getPagador();
		pessoa.getProcessos().remove(processo);
		objetoContratoCobranca.getListProcessos().remove(processo);

		if (!CommonsUtil.semValor(this.objetoCcb)) {
			if (this.objetoCcb.getDespesasAnexo2().contains(processo)) {
				this.objetoCcb.getDespesasAnexo2().remove(processo);
			}
		}
		listarProcessos();
		calcularValorTotalProcessos();
	}

	public void clearAverbacao() {
		averbacaoSelecionada = new Averbacao(BigDecimal.valueOf(600.00));
	}

	public void addAverbacao() {
		if (CommonsUtil.semValor(objetoContratoCobranca.getListAverbacao())) {
			objetoContratoCobranca.setListAverbacao(new HashSet<>());
		}
		averbacaoSelecionada.setContratoCobranca(objetoContratoCobranca);

		// CcbProcessosJudiciaisDao ccbProcessosJudiciaisDao = new
		// CcbProcessosJudiciaisDao();
		// ccbProcessosJudiciaisDao.create(averbacaoSelecionada);
		objetoContratoCobranca.getListAverbacao().add(averbacaoSelecionada);

		calcularValorTotalAverbacao();
		averbacaoSelecionada = new Averbacao();
	}

	public void removeAverbacao(Averbacao averbacao) {
		objetoContratoCobranca.getListAverbacao().remove(averbacao);
		calcularValorTotalAverbacao();
	}

	public void clearImovelAdicionarDialog() {
		ImovelCobranca imovel = new ImovelCobranca(objetoImovelCobranca);
		imovelAdicional = new ImovelCobrancaAdicionais(imovel);
	}

	public void addImovel() {
		ImovelCobrancaAdicionaisDao imovelCobrancaAdicionaisDao = new ImovelCobrancaAdicionaisDao();
		ImovelCobrancaDao imovelCobrancaDao = new ImovelCobrancaDao();
		if (imovelAdicional.getImovel().getId() > 0)
			imovelCobrancaDao.merge(imovelAdicional.getImovel());
		else
			imovelCobrancaDao.create(imovelAdicional.getImovel());

		if (imovelAdicional.getId() > 0)
			imovelCobrancaAdicionaisDao.merge(imovelAdicional);
		else
			imovelCobrancaAdicionaisDao.create(imovelAdicional);

		imovelAdicional.setContratoCobranca(objetoContratoCobranca);
		objetoContratoCobranca.getListaImoveis().add(imovelAdicional);
		calcularPorcentagemImoveis();
		listaRestricoesImovel();
		imovelAdicional = new ImovelCobrancaAdicionais();
	}

	public void editImovel(ImovelCobrancaAdicionais imovel) {
		imovelAdicional = imovel;
	}

	public void removeImovel(ImovelCobrancaAdicionais imovel) {
		objetoContratoCobranca.getListaImoveis().remove(imovelAdicional);
		imovelAdicional.setContratoCobranca(null);
	}

	public void calcularPorcentagemImoveis() {
		if (CommonsUtil.semValor(objetoContratoCobranca.getValorMercadoImovel()))
			return;
		ImovelCobrancaAdicionaisDao imovelCobrancaAdicionaisDao = new ImovelCobrancaAdicionaisDao();
		BigDecimal porcentagemTotal = BigDecimal.ZERO;
		for (ImovelCobrancaAdicionais imovelAdicional : objetoContratoCobranca.getListaImoveis()) {
			if (CommonsUtil.semValor(imovelAdicional.getImovel().getValorMercado()))
				continue;
			BigDecimal regra3 = imovelAdicional.getImovel().getValorMercado().multiply(BigDecimal.valueOf(100));
			BigDecimal porcentagem = regra3.divide(objetoContratoCobranca.getValorMercadoImovel(),
					MathContext.DECIMAL128);
			porcentagem = porcentagem.setScale(2, RoundingMode.HALF_UP);
			imovelAdicional.setPorcentagem(porcentagem);
			porcentagemTotal = porcentagemTotal.add(porcentagem);
			imovelCobrancaAdicionaisDao.merge(imovelAdicional);
		}
		objetoContratoCobranca.setPorcentagemImovelPrincipal(BigDecimal.valueOf(100).subtract(porcentagemTotal));
	}

	public void concluirComite(ContratoCobranca contrato) {
		BigDecimal maiorTaxaAprovada = BigDecimal.ZERO;
		BigInteger menorPrazoAprovado = BigInteger.valueOf(999999999);
		int menorCarencia = 2147483647;
		BigDecimal menorValorAprovado = BigDecimal.valueOf(Double.MAX_VALUE);
		String menorValorAprovadoTipo = "";
		String comentarioComiteFinal = "";

		for (AnaliseComite comite : contrato.getListaAnaliseComite()) {
			if (CommonsUtil.mesmoValor(comite.getVotoAnaliseComite(), "Aprovado")) {
				if (comite.getTaxaComite().compareTo(maiorTaxaAprovada) >= 0) {
					maiorTaxaAprovada = comite.getTaxaComite();
				}
				if (comite.getPrazoMaxComite().compareTo(menorPrazoAprovado) <= 0) {
					menorPrazoAprovado = comite.getPrazoMaxComite();
				}
				if (comite.getValorComite().compareTo(menorValorAprovado) <= 0
						&& !CommonsUtil.semValor(comite.getValorComite())) {
					menorValorAprovado = comite.getValorComite();
					menorValorAprovadoTipo = comite.getTipoValorComite();
				}
				if (comite.getCarenciaComite() < menorCarencia) {
					menorCarencia = comite.getCarenciaComite();
				}
			}
			comentarioComiteFinal += comite.getUsuarioComite() + ": " + comite.getComentarioComite() + "  //  ";
		}

//		não  precisa mais incluir para sair na ficha do cliente
//		for (CcbProcessosJudiciais processo : contrato.getListProcessos()) {
//			if (!processo.isSelecionadoComite()) {
//				continue;
//			}
//			contrato.setProcessosQuitarComite(contrato.getProcessosQuitarComite() + processo.getNumero() + " - "
//					+ CommonsUtil.formataValorMonetario(processo.getValor(), "R$ ") + "\n");
//		}

		contrato.setTaxaAprovada(maiorTaxaAprovada);
		contrato.setTipoValorComite(menorValorAprovadoTipo);
		contrato.setComentarioComite(comentarioComiteFinal);

		if (CommonsUtil.mesmoValor(menorPrazoAprovado, BigInteger.valueOf(999999999))) {
			contrato.setPrazoMaxAprovado(BigInteger.ZERO);
		} else {
			contrato.setPrazoMaxAprovado(menorPrazoAprovado);
		}

		if (CommonsUtil.mesmoValor(menorValorAprovado, BigDecimal.valueOf(Double.MAX_VALUE))) {
			contrato.setValorAprovadoComite(BigDecimal.ZERO);
		} else {
			contrato.setValorAprovadoComite(menorValorAprovado);
		}

		if (menorCarencia == 2147483647) {
			contrato.setCarenciaComite(1);
		} else {
			contrato.setCarenciaComite(menorCarencia);
		}
	}

	public void concluirComentarioComite(ContratoCobranca contrato) {
		String comentarioComiteFinal = "";
		for (AnaliseComite comite : contrato.getListaAnaliseComite()) {
			comentarioComiteFinal += comite.getUsuarioComite() + ": " + comite.getComentarioComite() + "  //  ";
		}
		contrato.setComentarioComite(comentarioComiteFinal);
	}

	public BigInteger definirQtdeVotoComite(ContratoCobranca contrato) {
		// Se o valor solicitado no início for menor do que o solicitado pelo comercial,
		// a operação irá precisar de 2 votos no comitê
		if (!CommonsUtil.semValor(contrato.getValorEmprestimo())
				&& contrato.getQuantoPrecisa().compareTo(contrato.getValorEmprestimo()) < 0) {
			return BigInteger.valueOf(2);
		}

		// Se o estado civil do cliente é Solteiro ou Divorciado e a taxa é acima de
		// 1,59%, a operação irá precisar de 2 votos no comitê
		if (CommonsUtil.semValor(contrato.getPagador().getEstadocivil())) {
			return BigInteger.valueOf(2);
		}
		if ((CommonsUtil.mesmoValor(contrato.getPagador().getEstadocivil(), "Solteiro")
				|| CommonsUtil.mesmoValor(contrato.getPagador().getEstadocivil(), "Divorciado"))
				&& contrato.getTaxaPreAprovada().compareTo(BigDecimal.valueOf(1.59)) > 0) {
			return BigInteger.valueOf(2);
		}

		// Se a garantia for definida como imóvel comercial na análise, a operação irá
		// precisar de 2 votos no comitê
		if (contrato.getImovel().getTipo().contains("Comercial")) {
			return BigInteger.valueOf(2);
		}

		// Qualquer operação acima de 2mm precisa de 2 votos no comitê
		if (contrato.getQuantoPrecisa().compareTo(BigDecimal.valueOf(2000000)) > 0) {
			return BigInteger.valueOf(2);
		}

		// Se a garantia for definida como boa pela empresa de engenharia e pela equipe
		// de Laudo e a garantia não for imóvel comercial,
		// terreno ou chácara, operação pode ser aprovada com apenas 1 voto
		if (!CommonsUtil.semValor(contrato.getAvaliacaoEngenharia())
				&& CommonsUtil.mesmoValor(contrato.getAvaliacaoEngenharia(), "Bom")) {
			if (!CommonsUtil.mesmoValor(contrato.getImovel().getTipo(), "Prédio Comercial")
					&& !CommonsUtil.mesmoValor(contrato.getImovel().getTipo(), "Sala Comercial")
					&& !CommonsUtil.mesmoValor(contrato.getImovel().getTipo(), "Terreno")
					&& !CommonsUtil.mesmoValor(contrato.getImovel().getTipo(), "Chácara")) {
				return BigInteger.valueOf(1);
			}
		}

		// Apartamento ou casa em condomínio com taxa máxima de 1,39% pode ser aprovado
		// com 50% de LTV com apenas 1 voto
		if (!CommonsUtil.semValor(contrato.getTaxaPreAprovada())) {
			if (contrato.getTaxaPreAprovada().compareTo(BigDecimal.valueOf(1.39)) <= 0) {
				BigDecimal ltv = BigDecimal.ONE;
				if (!CommonsUtil.semValor(contrato.getValorMercadoImovel())) {
					ltv = contrato.getValorEmprestimo().divide(contrato.getValorMercadoImovel(),
							MathContext.DECIMAL128);
				}
				if (!CommonsUtil.mesmoValor(contrato.getImovel().getTipo(), "Apartamento")
						&& !CommonsUtil.mesmoValor(contrato.getImovel().getTipo(), "Casa de Condomínio")
						&& !CommonsUtil.mesmoValor(contrato.getImovel().getTipo(), "Casa de Condomínio acima1000")) {
					if (ltv.compareTo(BigDecimal.valueOf(0.35)) <= 0) {
						return BigInteger.valueOf(1);
					}
				}
				if (!CommonsUtil.semValor(contrato.getValorMercadoImovel())
						&& !CommonsUtil.semValor(contrato.getValorEmprestimo())
						&& !CommonsUtil.semValor(contrato.getTaxaPreAprovada())) {
					if (ltv.compareTo(BigDecimal.valueOf(0.5)) <= 0) {
						return BigInteger.valueOf(1);
					}
				}
			}
		}

		// padrão
		return BigInteger.valueOf(2);
	}

	public void editarSocio(PagadorRecebedorSocio socio) {
		this.addSocio = true;
		this.socioSelecionado = new PagadorRecebedorSocio();
		this.setSocioSelecionado(socio);
		this.removerSocio(socio);
	}

	public void editarPagador(PagadorRecebedorAdicionais pagador) {
		this.addPagador = true;
		this.pagadorSecundarioSelecionado = new PagadorRecebedorAdicionais();
		this.setPagadorSecundarioSelecionado(pagador);
		this.removerPagador(pagador);
	}

	public void editarConta(ContasPagar conta) {
		this.addContasPagar = true;
		// this.contasPagarSelecionada = new ContasPagar();
		this.contasPagarSelecionada = conta;
		// this.removerConta(conta);
	}

	public void removerSegurado(Segurado segurado) {
		this.objetoContratoCobranca.getListSegurados().remove(segurado);
	}

	public void removerPagador(PagadorRecebedorAdicionais pagador) {
		this.objetoContratoCobranca.getListaPagadores().remove(pagador);
	}

	public void removerSocio(PagadorRecebedorSocio socio) {
		this.objetoContratoCobranca.getListSocios().remove(socio);
	}

	public void removerConta(ContasPagar conta) {
		if (!CommonsUtil.semValor(this.contasPagarSelecionada.getValor())) {
			this.objetoContratoCobranca.setContaPagarValorTotal(this.objetoContratoCobranca.getContaPagarValorTotal()
					.subtract(this.contasPagarSelecionada.getValor()));
		}
		if (!CommonsUtil.semValor(this.contasPagarSelecionada.getValorPagamento())) {
			this.objetoContratoCobranca.setContaPagarValorTotal(this.objetoContratoCobranca.getContaPagarValorTotal()
					.add(this.contasPagarSelecionada.getValorPagamento()));
		}
		this.objetoContratoCobranca.getListContasPagar().remove(conta);

		if (!CommonsUtil.semValor(this.objetoCcb)) {
			if (this.objetoCcb.getDespesasAnexo2().contains(conta)) {
				this.objetoCcb.getDespesasAnexo2().remove(conta);
			}
		}

		BigDecimal valorDespesas = calcularValorTotalContasPagar();
		this.objetoContratoCobranca.setContaPagarValorTotal(valorDespesas);
		this.objetoContratoCobranca.calcularValorTotalContasPagas();
	}

	public void baixarConta(ContasPagar conta) {
		ContasPagarDao cDao = new ContasPagarDao();
		if (conta.getValorPagamento() == null)
			conta.setValorPagamento(conta.getValor());

		if (CommonsUtil.mesmoValor(conta.getValorPagamento(), conta.getValor())) {
			conta.setContaPaga(true);
			conta.setDataPagamento(DateUtil.gerarDataHoje());
			cDao.merge(conta);
		}
	}

	public void removeDataVistoria(DataVistoria data) {
		this.objetoContratoCobranca.getListDatasVistoria().remove(data);
	}

	public void selecionaDataVistoria(DataVistoria data) {
		this.objetoContratoCobranca.setDataPrevistaVistoria(data.getDataVistoria());
	}

	public void addDataVistoria() {
		// java.sql.Date dataSQL = new
		// java.sql.Date(dataVistoriaSelecionada.getDataVistoria().getTime());
		// dataVistoriaSelecionada.setDataVistoria(dataSQL);
		this.dataVistoriaSelecionada.setContratoCobranca(objetoContratoCobranca);
		this.objetoContratoCobranca.getListDatasVistoria().add(dataVistoriaSelecionada);
		this.dataVistoriaSelecionada = new DataVistoria();
	}

	public void clearParticipante() {
		this.participanteSelecionado = new CcbParticipantes();
		this.participanteSelecionado.setPessoa(new PagadorRecebedor());
	}

	public void pesquisaParticipante() {
		this.tituloPagadorRecebedorDialog = "Participante";
		this.updatePagadorRecebedor = "participanteCCBDialogForm";
		this.tipoPesquisaPagadorRecebedor = "Participante";
	}

	public void concluirParticipante() {
		CcbParticipantesDao ccbDao = new CcbParticipantesDao();
		this.participanteSelecionado.setTipoOriginal(participanteSelecionado.getTipoParticipante());
		this.objetoContratoCobranca.getListaParticipantes().add(this.participanteSelecionado);
		criarPagadorRecebedorNoSistema(this.participanteSelecionado.getPessoa());
		this.participanteSelecionado.setContratoCobranca(objetoContratoCobranca);
		if (participanteSelecionado.getId() > 0)
			ccbDao.merge(this.participanteSelecionado);
		else
			ccbDao.create(this.participanteSelecionado);
		this.participanteSelecionado = new CcbParticipantes();
		this.participanteSelecionado.setPessoa(new PagadorRecebedor());
	}

	public void editarParticipante(CcbParticipantes participante) {
		this.participanteSelecionado = new CcbParticipantes();
		this.setParticipanteSelecionado(participante);
	}

	public void removerParticipante(CcbParticipantes participante) {
		participante.setContratoCobranca(null);
		this.objetoContratoCobranca.getListaParticipantes().remove(participante);
	}

	public void clearSocioCcb() {
		this.socioCcbSelecionado = new CcbParticipantes();
		this.socioCcbSelecionado.setPessoa(new PagadorRecebedor());
	}

	public void pesquisaSocioCcb() {
		this.tituloPagadorRecebedorDialog = "Socio";
		this.tipoPesquisaPagadorRecebedor = "SocioCCB";
		this.updatePagadorRecebedor = ":participanteCCBDialogForm:SocioCcbsPanel ";
	}

	public void concluirSocioCcb() {
		CcbParticipantesDao ccbDao = new CcbParticipantesDao();
		if (!participanteSelecionado.getSocios().contains(socioCcbSelecionado))
			this.getParticipanteSelecionado().getSocios().add(socioCcbSelecionado);
		criarPagadorRecebedorNoSistema(this.socioCcbSelecionado.getPessoa());
		if (socioCcbSelecionado.getId() > 0)
			ccbDao.merge(this.socioCcbSelecionado);
		else
			ccbDao.create(this.socioCcbSelecionado);
		ccbDao.create(socioCcbSelecionado);
		this.socioCcbSelecionado = new CcbParticipantes();
		this.socioCcbSelecionado.setPessoa(new PagadorRecebedor());
		this.addSocioCcb = false;
	}

	public void editarSocioCcb(CcbParticipantes socio) {
		this.addSocioCcb = true;
		this.socioCcbSelecionado = new CcbParticipantes();
		this.setSocioCcbSelecionado(socio);
	}

	public void removerSocioCcb(CcbParticipantes socio) {
		socio.setContratoCobranca(null);
		participanteSelecionado.getSocios().remove(socio);
	}

	public void criarPagadorRecebedorNoSistema(PagadorRecebedor pagador) {
		PagadorRecebedor pagadorRecebedor = null;
		PagadorRecebedorDao pagadorRecebedorDao = new PagadorRecebedorDao();

		if (pagador.getId() <= 0) {
			List<PagadorRecebedor> pagadorRecebedorBD = new ArrayList<PagadorRecebedor>();
			boolean registraPagador = false;
			Long idPagador = (long) 0;

			if (pagador.getCpf() != null) {
				boolean validaCPF = ValidaCPF.isCPF(pagador.getCpf());
				if (validaCPF) {
					pagadorRecebedorBD = pagadorRecebedorDao.findByFilter("cpf", pagador.getCpf());
					if (pagadorRecebedorBD.size() > 0) {
						pagadorRecebedor = pagadorRecebedorBD.get(0);
					} else {
						pagadorRecebedor = pagador;
						registraPagador = true;
					}
				}
			}

			if (pagador.getCnpj() != null) {
				boolean validaCNPJ = ValidaCNPJ.isCNPJ(pagador.getCnpj());
				if (validaCNPJ) {
					pagadorRecebedorBD = pagadorRecebedorDao.findByFilter("cnpj", pagador.getCnpj());
					if (pagadorRecebedorBD.size() > 0) {
						pagadorRecebedor = pagadorRecebedorBD.get(0);
					} else {
						pagadorRecebedor = pagador;
						registraPagador = true;
					}
				}
			}

			registraPagador = true;

			if (pagadorRecebedor == null) {
				pagadorRecebedor = pagador;
			}

			if (pagador.getSite() != null && pagador.getSite().equals("")) {
				if (!pagador.getSite().contains("http")) {
					pagador.setSite("HTTP://" + pagador.getSite().toLowerCase());
				}
			}

			if (registraPagador) {
				idPagador = pagadorRecebedorDao.create(pagadorRecebedor);
				pagadorRecebedor = pagadorRecebedorDao.findById(idPagador);
			}
		} else {
			pagadorRecebedorDao.merge(pagador);
			pagadorRecebedor = pagador;
		}

		pagadorRecebedor.criarConjugeNoSistema();
	}

	private boolean validarProcentagensSeguro() {
		if (!this.objetoContratoCobranca.isTemSeguro())
			return true;

		BigDecimal totalPorcentagem = BigDecimal.ZERO;
		for (Segurado seguro : this.getListSegurado()) {
			totalPorcentagem = totalPorcentagem.add(seguro.getPorcentagemSegurador());
		}

		if (totalPorcentagem.compareTo(BigDecimal.valueOf(100)) != 0) {
			return false;
		} else {
			return true;
		}
	}

	public void editarSeguradosConsulta() {
		FacesContext context = FacesContext.getCurrentInstance();
		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();
		String msgRetorno = null;

		this.tituloPagadorRecebedorDialog = "";
		this.tipoPesquisaPagadorRecebedor = "";
		this.updatePagadorRecebedor = "";
		this.seguradoSelecionado = new Segurado();
		this.seguradoSelecionado.setPessoa(new PagadorRecebedor());

		if (!this.validarProcentagensSeguro()) {
			context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR,
					"A soma das porcentagens dos segurados não é 100%", ""));
		} else {
			contratoCobrancaDao.merge(objetoContratoCobranca);
			msgRetorno = "atualizado";

			context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_INFO,
					"Contrato Cobrança: Registro " + msgRetorno + " com sucesso!", ""));
		}
	}

	public void cancelarSeguradosConsulta() {
		this.tituloPagadorRecebedorDialog = "";
		this.tipoPesquisaPagadorRecebedor = "";
		this.updatePagadorRecebedor = "";
		this.seguradoSelecionado = new Segurado();
		this.seguradoSelecionado.setPessoa(new PagadorRecebedor());
	}

	private BigDecimal calcularValorTotalContasPagar() {
		BigDecimal valorTotalContasPagarNovo = BigDecimal.ZERO;
		for (ContasPagar conta : this.objetoContratoCobranca.getListContasPagar()) {
			if (!CommonsUtil.semValor(conta.getValor())) {
				valorTotalContasPagarNovo = valorTotalContasPagarNovo.add(conta.getValor());
			}

			if (!CommonsUtil.semValor(conta.getValorPagamento())) {
				if (CommonsUtil.mesmoValor(conta.getValorPagamento(), conta.getValor())) {
					conta.setContaPaga(true);
				}
				valorTotalContasPagarNovo = valorTotalContasPagarNovo.subtract(conta.getValorPagamento());
			}
		}
		return valorTotalContasPagarNovo;
	}

	private BigDecimal calcularValorTotalProcessos() {
		BigDecimal valorTotal = BigDecimal.ZERO;
		if (!CommonsUtil.semValor(objetoContratoCobranca.getListProcessos())) {
			for (CcbProcessosJudiciais processo : this.objetoContratoCobranca.getListProcessos()) {
				if (!CommonsUtil.semValor(processo.getValorAtualizado())) {
					valorTotal = valorTotal.add(processo.getValorAtualizado());
				}
			}
		}
		this.objetoContratoCobranca.setValorTotalProcessos(valorTotal);
		return valorTotal;
	}

	private BigDecimal calcularValorTotalAverbacao() {
		BigDecimal valorTotal = BigDecimal.ZERO;
		if (!CommonsUtil.semValor(objetoContratoCobranca.getListAverbacao())) {
			for (Averbacao averbacao : this.objetoContratoCobranca.getListAverbacao()) {
				if (!CommonsUtil.semValor(averbacao.getValor())) {
					valorTotal = valorTotal.add(averbacao.getValor());
				}
			}
		}
		this.objetoContratoCobranca.setValorTotalAverbacao(valorTotal);
		return valorTotal;
	}

	public void clearPagadorRecebedor() {
		if (CommonsUtil.mesmoValor("Segurado", tipoPesquisaPagadorRecebedor)) {
			this.seguradoSelecionado.setPessoa(null);
			this.selectedPagador = new PagadorRecebedor();
		} else if (CommonsUtil.mesmoValor("Socio", tipoPesquisaPagadorRecebedor)) {
			this.socioSelecionado.setPessoa(null);
			this.selectedPagador = new PagadorRecebedor();
		}
	}

//	public void mostrarParcela() {
//		try {
//			this.simuladorParcelas = calcularParcelas();
//		} catch (Exception e) {}
//	}
//	
	public void atualizaVlrPago() {
		this.listContratoCobrancaFavorecidos.get(0)
				.setVlrRecebido(this.selectedContratoCobrancaDetalhes.getVlrParcelaAtualizada());
	}

	public String loadParcelaBaixar(ContratoCobrancaDetalhes selectedContratoCobrancaDetalhes) {

		TimeZone zone = TimeZone.getDefault();
		Locale locale = new Locale("pt", "BR");
		Calendar data = Calendar.getInstance(zone, locale);

		this.selectedContratoCobrancaDetalhes = selectedContratoCobrancaDetalhes;

		// seta a data da baixa para a data corrente
		this.selectedContratoCobrancaDetalhes.setDataPagamento(data.getTime());

		// set o valor a ser depositado como valor pago na parcela
		this.selectedContratoCobrancaDetalhes
				.setVlrParcelaAtualizada(this.selectedContratoCobrancaDetalhes.getVlrRepasse());

		if (this.selectedContratoCobrancaDetalhes.getListContratoCobrancaFavorecidos().size() == 0) {
			// tem lista de favorecido pensando em baixa pra mais de um favorecido
			ContratoCobrancaFavorecidos contratoCobrancaFavorecidos = new ContratoCobrancaFavorecidos();
			contratoCobrancaFavorecidos.setNome(this.objetoContratoCobranca.getRecebedor().getNome());
			if (this.objetoContratoCobranca.getRecebedor().getCpf() != null) {
				contratoCobrancaFavorecidos.setCpf(this.objetoContratoCobranca.getRecebedor().getCpf());
				this.setTipoPessoaIsFisica(true);
			} else {
				if (this.objetoContratoCobranca.getRecebedor().getCnpj() != null) {
					contratoCobrancaFavorecidos.setCnpj(this.objetoContratoCobranca.getRecebedor().getCnpj());
					this.setTipoPessoaIsFisica(false);
				}
			}

			List<ContratoCobrancaFavorecidos> listContratoCobrancaFavorecidos = new ArrayList<ContratoCobrancaFavorecidos>();
			listContratoCobrancaFavorecidos.add(contratoCobrancaFavorecidos);

			this.selectedContratoCobrancaDetalhes.setListContratoCobrancaFavorecidos(listContratoCobrancaFavorecidos);

			// se não há saldo copia o valor da parcela, que é referente ao total da parcela
			if (this.selectedContratoCobrancaDetalhes.getVlrSaldoParcela() == null) {
				this.selectedContratoCobrancaDetalhes
						.setVlrSaldoParcela(this.selectedContratoCobrancaDetalhes.getVlrParcela());
			}
		}

		return "ContratoCobrancaBaixarProcessar.xhtml";
	}

	public String estornarBaixaParcela() {
		FacesContext context = FacesContext.getCurrentInstance();

		ContratoCobrancaDetalhesDao contratoCobrancaDetalhesDao = new ContratoCobrancaDetalhesDao();
		TimeZone zone = TimeZone.getDefault();
		Locale locale = new Locale("pt", "BR");
		Calendar dtHoje = Calendar.getInstance(zone, locale);

		/*
		 * // verifica se a parcela ja teve uma baixa if
		 * (this.selectedContratoCobrancaDetalhes.isParcelaPaga()) { // se sim, verifica
		 * se o valor digitado é diferente do valor da parcela (isso significa correção
		 * de operação) if
		 * (this.selectedContratoCobrancaDetalhes.getVlrParcelaAtualizada() !=
		 * this.selectedContratoCobrancaDetalhes.getVlrRepasse()) { // se sim, corrigi o
		 * valor pago e seta a parcela como não baixada
		 * this.selectedContratoCobrancaDetalhes.setVlrSaldoParcela(this.
		 * selectedContratoCobrancaDetalhes.getVlrRepasse().subtract(this.
		 * selectedContratoCobrancaDetalhes.getListContratoCobrancaFavorecidos().get(0).
		 * getVlrRecebido()));
		 * this.selectedContratoCobrancaDetalhes.setParcelaPaga(false); } } else { // se
		 * parcela não baixada // verifica se o valor a ser baixado é o Total da parcela
		 * ou o total do saldo da parcela //TODO baixa parcial //if
		 * (this.selectedContratoCobrancaDetalhes.getVlrParcelaAtualizada().equals(this.
		 * selectedContratoCobrancaDetalhes.getVlrParcela()) //||
		 * this.selectedContratoCobrancaDetalhes.getVlrParcelaAtualizada().equals(this.
		 * selectedContratoCobrancaDetalhes.getVlrSaldoParcela())) { if
		 * (this.selectedContratoCobrancaDetalhes.getListContratoCobrancaFavorecidos().
		 * get(0).getVlrRecebido().equals(this.selectedContratoCobrancaDetalhes.
		 * getVlrParcela())) { // se sim, seta a parcela como baixada e zera os saldos
		 * this.selectedContratoCobrancaDetalhes.setParcelaPaga(true);
		 * this.selectedContratoCobrancaDetalhes.setVlrSaldoParcela(BigDecimal.ZERO);
		 * this.selectedContratoCobrancaDetalhes.setVlrParcelaAtualizada(this.
		 * selectedContratoCobrancaDetalhes.getVlrParcela()); } else { // se não,
		 * calcula o saldo que ficará na parcela e deixa ela em aberto
		 * this.selectedContratoCobrancaDetalhes.setVlrSaldoParcela(this.
		 * selectedContratoCobrancaDetalhes.getVlrParcela().subtract(this.
		 * selectedContratoCobrancaDetalhes.getListContratoCobrancaFavorecidos().get(0).
		 * getVlrRecebido())); } }
		 * 
		 * //this.selectedContratoCobrancaDetalhes.setListContratoCobrancaFavorecidos(
		 * this.listContratoCobrancaFavorecidos);
		 */
		if (this.selectedListContratoCobrancaDetalhes.size() > 0) {

			for (ContratoCobrancaDetalhes c : this.selectedListContratoCobrancaDetalhes) {
				c.setParcelaPaga(false);
				c.setVlrSaldoParcela(c.getVlrParcela());
				c.setVlrParcelaAtualizada(c.getVlrParcelaAtualizada());
				c.setDataPagamento(null);

				if (c.getDataVencimentoAtual().before(dtHoje.getTime()) && !c.isParcelaPaga()) {
					c.setParcelaVencida(true);
				}

				if (c.getDataVencimentoAtual().equals(dtHoje.getTime()) && !c.isParcelaPaga()) {
					c.setParcelaVencendo(true);
				}

				contratoCobrancaDetalhesDao.merge(c);
			}

			this.selectedListContratoCobrancaDetalhes = new ArrayList<ContratoCobrancaDetalhes>();

			context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_INFO,
					"Contrato Cobrança: Parcela(s) estornada(s) com sucesso!", ""));

			// limpa campos
			/*
			 * this.relIsRelAtraso = false; this.relIsCompleto = true; Calendar dataInicio =
			 * Calendar.getInstance(zone, locale); this.relDataContratoInicio =
			 * dataInicio.getTime(); this.relDataContratoFim = dataInicio.getTime();
			 * this.relObjetoContratoCobranca = new
			 * ArrayList<RelatorioFinanceiroCobranca>();
			 * this.selectedContratoCobrancaDetalhes = new ContratoCobrancaDetalhes();
			 * 
			 * clearPagador(); clearRecebedor(); clearRecebedor2(); clearResponsavel();
			 * 
			 * this.contratoGerado = false;
			 */

			return "/Atendimento/Cobranca/ContratoCobrancaBaixar.xhtml";
		} else {
			return "";
		}
	}

	/* BAIXA PARCIAL */
	public void setBpContratoCobrancaDetalhesCustom(ContratoCobrancaDetalhes bpContratoCobrancaDetalhes) {
		// zerando variáveis
		TimeZone zone = TimeZone.getDefault();
		Locale locale = new Locale("pt", "BR");
		Calendar dataHoje = Calendar.getInstance(zone, locale);
		dataHoje.set(Calendar.HOUR_OF_DAY, 0);
		dataHoje.set(Calendar.MINUTE, 0);
		dataHoje.set(Calendar.SECOND, 0);
		dataHoje.set(Calendar.MILLISECOND, 0);

		// nova data
		this.rowEditNewDate = dataHoje.getTime();
		this.vlrRecebido = null;

		this.bpContratoCobrancaDetalhes = bpContratoCobrancaDetalhes;

		this.vlrParcelaNew = this.bpContratoCobrancaDetalhes.getVlrParcela();

		this.observacao = null;

		/***
		 * inicio - uso na dialog de geração de boletos
		 */
		this.dataVencimentoBoleto = dataHoje.getTime();

		this.valorBoleto = BigDecimal.ZERO;

		if (this.bpContratoCobrancaDetalhes != null) {
			if (this.bpContratoCobrancaDetalhes.getVlrParcelaAtualizada() != null) {
				if (this.bpContratoCobrancaDetalhes.getVlrParcelaAtualizada().compareTo(BigDecimal.ZERO) == 0) {
					valorBoleto = this.bpContratoCobrancaDetalhes.getVlrParcela();
				} else {
					valorBoleto = this.bpContratoCobrancaDetalhes.getVlrParcelaAtualizada();
				}
			} else {
				valorBoleto = this.bpContratoCobrancaDetalhes.getVlrParcela();
			}
		}
		/***
		 * fim - uso na dialog de geração de boletos
		 */

		if (this.bpContratoCobrancaDetalhes.getVlrParcelaAtualizada() == null) {
			this.bpContratoCobrancaDetalhes.setVlrParcelaAtualizada(this.bpContratoCobrancaDetalhes.getVlrParcela());
			this.vlrParcelaAtualizadaNew = this.bpContratoCobrancaDetalhes.getVlrParcela();
		} else {
			this.vlrParcelaAtualizadaNew = this.bpContratoCobrancaDetalhes.getVlrParcelaAtualizada();
		}
	}

	/* BAIXA PARCIAL */
	/* refaz o valor atualizado de acordo com a data selecionada na baixa parcial */

	public void verificaTaxaZero() {
		if (!this.txZero) {
			this.vlrParcelaAtualizadaNew = this.bpContratoCobrancaDetalhes.getVlrParcela();
			this.vlrRecebido = this.vlrParcelaNew;
		} else {
			calculaNovaData(this.rowEditNewDate);
		}
	}

	public void atualizaValorBaixaParcelada(SelectEvent event) {
		Date dateSelected = (Date) event.getObject();
		this.rowEditNewDate = dateSelected;
		calculaNovaData(dateSelected);

		if (dateSelected.before(this.bpContratoCobrancaDetalhes.getDataVencimento())) {
			if (dateSelected.after(DateUtil.adicionarDias(this.bpContratoCobrancaDetalhes.getDataVencimento(), -30))) {
				calcularValorPresenteParcelaDataValor(rowEditNewDate, bpContratoCobrancaDetalhes,
						bpContratoCobrancaDetalhes.getVlrParcela());
				this.setVlrRecebido(this.valorPresenteParcela);
				this.setVlrParcelaAtualizadaNew(this.getVlrRecebido());
			} else {
				calcularValorPresenteParcelaData(rowEditNewDate, bpContratoCobrancaDetalhes);
				this.setVlrRecebido(this.valorPresenteParcela);
				this.setVlrParcelaAtualizadaNew(this.getVlrRecebido());
			}
		} else {
			this.setVlrRecebido(this.vlrParcelaAtualizadaNew);
		}
	}

	public void verificaTaxaZeroBoletoKobana() {
		for (ContratoCobrancaDetalhes parcelasSelecionada : this.selectedListContratoCobrancaDetalhes) {
			this.bpContratoCobrancaDetalhes = parcelasSelecionada;

			if (!this.txZero) {
				this.vlrParcelaAtualizadaNew = this.bpContratoCobrancaDetalhes.getVlrParcela();
			} else {
				calculaNovaData(this.rowEditNewDate);
			}

			parcelasSelecionada.setVlrBoletoKobana(this.vlrParcelaAtualizadaNew);
		}

		calculaValorTotalBoletoKobana();
	}

	public void atualizaValorBaixaParceladaBoletosKobana(SelectEvent event) {
		Date dateSelected = (Date) event.getObject();

		this.dataVencimentoBoleto = dateSelected;

		populaVlrBoletoKobana();
		/*
		 * this.rowEditNewDate = dateSelected; calculaNovaData(dateSelected);
		 * 
		 * for (ContratoCobrancaDetalhes parcelasSelecionada :
		 * this.selectedListContratoCobrancaDetalhes) {
		 * 
		 * this.bpContratoCobrancaDetalhes = parcelasSelecionada;
		 * 
		 * if (dateSelected.before(this.bpContratoCobrancaDetalhes.getDataVencimento()))
		 * { if (dateSelected
		 * .after(DateUtil.adicionarDias(this.bpContratoCobrancaDetalhes.
		 * getDataVencimento(), -30))) {
		 * calcularValorPresenteParcelaDataValor(rowEditNewDate,
		 * bpContratoCobrancaDetalhes, bpContratoCobrancaDetalhes.getVlrParcela()); }
		 * else { calcularValorPresenteParcelaData(rowEditNewDate,
		 * bpContratoCobrancaDetalhes); } }
		 * 
		 * parcelasSelecionada.setVlrBoletoKobana(this.valorPresenteParcela); }
		 */

		calculaValorTotalBoletoKobana();
	}

	public void atualizaValorBaixaPresente() {
		calculaNovaData(rowEditNewDate);
		calcularValorPresenteParcelaData(this.rowEditNewDate, this.bpContratoCobrancaDetalhes);
		this.setVlrRecebido(this.valorPresenteParcela);
	}

	public void calculaNovaData(Date novaData) {
		if (this.txZero) {
			if (novaData.after(this.bpContratoCobrancaDetalhes.getDataVencimentoAtual())) {
				ContratoCobrancaUtilsMB contratoCobrancaUtilsMB;

				BigDecimal juros = BigDecimal.ZERO;
				BigDecimal multa = BigDecimal.ZERO;

				if (this.bpContratoCobrancaDetalhes.getVlrJuros().compareTo(BigDecimal.ZERO) == 0) {
					juros = this.objetoContratoCobranca.getTxJuros();
				} else {
					juros = this.bpContratoCobrancaDetalhes.getVlrJuros();
				}

				if (this.bpContratoCobrancaDetalhes.getTxMulta().compareTo(BigDecimal.ZERO) == 0) {
					multa = this.objetoContratoCobranca.getTxMulta();
				} else {
					multa = this.bpContratoCobrancaDetalhes.getTxMulta();
				}

				contratoCobrancaUtilsMB = new ContratoCobrancaUtilsMB(
						this.bpContratoCobrancaDetalhes.getDataVencimentoAtual(), novaData,
						this.bpContratoCobrancaDetalhes.getVlrParcela(), juros, multa);

				if (this.bpContratoCobrancaDetalhes.isPagoParcial()) { ///// provavel problema do baixa galleria
																		///// aaaaaaaaaaaaa
					contratoCobrancaUtilsMB.recalculaValorSemMulta();
				} else {
					contratoCobrancaUtilsMB.recalculaValorDiaUtil();
				}

				// se recalculo retornou vazio
				if (contratoCobrancaUtilsMB.getValorAtualizado() != null) {
					this.vlrParcelaAtualizadaNew = contratoCobrancaUtilsMB.getValorAtualizado();
				} else {
					this.vlrParcelaAtualizadaNew = this.bpContratoCobrancaDetalhes.getVlrParcela();
				}
			} else {
				this.vlrParcelaAtualizadaNew = this.bpContratoCobrancaDetalhes.getVlrParcela();
			}
		} else {
			this.vlrParcelaAtualizadaNew = this.bpContratoCobrancaDetalhes.getVlrParcela();
		}

		this.vlrRecebido = this.vlrParcelaAtualizadaNew;
	}

	/* GERAÇÃO DE BOLETO */
	/* refaz o valor atualizado de acordo com a data selecionada na baixa parcial */
	public void atualizaValorBaixaParceladaBoleto(SelectEvent event) {
		Date dateSelected = (Date) event.getObject();

		if (dateSelected.after(this.bpContratoCobrancaDetalhes.getDataVencimentoAtual())) {
			ContratoCobrancaUtilsMB contratoCobrancaUtilsMB;

			BigDecimal juros = BigDecimal.ZERO;
			BigDecimal multa = BigDecimal.ZERO;

			if (this.bpContratoCobrancaDetalhes.getVlrJuros().compareTo(BigDecimal.ZERO) == 0) {
				juros = this.objetoContratoCobranca.getTxJuros();
			} else {
				juros = this.bpContratoCobrancaDetalhes.getVlrJuros();
			}

			if (this.bpContratoCobrancaDetalhes.getTxMulta().compareTo(BigDecimal.ZERO) == 0) {
				multa = this.objetoContratoCobranca.getTxMulta();
			} else {
				multa = this.bpContratoCobrancaDetalhes.getTxMulta();
			}

			contratoCobrancaUtilsMB = new ContratoCobrancaUtilsMB(
					this.bpContratoCobrancaDetalhes.getDataVencimentoAtual(), dateSelected,
					this.bpContratoCobrancaDetalhes.getVlrParcela(), juros, multa);

			if (this.bpContratoCobrancaDetalhes.getListContratoCobrancaDetalhesParcial().size() > 0) {
				contratoCobrancaUtilsMB.recalculaValorSemMulta();
			} else {
				contratoCobrancaUtilsMB.recalculaValor();
			}

			// se recalculo retornou vazio
			if (contratoCobrancaUtilsMB.getValorAtualizado() != null) {
				this.valorBoleto = contratoCobrancaUtilsMB.getValorAtualizado();
			} else {
				this.valorBoleto = this.bpContratoCobrancaDetalhes.getVlrParcela();
			}
		} else {
			this.valorBoleto = this.bpContratoCobrancaDetalhes.getVlrParcela();
		}
	}

	/* ESTORNO BAIXA PARCIAL */
	public void estornoBaixaParcial(ContratoCobrancaDetalhesParcial contratoCobrancaDetalhesParcial) {

		// se só possui uma baixa parcial:
		// remove da lista de pagamentos
		// e volta a data e valor originais

		FacesContext context = FacesContext.getCurrentInstance();

		if (contratoCobrancaDetalhesParcial.isBaixaGalleria()
				|| contratoCobrancaDetalhesParcial.isBaixaCustosDiversos()) {
			// remove baixa da lista de parcelas
			this.bpContratoCobrancaDetalhes.getListContratoCobrancaDetalhesParcial()
					.remove(contratoCobrancaDetalhesParcial);

			ContratoCobrancaDetalhesDao contratoCobrancaDetalhesDao = new ContratoCobrancaDetalhesDao();
			contratoCobrancaDetalhesDao.merge(this.bpContratoCobrancaDetalhes);
		} else {
			if (this.bpContratoCobrancaDetalhes.getListContratoCobrancaDetalhesParcial().size() == 1) {
				this.bpContratoCobrancaDetalhes
						.setDataVencimentoAtual(this.bpContratoCobrancaDetalhes.getDataVencimento());
				BigDecimal valorParcela = BigDecimal.ZERO;

				if (!CommonsUtil.semValor(this.bpContratoCobrancaDetalhes.getVlrJurosParcela())) {
					valorParcela = valorParcela.add(this.bpContratoCobrancaDetalhes.getVlrJurosParcela());
				}

				if (!CommonsUtil.semValor(this.bpContratoCobrancaDetalhes.getVlrAmortizacaoParcela())) {
					valorParcela = valorParcela.add(this.bpContratoCobrancaDetalhes.getVlrAmortizacaoParcela());
				}

				if (!CommonsUtil.semValor(this.bpContratoCobrancaDetalhes.getSeguroMIP())) {
					valorParcela = valorParcela.add(this.bpContratoCobrancaDetalhes.getSeguroMIP());
				}

				if (!CommonsUtil.semValor(this.bpContratoCobrancaDetalhes.getSeguroDFI())) {
					valorParcela = valorParcela.add(this.bpContratoCobrancaDetalhes.getSeguroDFI());
				}

				if (!CommonsUtil.semValor(this.bpContratoCobrancaDetalhes.getTaxaAdm())) {
					valorParcela = valorParcela.add(this.bpContratoCobrancaDetalhes.getTaxaAdm());
				}

				// if(!CommonsUtil.semValor(this.bpContratoCobrancaDetalhes.getIpca())) {
				// valorParcela = valorParcela.add(this.bpContratoCobrancaDetalhes.getIpca());
				// }

				this.bpContratoCobrancaDetalhes.setVlrParcela(valorParcela);
				this.bpContratoCobrancaDetalhes.setDataUltimoPagamento(null);
				this.bpContratoCobrancaDetalhes.setValorTotalPagamento(null);

				// remove baixa da lista de parcelas
				this.bpContratoCobrancaDetalhes.getListContratoCobrancaDetalhesParcial()
						.remove(contratoCobrancaDetalhesParcial);
			} else {
				// Se tem mais de uma baixa parcial
				if (this.bpContratoCobrancaDetalhes.getListContratoCobrancaDetalhesParcial().size() > 1) {
					// verifica se baixa em questão é a última feita
					// se sim, deverá atualizar, além do valor, a data de pagamento
					if (this.bpContratoCobrancaDetalhes.getListContratoCobrancaDetalhesParcial()
							.get(this.bpContratoCobrancaDetalhes.getListContratoCobrancaDetalhesParcial().size() - 1)
							.getId() == contratoCobrancaDetalhesParcial.getId()) {
						// atualiza data de vencimento
						this.bpContratoCobrancaDetalhes
								.setDataUltimoPagamento(this.bpContratoCobrancaDetalhes
										.getListContratoCobrancaDetalhesParcial().get(this.bpContratoCobrancaDetalhes
												.getListContratoCobrancaDetalhesParcial().size() - 2)
										.getDataVencimentoAtual());
						// atualiza valor
						if (!this.bpContratoCobrancaDetalhes.isParcelaPaga()) {
							this.bpContratoCobrancaDetalhes.setVlrParcela(this.bpContratoCobrancaDetalhes
									.getVlrParcela().add(contratoCobrancaDetalhesParcial.getVlrRecebido()));
						}
						// remove baixa da lista de parcelas
						this.bpContratoCobrancaDetalhes.getListContratoCobrancaDetalhesParcial()
								.remove(contratoCobrancaDetalhesParcial);
					} else {
						// se a baixa em questão não for a única e nem a última da lista
						// atualiza apenas o valor
						if (!this.bpContratoCobrancaDetalhes.isParcelaPaga()) {
							this.bpContratoCobrancaDetalhes.setVlrParcela(this.bpContratoCobrancaDetalhes
									.getVlrParcela().add(contratoCobrancaDetalhesParcial.getVlrRecebido()));
						}
						// remove baixa da lista de parcelas
						this.bpContratoCobrancaDetalhes.getListContratoCobrancaDetalhesParcial()
								.remove(contratoCobrancaDetalhesParcial);
					}
				}
			}

			// seta a parcela para paga = FALSE
			this.bpContratoCobrancaDetalhes.setParcelaPaga(false);

			ContratoCobrancaDetalhesDao contratoCobrancaDetalhesDao = new ContratoCobrancaDetalhesDao();
			contratoCobrancaDetalhesDao.merge(this.bpContratoCobrancaDetalhes);

			realcularValorAtualizadoEstornoBxparcial(this.bpContratoCobrancaDetalhes);
			// clearFieldsBaixar();
		}

		context.addMessage(null,
				new FacesMessage(FacesMessage.SEVERITY_INFO, "Estorno Baixa Parcela: Estorno feito com sucesso!", ""));
	}

	/* BAIXA PARCELA PARA O PORTAL INVESTIDOR */
	public void baixarParcelaInvestidor() {
		ContratoCobrancaDetalhesDao contratoCobrancaDetalhesDao = new ContratoCobrancaDetalhesDao();

		TimeZone zone = TimeZone.getDefault();
		Locale locale = new Locale("pt", "BR");
		Calendar dataHoje = Calendar.getInstance(zone, locale);
		dataHoje.set(Calendar.HOUR_OF_DAY, 0);
		dataHoje.set(Calendar.MINUTE, 0);
		dataHoje.set(Calendar.SECOND, 0);
		dataHoje.set(Calendar.MILLISECOND, 0);

		this.bpContratoCobrancaDetalhes.setBaixadoParaInvestidor(true);

		contratoCobrancaDetalhesDao.merge(bpContratoCobrancaDetalhes);
	}

	/* CANCELAR BAIXA PARCELA PARA O PORTAL INVESTIDOR */
	public void cancelarBaixaParcelaDoInvestidor() {
		ContratoCobrancaParcelasInvestidorDao contratoCobrancaParcelasInvestidorDao = new ContratoCobrancaParcelasInvestidorDao();

		this.baixaContratoCobrancaParcelasInvestidor.setValorBaixado(null);

		this.baixaContratoCobrancaParcelasInvestidor.setDataBaixa(null);

		this.baixaContratoCobrancaParcelasInvestidor.setBaixado(false);

		contratoCobrancaParcelasInvestidorDao.merge(this.baixaContratoCobrancaParcelasInvestidor);
	}

	/* BAIXA PARCELA PARA O PORTAL INVESTIDOR */
	public void baixarParcelaDoInvestidor() {
		ContratoCobrancaParcelasInvestidorDao contratoCobrancaParcelasInvestidorDao = new ContratoCobrancaParcelasInvestidorDao();

		this.baixaContratoCobrancaParcelasInvestidor.setDataBaixa(getDataComHorasZeradas(this.dataPagamentoInvestidor));

		this.baixaContratoCobrancaParcelasInvestidor.setBaixado(true);

		contratoCobrancaParcelasInvestidorDao.merge(this.baixaContratoCobrancaParcelasInvestidor);
	}

	/* BAIXA PARCELA PARA O PORTAL INVESTIDOR EM LOTE */
	public void baixarParcelaDoInvestidorLote() {
		ContratoCobrancaParcelasInvestidorDao contratoCobrancaParcelasInvestidorDao = new ContratoCobrancaParcelasInvestidorDao();

		for (ContratoCobrancaParcelasInvestidor parcelaCorrespondente : this.selectedParcelasInvestidorCorrespondente) {
			if (!parcelaCorrespondente.isBaixado()) {
				parcelaCorrespondente.setDataBaixa(getDataComHorasZeradas(this.dataPagamentoInvestidor));

				parcelaCorrespondente.setBaixado(true);

				parcelaCorrespondente.setValorBaixado(parcelaCorrespondente.getValorLiquido());

				contratoCobrancaParcelasInvestidorDao.merge(parcelaCorrespondente);
			}
		}

		for (ContratoCobrancaParcelasInvestidor parcelaSA : this.selectedParcelasInvestidorSA) {
			if (!parcelaSA.isBaixado()) {
				parcelaSA.setDataBaixa(getDataComHorasZeradas(this.dataPagamentoInvestidor));

				parcelaSA.setBaixado(true);

				parcelaSA.setValorBaixado(parcelaSA.getValorLiquido());

				contratoCobrancaParcelasInvestidorDao.merge(parcelaSA);
			}
		}

		for (ContratoCobrancaParcelasInvestidor parcelaEnvelope : this.selectedParcelasInvestidorEnvelope) {
			if (!parcelaEnvelope.isBaixado()) {
				parcelaEnvelope.setDataBaixa(getDataComHorasZeradas(this.dataPagamentoInvestidor));

				parcelaEnvelope.setBaixado(true);

				parcelaEnvelope.setValorBaixado(parcelaEnvelope.getValorLiquido());

				contratoCobrancaParcelasInvestidorDao.merge(parcelaEnvelope);
			}
		}

		// Limpa Seleção
		this.selectedParcelasInvestidorCorrespondente = new ArrayList<ContratoCobrancaParcelasInvestidor>();
		this.selectedParcelasInvestidorSA = new ArrayList<ContratoCobrancaParcelasInvestidor>();
		this.selectedParcelasInvestidorEnvelope = new ArrayList<ContratoCobrancaParcelasInvestidor>();
	}

	public Date getDataComHorasZeradas(Date dataAtual) {
		Calendar c = Calendar.getInstance();
		c.setTime(dataAtual);
		c.set(Calendar.HOUR_OF_DAY, 0);
		c.set(Calendar.MINUTE, 0);
		c.set(Calendar.SECOND, 0);

		return c.getTime();
	}

	public void clearBaixaGalleriaCustas() {
		this.vlrRecebido = null;
		this.observacao = "Custas";
	}

	public void baixarParcelaParcialGalleria() {
		FacesContext context = FacesContext.getCurrentInstance();

		ContratoCobrancaDetalhesDao contratoCobrancaDetalhesDao = new ContratoCobrancaDetalhesDao();
		TimeZone zone = TimeZone.getDefault();
		Locale locale = new Locale("pt", "BR");

		Calendar dataPagamento = Calendar.getInstance(zone, locale);
		dataPagamento.setTime(this.rowEditNewDate);

		// if (this.selectedRecebedor != null) {
		// if (this.selectedRecebedor.getId() > 0) {
		// contratoCobrancaDetalhesParcial.setRecebedor(this.selectedRecebedor);
		// }
		// }

		// if (this.observacao != null) {
		// contratoCobrancaDetalhesParcial.setObservacaoRecebedor(this.observacao);
		// }

		ContratoCobrancaDetalhesParcial contratoCobrancaDetalhesParcial = new ContratoCobrancaDetalhesParcial();

		if (this.vlrRecebido != null && this.vlrRecebido.intValue() != 0) {

			contratoCobrancaDetalhesParcial.setNumeroParcela(this.bpContratoCobrancaDetalhes.getNumeroParcela());

			contratoCobrancaDetalhesParcial.setDataPagamento(dataPagamento.getTime());

			contratoCobrancaDetalhesParcial.setDataVencimento(this.bpContratoCobrancaDetalhes.getDataVencimento());
			contratoCobrancaDetalhesParcial.setVlrParcela(this.bpContratoCobrancaDetalhes.getVlrParcelaAtualizada());
			contratoCobrancaDetalhesParcial.setBaixaGalleria(true);
			contratoCobrancaDetalhesParcial.setDataPagamentoGalleria(dataPagamento.getTime());
			contratoCobrancaDetalhesParcial.setVlrRecebidoGalleria(this.vlrRecebido);

			bpContratoCobrancaDetalhes.setVlrParcelaAtualizada(null);
			bpContratoCobrancaDetalhes.getListContratoCobrancaDetalhesParcial().add(contratoCobrancaDetalhesParcial);

			// compoem o valor da parcela de acordo com o historico de baixas
			BigDecimal valorParcelaAtual = BigDecimal.ZERO;
			this.vlrRecebido = BigDecimal.ZERO;
		}

		contratoCobrancaDetalhesDao.merge(bpContratoCobrancaDetalhes);

		context.addMessage(null,
				new FacesMessage(FacesMessage.SEVERITY_INFO, "Baixa Parcela: Parcela Baixada com sucesso!", ""));
	}

	public void baixarParcelaParcialCustosDiversos() {
		ContratoCobrancaDetalhesDao contratoCobrancaDetalhesDao = new ContratoCobrancaDetalhesDao();
		TimeZone zone = TimeZone.getDefault();
		Locale locale = new Locale("pt", "BR");

		Calendar dataPagamento = Calendar.getInstance(zone, locale);
		dataPagamento.setTime(this.rowEditNewDate);

		// if (this.selectedRecebedor != null) {
		// if (this.selectedRecebedor.getId() > 0) {
		// contratoCobrancaDetalhesParcial.setRecebedor(this.selectedRecebedor);
		// }
		// }

		// if (this.observacao != null) {
		// contratoCobrancaDetalhesParcial.setObservacaoRecebedor(this.observacao);
		// }

		ContratoCobrancaDetalhesParcial contratoCobrancaDetalhesParcial = new ContratoCobrancaDetalhesParcial();

		if (this.vlrRecebido.intValue() != 0) {

			// pré-seleciona o recebedor -- default galleria SA
			PagadorRecebedorDao prDao = new PagadorRecebedorDao();
			this.selectedRecebedor = new PagadorRecebedor();
			if (this.objetoContratoCobranca.getEmpresa() != null) {
				if (this.objetoContratoCobranca.getEmpresa().equals("FIDC GALLERIA")) {
					this.selectedRecebedor = prDao.findById((long) 6625);
				} else if (this.objetoContratoCobranca.getEmpresa().equals("CRI 1")
						|| this.objetoContratoCobranca.getEmpresa().equals("CRI 2")
						|| this.objetoContratoCobranca.getEmpresa().equals("CRI 3")
						|| this.objetoContratoCobranca.getEmpresa().equals("CRI 4")
						|| this.objetoContratoCobranca.getEmpresa().equals("CRI 5")) {
					this.selectedRecebedor = prDao.findById((long) 15765);
				} else {
					this.selectedRecebedor = prDao.findById((long) 803);
				}
			} else {
				this.selectedRecebedor = prDao.findById((long) 803);
			}

			contratoCobrancaDetalhesParcial.setRecebedor(this.selectedRecebedor);

			contratoCobrancaDetalhesParcial.setNumeroParcela(this.bpContratoCobrancaDetalhes.getNumeroParcela());

			contratoCobrancaDetalhesParcial.setDataVencimento(this.bpContratoCobrancaDetalhes.getDataVencimento());
			contratoCobrancaDetalhesParcial.setDataVencimentoAtual(this.bpContratoCobrancaDetalhes.getDataVencimento());
			contratoCobrancaDetalhesParcial.setVlrParcela(this.bpContratoCobrancaDetalhes.getVlrParcelaAtualizada());
			contratoCobrancaDetalhesParcial.setDataPagamento(dataPagamento.getTime());
			contratoCobrancaDetalhesParcial.setVlrRecebido(this.vlrRecebido);

			contratoCobrancaDetalhesParcial.setObservacaoRecebedor(this.observacao);

			contratoCobrancaDetalhesParcial.setBaixaCustosDiversos(true);

			bpContratoCobrancaDetalhes.setVlrParcelaAtualizada(null);
			bpContratoCobrancaDetalhes.getListContratoCobrancaDetalhesParcial().add(contratoCobrancaDetalhesParcial);

			// compoem o valor da parcela de acordo com o historico de baixas
			BigDecimal valorParcelaAtual = BigDecimal.ZERO;
			this.vlrRecebido = BigDecimal.ZERO;
		}

		contratoCobrancaDetalhesDao.merge(bpContratoCobrancaDetalhes);
	}

	public void updateDialogBaixaKobana(BoletoKobana boletoSelecionado) {
		PagadorRecebedorDao prDao = new PagadorRecebedorDao();

		if (this.objetoContratoCobranca.getEmpresa() != null) {
			if (this.objetoContratoCobranca.getEmpresa().equals("FIDC GALLERIA")) {
				this.selectedRecebedor = prDao.findById((long) 6625);
			} else if (this.objetoContratoCobranca.getEmpresa().equals("CRI 1")) {
				this.selectedRecebedor = prDao.findById((long) 15765);
			} else if (this.objetoContratoCobranca.getEmpresa().equals("CRI 2")) {
				this.selectedRecebedor = prDao.findById((long) 34630);
			} else if (this.objetoContratoCobranca.getEmpresa().equals("CRI 3")) {
				this.selectedRecebedor = prDao.findById((long) 39103);
			} else if (this.objetoContratoCobranca.getEmpresa().equals("CRI 4")) {
				this.selectedRecebedor = prDao.findById((long) 57385);
			} else if (this.objetoContratoCobranca.getEmpresa().equals("CRI 5")) {
				this.selectedRecebedor = prDao.findById((long) 74381);
			} else {
				this.selectedRecebedor = prDao.findById((long) 803); // galleria sec
			}
		} else {
			this.selectedRecebedor = prDao.findById((long) 803);
		}

		this.rowEditNewDate = boletoSelecionado.getPaidAt();

		if (boletoSelecionado.getPaidAmount().compareTo(boletoSelecionado.getVlrParcela()) >= 0) {
			this.vlrParcelaAtualizadaNew = boletoSelecionado.getPaidAmount();
		} else {
			this.vlrParcelaAtualizadaNew = boletoSelecionado.getVlrParcela();
		}

		this.vlrRecebido = boletoSelecionado.getPaidAmount();

		/*
		 * <f:setPropertyActionListener
		 * target="#{contratoCobrancaMB.callMetodoPorDialogBaixaParcial}" value="true"
		 * /> <f:setPropertyActionListener
		 * target="#{contratoCobrancaMB.objetoContratoCobranca}"
		 * value="#{boleto.contrato}" /> <f:setPropertyActionListener
		 * target="#{contratoCobrancaMB.bpContratoCobrancaDetalhesCustom}"
		 * value="#{boleto.parcela}" /> <f:setPropertyActionListener
		 * target="#{contratoCobrancaMB.reciboGerado}" value="false" />
		 * <f:setPropertyActionListener target="#{contratoCobrancaMB.txZero}"
		 * value="true" /> <f:setPropertyActionListener target="#{boleto.paidAmount}"
		 * value="#{contratoCobrancaMB.vlrParcelaAtualizadaNew}" />
		 * <f:setPropertyActionListener target="#{boleto.paidAmount}"
		 * value="#{contratoCobrancaMB.vlrRecebido}" /> <f:setPropertyActionListener
		 * target="#{contratoCobrancaMB.rowEditNewDate}" value="#{boleto.paidAt}" />
		 * 
		 */

	}

	/* BAIXA MULTI PARCELAS PARCIAL */
	public void baixarMultiParcelaParcial() {
		FacesContext context = FacesContext.getCurrentInstance();

		// valida se existe parcelas baixadas dentre as seleciondas, se sim não
		// processamos.
		boolean temParcelaBaixada = false;
		for (ContratoCobrancaDetalhes parcelasSelecionadas : this.selectedParcelas) {
			if (parcelasSelecionadas.isParcelaPaga()) {
				temParcelaBaixada = true;
				break;
			}
		}

		if (!temParcelaBaixada) {
			PagadorRecebedorDao prDao = new PagadorRecebedorDao();
			this.selectedRecebedor = new PagadorRecebedor();
			if (this.objetoContratoCobranca.getEmpresa() != null) {
				if (this.objetoContratoCobranca.getEmpresa().equals("FIDC GALLERIA")) {
					this.selectedRecebedor = prDao.findById((long) 6625);
				} else if (this.objetoContratoCobranca.getEmpresa().equals("CRI 1")
						|| this.objetoContratoCobranca.getEmpresa().equals("CRI 2")
						|| this.objetoContratoCobranca.getEmpresa().equals("CRI 3")
						|| this.objetoContratoCobranca.getEmpresa().equals("CRI 4")
						|| this.objetoContratoCobranca.getEmpresa().equals("CRI 5")) {
					this.selectedRecebedor = prDao.findById((long) 15765);
				} else {
					this.selectedRecebedor = prDao.findById((long) 803);
				}
			} else {
				this.selectedRecebedor = prDao.findById((long) 803);
			}
			/*
			 * if (this.selectedParcelas.size() > 0) { this.vlrRecebido =
			 * this.vlrRecebido.divide(BigDecimal.valueOf(this.selectedParcelas.size()),
			 * MathContext.DECIMAL128); }
			 */

			ContratoCobrancaDetalhesDao contratoCobrancaDetalhesDao = new ContratoCobrancaDetalhesDao();
			TimeZone zone = TimeZone.getDefault();
			Locale locale = new Locale("pt", "BR");

			Calendar dataPagamento = Calendar.getInstance(zone, locale);
			dataPagamento.setTime(this.rowEditNewDate);

			// if (this.selectedRecebedor != null) {
			// if (this.selectedRecebedor.getId() > 0) {
			// contratoCobrancaDetalhesParcial.setRecebedor(this.selectedRecebedor);
			// }
			// }

			// if (this.observacao != null) {
			// contratoCobrancaDetalhesParcial.setObservacaoRecebedor(this.observacao);
			// }
			simularQuitacaoContrato();

			for (ContratoCobrancaDetalhes parcelasBoleto : this.selectedParcelas) {
				ContratoCobrancaDetalhesParcial contratoCobrancaDetalhesParcial = new ContratoCobrancaDetalhesParcial();

				if (parcelasBoleto.getVlrBoletoKobana() != null
						&& parcelasBoleto.getVlrBoletoKobana().intValue() != 0) {
					// if (this.vlrRecebido.compareTo(parcelasBoleto.getVlrParcela()) >= 0) {
					contratoCobrancaDetalhesParcial.setNumeroParcela(parcelasBoleto.getNumeroParcela());

					contratoCobrancaDetalhesParcial.setDataPagamento(dataPagamento.getTime());

					contratoCobrancaDetalhesParcial.setDataVencimento(parcelasBoleto.getDataVencimento());
					contratoCobrancaDetalhesParcial.setVlrParcela(parcelasBoleto.getVlrParcelaAtualizada());
					contratoCobrancaDetalhesParcial.setDataPagamentoGalleria(dataPagamento.getTime());
					contratoCobrancaDetalhesParcial.setVlrRecebido(parcelasBoleto.getVlrBoletoKobana());

					// TODO SOMAR BAIXAS PARCIAIS
					for (QuitacaoParcelasPDF parcelaPresente : this.quitacaoPDF.getParcelas()) {
						if (parcelaPresente.getNumeroParcela().equals(parcelasBoleto.getNumeroParcela())) {
							// Soma baixas parciais já existentes
							BigDecimal totalBaixas = getTotalParcelasBaixadas(
									parcelasBoleto.getListContratoCobrancaDetalhesParcial());
							// adiciona valor baixado do boleto
							totalBaixas = totalBaixas.add(parcelasBoleto.getVlrBoletoKobana());
							// se não considerar Tx Adm descontar valor
							BigDecimal valorParcelaPresente = BigDecimal.ZERO;
							valorParcelaPresente = parcelaPresente.getValorPresenteParcela();

							if (!this.baixaMultiParcelasComTxADM) {
								if (this.dataQuitacao.before(parcelasBoleto.getDataVencimento())) {
									valorParcelaPresente = valorParcelaPresente.subtract(SiscoatConstants.TAXA_ADM);
								}
							}

							if (totalBaixas.compareTo(valorParcelaPresente) >= 0) {
								parcelasBoleto.setParcelaPaga(true);
							} else {
								parcelasBoleto.setParcelaPaga(false);
							}

							break;
						}
					}

					parcelasBoleto.setVlrParcelaAtualizada(null);
					parcelasBoleto.setOrigemBaixa("baixarMultiParcelaParcial");
					parcelasBoleto.getListContratoCobrancaDetalhesParcial().add(contratoCobrancaDetalhesParcial);

					contratoCobrancaDetalhesDao.merge(parcelasBoleto);
					// c }
				}
			}

			context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_INFO,
					"Baixa - Boletos Kobana: Parcela(s) baixada(s) com sucesso!", ""));
		} else {
			context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR,
					"Baixa - Boletos Kobana: Existem parcelas já baixada dentre as selecionadas!", ""));
		}
	}

	public BigDecimal getTotalParcelasBaixadas(List<ContratoCobrancaDetalhesParcial> baixasParciais) {
		BigDecimal totalBaixas = BigDecimal.ZERO;

		for (ContratoCobrancaDetalhesParcial bx : baixasParciais) {
			if (bx.isBaixaGalleria()) {
				totalBaixas = totalBaixas.add(bx.getVlrRecebidoGalleria());
			} else {
				totalBaixas = totalBaixas.add(bx.getVlrRecebido());
			}
		}

		return totalBaixas;
	}

	public void clearFieldsBaixaLote() {
		this.callMetodoPorDialogBaixaParcial = true;
		this.objetoContratoCobranca = null;
		this.rowEditNewDate = null;
		this.selectedParcelas = null;
		this.reciboGerado = false;
		this.txZero = true;
		this.vlrRecebido = null;
		this.dataQuitacao = null;
	}

	public void baixarParcelasKobanaLote() {
		FacesContext context = FacesContext.getCurrentInstance();

		for (BoletoKobana boletosKokanaSelecionados : this.selectedBoletosKobana) {

			clearFieldsBaixaLote();
			// baixa multiparcelas
			if (boletosKokanaSelecionados.getParcela() == null) {
				this.callMetodoPorDialogBaixaParcial = true;
				this.objetoContratoCobranca = boletosKokanaSelecionados.getContrato();
				this.rowEditNewDate = boletosKokanaSelecionados.getPaidAt();
				this.selectedParcelas = boletosKokanaSelecionados.getMultiParcelas();
				this.reciboGerado = false;
				this.txZero = true;
				this.vlrRecebido = boletosKokanaSelecionados.getPaidAmount();
				this.dataQuitacao = boletosKokanaSelecionados.getExpireAt();

				baixarMultiParcelaParcial();
			} else {
				// baixa normal
				if (!boletosKokanaSelecionados.getParcela().isParcelaPaga()) {
					this.callMetodoPorDialogBaixaParcial = true;
					this.objetoContratoCobranca = boletosKokanaSelecionados.getContrato();
					setBpContratoCobrancaDetalhesCustom(boletosKokanaSelecionados.getParcela());
					this.reciboGerado = false;
					this.txZero = true;
					this.rowEditNewDate = boletosKokanaSelecionados.getPaidAt();
					this.selectedRecebedor = this.objetoContratoCobranca.getRecebedor();

					// if
					// (boletosKokanaSelecionados.getPaidAmount().compareTo(boletosKokanaSelecionados.getVlrParcela())
					// >= 0) {
					// this.vlrParcelaAtualizadaNew = boletosKokanaSelecionados.getPaidAmount();
					// } else {
					this.vlrParcelaAtualizadaNew = boletosKokanaSelecionados.getVlrParcela();
					// }

					this.vlrRecebido = boletosKokanaSelecionados.getPaidAmount();

					baixarParcelaParcial();
				}
			}

			context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_INFO,
					"Contrato Cobrança: Parcelas Baixadas com Sucesso!", ""));
		}
	}

	public void baixarParcelaParcial() {
		ContratoCobrancaDetalhesDao contratoCobrancaDetalhesDao = new ContratoCobrancaDetalhesDao();

		if (this.selectedBoletosKobanaBaixa != null) {
			System.out.println(this.selectedBoletosKobanaBaixa);
		}

		List<ContratoCobrancaDetalhesParcial> listaBaixaGalleria = new ArrayList<ContratoCobrancaDetalhesParcial>();
		for (ContratoCobrancaDetalhesParcial cBaixas : bpContratoCobrancaDetalhes
				.getListContratoCobrancaDetalhesParcial()) {
			if (cBaixas.isBaixaGalleria()) {
				listaBaixaGalleria.add(cBaixas);
			}
		}
		bpContratoCobrancaDetalhes.getListContratoCobrancaDetalhesParcial().removeAll(listaBaixaGalleria);

		TimeZone zone = TimeZone.getDefault();
		Locale locale = new Locale("pt", "BR");
		Calendar dataHoje = Calendar.getInstance(zone, locale);
		dataHoje.set(Calendar.HOUR_OF_DAY, 0);
		dataHoje.set(Calendar.MINUTE, 0);
		dataHoje.set(Calendar.SECOND, 0);
		dataHoje.set(Calendar.MILLISECOND, 0);
		Calendar dataVencimentoParcela = Calendar.getInstance(zone, locale);
		dataVencimentoParcela.set(Calendar.HOUR_OF_DAY, 0);
		dataVencimentoParcela.set(Calendar.MINUTE, 0);
		dataVencimentoParcela.set(Calendar.SECOND, 0);
		dataVencimentoParcela.set(Calendar.MILLISECOND, 0);

		Calendar dataPagamento = Calendar.getInstance(zone, locale);
		dataPagamento.setTime(this.rowEditNewDate);

		Calendar dataPagamentoHoras = Calendar.getInstance(zone, locale);

		this.bpContratoCobrancaDetalhes.setVlrParcelaAtualizada(this.vlrParcelaAtualizadaNew);

		ContratoCobrancaDetalhesParcial contratoCobrancaDetalhesParcial = new ContratoCobrancaDetalhesParcial();

		if (this.selectedRecebedor != null) {
			if (this.selectedRecebedor.getId() > 0) {
				contratoCobrancaDetalhesParcial.setRecebedor(this.selectedRecebedor);
			}
		}

		if (this.observacao != null) {
			contratoCobrancaDetalhesParcial.setObservacaoRecebedor(this.observacao);
		}

		// calcula valor presente
		if (!CommonsUtil.semValor(bpContratoCobrancaDetalhes.getVlrJurosParcela())
				|| !CommonsUtil.semValor(bpContratoCobrancaDetalhes.getVlrAmortizacaoParcela())) {
			calcularValorPresenteParcelaData(rowEditNewDate, bpContratoCobrancaDetalhes);
		}

		boolean baixaTotal = false;
		// se valor recebido é igual ao valor atualizado
		if (this.vlrRecebido.intValue() != 0) {
			// verifica se é antecipação
			if (dataPagamento.before(bpContratoCobrancaDetalhes.getDataVencimento())) {
				bpContratoCobrancaDetalhes.setDataVencimentoAtual(this.rowEditNewDate);
				// }

				contratoCobrancaDetalhesParcial.setDataVencimento(this.bpContratoCobrancaDetalhes.getDataVencimento());
				contratoCobrancaDetalhesParcial
						.setDataVencimentoAtual(this.bpContratoCobrancaDetalhes.getDataVencimentoAtual());

				contratoCobrancaDetalhesParcial.setNumeroParcela(this.bpContratoCobrancaDetalhes.getNumeroParcela());
				contratoCobrancaDetalhesParcial.setDataPagamento(dataPagamento.getTime());
				contratoCobrancaDetalhesParcial
						.setVlrParcela(this.bpContratoCobrancaDetalhes.getVlrParcelaAtualizada());

				contratoCobrancaDetalhesParcial.setVlrRecebido(this.vlrRecebido);

				contratoCobrancaDetalhesParcial
						.setVlrParcelaAtualizado(this.bpContratoCobrancaDetalhes.getVlrParcelaAtualizada());

				contratoCobrancaDetalhesParcial.setSaldoAPagar(BigDecimal.ZERO);

				bpContratoCobrancaDetalhes.getListContratoCobrancaDetalhesParcial()
						.add(contratoCobrancaDetalhesParcial);

				bpContratoCobrancaDetalhes.setParcelaPaga(true);
				bpContratoCobrancaDetalhes.setOrigemBaixa("baixarParcelaParcial - Antecipação");

				// compoem o valor da parcela de acordo com o historico de baixas
				BigDecimal valorParcelaAtual = BigDecimal.ZERO;

				for (ContratoCobrancaDetalhesParcial ccdp : bpContratoCobrancaDetalhes
						.getListContratoCobrancaDetalhesParcial()) {
					valorParcelaAtual = valorParcelaAtual.add(ccdp.getVlrRecebido());
				}

				bpContratoCobrancaDetalhes.setVlrParcela(valorParcelaAtual);
				bpContratoCobrancaDetalhes.setVlrParcelaAtualizada(BigDecimal.ZERO);

				baixaTotal = true;
			} else {
				// se valor recebido é igual ou maior
				if (this.vlrRecebido.compareTo(bpContratoCobrancaDetalhes.getVlrParcelaAtualizada()) == 0
						|| this.vlrRecebido.compareTo(bpContratoCobrancaDetalhes.getVlrParcelaAtualizada()) == 1) {

					// atualiza data de vencimento para a data atual se a data de vencimento for
					// menor que a data de hoje
					// if
					// (this.bpContratoCobrancaDetalhes.getDataVencimentoAtual().before(this.rowEditNewDate))
					// {
					bpContratoCobrancaDetalhes.setDataVencimentoAtual(this.rowEditNewDate);
					// }

					contratoCobrancaDetalhesParcial
							.setDataVencimento(this.bpContratoCobrancaDetalhes.getDataVencimento());
					contratoCobrancaDetalhesParcial
							.setDataVencimentoAtual(this.bpContratoCobrancaDetalhes.getDataVencimentoAtual());

					contratoCobrancaDetalhesParcial
							.setNumeroParcela(this.bpContratoCobrancaDetalhes.getNumeroParcela());
					contratoCobrancaDetalhesParcial.setDataPagamento(dataPagamento.getTime());
					contratoCobrancaDetalhesParcial
							.setVlrParcela(this.bpContratoCobrancaDetalhes.getVlrParcelaAtualizada());

					if (this.vlrRecebido.compareTo(bpContratoCobrancaDetalhes.getVlrParcelaAtualizada()) == 0) {
						contratoCobrancaDetalhesParcial
								.setVlrRecebido(this.bpContratoCobrancaDetalhes.getVlrParcelaAtualizada());
					} else {
						contratoCobrancaDetalhesParcial.setVlrRecebido(this.vlrRecebido);
					}
					contratoCobrancaDetalhesParcial
							.setVlrParcelaAtualizado(this.bpContratoCobrancaDetalhes.getVlrParcelaAtualizada());

					contratoCobrancaDetalhesParcial.setSaldoAPagar(BigDecimal.ZERO);

					bpContratoCobrancaDetalhes.getListContratoCobrancaDetalhesParcial()
							.add(contratoCobrancaDetalhesParcial);

					bpContratoCobrancaDetalhes.setParcelaPaga(true);
					bpContratoCobrancaDetalhes.setOrigemBaixa("baixarParcelaParcial");

					// compoem o valor da parcela de acordo com o historico de baixas
					BigDecimal valorParcelaAtual = BigDecimal.ZERO;

					// se tiver várias baixas parciais
					if (bpContratoCobrancaDetalhes.getListContratoCobrancaDetalhesParcial().size() > 1) {
						valorParcelaAtual = bpContratoCobrancaDetalhes.getListContratoCobrancaDetalhesParcial().get(0)
								.getVlrParcela();
						// for (ContratoCobrancaDetalhesParcial ccdp : bpContratoCobrancaDetalhes
						// .getListContratoCobrancaDetalhesParcial()) {
						// valorParcelaAtual = valorParcelaAtual.add(ccdp.getVlrRecebido());
						// }

						bpContratoCobrancaDetalhes.setVlrParcela(valorParcelaAtual);
					}

					bpContratoCobrancaDetalhes.setVlrParcelaAtualizada(BigDecimal.ZERO);

					baixaTotal = true;

					// bpContratoCobrancaDetalhes.setVlrSaldoParcela(BigDecimal.ZERO);

					// verifica se pagamento é igual ao valor presente
				} else if (this.vlrRecebido.compareTo(this.valorPresenteParcela) >= 0) {

					// atualiza data de vencimento para a data atual se a data de vencimento for
					// menor que a data de hoje
					// if
					// (this.bpContratoCobrancaDetalhes.getDataVencimentoAtual().before(this.rowEditNewDate))
					// {
					bpContratoCobrancaDetalhes.setDataVencimentoAtual(this.rowEditNewDate);
					// }
					contratoCobrancaDetalhesParcial
							.setDataVencimento(this.bpContratoCobrancaDetalhes.getDataVencimento());
					contratoCobrancaDetalhesParcial
							.setDataVencimentoAtual(this.bpContratoCobrancaDetalhes.getDataVencimentoAtual());
					contratoCobrancaDetalhesParcial
							.setNumeroParcela(this.bpContratoCobrancaDetalhes.getNumeroParcela());
					contratoCobrancaDetalhesParcial.setDataPagamento(dataPagamento.getTime());
					contratoCobrancaDetalhesParcial.setVlrParcela(valorPresenteParcela);
					contratoCobrancaDetalhesParcial.setVlrRecebido(valorPresenteParcela);
					contratoCobrancaDetalhesParcial.setVlrParcelaAtualizado(valorPresenteParcela);
					contratoCobrancaDetalhesParcial.setSaldoAPagar(BigDecimal.ZERO);
					bpContratoCobrancaDetalhes.getListContratoCobrancaDetalhesParcial()
							.add(contratoCobrancaDetalhesParcial);
					bpContratoCobrancaDetalhes.setParcelaPaga(true);
					bpContratoCobrancaDetalhes.setOrigemBaixa("baixarParcelaParcial");

					baixaTotal = true;

					// valor da parcela continua o mesmo

					bpContratoCobrancaDetalhes.setVlrParcelaAtualizada(BigDecimal.ZERO);
				} else {
					// atualiza data de vencimento para a data atual se a data de vencimento for
					// menor que a data de hoje
					if (this.bpContratoCobrancaDetalhes.getDataVencimentoAtual().before(this.rowEditNewDate)) {
						bpContratoCobrancaDetalhes.setDataVencimentoAtual(this.rowEditNewDate);
					}

					contratoCobrancaDetalhesParcial
							.setDataVencimento(this.bpContratoCobrancaDetalhes.getDataVencimento());
					contratoCobrancaDetalhesParcial
							.setDataVencimentoAtual(this.bpContratoCobrancaDetalhes.getDataVencimentoAtual());

					// historico de baixa parcial
					contratoCobrancaDetalhesParcial
							.setNumeroParcela(this.bpContratoCobrancaDetalhes.getNumeroParcela());
					contratoCobrancaDetalhesParcial.setDataPagamento(dataPagamento.getTime());
					contratoCobrancaDetalhesParcial.setVlrParcela(
							bpContratoCobrancaDetalhes.getVlrParcelaAtualizada().subtract(this.vlrRecebido));
					contratoCobrancaDetalhesParcial.setVlrRecebido(this.vlrRecebido);

					contratoCobrancaDetalhesParcial
							.setVlrParcelaAtualizado(this.bpContratoCobrancaDetalhes.getVlrParcelaAtualizada());
					contratoCobrancaDetalhesParcial.setSaldoAPagar(
							bpContratoCobrancaDetalhes.getVlrParcelaAtualizada().subtract(this.vlrRecebido));

					bpContratoCobrancaDetalhes.getListContratoCobrancaDetalhesParcial()
							.add(contratoCobrancaDetalhesParcial);

					bpContratoCobrancaDetalhes.setOrigemBaixa("baixarParcelaParcial - Else Final");

					// se o valor recebido for menor que o da parcela
					bpContratoCobrancaDetalhes.setVlrParcela(
							bpContratoCobrancaDetalhes.getVlrParcelaAtualizada().subtract(this.vlrRecebido));
					bpContratoCobrancaDetalhes.setVlrParcelaAtualizada(null);
				}
				this.vlrRecebido = BigDecimal.ZERO;
			}
		} else {
			// se o valor recebido é zero estorna todas as baixas parciais
			// atualiza data de vencimento para a data atual se a data de vencimento for
			// menor que a data de hoje
			/*
			 * if (this.bpContratoCobrancaDetalhes.getDataVencimentoAtual().before(this.
			 * rowEditNewDate)) {
			 * bpContratoCobrancaDetalhes.setDataVencimentoAtual(this.rowEditNewDate); }
			 * 
			 * contratoCobrancaDetalhesParcial.setDataVencimento(this.
			 * bpContratoCobrancaDetalhes.getDataVencimento());
			 * contratoCobrancaDetalhesParcial.setDataVencimentoAtual(this.
			 * bpContratoCobrancaDetalhes.getDataVencimentoAtual());
			 * 
			 * // historico de baixa parcial
			 * contratoCobrancaDetalhesParcial.setNumeroParcela(this.
			 * bpContratoCobrancaDetalhes.getNumeroParcela());
			 * contratoCobrancaDetalhesParcial.setDataPagamento(dataPagamentoHoras.getTime()
			 * ); contratoCobrancaDetalhesParcial.setVlrParcela(this.vlrParcelaNew);
			 * contratoCobrancaDetalhesParcial.setVlrRecebido(this.vlrRecebido);
			 * 
			 * bpContratoCobrancaDetalhes.getListContratoCobrancaDetalhesParcial().add(
			 * contratoCobrancaDetalhesParcial);
			 */
			bpContratoCobrancaDetalhes.setDataVencimentoAtual(bpContratoCobrancaDetalhes.getDataVencimento());
			bpContratoCobrancaDetalhes.setVlrParcelaAtualizada(null);
			bpContratoCobrancaDetalhes.setVlrParcela(this.vlrParcelaNew);
		}

		// INICIO - Tratativa para validar status parcela
		BigDecimal somaBaixasStatus = BigDecimal.ZERO;

		for (ContratoCobrancaDetalhesParcial cBaixas : bpContratoCobrancaDetalhes
				.getListContratoCobrancaDetalhesParcial()) {
			somaBaixasStatus = somaBaixasStatus.add(cBaixas.getVlrRecebido());
		}

		if (somaBaixasStatus.compareTo(bpContratoCobrancaDetalhes.getVlrParcela()) >= 0 && baixaTotal) {
			bpContratoCobrancaDetalhes.setParcelaPaga(true);
			bpContratoCobrancaDetalhes.setOrigemBaixa("baixarParcelaParcial - Tratativa Status");
		}

		// FIM - Tratativa para validar status parcela

		contratoCobrancaDetalhesDao.merge(bpContratoCobrancaDetalhes);

		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();

		this.objetoContratoCobranca = contratoCobrancaDao.findById(this.objetoContratoCobranca.getId());

		// ATUALIZA STATUS PARCELAS
		for (ContratoCobrancaDetalhes ccd : this.objetoContratoCobranca.getListContratoCobrancaDetalhes()) {

			if (ccd.isAmortizacao()) {
				ccd.setValorTotalPagamento(ccd.getVlrParcela());
				continue;
			}

			dataVencimentoParcela.setTime(ccd.getDataVencimentoAtual());

			if (dataVencimentoParcela.getTime().before(dataHoje.getTime()) && !ccd.isParcelaPaga()) {
				ccd.setParcelaVencida(true);

				// calcula coluna valor atualizado
				ContratoCobrancaUtilsMB contratoCobrancaUtilsMB;
				if (ccd.getVlrParcelaAtualizada() != null) {
					if (ccd.getVlrParcelaAtualizada().compareTo(BigDecimal.ZERO) == 1) {
						contratoCobrancaUtilsMB = new ContratoCobrancaUtilsMB(dataVencimentoParcela.getTime(),
								dataHoje.getTime(), ccd.getVlrParcela(), ccd.getVlrParcelaAtualizada(),
								ccd.getVlrJuros(), ccd.getTxMulta());
					} else {
						contratoCobrancaUtilsMB = new ContratoCobrancaUtilsMB(dataVencimentoParcela.getTime(),
								dataHoje.getTime(), ccd.getVlrParcela(), ccd.getVlrJuros(), ccd.getTxMulta());
					}
				} else {
					contratoCobrancaUtilsMB = new ContratoCobrancaUtilsMB(dataVencimentoParcela.getTime(),
							dataHoje.getTime(), ccd.getVlrParcela(), ccd.getVlrJuros(), ccd.getTxMulta());
				}

				if (!ccd.isParcelaPaga()) {
					if (ccd.getListContratoCobrancaDetalhesParcial().size() > 0) {
						contratoCobrancaUtilsMB.recalculaValorSemMulta();
					} else {
						contratoCobrancaUtilsMB.recalculaValor();
					}

					ccd.setVlrParcelaAtualizada(contratoCobrancaUtilsMB.getValorAtualizado());
				} else {
					ccd.setVlrParcelaAtualizada(null);
				}
			}

			if (dataVencimentoParcela.getTime().equals(dataHoje.getTime()) && !ccd.isParcelaPaga()) {
				ccd.setParcelaVencendo(true);
			}

			BigDecimal somaBaixas = BigDecimal.ZERO;

			for (ContratoCobrancaDetalhesParcial cBaixas : ccd.getListContratoCobrancaDetalhesParcial()) {
				ccd.setDataUltimoPagamento(cBaixas.getDataPagamento());

				if (cBaixas.getVlrRecebido() != null) {
					somaBaixas = somaBaixas.add(cBaixas.getVlrRecebido());
				}
			}

			ccd.setValorTotalPagamento(somaBaixas);

			if (ccd.isParcelaPaga() == false && ccd.getListContratoCobrancaDetalhesParcial().size() >= 0) {
				for (ContratoCobrancaDetalhesParcial ccdp : ccd.getListContratoCobrancaDetalhesParcial()) {
					if (!ccdp.isBaixaGalleria()) {
						ccd.setPagoParcial(true);
						break;
					}
				}
			} else {
				ccd.setPagoParcial(false);
			}
		}

		if (baixaTotal && (this.objetoContratoCobranca.isCorrigidoIPCA()
				|| this.objetoContratoCobranca.isCorrigidoIPCAHibrido())) {
			IPCAMB ipcaMB = new IPCAMB();
			ipcaMB.atualizaIPCAChamadaTela(this.objetoContratoCobranca.getNumeroContrato());
		}

		this.selectedBoletosKobanaBaixa = null;

		/*
		 * //se valor atualizado == valor parcela //valor atualizado recebe null
		 * 
		 * // verifica se a parcela ja teve uma baixa if (((ContratoCobrancaDetalhes)
		 * event.getObject()).isParcelaPaga()) { ((ContratoCobrancaDetalhes)
		 * event.getObject()).setVlrParcelaAtualizada(((ContratoCobrancaDetalhes)
		 * event.getObject()).getVlrParcela());
		 * 
		 * if (((ContratoCobrancaDetalhes)
		 * event.getObject()).getVlrRecebido().compareTo(((ContratoCobrancaDetalhes)
		 * event.getObject()).getVlrParcelaAtualizada()) == 1 ) {
		 * context.addMessage(null, new FacesMessage( FacesMessage.SEVERITY_WARN,
		 * "Contrato Cobrança: O valor recebido é maior do que o valor atualizado!",
		 * "")); ((ContratoCobrancaDetalhes) event.getObject()).setVlrRecebido(null); }
		 * else { if (((ContratoCobrancaDetalhes)
		 * event.getObject()).getVlrRecebido().compareTo(((ContratoCobrancaDetalhes)
		 * event.getObject()).getVlrParcelaAtualizada()) == 0 ) { // se sim, seta a
		 * parcela como baixada e zera os saldos ((ContratoCobrancaDetalhes)
		 * event.getObject()).setParcelaPaga(true); ((ContratoCobrancaDetalhes)
		 * event.getObject()).setVlrSaldoParcela(BigDecimal.ZERO);
		 * ((ContratoCobrancaDetalhes)
		 * event.getObject()).setVlrRecebido(BigDecimal.ZERO);
		 * 
		 * contratoCobrancaDetalhesDao.merge(((ContratoCobrancaDetalhes)
		 * event.getObject()));
		 * 
		 * context.addMessage(null, new FacesMessage( FacesMessage.SEVERITY_INFO,
		 * "Contrato Cobrança: Parcela(s) atualizada(s) com sucesso!", "")); } else { //
		 * se não, calcula o saldo que ficará na parcela e deixa ela em aberto //
		 * recebido maior que valor atualizado if (((ContratoCobrancaDetalhes)
		 * event.getObject()).getVlrRecebido().compareTo(((ContratoCobrancaDetalhes)
		 * event.getObject()).getVlrParcelaAtualizada()) == 1 ) {
		 * context.addMessage(null, new FacesMessage( FacesMessage.SEVERITY_WARN,
		 * "Contrato Cobrança: O valor recebido é maior do que o valor atualizado!",
		 * "")); ((ContratoCobrancaDetalhes) event.getObject()).setVlrRecebido(null); }
		 * else { ((ContratoCobrancaDetalhes)
		 * event.getObject()).setVlrParcelaAtualizada(((ContratoCobrancaDetalhes)
		 * event.getObject()).getVlrParcelaAtualizada().subtract(((
		 * ContratoCobrancaDetalhes) event.getObject()).getVlrRecebido()));
		 * ((ContratoCobrancaDetalhes)
		 * event.getObject()).setDataVencimento(rowEditNewDate);
		 * 
		 * ((ContratoCobrancaDetalhes) event.getObject()).setParcelaPaga(false);
		 * 
		 * contratoCobrancaDetalhesDao.merge(((ContratoCobrancaDetalhes)
		 * event.getObject()));
		 * 
		 * context.addMessage(null, new FacesMessage( FacesMessage.SEVERITY_INFO,
		 * "Contrato Cobrança: Parcela(s) atualizada(s) com sucesso!", "")); } } } }
		 * else { // se parcela não baixada // verifica se o valor a ser baixado é o
		 * Total da parcela ou o total do saldo da parcela //TODO baixa parcial //if
		 * (((ContratoCobrancaDetalhes)
		 * event.getObject()).getVlrParcelaAtualizada().equals(((
		 * ContratoCobrancaDetalhes) event.getObject()).getVlrParcela()) //||
		 * ((ContratoCobrancaDetalhes)
		 * event.getObject()).getVlrParcelaAtualizada().equals(((
		 * ContratoCobrancaDetalhes) event.getObject()).getVlrSaldoParcela())) { if
		 * (((ContratoCobrancaDetalhes) event.getObject()).getVlrRecebido().intValue()
		 * == 0) { ((ContratoCobrancaDetalhes)
		 * event.getObject()).setVlrParcelaAtualizada(((ContratoCobrancaDetalhes)
		 * event.getObject()).getVlrParcela()); ((ContratoCobrancaDetalhes)
		 * event.getObject()).setDataVencimento(rowEditNewDate);
		 * ((ContratoCobrancaDetalhes) event.getObject()).setVlrRecebido(null);
		 * 
		 * contratoCobrancaDetalhesDao.merge(((ContratoCobrancaDetalhes)
		 * event.getObject()));
		 * 
		 * context.addMessage(null, new FacesMessage( FacesMessage.SEVERITY_INFO,
		 * "Contrato Cobrança: Parcela(s) atualizada(s) com sucesso!", "")); } else { if
		 * (((ContratoCobrancaDetalhes) event.getObject()).getVlrParcelaAtualizada() ==
		 * null) { ((ContratoCobrancaDetalhes)
		 * event.getObject()).setVlrParcelaAtualizada(((ContratoCobrancaDetalhes)
		 * event.getObject()).getVlrParcela()); }
		 * 
		 * if (((ContratoCobrancaDetalhes)
		 * event.getObject()).getVlrRecebido().compareTo(((ContratoCobrancaDetalhes)
		 * event.getObject()).getVlrParcelaAtualizada()) == 0 ) { // se sim, seta a
		 * parcela como baixada e zera os saldos ((ContratoCobrancaDetalhes)
		 * event.getObject()).setParcelaPaga(true); ((ContratoCobrancaDetalhes)
		 * event.getObject()).setVlrSaldoParcela(BigDecimal.ZERO);
		 * ((ContratoCobrancaDetalhes)
		 * event.getObject()).setVlrRecebido(BigDecimal.ZERO);
		 * 
		 * contratoCobrancaDetalhesDao.merge(((ContratoCobrancaDetalhes)
		 * event.getObject()));
		 * 
		 * context.addMessage(null, new FacesMessage( FacesMessage.SEVERITY_INFO,
		 * "Contrato Cobrança: Parcela(s) atualizada(s) com sucesso!", "")); } else { //
		 * se não, calcula o saldo que ficará na parcela e deixa ela em aberto //
		 * recebido maior que valor atualizado if (((ContratoCobrancaDetalhes)
		 * event.getObject()).getVlrRecebido().compareTo(((ContratoCobrancaDetalhes)
		 * event.getObject()).getVlrParcelaAtualizada()) == 1 ) {
		 * context.addMessage(null, new FacesMessage( FacesMessage.SEVERITY_WARN,
		 * "Contrato Cobrança: O valor recebido é maior do que o valor atualizado!",
		 * "")); ((ContratoCobrancaDetalhes) event.getObject()).setVlrRecebido(null); }
		 * else { ((ContratoCobrancaDetalhes)
		 * event.getObject()).setVlrParcelaAtualizada(((ContratoCobrancaDetalhes)
		 * event.getObject()).getVlrParcelaAtualizada().subtract(((
		 * ContratoCobrancaDetalhes) event.getObject()).getVlrRecebido()));
		 * ((ContratoCobrancaDetalhes)
		 * event.getObject()).setDataVencimento(rowEditNewDate);
		 * //((ContratoCobrancaDetalhes)
		 * event.getObject()).setDataVencimento(data.getTime());
		 * 
		 * contratoCobrancaDetalhesDao.merge(((ContratoCobrancaDetalhes)
		 * event.getObject()));
		 * 
		 * context.addMessage(null, new FacesMessage( FacesMessage.SEVERITY_INFO,
		 * "Contrato Cobrança: Parcela(s) atualizada(s) com sucesso!", "")); } } } }
		 */
	}

	// baixar parcela geral
	public String baixarParcela() {
		FacesContext context = FacesContext.getCurrentInstance();

		ContratoCobrancaDetalhesDao contratoCobrancaDetalhesDao = new ContratoCobrancaDetalhesDao();

		TimeZone zone = TimeZone.getDefault();
		Locale locale = new Locale("pt", "BR");
		Calendar data = Calendar.getInstance(zone, locale);
		/*
		 * // verifica se a parcela ja teve uma baixa if
		 * (this.selectedContratoCobrancaDetalhes.isParcelaPaga()) { // se sim, verifica
		 * se o valor digitado é diferente do valor da parcela (isso significa correção
		 * de operação) if
		 * (this.selectedContratoCobrancaDetalhes.getVlrParcelaAtualizada() !=
		 * this.selectedContratoCobrancaDetalhes.getVlrRepasse()) { // se sim, corrigi o
		 * valor pago e seta a parcela como não baixada
		 * this.selectedContratoCobrancaDetalhes.setVlrSaldoParcela(this.
		 * selectedContratoCobrancaDetalhes.getVlrRepasse().subtract(this.
		 * selectedContratoCobrancaDetalhes.getListContratoCobrancaFavorecidos().get(0).
		 * getVlrRecebido()));
		 * this.selectedContratoCobrancaDetalhes.setParcelaPaga(false); } } else { // se
		 * parcela não baixada // verifica se o valor a ser baixado é o Total da parcela
		 * ou o total do saldo da parcela //TODO baixa parcial //if
		 * (this.selectedContratoCobrancaDetalhes.getVlrParcelaAtualizada().equals(this.
		 * selectedContratoCobrancaDetalhes.getVlrParcela()) //||
		 * this.selectedContratoCobrancaDetalhes.getVlrParcelaAtualizada().equals(this.
		 * selectedContratoCobrancaDetalhes.getVlrSaldoParcela())) { if
		 * (this.selectedContratoCobrancaDetalhes.getListContratoCobrancaFavorecidos().
		 * get(0).getVlrRecebido().equals(this.selectedContratoCobrancaDetalhes.
		 * getVlrParcela())) { // se sim, seta a parcela como baixada e zera os saldos
		 * this.selectedContratoCobrancaDetalhes.setParcelaPaga(true);
		 * this.selectedContratoCobrancaDetalhes.setVlrSaldoParcela(BigDecimal.ZERO);
		 * this.selectedContratoCobrancaDetalhes.setVlrParcelaAtualizada(this.
		 * selectedContratoCobrancaDetalhes.getVlrParcela()); } else { // se não,
		 * calcula o saldo que ficará na parcela e deixa ela em aberto
		 * this.selectedContratoCobrancaDetalhes.setVlrSaldoParcela(this.
		 * selectedContratoCobrancaDetalhes.getVlrParcela().subtract(this.
		 * selectedContratoCobrancaDetalhes.getListContratoCobrancaFavorecidos().get(0).
		 * getVlrRecebido())); } }
		 * 
		 * //this.selectedContratoCobrancaDetalhes.setListContratoCobrancaFavorecidos(
		 * this.listContratoCobrancaFavorecidos);
		 */

		if (this.selectedListContratoCobrancaDetalhes != null) {
			if (this.selectedListContratoCobrancaDetalhes.size() > 0) {
				for (ContratoCobrancaDetalhes c : this.selectedListContratoCobrancaDetalhes) {
					c.setParcelaPaga(true);
					c.setOrigemBaixa("baixarParcela");
					c.setVlrSaldoParcela(BigDecimal.ZERO);
					c.setVlrParcelaAtualizada(c.getVlrParcelaAtualizada());
					c.setDataPagamento(data.getTime());

					contratoCobrancaDetalhesDao.merge(c);
				}

				this.selectedListContratoCobrancaDetalhes = new ArrayList<ContratoCobrancaDetalhes>();

				context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_INFO,
						"Contrato Cobrança: Parcela(s) atualizada(s) com sucesso!", ""));

				// limpa campos
				/*
				 * this.relIsRelAtraso = false; this.relIsCompleto = true; Calendar dataInicio =
				 * Calendar.getInstance(zone, locale); this.relDataContratoInicio =
				 * dataInicio.getTime(); this.relDataContratoFim = dataInicio.getTime();
				 * this.relObjetoContratoCobranca = new
				 * ArrayList<RelatorioFinanceiroCobranca>();
				 * this.selectedContratoCobrancaDetalhes = new ContratoCobrancaDetalhes();
				 * 
				 * clearPagador(); clearRecebedor(); clearRecebedor2(); clearResponsavel();
				 * 
				 * this.contratoGerado = false;
				 */

				return "/Atendimento/Cobranca/ContratoCobrancaBaixar.xhtml";
			} else {
				return "";
			}
		} else {
			return "";
		}
	}
	/*
	 * public void onRowCancel(RowEditEvent event) {
	 * 
	 * }
	 */

	public String excluir() {
		FacesContext context = FacesContext.getCurrentInstance();
		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();

		try {
			contratoCobrancaDao.delete(objetoContratoCobranca);

			context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_INFO,
					"Contrato Cobrança: Registro excluído com sucesso!", ""));

		} catch (DBConnectionException e) {
			context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR, "Contrato Cobrança: " + e, ""));

			return "";
		}

		return clearFieldsContratosPerformance();
	}

	public void anteciparCreditoInvestidor(int iInvestidor) {
		this.idAntecipacaoInvestidor = iInvestidor;
		this.antecipacao = new ContratoCobrancaParcelasInvestidor();
	}

	public void incluirAmortizacaoSaldo() {
		ContratoCobrancaDetalhes parcelaAnterior = null;

		for (ContratoCobrancaDetalhes ContratoCobrancaDetalhes : objetoContratoCobranca
				.getListContratoCobrancaDetalhes()) {
			if (parcelaAnterior == null
					|| ContratoCobrancaDetalhes.getDataVencimento().compareTo(amortizacao.getDataVencimento()) < 1) {
				parcelaAnterior = ContratoCobrancaDetalhes;

			} else {

				break;
			}
		}

		amortizacao.setVlrSaldoParcela(
				parcelaAnterior.getVlrSaldoParcela().subtract(amortizacao.getVlrAmortizacaoParcela()));
		amortizacao.setVlrJurosParcela(BigDecimal.ZERO);
		amortizacao.setSeguroDFI(BigDecimal.ZERO);
		amortizacao.setSeguroMIP(BigDecimal.ZERO);
		amortizacao.setTaxaAdm(BigDecimal.ZERO);
		amortizacao.setVlrParcela(amortizacao.getVlrAmortizacaoParcela());
		amortizacao.setNumeroParcela("Amortização");
		amortizacao.setParcelaPaga(true);
		amortizacao.setOrigemBaixa("incluirAmortizacaoSaldo");

		amortizacao.setDataPagamento(amortizacao.getDataVencimento());
		// amortizacao.setVlrRecebido(amortizacao.getVlrParcela());
		amortizacao.setValorTotalPagamento(amortizacao.getVlrParcela());
		objetoContratoCobranca.getListContratoCobrancaDetalhes().add(amortizacao);
	}

	public String incluirAntecipacao() {

		List<ContratoCobrancaParcelasInvestidor> listaCobrancaParcelas = null;
		PagadorRecebedor investidor = null;
		BigDecimal taxaRemuneracao = BigDecimal.ZERO;
		BigDecimal saldo = BigDecimal.ZERO;
		boolean isEnvelope = false;
		BigDecimal saldoAtualizado = BigDecimal.ZERO;
		Integer qtdeParcelasInvestidor = 0;
		BigDecimal parcelaMensal = BigDecimal.ZERO;
		String tipoCalculoInvestidor = "";

		if (idAntecipacaoInvestidor == 1) {
			listaCobrancaParcelas = objetoContratoCobranca.getListContratoCobrancaParcelasInvestidor1();
			investidor = objetoContratoCobranca.getRecebedor();
			taxaRemuneracao = objetoContratoCobranca.getTaxaRemuneracaoInvestidor1();
			saldo = objetoContratoCobranca.getVlrInvestidor1();
			isEnvelope = objetoContratoCobranca.isRecebedorEnvelope();
			parcelaMensal = this.objetoContratoCobranca.getVlrInvestidor1();
			qtdeParcelasInvestidor = this.objetoContratoCobranca.getQtdeParcelasInvestidor1();
			tipoCalculoInvestidor = this.objetoContratoCobranca.getTipoCalculoInvestidor1();

		} else if (idAntecipacaoInvestidor == 2) {
			listaCobrancaParcelas = objetoContratoCobranca.getListContratoCobrancaParcelasInvestidor2();
			investidor = objetoContratoCobranca.getRecebedor2();
			taxaRemuneracao = objetoContratoCobranca.getTaxaRemuneracaoInvestidor2();
			saldo = objetoContratoCobranca.getVlrInvestidor2();
			isEnvelope = objetoContratoCobranca.isRecebedorEnvelope2();
			parcelaMensal = this.objetoContratoCobranca.getVlrInvestidor2();
			qtdeParcelasInvestidor = this.objetoContratoCobranca.getQtdeParcelasInvestidor2();
			tipoCalculoInvestidor = this.objetoContratoCobranca.getTipoCalculoInvestidor2();
		} else if (idAntecipacaoInvestidor == 3) {
			listaCobrancaParcelas = objetoContratoCobranca.getListContratoCobrancaParcelasInvestidor3();
			investidor = objetoContratoCobranca.getRecebedor3();
			taxaRemuneracao = objetoContratoCobranca.getTaxaRemuneracaoInvestidor3();
			saldo = objetoContratoCobranca.getVlrInvestidor3();
			isEnvelope = objetoContratoCobranca.isRecebedorEnvelope3();
			parcelaMensal = this.objetoContratoCobranca.getVlrInvestidor3();
			qtdeParcelasInvestidor = this.objetoContratoCobranca.getQtdeParcelasInvestidor3();
			tipoCalculoInvestidor = this.objetoContratoCobranca.getTipoCalculoInvestidor3();
		} else if (idAntecipacaoInvestidor == 4) {
			listaCobrancaParcelas = objetoContratoCobranca.getListContratoCobrancaParcelasInvestidor4();
			investidor = objetoContratoCobranca.getRecebedor4();
			taxaRemuneracao = objetoContratoCobranca.getTaxaRemuneracaoInvestidor4();
			saldo = objetoContratoCobranca.getVlrInvestidor4();
			isEnvelope = objetoContratoCobranca.isRecebedorEnvelope4();
			parcelaMensal = this.objetoContratoCobranca.getVlrInvestidor4();
			qtdeParcelasInvestidor = this.objetoContratoCobranca.getQtdeParcelasInvestidor4();
			tipoCalculoInvestidor = this.objetoContratoCobranca.getTipoCalculoInvestidor4();
		} else if (idAntecipacaoInvestidor == 5) {
			listaCobrancaParcelas = objetoContratoCobranca.getListContratoCobrancaParcelasInvestidor5();
			investidor = objetoContratoCobranca.getRecebedor5();
			taxaRemuneracao = objetoContratoCobranca.getTaxaRemuneracaoInvestidor5();
			saldo = objetoContratoCobranca.getVlrInvestidor5();
			isEnvelope = objetoContratoCobranca.isRecebedorEnvelope5();
			parcelaMensal = this.objetoContratoCobranca.getVlrInvestidor5();
			qtdeParcelasInvestidor = this.objetoContratoCobranca.getQtdeParcelasInvestidor5();
			tipoCalculoInvestidor = this.objetoContratoCobranca.getTipoCalculoInvestidor5();
		} else if (idAntecipacaoInvestidor == 6) {
			listaCobrancaParcelas = objetoContratoCobranca.getListContratoCobrancaParcelasInvestidor6();
			investidor = objetoContratoCobranca.getRecebedor6();
			taxaRemuneracao = objetoContratoCobranca.getTaxaRemuneracaoInvestidor6();
			saldo = objetoContratoCobranca.getVlrInvestidor6();
			isEnvelope = objetoContratoCobranca.isRecebedorEnvelope6();
			parcelaMensal = this.objetoContratoCobranca.getVlrInvestidor6();
			qtdeParcelasInvestidor = this.objetoContratoCobranca.getQtdeParcelasInvestidor6();
			tipoCalculoInvestidor = this.objetoContratoCobranca.getTipoCalculoInvestidor6();
		} else if (idAntecipacaoInvestidor == 7) {
			listaCobrancaParcelas = objetoContratoCobranca.getListContratoCobrancaParcelasInvestidor7();
			investidor = objetoContratoCobranca.getRecebedor7();
			taxaRemuneracao = objetoContratoCobranca.getTaxaRemuneracaoInvestidor7();
			saldo = objetoContratoCobranca.getVlrInvestidor7();
			isEnvelope = objetoContratoCobranca.isRecebedorEnvelope7();
			parcelaMensal = this.objetoContratoCobranca.getVlrInvestidor7();
			qtdeParcelasInvestidor = this.objetoContratoCobranca.getQtdeParcelasInvestidor7();
			tipoCalculoInvestidor = this.objetoContratoCobranca.getTipoCalculoInvestidor7();
		} else if (idAntecipacaoInvestidor == 8) {
			listaCobrancaParcelas = objetoContratoCobranca.getListContratoCobrancaParcelasInvestidor8();
			investidor = objetoContratoCobranca.getRecebedor8();
			taxaRemuneracao = objetoContratoCobranca.getTaxaRemuneracaoInvestidor8();
			saldo = objetoContratoCobranca.getVlrInvestidor8();
			isEnvelope = objetoContratoCobranca.isRecebedorEnvelope8();
			parcelaMensal = this.objetoContratoCobranca.getVlrInvestidor8();
			qtdeParcelasInvestidor = this.objetoContratoCobranca.getQtdeParcelasInvestidor8();
			tipoCalculoInvestidor = this.objetoContratoCobranca.getTipoCalculoInvestidor8();
		} else if (idAntecipacaoInvestidor == 9) {
			listaCobrancaParcelas = objetoContratoCobranca.getListContratoCobrancaParcelasInvestidor9();
			investidor = objetoContratoCobranca.getRecebedor9();
			taxaRemuneracao = objetoContratoCobranca.getTaxaRemuneracaoInvestidor9();
			saldo = objetoContratoCobranca.getVlrInvestidor9();
			isEnvelope = objetoContratoCobranca.isRecebedorEnvelope9();
			parcelaMensal = this.objetoContratoCobranca.getVlrInvestidor9();
			qtdeParcelasInvestidor = this.objetoContratoCobranca.getQtdeParcelasInvestidor9();
			tipoCalculoInvestidor = this.objetoContratoCobranca.getTipoCalculoInvestidor9();
		} else if (idAntecipacaoInvestidor == 10) {
			listaCobrancaParcelas = objetoContratoCobranca.getListContratoCobrancaParcelasInvestidor10();
			investidor = objetoContratoCobranca.getRecebedor10();
			taxaRemuneracao = objetoContratoCobranca.getTaxaRemuneracaoInvestidor10();
			saldo = objetoContratoCobranca.getVlrInvestidor10();
			isEnvelope = objetoContratoCobranca.isRecebedorEnvelope10();
			parcelaMensal = this.objetoContratoCobranca.getVlrInvestidor10();
			qtdeParcelasInvestidor = this.objetoContratoCobranca.getQtdeParcelasInvestidor10();
			tipoCalculoInvestidor = this.objetoContratoCobranca.getTipoCalculoInvestidor10();
		}

		if (listaCobrancaParcelas == null)
			return null;

		ContratoCobrancaParcelasInvestidor parcelaAnterior = null;

		for (ContratoCobrancaParcelasInvestidor contratoCobrancaParcelasInvestidor : listaCobrancaParcelas) {
			if (parcelaAnterior == null || contratoCobrancaParcelasInvestidor.getDataVencimento()
					.compareTo(antecipacao.getDataVencimento()) < 1) {
				parcelaAnterior = contratoCobrancaParcelasInvestidor;

			} else {

				break;
			}
		}

		antecipacao.setAmortizacao(antecipacao.getParcelaMensal());
		antecipacao.setValorLiquido(antecipacao.getParcelaMensal());
		antecipacao.setSaldoCredor(saldo);
		antecipacao.setSaldoCredorAtualizado(
				parcelaAnterior.getSaldoCredorAtualizado().subtract(antecipacao.getParcelaMensal()));

		antecipacao.setJuros(BigDecimal.ZERO);
		antecipacao.setIrRetido(BigDecimal.ZERO);
		antecipacao.setBaixado(true);
		antecipacao.setDataBaixa(new Date());
		antecipacao.setEnvelope(false);
		antecipacao.setInvestidor(investidor);
		antecipacao.setNumeroParcela("Antecipação");

		listaCobrancaParcelas.add(antecipacao);

		saldoAtualizado = antecipacao.getSaldoCredorAtualizado();

		String numeroParcelaStr = "";

		BigInteger numeroParcela = BigInteger.ZERO;

		BigInteger qtdeParcelasInvestidorBi = BigInteger.ZERO;

		Date dataParcela = this.objetoContratoCobranca.getDataInicio();

		for (int i = 0; i < listaCobrancaParcelas.size(); i++) {
			ContratoCobrancaParcelasInvestidor parcelaInvestidor = listaCobrancaParcelas.get(i);

			if (parcelaInvestidor.isBaixado()
					|| parcelaInvestidor.getDataVencimento().compareTo(antecipacao.getDataVencimento()) < 0) {
				continue;
			} else {
				numeroParcelaStr = parcelaInvestidor.getNumeroParcela();
				numeroParcela = BigInteger.valueOf(CommonsUtil.longValue(numeroParcelaStr));
				qtdeParcelasInvestidorBi = BigInteger.valueOf(CommonsUtil.longValue(qtdeParcelasInvestidor));
				qtdeParcelasInvestidorBi = qtdeParcelasInvestidorBi.subtract(numeroParcela).subtract(BigInteger.ONE);
				break;
			}
		}

		taxaRemuneracao = taxaRemuneracao.divide(BigDecimal.valueOf(100));

		BigDecimal parcelaPGTO = null;

		for (int i = 0; i < listaCobrancaParcelas.size(); i++) {
			ContratoCobrancaParcelasInvestidor parcelaInvestidor = listaCobrancaParcelas.get(i);

			if (parcelaInvestidor.isBaixado()
					|| parcelaInvestidor.getDataVencimento().compareTo(antecipacao.getDataVencimento()) <= 0) {
				continue;
			}

			if (isEnvelope) {

				parcelaInvestidor = new ContratoCobrancaParcelasInvestidor();

				parcelaInvestidor.setParcelaMensal(parcelaMensal);
				parcelaInvestidor.setValorLiquido(parcelaMensal);

				parcelaInvestidor.setJuros(BigDecimal.ZERO);
				parcelaInvestidor.setAmortizacao(BigDecimal.ZERO);
				parcelaInvestidor.setSaldoCredor(BigDecimal.ZERO);
				parcelaInvestidor.setSaldoCredorAtualizado(BigDecimal.ZERO);
				parcelaInvestidor.setIrRetido(BigDecimal.ZERO);
				parcelaInvestidor.setCapitalizacao(BigDecimal.ZERO);

			} else {
				parcelaInvestidor.setSaldoCredor(saldoAtualizado);/////

				if (CommonsUtil.mesmoValor(tipoCalculoInvestidor, "Americano")) {
					// se a taxa de remuneração for maior que zero
					if (taxaRemuneracao.compareTo(BigDecimal.ZERO) == 1) {
						parcelaInvestidor.setJuros(saldoAtualizado.multiply(taxaRemuneracao));
						parcelaInvestidor.setCapitalizacao(saldoAtualizado.multiply(taxaRemuneracao));
						parcelaInvestidor.setAmortizacao(BigDecimal.ZERO);
						parcelaInvestidor
								.setParcelaMensal(parcelaInvestidor.getJuros().add(parcelaInvestidor.getAmortizacao()));////
						parcelaInvestidor
								.setSaldoCredorAtualizado(saldoAtualizado.subtract(parcelaInvestidor.getAmortizacao()));
					} else {
						parcelaInvestidor.setJuros(BigDecimal.ZERO);
						parcelaInvestidor.setCapitalizacao(BigDecimal.ZERO);
						parcelaInvestidor.setAmortizacao(BigDecimal.ZERO);
						parcelaInvestidor.setSaldoCredorAtualizado(BigDecimal.ZERO);
					}

					// se for a ultima parcela
					if (CommonsUtil.mesmoValor(CommonsUtil.integerValue(parcelaInvestidor.getNumeroParcela()),
							qtdeParcelasInvestidor)) {

						parcelaInvestidor.setSaldoCredor(BigDecimal.ZERO);

						parcelaInvestidor.setJuros(saldoAtualizado.multiply(taxaRemuneracao));
						parcelaInvestidor.setCapitalizacao(saldoAtualizado.multiply(taxaRemuneracao));
						parcelaInvestidor.setAmortizacao(parcelaInvestidor.getSaldoCredorAtualizado());
						parcelaInvestidor
								.setParcelaMensal(parcelaInvestidor.getJuros().add(parcelaInvestidor.getAmortizacao()));
						parcelaInvestidor.setSaldoCredorAtualizado(BigDecimal.ZERO);
					}
				} else {

					BigDecimal saldoDevedorAnterior = saldoAtualizado;

					BigDecimal saldoDevedorCacrencia = BigDecimal.valueOf(FinanceLib.fv(taxaRemuneracao.doubleValue(),
							0, 0, saldoAtualizado.negate().doubleValue(), false));

					if (CommonsUtil.semValor(parcelaPGTO)) {
						qtdeParcelasInvestidorBi = qtdeParcelasInvestidorBi.add(BigInteger.valueOf(2));

						parcelaPGTO = BigDecimal.valueOf(FinanceLib.pmt(taxaRemuneracao.doubleValue(), // taxa
								qtdeParcelasInvestidorBi.intValue(), // prazo
								saldoDevedorCacrencia.negate().doubleValue(), // valor credito - VP
								Double.valueOf("0"), // VF
								false // pagamento no inico
						));
					}

					// seguro

					BigDecimal juros = BigDecimal.valueOf(FinanceLib.fv(taxaRemuneracao.doubleValue(), // taxa
							1, // prazo
							0, // parcela
							saldoDevedorAnterior.negate().doubleValue(), // valor presente
							false));

					juros = juros.subtract(saldoDevedorAnterior);

					BigDecimal parcelaAmortizacao = BigDecimal.ZERO;

					if (saldoDevedorAnterior.compareTo(BigDecimal.ZERO) <= 0) {
						parcelaInvestidor.setParcelaMensal(BigDecimal.ZERO);
					} else {
						parcelaInvestidor.setParcelaMensal(parcelaPGTO);
						parcelaAmortizacao = parcelaPGTO;
					}

					parcelaInvestidor.setJuros(juros);
					parcelaInvestidor.setCapitalizacao(juros);

					parcelaInvestidor.setAmortizacao(parcelaAmortizacao.subtract(parcelaInvestidor.getJuros()));

					parcelaInvestidor.setSaldoCredor(saldoDevedorAnterior.setScale(2, RoundingMode.HALF_EVEN));

					BigDecimal saldoInvestidorAtualizado = saldoDevedorAnterior.add(juros).subtract(parcelaAmortizacao);
					if (saldoInvestidorAtualizado.compareTo(BigDecimal.ZERO) == -1)
						saldoInvestidorAtualizado = BigDecimal.ZERO;

					parcelaInvestidor.setSaldoCredorAtualizado(saldoInvestidorAtualizado);

					// saldoAtualizado = parcelaInvestidor.getSaldoCredorAtualizado();

				}

				saldoAtualizado = parcelaInvestidor.getSaldoCredorAtualizado();
				if (!this.objetoContratoCobranca.getEmpresa().equals("GALLERIA CORRESPONDENTE BANCARIO EIRELI")) {
					BigDecimal txIR = BigDecimal.ZERO;

					if ((i + 1) <= 6) {
						txIR = BigDecimal.valueOf(0.225);
					}

					if ((i + 1) > 6 && (i + 1) <= 12) {
						txIR = BigDecimal.valueOf(0.2);
					}

					if ((i + 1) > 12 && (i + 1) <= 18) {
						txIR = BigDecimal.valueOf(0.175);
					}

					if ((i + 1) > 18) {
						txIR = BigDecimal.valueOf(0.15);
					}

					parcelaInvestidor.setIrRetido(parcelaInvestidor.getJuros().multiply(txIR));

					parcelaInvestidor.setValorLiquido(
							parcelaInvestidor.getParcelaMensal().subtract(parcelaInvestidor.getIrRetido()));
				} else {
					parcelaInvestidor.setValorLiquido(parcelaInvestidor.getParcelaMensal());
				}
			}
		}

		ContratoCobrancaDao contratoDao = new ContratoCobrancaDao();
		contratoDao.merge(this.objetoContratoCobranca);

		FacesContext context = FacesContext.getCurrentInstance();
		context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_INFO,
				"Antecipacao do Investidor: Registro salvo com sucesso!", ""));

		return null;
	}

	public String imprimeContrato() {

		FacesContext context = FacesContext.getCurrentInstance();
		/*
		 * Referência iText - Gerador PDF
		 * http://www.dicas-l.com.br/arquivo/gerando_pdf_utilizando_java.php#.
		 * VGpT0_nF_h4
		 */

		Document doc = null;
		OutputStream os = null;
		try {
			/*
			 * Fonts Utilizadas no PDF
			 */
			Font titulo = new Font(FontFamily.HELVETICA, 12, Font.BOLD);
			Font subtitulo = new Font(FontFamily.HELVETICA, 12, Font.BOLD);
			Font subtituloIdent = new Font(FontFamily.HELVETICA, 12, Font.BOLD);
			Font destaque = new Font(FontFamily.HELVETICA, 10, Font.BOLD);

			TimeZone zone = TimeZone.getDefault();
			Locale locale = new Locale("pt", "BR");

			/*
			 * Formatadores de Data/Hora
			 */
			SimpleDateFormat sdfDataContrato = new SimpleDateFormat("dd/MMM/yyyy hh:mm:ss", locale);
			SimpleDateFormat sdfDataPagamento = new SimpleDateFormat("dd/MMM/yyyy", locale);
			SimpleDateFormat sdfDataArquivo = new SimpleDateFormat("dd-MMM-yyyy", locale);

			/*
			 * DAOs
			 */
			ParametrosDao pDao = new ParametrosDao();

			/*
			 * Instancia Calendário
			 */
			Calendar date = Calendar.getInstance(zone, locale);

			/*
			 * Configuração inicial do PDF - Cria o documento tamanho A4, margens de 2,54cm
			 */
			doc = new Document(PageSize.A4, 10, 10, 10, 10);
			this.pathContrato = pDao.findByFilter("nome", "LOCACAO_PATH_COBRANCA").get(0).getValorString();
			this.nomeContrato = sdfDataArquivo.format(date.getTime()) + " Contrato "
					+ this.objetoContratoCobranca.getNumeroContrato() + " - "
					+ this.objetoContratoCobranca.getPagador().getNome() + ".pdf";
			os = new FileOutputStream(this.pathContrato + this.nomeContrato);

			// Associa a stream de saída ao
			PdfWriter.getInstance(doc, os);

			// Abre o documento
			doc.open();

			Paragraph p1 = new Paragraph("CONTRATO DE COBRANÇA - Nº " + this.objetoContratoCobranca.getNumeroContrato(),
					titulo);
			p1.setAlignment(Element.ALIGN_CENTER);
			p1.setSpacingAfter(10);
			doc.add(p1);

			p1 = new Paragraph(
					"DATA DO CONTRATO - " + sdfDataContrato.format(this.objetoContratoCobranca.getDataContrato()));
			p1.setAlignment(Element.ALIGN_LEFT);
			doc.add(p1);

			p1 = new Paragraph("ENVOLVIDOS", subtituloIdent);
			p1.setAlignment(Element.ALIGN_LEFT);
			p1.setSpacingBefore(10);
			doc.add(p1);

			p1 = new Paragraph("PAGADOR - " + this.objetoContratoCobranca.getPagador().getNome(), subtitulo);
			p1.setAlignment(Element.ALIGN_LEFT);
			doc.add(p1);

			p1 = new Paragraph("RESPONSÁVEL - " + this.objetoContratoCobranca.getResponsavel().getNome(), subtitulo);
			p1.setAlignment(Element.ALIGN_LEFT);
			doc.add(p1);

			/* Dados Recebedor */
			p1 = new Paragraph("FAVORECIDO", subtitulo);
			p1.setAlignment(Element.ALIGN_LEFT);
			doc.add(p1);

			if (this.objetoContratoCobranca.getRecebedor().getConta() != null
					&& this.objetoContratoCobranca.getRecebedor().getAgencia() != null
					&& this.objetoContratoCobranca.getRecebedor().getBanco() != null) {
				if (!this.objetoContratoCobranca.getRecebedor().getConta().equals("")
						&& !this.objetoContratoCobranca.getRecebedor().getBanco().equals("")
						&& !this.objetoContratoCobranca.getRecebedor().getAgencia().equals("")) {

					p1 = new Paragraph("BANCO - " + this.objetoContratoCobranca.getRecebedor().getBanco());
					p1.setAlignment(Element.ALIGN_LEFT);
					doc.add(p1);

					p1 = new Paragraph("AG. " + this.objetoContratoCobranca.getRecebedor().getAgencia() + " C/C "
							+ this.objetoContratoCobranca.getRecebedor().getConta());
					p1.setAlignment(Element.ALIGN_LEFT);
					doc.add(p1);

					if (this.objetoContratoCobranca.getVlrRecebedor() != null) {
						p1 = new Paragraph("VALOR - R$ "
								+ this.objetoContratoCobranca.getVlrRecebedor().toString().replace(".", ","));
						p1.setAlignment(Element.ALIGN_LEFT);
						doc.add(p1);
					} else {
						p1 = new Paragraph("VALOR - R$ 0,00");
						p1.setAlignment(Element.ALIGN_LEFT);
						doc.add(p1);
					}
				}
			}

			if (this.objetoContratoCobranca.getRecebedor().getNomeCC() != null) {
				if (!this.objetoContratoCobranca.getRecebedor().getNomeCC().equals("")) {
					p1 = new Paragraph("FAVORECIDO - " + this.objetoContratoCobranca.getRecebedor().getNomeCC());
					p1.setAlignment(Element.ALIGN_LEFT);
					doc.add(p1);
				}
			}

			if (this.objetoContratoCobranca.getRecebedor().getCpfCC() != null) {
				if (!this.objetoContratoCobranca.getRecebedor().getCpfCC().equals("")) {
					p1 = new Paragraph("CPF - " + this.objetoContratoCobranca.getRecebedor().getCpfCC());
					p1.setAlignment(Element.ALIGN_LEFT);
					doc.add(p1);
				}
			}

			if (this.objetoContratoCobranca.getRecebedor().getCnpjCC() != null) {
				if (!this.objetoContratoCobranca.getRecebedor().getCnpjCC().equals("")) {
					p1 = new Paragraph("CNPJ - " + this.objetoContratoCobranca.getRecebedor().getCnpj());
					p1.setAlignment(Element.ALIGN_LEFT);
					doc.add(p1);
				}
			}

			if (this.objetoContratoCobranca.getRecebedor2() != null) {

				p1 = new Paragraph("FAVORECIDO 2 ", subtitulo);
				p1.setAlignment(Element.ALIGN_LEFT);
				doc.add(p1);

				if (this.objetoContratoCobranca.getRecebedor2().getConta() != null
						&& this.objetoContratoCobranca.getRecebedor2().getAgencia() != null
						&& this.objetoContratoCobranca.getRecebedor2().getBanco() != null) {
					if (!this.objetoContratoCobranca.getRecebedor2().getConta().equals("")
							&& !this.objetoContratoCobranca.getRecebedor2().getBanco().equals("")
							&& !this.objetoContratoCobranca.getRecebedor2().getAgencia().equals("")) {

						p1 = new Paragraph("BANCO - " + this.objetoContratoCobranca.getRecebedor2().getBanco());
						p1.setAlignment(Element.ALIGN_LEFT);
						doc.add(p1);

						p1 = new Paragraph("AG. " + this.objetoContratoCobranca.getRecebedor2().getAgencia() + " C/C "
								+ this.objetoContratoCobranca.getRecebedor2().getConta());
						p1.setAlignment(Element.ALIGN_LEFT);
						doc.add(p1);

						if (this.objetoContratoCobranca.getVlrRecebedor2() != null) {
							p1 = new Paragraph("VALOR - R$ "
									+ this.objetoContratoCobranca.getVlrRecebedor2().toString().replace(".", ","));
							p1.setAlignment(Element.ALIGN_LEFT);
							doc.add(p1);
						} else {
							p1 = new Paragraph("VALOR - R$ 0,00");
							p1.setAlignment(Element.ALIGN_LEFT);
							doc.add(p1);
						}
					}
				}

				if (this.objetoContratoCobranca.getRecebedor2().getNomeCC() != null) {
					if (!this.objetoContratoCobranca.getRecebedor2().getNomeCC().equals("")) {
						p1 = new Paragraph("FAVORECIDO - " + this.objetoContratoCobranca.getRecebedor2().getNomeCC());
						p1.setAlignment(Element.ALIGN_LEFT);
						doc.add(p1);
					}
				}

				if (this.objetoContratoCobranca.getRecebedor2().getCpfCC() != null) {
					if (!this.objetoContratoCobranca.getRecebedor2().getCpfCC().equals("")) {
						p1 = new Paragraph("CPF - " + this.objetoContratoCobranca.getRecebedor2().getCpfCC());
						p1.setAlignment(Element.ALIGN_LEFT);
						doc.add(p1);
					}
				}

				if (this.objetoContratoCobranca.getRecebedor2().getCnpj() != null) {
					if (!this.objetoContratoCobranca.getRecebedor2().getCnpj().equals("")) {
						p1 = new Paragraph("CNPJ - " + this.objetoContratoCobranca.getRecebedor2().getCnpj());
						p1.setAlignment(Element.ALIGN_LEFT);
						doc.add(p1);
					}
				}
			}

			if (this.objetoContratoCobranca.getRecebedor3() != null) {

				p1 = new Paragraph("FAVORECIDO 3 ", subtitulo);
				p1.setAlignment(Element.ALIGN_LEFT);
				doc.add(p1);

				if (this.objetoContratoCobranca.getRecebedor3().getConta() != null
						&& this.objetoContratoCobranca.getRecebedor3().getAgencia() != null
						&& this.objetoContratoCobranca.getRecebedor3().getBanco() != null) {
					if (!this.objetoContratoCobranca.getRecebedor3().getConta().equals("")
							&& !this.objetoContratoCobranca.getRecebedor3().getBanco().equals("")
							&& !this.objetoContratoCobranca.getRecebedor3().getAgencia().equals("")) {

						p1 = new Paragraph("BANCO - " + this.objetoContratoCobranca.getRecebedor3().getBanco());
						p1.setAlignment(Element.ALIGN_LEFT);
						doc.add(p1);

						p1 = new Paragraph("AG. " + this.objetoContratoCobranca.getRecebedor3().getAgencia() + " C/C "
								+ this.objetoContratoCobranca.getRecebedor3().getConta());
						p1.setAlignment(Element.ALIGN_LEFT);
						doc.add(p1);

						if (this.objetoContratoCobranca.getVlrRecebedor3() != null) {
							p1 = new Paragraph("VALOR - R$ "
									+ this.objetoContratoCobranca.getVlrRecebedor3().toString().replace(".", ","));
							p1.setAlignment(Element.ALIGN_LEFT);
							doc.add(p1);
						} else {
							p1 = new Paragraph("VALOR - R$ 0,00");
							p1.setAlignment(Element.ALIGN_LEFT);
							doc.add(p1);
						}
					}
				}

				if (this.objetoContratoCobranca.getRecebedor3().getNomeCC() != null) {
					if (!this.objetoContratoCobranca.getRecebedor3().getNomeCC().equals("")) {
						p1 = new Paragraph("FAVORECIDO - " + this.objetoContratoCobranca.getRecebedor3().getNomeCC());
						p1.setAlignment(Element.ALIGN_LEFT);
						doc.add(p1);
					}
				}

				if (this.objetoContratoCobranca.getRecebedor3().getCpfCC() != null) {
					if (!this.objetoContratoCobranca.getRecebedor3().getCpfCC().equals("")) {
						p1 = new Paragraph("CPF - " + this.objetoContratoCobranca.getRecebedor3().getCpfCC());
						p1.setAlignment(Element.ALIGN_LEFT);
						doc.add(p1);
					}
				}

				if (this.objetoContratoCobranca.getRecebedor3().getCnpj() != null) {
					if (!this.objetoContratoCobranca.getRecebedor3().getCnpj().equals("")) {
						p1 = new Paragraph("CNPJ - " + this.objetoContratoCobranca.getRecebedor3().getCnpj());
						p1.setAlignment(Element.ALIGN_LEFT);
						doc.add(p1);
					}
				}
			}

			if (this.objetoContratoCobranca.getRecebedor4() != null) {

				p1 = new Paragraph("FAVORECIDO 4 ", subtitulo);
				p1.setAlignment(Element.ALIGN_LEFT);
				doc.add(p1);

				if (this.objetoContratoCobranca.getRecebedor4().getConta() != null
						&& this.objetoContratoCobranca.getRecebedor4().getAgencia() != null
						&& this.objetoContratoCobranca.getRecebedor4().getBanco() != null) {
					if (!this.objetoContratoCobranca.getRecebedor4().getConta().equals("")
							&& !this.objetoContratoCobranca.getRecebedor4().getBanco().equals("")
							&& !this.objetoContratoCobranca.getRecebedor4().getAgencia().equals("")) {

						p1 = new Paragraph("BANCO - " + this.objetoContratoCobranca.getRecebedor4().getBanco());
						p1.setAlignment(Element.ALIGN_LEFT);
						doc.add(p1);

						p1 = new Paragraph("AG. " + this.objetoContratoCobranca.getRecebedor4().getAgencia() + " C/C "
								+ this.objetoContratoCobranca.getRecebedor4().getConta());
						p1.setAlignment(Element.ALIGN_LEFT);
						doc.add(p1);

						if (this.objetoContratoCobranca.getVlrRecebedor4() != null) {
							p1 = new Paragraph("VALOR - R$ "
									+ this.objetoContratoCobranca.getVlrRecebedor4().toString().replace(".", ","));
							p1.setAlignment(Element.ALIGN_LEFT);
							doc.add(p1);
						} else {
							p1 = new Paragraph("VALOR - R$ 0,00");
							p1.setAlignment(Element.ALIGN_LEFT);
							doc.add(p1);
						}
					}
				}

				if (this.objetoContratoCobranca.getRecebedor4().getNomeCC() != null) {
					if (!this.objetoContratoCobranca.getRecebedor4().getNomeCC().equals("")) {
						p1 = new Paragraph("FAVORECIDO - " + this.objetoContratoCobranca.getRecebedor4().getNomeCC());
						p1.setAlignment(Element.ALIGN_LEFT);
						doc.add(p1);
					}
				}

				if (this.objetoContratoCobranca.getRecebedor4().getCpfCC() != null) {
					if (!this.objetoContratoCobranca.getRecebedor4().getCpfCC().equals("")) {
						p1 = new Paragraph("CPF - " + this.objetoContratoCobranca.getRecebedor4().getCpfCC());
						p1.setAlignment(Element.ALIGN_LEFT);
						doc.add(p1);
					}
				}

				if (this.objetoContratoCobranca.getRecebedor4().getCnpj() != null) {
					if (!this.objetoContratoCobranca.getRecebedor4().getCnpj().equals("")) {
						p1 = new Paragraph("CNPJ - " + this.objetoContratoCobranca.getRecebedor4().getCnpj());
						p1.setAlignment(Element.ALIGN_LEFT);
						doc.add(p1);
					}
				}
			}

			if (this.objetoContratoCobranca.getRecebedor5() != null) {

				p1 = new Paragraph("FAVORECIDO 5 ", subtitulo);
				p1.setAlignment(Element.ALIGN_LEFT);
				doc.add(p1);

				if (this.objetoContratoCobranca.getRecebedor5().getConta() != null
						&& this.objetoContratoCobranca.getRecebedor5().getAgencia() != null
						&& this.objetoContratoCobranca.getRecebedor5().getBanco() != null) {
					if (!this.objetoContratoCobranca.getRecebedor5().getConta().equals("")
							&& !this.objetoContratoCobranca.getRecebedor5().getBanco().equals("")
							&& !this.objetoContratoCobranca.getRecebedor5().getAgencia().equals("")) {

						p1 = new Paragraph("BANCO - " + this.objetoContratoCobranca.getRecebedor5().getBanco());
						p1.setAlignment(Element.ALIGN_LEFT);
						doc.add(p1);

						p1 = new Paragraph("AG. " + this.objetoContratoCobranca.getRecebedor5().getAgencia() + " C/C "
								+ this.objetoContratoCobranca.getRecebedor5().getConta());
						p1.setAlignment(Element.ALIGN_LEFT);
						doc.add(p1);

						if (this.objetoContratoCobranca.getVlrRecebedor5() != null) {
							p1 = new Paragraph("VALOR - R$ "
									+ this.objetoContratoCobranca.getVlrRecebedor5().toString().replace(".", ","));
							p1.setAlignment(Element.ALIGN_LEFT);
							doc.add(p1);
						} else {
							p1 = new Paragraph("VALOR - R$ 0,00");
							p1.setAlignment(Element.ALIGN_LEFT);
							doc.add(p1);
						}
					}
				}

				if (this.objetoContratoCobranca.getRecebedor5().getNomeCC() != null) {
					if (!this.objetoContratoCobranca.getRecebedor5().getNomeCC().equals("")) {
						p1 = new Paragraph("FAVORECIDO - " + this.objetoContratoCobranca.getRecebedor5().getNomeCC());
						p1.setAlignment(Element.ALIGN_LEFT);
						doc.add(p1);
					}
				}

				if (this.objetoContratoCobranca.getRecebedor5().getCpfCC() != null) {
					if (!this.objetoContratoCobranca.getRecebedor5().getCpfCC().equals("")) {
						p1 = new Paragraph("CPF - " + this.objetoContratoCobranca.getRecebedor5().getCpfCC());
						p1.setAlignment(Element.ALIGN_LEFT);
						doc.add(p1);
					}
				}

				if (this.objetoContratoCobranca.getRecebedor5().getCnpj() != null) {
					if (!this.objetoContratoCobranca.getRecebedor5().getCnpj().equals("")) {
						p1 = new Paragraph("CNPJ - " + this.objetoContratoCobranca.getRecebedor5().getCnpj());
						p1.setAlignment(Element.ALIGN_LEFT);
						doc.add(p1);
					}
				}
			}

			if (this.objetoContratoCobranca.getRecebedor6() != null) {

				p1 = new Paragraph("FAVORECIDO 6 ", subtitulo);
				p1.setAlignment(Element.ALIGN_LEFT);
				doc.add(p1);

				if (this.objetoContratoCobranca.getRecebedor6().getConta() != null
						&& this.objetoContratoCobranca.getRecebedor6().getAgencia() != null
						&& this.objetoContratoCobranca.getRecebedor6().getBanco() != null) {
					if (!this.objetoContratoCobranca.getRecebedor6().getConta().equals("")
							&& !this.objetoContratoCobranca.getRecebedor6().getBanco().equals("")
							&& !this.objetoContratoCobranca.getRecebedor6().getAgencia().equals("")) {

						p1 = new Paragraph("BANCO - " + this.objetoContratoCobranca.getRecebedor6().getBanco());
						p1.setAlignment(Element.ALIGN_LEFT);
						doc.add(p1);

						p1 = new Paragraph("AG. " + this.objetoContratoCobranca.getRecebedor6().getAgencia() + " C/C "
								+ this.objetoContratoCobranca.getRecebedor6().getConta());
						p1.setAlignment(Element.ALIGN_LEFT);
						doc.add(p1);

						if (this.objetoContratoCobranca.getVlrRecebedor6() != null) {
							p1 = new Paragraph("VALOR - R$ "
									+ this.objetoContratoCobranca.getVlrRecebedor6().toString().replace(".", ","));
							p1.setAlignment(Element.ALIGN_LEFT);
							doc.add(p1);
						} else {
							p1 = new Paragraph("VALOR - R$ 0,00");
							p1.setAlignment(Element.ALIGN_LEFT);
							doc.add(p1);
						}
					}
				}

				if (this.objetoContratoCobranca.getRecebedor6().getNomeCC() != null) {
					if (!this.objetoContratoCobranca.getRecebedor6().getNomeCC().equals("")) {
						p1 = new Paragraph("FAVORECIDO - " + this.objetoContratoCobranca.getRecebedor6().getNomeCC());
						p1.setAlignment(Element.ALIGN_LEFT);
						doc.add(p1);
					}
				}

				if (this.objetoContratoCobranca.getRecebedor6().getCpfCC() != null) {
					if (!this.objetoContratoCobranca.getRecebedor6().getCpfCC().equals("")) {
						p1 = new Paragraph("CPF - " + this.objetoContratoCobranca.getRecebedor6().getCpfCC());
						p1.setAlignment(Element.ALIGN_LEFT);
						doc.add(p1);
					}
				}

				if (this.objetoContratoCobranca.getRecebedor6().getCnpj() != null) {
					if (!this.objetoContratoCobranca.getRecebedor6().getCnpj().equals("")) {
						p1 = new Paragraph("CNPJ - " + this.objetoContratoCobranca.getRecebedor6().getCnpj());
						p1.setAlignment(Element.ALIGN_LEFT);
						doc.add(p1);
					}
				}
			}

			if (this.objetoContratoCobranca.getRecebedor7() != null) {

				p1 = new Paragraph("FAVORECIDO 7 ", subtitulo);
				p1.setAlignment(Element.ALIGN_LEFT);
				doc.add(p1);

				if (this.objetoContratoCobranca.getRecebedor7().getConta() != null
						&& this.objetoContratoCobranca.getRecebedor7().getAgencia() != null
						&& this.objetoContratoCobranca.getRecebedor7().getBanco() != null) {
					if (!this.objetoContratoCobranca.getRecebedor7().getConta().equals("")
							&& !this.objetoContratoCobranca.getRecebedor7().getBanco().equals("")
							&& !this.objetoContratoCobranca.getRecebedor7().getAgencia().equals("")) {

						p1 = new Paragraph("BANCO - " + this.objetoContratoCobranca.getRecebedor7().getBanco());
						p1.setAlignment(Element.ALIGN_LEFT);
						doc.add(p1);

						p1 = new Paragraph("AG. " + this.objetoContratoCobranca.getRecebedor7().getAgencia() + " C/C "
								+ this.objetoContratoCobranca.getRecebedor7().getConta());
						p1.setAlignment(Element.ALIGN_LEFT);
						doc.add(p1);

						if (this.objetoContratoCobranca.getVlrRecebedor6() != null) {
							p1 = new Paragraph("VALOR - R$ "
									+ this.objetoContratoCobranca.getVlrRecebedor7().toString().replace(".", ","));
							p1.setAlignment(Element.ALIGN_LEFT);
							doc.add(p1);
						} else {
							p1 = new Paragraph("VALOR - R$ 0,00");
							p1.setAlignment(Element.ALIGN_LEFT);
							doc.add(p1);
						}
					}
				}

				if (this.objetoContratoCobranca.getRecebedor7().getNomeCC() != null) {
					if (!this.objetoContratoCobranca.getRecebedor7().getNomeCC().equals("")) {
						p1 = new Paragraph("FAVORECIDO - " + this.objetoContratoCobranca.getRecebedor7().getNomeCC());
						p1.setAlignment(Element.ALIGN_LEFT);
						doc.add(p1);
					}
				}

				if (this.objetoContratoCobranca.getRecebedor7().getCpfCC() != null) {
					if (!this.objetoContratoCobranca.getRecebedor7().getCpfCC().equals("")) {
						p1 = new Paragraph("CPF - " + this.objetoContratoCobranca.getRecebedor7().getCpfCC());
						p1.setAlignment(Element.ALIGN_LEFT);
						doc.add(p1);
					}
				}

				if (this.objetoContratoCobranca.getRecebedor7().getCnpj() != null) {
					if (!this.objetoContratoCobranca.getRecebedor7().getCnpj().equals("")) {
						p1 = new Paragraph("CNPJ - " + this.objetoContratoCobranca.getRecebedor7().getCnpj());
						p1.setAlignment(Element.ALIGN_LEFT);
						doc.add(p1);
					}
				}
			}

			if (this.objetoContratoCobranca.getRecebedor8() != null) {

				p1 = new Paragraph("FAVORECIDO 8 ", subtitulo);
				p1.setAlignment(Element.ALIGN_LEFT);
				doc.add(p1);

				if (this.objetoContratoCobranca.getRecebedor8().getConta() != null
						&& this.objetoContratoCobranca.getRecebedor8().getAgencia() != null
						&& this.objetoContratoCobranca.getRecebedor8().getBanco() != null) {
					if (!this.objetoContratoCobranca.getRecebedor8().getConta().equals("")
							&& !this.objetoContratoCobranca.getRecebedor8().getBanco().equals("")
							&& !this.objetoContratoCobranca.getRecebedor8().getAgencia().equals("")) {

						p1 = new Paragraph("BANCO - " + this.objetoContratoCobranca.getRecebedor8().getBanco());
						p1.setAlignment(Element.ALIGN_LEFT);
						doc.add(p1);

						p1 = new Paragraph("AG. " + this.objetoContratoCobranca.getRecebedor8().getAgencia() + " C/C "
								+ this.objetoContratoCobranca.getRecebedor8().getConta());
						p1.setAlignment(Element.ALIGN_LEFT);
						doc.add(p1);

						if (this.objetoContratoCobranca.getVlrRecebedor8() != null) {
							p1 = new Paragraph("VALOR - R$ "
									+ this.objetoContratoCobranca.getVlrRecebedor8().toString().replace(".", ","));
							p1.setAlignment(Element.ALIGN_LEFT);
							doc.add(p1);
						} else {
							p1 = new Paragraph("VALOR - R$ 0,00");
							p1.setAlignment(Element.ALIGN_LEFT);
							doc.add(p1);
						}
					}
				}

				if (this.objetoContratoCobranca.getRecebedor8().getNomeCC() != null) {
					if (!this.objetoContratoCobranca.getRecebedor8().getNomeCC().equals("")) {
						p1 = new Paragraph("FAVORECIDO - " + this.objetoContratoCobranca.getRecebedor8().getNomeCC());
						p1.setAlignment(Element.ALIGN_LEFT);
						doc.add(p1);
					}
				}

				if (this.objetoContratoCobranca.getRecebedor8().getCpfCC() != null) {
					if (!this.objetoContratoCobranca.getRecebedor8().getCpfCC().equals("")) {
						p1 = new Paragraph("CPF - " + this.objetoContratoCobranca.getRecebedor8().getCpfCC());
						p1.setAlignment(Element.ALIGN_LEFT);
						doc.add(p1);
					}
				}

				if (this.objetoContratoCobranca.getRecebedor8().getCnpj() != null) {
					if (!this.objetoContratoCobranca.getRecebedor8().getCnpj().equals("")) {
						p1 = new Paragraph("CNPJ - " + this.objetoContratoCobranca.getRecebedor8().getCnpj());
						p1.setAlignment(Element.ALIGN_LEFT);
						doc.add(p1);
					}
				}
			}

			if (this.objetoContratoCobranca.getRecebedor9() != null) {

				p1 = new Paragraph("FAVORECIDO 9 ", subtitulo);
				p1.setAlignment(Element.ALIGN_LEFT);
				doc.add(p1);

				if (this.objetoContratoCobranca.getRecebedor9().getConta() != null
						&& this.objetoContratoCobranca.getRecebedor9().getAgencia() != null
						&& this.objetoContratoCobranca.getRecebedor9().getBanco() != null) {
					if (!this.objetoContratoCobranca.getRecebedor9().getConta().equals("")
							&& !this.objetoContratoCobranca.getRecebedor9().getBanco().equals("")
							&& !this.objetoContratoCobranca.getRecebedor9().getAgencia().equals("")) {

						p1 = new Paragraph("BANCO - " + this.objetoContratoCobranca.getRecebedor9().getBanco());
						p1.setAlignment(Element.ALIGN_LEFT);
						doc.add(p1);

						p1 = new Paragraph("AG. " + this.objetoContratoCobranca.getRecebedor9().getAgencia() + " C/C "
								+ this.objetoContratoCobranca.getRecebedor9().getConta());
						p1.setAlignment(Element.ALIGN_LEFT);
						doc.add(p1);

						if (this.objetoContratoCobranca.getVlrRecebedor9() != null) {
							p1 = new Paragraph("VALOR - R$ "
									+ this.objetoContratoCobranca.getVlrRecebedor9().toString().replace(".", ","));
							p1.setAlignment(Element.ALIGN_LEFT);
							doc.add(p1);
						} else {
							p1 = new Paragraph("VALOR - R$ 0,00");
							p1.setAlignment(Element.ALIGN_LEFT);
							doc.add(p1);
						}
					}
				}

				if (this.objetoContratoCobranca.getRecebedor9().getNomeCC() != null) {
					if (!this.objetoContratoCobranca.getRecebedor9().getNomeCC().equals("")) {
						p1 = new Paragraph("FAVORECIDO - " + this.objetoContratoCobranca.getRecebedor9().getNomeCC());
						p1.setAlignment(Element.ALIGN_LEFT);
						doc.add(p1);
					}
				}

				if (this.objetoContratoCobranca.getRecebedor9().getCpfCC() != null) {
					if (!this.objetoContratoCobranca.getRecebedor9().getCpfCC().equals("")) {
						p1 = new Paragraph("CPF - " + this.objetoContratoCobranca.getRecebedor9().getCpfCC());
						p1.setAlignment(Element.ALIGN_LEFT);
						doc.add(p1);
					}
				}

				if (this.objetoContratoCobranca.getRecebedor9().getCnpj() != null) {
					if (!this.objetoContratoCobranca.getRecebedor9().getCnpj().equals("")) {
						p1 = new Paragraph("CNPJ - " + this.objetoContratoCobranca.getRecebedor9().getCnpj());
						p1.setAlignment(Element.ALIGN_LEFT);
						doc.add(p1);
					}
				}
			}

			if (this.objetoContratoCobranca.getRecebedor10() != null) {

				p1 = new Paragraph("FAVORECIDO 10 ", subtitulo);
				p1.setAlignment(Element.ALIGN_LEFT);
				doc.add(p1);

				if (this.objetoContratoCobranca.getRecebedor10().getConta() != null
						&& this.objetoContratoCobranca.getRecebedor10().getAgencia() != null
						&& this.objetoContratoCobranca.getRecebedor10().getBanco() != null) {
					if (!this.objetoContratoCobranca.getRecebedor10().getConta().equals("")
							&& !this.objetoContratoCobranca.getRecebedor10().getBanco().equals("")
							&& !this.objetoContratoCobranca.getRecebedor10().getAgencia().equals("")) {

						p1 = new Paragraph("BANCO - " + this.objetoContratoCobranca.getRecebedor10().getBanco());
						p1.setAlignment(Element.ALIGN_LEFT);
						doc.add(p1);

						p1 = new Paragraph("AG. " + this.objetoContratoCobranca.getRecebedor10().getAgencia() + " C/C "
								+ this.objetoContratoCobranca.getRecebedor10().getConta());
						p1.setAlignment(Element.ALIGN_LEFT);
						doc.add(p1);

						if (this.objetoContratoCobranca.getVlrRecebedor10() != null) {
							p1 = new Paragraph("VALOR - R$ "
									+ this.objetoContratoCobranca.getVlrRecebedor10().toString().replace(".", ","));
							p1.setAlignment(Element.ALIGN_LEFT);
							doc.add(p1);
						} else {
							p1 = new Paragraph("VALOR - R$ 0,00");
							p1.setAlignment(Element.ALIGN_LEFT);
							doc.add(p1);
						}
					}
				}

				if (this.objetoContratoCobranca.getRecebedor10().getNomeCC() != null) {
					if (!this.objetoContratoCobranca.getRecebedor10().getNomeCC().equals("")) {
						p1 = new Paragraph("FAVORECIDO - " + this.objetoContratoCobranca.getRecebedor10().getNomeCC());
						p1.setAlignment(Element.ALIGN_LEFT);
						doc.add(p1);
					}
				}

				if (this.objetoContratoCobranca.getRecebedor10().getCpfCC() != null) {
					if (!this.objetoContratoCobranca.getRecebedor10().getCpfCC().equals("")) {
						p1 = new Paragraph("CPF - " + this.objetoContratoCobranca.getRecebedor10().getCpfCC());
						p1.setAlignment(Element.ALIGN_LEFT);
						doc.add(p1);
					}
				}

				if (this.objetoContratoCobranca.getRecebedor10().getCnpj() != null) {
					if (!this.objetoContratoCobranca.getRecebedor10().getCnpj().equals("")) {
						p1 = new Paragraph("CNPJ - " + this.objetoContratoCobranca.getRecebedor10().getCnpj());
						p1.setAlignment(Element.ALIGN_LEFT);
						doc.add(p1);
					}
				}
			}

			p1 = new Paragraph("DADOS DO CONTRATO", subtituloIdent);
			p1.setSpacingBefore(10);
			p1.setAlignment(Element.ALIGN_LEFT);
			doc.add(p1);

			p1 = new Paragraph("IMÓVEL - " + this.objetoContratoCobranca.getImovel().getNome());
			p1.setAlignment(Element.ALIGN_LEFT);
			doc.add(p1);

			p1 = new Paragraph("VALOR DA ÚLTIMA NP - R$ "
					+ this.objetoContratoCobranca.getVlrInvestimento().toString().replace(".", ","));
			p1.setAlignment(Element.ALIGN_LEFT);
			doc.add(p1);

			p1 = new Paragraph("TAXA DE ADMINISTRAÇÃO - R$ "
					+ this.objetoContratoCobranca.getTxAdministracao().toString().replace(".", ","));
			p1.setAlignment(Element.ALIGN_LEFT);
			doc.add(p1);

			p1 = new Paragraph(
					"TAXA DE JUROS - " + this.objetoContratoCobranca.getTxJuros().toString().replace(".", ",") + " %");
			p1.setAlignment(Element.ALIGN_LEFT);
			doc.add(p1);

			p1 = new Paragraph("FORMA DE PAGAMENTO", subtituloIdent);
			p1.setSpacingBefore(10);
			p1.setAlignment(Element.ALIGN_LEFT);
			doc.add(p1);

			p1 = new Paragraph("DATA INICIO - " + sdfDataPagamento.format(this.objetoContratoCobranca.getDataInicio()));
			p1.setAlignment(Element.ALIGN_LEFT);
			doc.add(p1);

			p1 = new Paragraph("VALOR DA PARCELA - R$ "
					+ this.objetoContratoCobranca.getVlrParcela().toString().replace(".", ","));
			p1.setAlignment(Element.ALIGN_LEFT);
			doc.add(p1);

			p1 = new Paragraph("VALOR DO INVESTIDOR - R$ " + this.getVlrRepasse().toString().replace(".", ","));
			p1.setAlignment(Element.ALIGN_LEFT);
			doc.add(p1);

			p1 = new Paragraph("VALOR DA ADMINISTRAÇÃO - R$ " + this.getVlrRetencao().toString().replace(".", ","));
			p1.setAlignment(Element.ALIGN_LEFT);
			doc.add(p1);

			if (this.getVlrComissao() != null) {
				p1 = new Paragraph("VALOR DO REPASSE - R$ " + this.getVlrComissao().toString().replace(".", ","));
				p1.setAlignment(Element.ALIGN_LEFT);
				doc.add(p1);
			}

			if (this.objetoContratoCobranca.isGeraParcelaFinal()) {
				p1 = new Paragraph("FORMA DE PAGAMENTO - PARCELA FINAL", subtituloIdent);
				p1.setSpacingBefore(10);
				p1.setAlignment(Element.ALIGN_LEFT);
				doc.add(p1);

				p1 = new Paragraph(
						"VALOR DA PARCELA - R$ " + this.objetoContratoCobranca.getListContratoCobrancaDetalhes()
								.get(this.objetoContratoCobranca.getListContratoCobrancaDetalhes().size() - 1)
								.getVlrParcela().toString().replace(".", ","));
				p1.setAlignment(Element.ALIGN_LEFT);
				doc.add(p1);

				p1 = new Paragraph(
						"VALOR DO INVESTIDOR - R$ " + this.objetoContratoCobranca.getListContratoCobrancaDetalhes()
								.get(this.objetoContratoCobranca.getListContratoCobrancaDetalhes().size() - 1)
								.getVlrRepasse().toString().replace(".", ","));
				p1.setAlignment(Element.ALIGN_LEFT);
				doc.add(p1);

				p1 = new Paragraph(
						"VALOR DA ADMINISTRAÇÃO - R$ " + this.objetoContratoCobranca.getListContratoCobrancaDetalhes()
								.get(this.objetoContratoCobranca.getListContratoCobrancaDetalhes().size() - 1)
								.getVlrRetencao().toString().replace(".", ","));
				p1.setAlignment(Element.ALIGN_LEFT);
				doc.add(p1);

				if (this.getVlrComissao() != null) {
					p1 = new Paragraph(
							"VALOR DO REPASSE - R$ " + this.objetoContratoCobranca.getListContratoCobrancaDetalhes()
									.get(this.objetoContratoCobranca.getListContratoCobrancaDetalhes().size() - 1)
									.getVlrComissao().toString().replace(".", ","));
					p1.setAlignment(Element.ALIGN_LEFT);
					doc.add(p1);
				}

				if (this.objetoContratoCobranca.getRecebedorParcelaFinal1() != null) {

					p1 = new Paragraph("RECEBEDOR PARCELA FINAL ", subtitulo);
					p1.setAlignment(Element.ALIGN_LEFT);
					p1.setSpacingBefore(10);
					doc.add(p1);

					if (this.objetoContratoCobranca.getRecebedorParcelaFinal1().getConta() != null
							&& this.objetoContratoCobranca.getRecebedorParcelaFinal1().getAgencia() != null
							&& this.objetoContratoCobranca.getRecebedorParcelaFinal1().getBanco() != null) {
						if (!this.objetoContratoCobranca.getRecebedorParcelaFinal1().getConta().equals("")
								&& !this.objetoContratoCobranca.getRecebedorParcelaFinal1().getBanco().equals("")
								&& !this.objetoContratoCobranca.getRecebedorParcelaFinal1().getAgencia().equals("")) {

							p1 = new Paragraph(
									"BANCO - " + this.objetoContratoCobranca.getRecebedorParcelaFinal1().getBanco());
							p1.setAlignment(Element.ALIGN_LEFT);
							doc.add(p1);

							p1 = new Paragraph("AG. "
									+ this.objetoContratoCobranca.getRecebedorParcelaFinal1().getAgencia() + " C/C "
									+ this.objetoContratoCobranca.getRecebedorParcelaFinal1().getConta());
							p1.setAlignment(Element.ALIGN_LEFT);
							doc.add(p1);

							if (this.objetoContratoCobranca.getRecebedorParcelaFinal1() != null) {
								p1 = new Paragraph("VALOR - R$ " + this.objetoContratoCobranca.getVlrFinalRecebedor1()
										.toString().replace(".", ","));
								p1.setAlignment(Element.ALIGN_LEFT);
								doc.add(p1);
							} else {
								p1 = new Paragraph("VALOR - R$ 0,00");
								p1.setAlignment(Element.ALIGN_LEFT);
								doc.add(p1);
							}
						}
					}

					if (this.objetoContratoCobranca.getRecebedorParcelaFinal1().getNomeCC() != null) {
						if (!this.objetoContratoCobranca.getRecebedorParcelaFinal1().getNomeCC().equals("")) {
							p1 = new Paragraph("FAVORECIDO - "
									+ this.objetoContratoCobranca.getRecebedorParcelaFinal1().getNomeCC());
							p1.setAlignment(Element.ALIGN_LEFT);
							doc.add(p1);
						}
					}

					if (this.objetoContratoCobranca.getRecebedorParcelaFinal1().getCpfCC() != null) {
						if (!this.objetoContratoCobranca.getRecebedorParcelaFinal1().getCpfCC().equals("")) {
							p1 = new Paragraph(
									"CPF - " + this.objetoContratoCobranca.getRecebedorParcelaFinal1().getCpfCC());
							p1.setAlignment(Element.ALIGN_LEFT);
							doc.add(p1);
						}
					}

					if (this.objetoContratoCobranca.getRecebedorParcelaFinal1().getCnpj() != null) {
						if (!this.objetoContratoCobranca.getRecebedorParcelaFinal1().getCnpj().equals("")) {
							p1 = new Paragraph(
									"CNPJ - " + this.objetoContratoCobranca.getRecebedorParcelaFinal1().getCnpj());
							p1.setAlignment(Element.ALIGN_LEFT);
							doc.add(p1);
						}
					}
				}

				if (this.objetoContratoCobranca.getRecebedorParcelaFinal2() != null) {

					p1 = new Paragraph("RECEBEDOR PARCELA FINAL ", subtitulo);
					p1.setAlignment(Element.ALIGN_LEFT);
					p1.setSpacingBefore(10);
					doc.add(p1);

					if (this.objetoContratoCobranca.getRecebedorParcelaFinal2().getConta() != null
							&& this.objetoContratoCobranca.getRecebedorParcelaFinal2().getAgencia() != null
							&& this.objetoContratoCobranca.getRecebedorParcelaFinal2().getBanco() != null) {
						if (!this.objetoContratoCobranca.getRecebedorParcelaFinal2().getConta().equals("")
								&& !this.objetoContratoCobranca.getRecebedorParcelaFinal2().getBanco().equals("")
								&& !this.objetoContratoCobranca.getRecebedorParcelaFinal2().getAgencia().equals("")) {

							p1 = new Paragraph(
									"BANCO - " + this.objetoContratoCobranca.getRecebedorParcelaFinal2().getBanco());
							p1.setAlignment(Element.ALIGN_LEFT);
							doc.add(p1);

							p1 = new Paragraph("AG. "
									+ this.objetoContratoCobranca.getRecebedorParcelaFinal2().getAgencia() + " C/C "
									+ this.objetoContratoCobranca.getRecebedorParcelaFinal2().getConta());
							p1.setAlignment(Element.ALIGN_LEFT);
							doc.add(p1);

							if (this.objetoContratoCobranca.getRecebedorParcelaFinal2() != null) {
								p1 = new Paragraph("VALOR - R$ " + this.objetoContratoCobranca.getVlrFinalRecebedor2()
										.toString().replace(".", ","));
								p1.setAlignment(Element.ALIGN_LEFT);
								doc.add(p1);
							} else {
								p1 = new Paragraph("VALOR - R$ 0,00");
								p1.setAlignment(Element.ALIGN_LEFT);
								doc.add(p1);
							}
						}
					}

					if (this.objetoContratoCobranca.getRecebedorParcelaFinal2().getNomeCC() != null) {
						if (!this.objetoContratoCobranca.getRecebedorParcelaFinal2().getNomeCC().equals("")) {
							p1 = new Paragraph("FAVORECIDO - "
									+ this.objetoContratoCobranca.getRecebedorParcelaFinal2().getNomeCC());
							p1.setAlignment(Element.ALIGN_LEFT);
							p1.setSpacingBefore(10);
							doc.add(p1);
						}
					}

					if (this.objetoContratoCobranca.getRecebedorParcelaFinal2().getCpfCC() != null) {
						if (!this.objetoContratoCobranca.getRecebedorParcelaFinal2().getCpfCC().equals("")) {
							p1 = new Paragraph(
									"CPF - " + this.objetoContratoCobranca.getRecebedorParcelaFinal2().getCpfCC());
							p1.setAlignment(Element.ALIGN_LEFT);
							doc.add(p1);
						}
					}

					if (this.objetoContratoCobranca.getRecebedorParcelaFinal2().getCnpj() != null) {
						if (!this.objetoContratoCobranca.getRecebedorParcelaFinal2().getCnpj().equals("")) {
							p1 = new Paragraph(
									"CNPJ - " + this.objetoContratoCobranca.getRecebedorParcelaFinal2().getCnpj());
							p1.setAlignment(Element.ALIGN_LEFT);
							doc.add(p1);
						}
					}
				}

				if (this.objetoContratoCobranca.getRecebedorParcelaFinal3() != null) {

					p1 = new Paragraph("RECEBEDOR PARCELA FINAL ", subtitulo);
					p1.setAlignment(Element.ALIGN_LEFT);
					p1.setSpacingBefore(10);
					doc.add(p1);

					if (this.objetoContratoCobranca.getRecebedorParcelaFinal3().getConta() != null
							&& this.objetoContratoCobranca.getRecebedorParcelaFinal3().getAgencia() != null
							&& this.objetoContratoCobranca.getRecebedorParcelaFinal3().getBanco() != null) {
						if (!this.objetoContratoCobranca.getRecebedorParcelaFinal3().getConta().equals("")
								&& !this.objetoContratoCobranca.getRecebedorParcelaFinal3().getBanco().equals("")
								&& !this.objetoContratoCobranca.getRecebedorParcelaFinal3().getAgencia().equals("")) {

							p1 = new Paragraph(
									"BANCO - " + this.objetoContratoCobranca.getRecebedorParcelaFinal3().getBanco());
							p1.setAlignment(Element.ALIGN_LEFT);
							doc.add(p1);

							p1 = new Paragraph("AG. "
									+ this.objetoContratoCobranca.getRecebedorParcelaFinal3().getAgencia() + " C/C "
									+ this.objetoContratoCobranca.getRecebedorParcelaFinal3().getConta());
							p1.setAlignment(Element.ALIGN_LEFT);
							doc.add(p1);

							if (this.objetoContratoCobranca.getRecebedorParcelaFinal3() != null) {
								p1 = new Paragraph("VALOR - R$ " + this.objetoContratoCobranca.getVlrFinalRecebedor3()
										.toString().replace(".", ","));
								p1.setAlignment(Element.ALIGN_LEFT);
								doc.add(p1);
							} else {
								p1 = new Paragraph("VALOR - R$ 0,00");
								p1.setAlignment(Element.ALIGN_LEFT);
								doc.add(p1);
							}
						}
					}

					if (this.objetoContratoCobranca.getRecebedorParcelaFinal3().getNomeCC() != null) {
						if (!this.objetoContratoCobranca.getRecebedorParcelaFinal3().getNomeCC().equals("")) {
							p1 = new Paragraph("FAVORECIDO - "
									+ this.objetoContratoCobranca.getRecebedorParcelaFinal3().getNomeCC());
							p1.setAlignment(Element.ALIGN_LEFT);
							doc.add(p1);
						}
					}

					if (this.objetoContratoCobranca.getRecebedorParcelaFinal3().getCpfCC() != null) {
						if (!this.objetoContratoCobranca.getRecebedorParcelaFinal3().getCpfCC().equals("")) {
							p1 = new Paragraph(
									"CPF - " + this.objetoContratoCobranca.getRecebedorParcelaFinal3().getCpfCC());
							p1.setAlignment(Element.ALIGN_LEFT);
							doc.add(p1);
						}
					}

					if (this.objetoContratoCobranca.getRecebedorParcelaFinal3().getCnpj() != null) {
						if (!this.objetoContratoCobranca.getRecebedorParcelaFinal3().getCnpj().equals("")) {
							p1 = new Paragraph(
									"CNPJ - " + this.objetoContratoCobranca.getRecebedorParcelaFinal3().getCnpj());
							p1.setAlignment(Element.ALIGN_LEFT);
							doc.add(p1);
						}
					}
				}

				if (this.objetoContratoCobranca.getRecebedorParcelaFinal4() != null) {

					p1 = new Paragraph("RECEBEDOR PARCELA FINAL ", subtitulo);
					p1.setAlignment(Element.ALIGN_LEFT);
					p1.setSpacingBefore(10);
					doc.add(p1);

					if (this.objetoContratoCobranca.getRecebedorParcelaFinal4().getConta() != null
							&& this.objetoContratoCobranca.getRecebedorParcelaFinal4().getAgencia() != null
							&& this.objetoContratoCobranca.getRecebedorParcelaFinal4().getBanco() != null) {
						if (!this.objetoContratoCobranca.getRecebedorParcelaFinal4().getConta().equals("")
								&& !this.objetoContratoCobranca.getRecebedorParcelaFinal4().getBanco().equals("")
								&& !this.objetoContratoCobranca.getRecebedorParcelaFinal4().getAgencia().equals("")) {

							p1 = new Paragraph(
									"BANCO - " + this.objetoContratoCobranca.getRecebedorParcelaFinal4().getBanco());
							p1.setAlignment(Element.ALIGN_LEFT);
							doc.add(p1);

							p1 = new Paragraph("AG. "
									+ this.objetoContratoCobranca.getRecebedorParcelaFinal4().getAgencia() + " C/C "
									+ this.objetoContratoCobranca.getRecebedorParcelaFinal4().getConta());
							p1.setAlignment(Element.ALIGN_LEFT);
							doc.add(p1);

							if (this.objetoContratoCobranca.getRecebedorParcelaFinal4() != null) {
								p1 = new Paragraph("VALOR - R$ " + this.objetoContratoCobranca.getVlrFinalRecebedor4()
										.toString().replace(".", ","));
								p1.setAlignment(Element.ALIGN_LEFT);
								doc.add(p1);
							} else {
								p1 = new Paragraph("VALOR - R$ 0,00");
								p1.setAlignment(Element.ALIGN_LEFT);
								doc.add(p1);
							}
						}
					}

					if (this.objetoContratoCobranca.getRecebedorParcelaFinal4().getNomeCC() != null) {
						if (!this.objetoContratoCobranca.getRecebedorParcelaFinal4().getNomeCC().equals("")) {
							p1 = new Paragraph("FAVORECIDO - "
									+ this.objetoContratoCobranca.getRecebedorParcelaFinal4().getNomeCC());
							p1.setAlignment(Element.ALIGN_LEFT);
							doc.add(p1);
						}
					}

					if (this.objetoContratoCobranca.getRecebedorParcelaFinal4().getCpfCC() != null) {
						if (!this.objetoContratoCobranca.getRecebedorParcelaFinal4().getCpfCC().equals("")) {
							p1 = new Paragraph(
									"CPF - " + this.objetoContratoCobranca.getRecebedorParcelaFinal4().getCpfCC());
							p1.setAlignment(Element.ALIGN_LEFT);
							doc.add(p1);
						}
					}

					if (this.objetoContratoCobranca.getRecebedorParcelaFinal4().getCnpj() != null) {
						if (!this.objetoContratoCobranca.getRecebedorParcelaFinal4().getCnpj().equals("")) {
							p1 = new Paragraph(
									"CNPJ - " + this.objetoContratoCobranca.getRecebedorParcelaFinal4().getCnpj());
							p1.setAlignment(Element.ALIGN_LEFT);
							doc.add(p1);
						}
					}
				}

				if (this.objetoContratoCobranca.getRecebedorParcelaFinal5() != null) {

					p1 = new Paragraph("RECEBEDOR PARCELA FINAL ", subtitulo);
					p1.setAlignment(Element.ALIGN_LEFT);
					p1.setSpacingBefore(10);
					doc.add(p1);

					if (this.objetoContratoCobranca.getRecebedorParcelaFinal5().getConta() != null
							&& this.objetoContratoCobranca.getRecebedorParcelaFinal5().getAgencia() != null
							&& this.objetoContratoCobranca.getRecebedorParcelaFinal5().getBanco() != null) {
						if (!this.objetoContratoCobranca.getRecebedorParcelaFinal5().getConta().equals("")
								&& !this.objetoContratoCobranca.getRecebedorParcelaFinal5().getBanco().equals("")
								&& !this.objetoContratoCobranca.getRecebedorParcelaFinal5().getAgencia().equals("")) {

							p1 = new Paragraph(
									"BANCO - " + this.objetoContratoCobranca.getRecebedorParcelaFinal5().getBanco());
							p1.setAlignment(Element.ALIGN_LEFT);
							doc.add(p1);

							p1 = new Paragraph("AG. "
									+ this.objetoContratoCobranca.getRecebedorParcelaFinal5().getAgencia() + " C/C "
									+ this.objetoContratoCobranca.getRecebedorParcelaFinal5().getConta());
							p1.setAlignment(Element.ALIGN_LEFT);
							doc.add(p1);

							if (this.objetoContratoCobranca.getRecebedorParcelaFinal5() != null) {
								p1 = new Paragraph("VALOR - R$ " + this.objetoContratoCobranca.getVlrFinalRecebedor5()
										.toString().replace(".", ","));
								p1.setAlignment(Element.ALIGN_LEFT);
								doc.add(p1);
							} else {
								p1 = new Paragraph("VALOR - R$ 0,00");
								p1.setAlignment(Element.ALIGN_LEFT);
								doc.add(p1);
							}
						}
					}

					if (this.objetoContratoCobranca.getRecebedorParcelaFinal5().getNomeCC() != null) {
						if (!this.objetoContratoCobranca.getRecebedorParcelaFinal5().getNomeCC().equals("")) {
							p1 = new Paragraph("FAVORECIDO - "
									+ this.objetoContratoCobranca.getRecebedorParcelaFinal5().getNomeCC());
							p1.setAlignment(Element.ALIGN_LEFT);
							doc.add(p1);
						}
					}

					if (this.objetoContratoCobranca.getRecebedorParcelaFinal5().getCpfCC() != null) {
						if (!this.objetoContratoCobranca.getRecebedorParcelaFinal5().getCpfCC().equals("")) {
							p1 = new Paragraph(
									"CPF - " + this.objetoContratoCobranca.getRecebedorParcelaFinal5().getCpfCC());
							p1.setAlignment(Element.ALIGN_LEFT);
							doc.add(p1);
						}
					}

					if (this.objetoContratoCobranca.getRecebedorParcelaFinal5().getCnpj() != null) {
						if (!this.objetoContratoCobranca.getRecebedorParcelaFinal5().getCnpj().equals("")) {
							p1 = new Paragraph(
									"CNPJ - " + this.objetoContratoCobranca.getRecebedorParcelaFinal5().getCnpj());
							p1.setAlignment(Element.ALIGN_LEFT);
							doc.add(p1);
						}
					}
				}

				if (this.objetoContratoCobranca.getRecebedorParcelaFinal6() != null) {

					p1 = new Paragraph("RECEBEDOR PARCELA FINAL ", subtitulo);
					p1.setAlignment(Element.ALIGN_LEFT);
					p1.setSpacingBefore(10);
					doc.add(p1);

					if (this.objetoContratoCobranca.getRecebedorParcelaFinal6().getConta() != null
							&& this.objetoContratoCobranca.getRecebedorParcelaFinal6().getAgencia() != null
							&& this.objetoContratoCobranca.getRecebedorParcelaFinal6().getBanco() != null) {
						if (!this.objetoContratoCobranca.getRecebedorParcelaFinal6().getConta().equals("")
								&& !this.objetoContratoCobranca.getRecebedorParcelaFinal6().getBanco().equals("")
								&& !this.objetoContratoCobranca.getRecebedorParcelaFinal6().getAgencia().equals("")) {

							p1 = new Paragraph(
									"BANCO - " + this.objetoContratoCobranca.getRecebedorParcelaFinal6().getBanco());
							p1.setAlignment(Element.ALIGN_LEFT);
							doc.add(p1);

							p1 = new Paragraph("AG. "
									+ this.objetoContratoCobranca.getRecebedorParcelaFinal6().getAgencia() + " C/C "
									+ this.objetoContratoCobranca.getRecebedorParcelaFinal6().getConta());
							p1.setAlignment(Element.ALIGN_LEFT);
							doc.add(p1);

							if (this.objetoContratoCobranca.getRecebedorParcelaFinal6() != null) {
								p1 = new Paragraph("VALOR - R$ " + this.objetoContratoCobranca.getVlrFinalRecebedor6()
										.toString().replace(".", ","));
								p1.setAlignment(Element.ALIGN_LEFT);
								doc.add(p1);
							} else {
								p1 = new Paragraph("VALOR - R$ 0,00");
								p1.setAlignment(Element.ALIGN_LEFT);
								doc.add(p1);
							}
						}
					}

					if (this.objetoContratoCobranca.getRecebedorParcelaFinal6().getNomeCC() != null) {
						if (!this.objetoContratoCobranca.getRecebedorParcelaFinal6().getNomeCC().equals("")) {
							p1 = new Paragraph("FAVORECIDO - "
									+ this.objetoContratoCobranca.getRecebedorParcelaFinal6().getNomeCC());
							p1.setAlignment(Element.ALIGN_LEFT);
							doc.add(p1);
						}
					}

					if (this.objetoContratoCobranca.getRecebedorParcelaFinal6().getCpfCC() != null) {
						if (!this.objetoContratoCobranca.getRecebedorParcelaFinal6().getCpfCC().equals("")) {
							p1 = new Paragraph(
									"CPF - " + this.objetoContratoCobranca.getRecebedorParcelaFinal6().getCpfCC());
							p1.setAlignment(Element.ALIGN_LEFT);
							doc.add(p1);
						}
					}

					if (this.objetoContratoCobranca.getRecebedorParcelaFinal6().getCnpj() != null) {
						if (!this.objetoContratoCobranca.getRecebedorParcelaFinal6().getCnpj().equals("")) {
							p1 = new Paragraph(
									"CNPJ - " + this.objetoContratoCobranca.getRecebedorParcelaFinal6().getCnpj());
							p1.setAlignment(Element.ALIGN_LEFT);
							doc.add(p1);
						}
					}
				}

				if (this.objetoContratoCobranca.getRecebedorParcelaFinal7() != null) {

					p1 = new Paragraph("RECEBEDOR PARCELA FINAL ", subtitulo);
					p1.setAlignment(Element.ALIGN_LEFT);
					p1.setSpacingBefore(10);
					doc.add(p1);

					if (this.objetoContratoCobranca.getRecebedorParcelaFinal7().getConta() != null
							&& this.objetoContratoCobranca.getRecebedorParcelaFinal7().getAgencia() != null
							&& this.objetoContratoCobranca.getRecebedorParcelaFinal7().getBanco() != null) {
						if (!this.objetoContratoCobranca.getRecebedorParcelaFinal7().getConta().equals("")
								&& !this.objetoContratoCobranca.getRecebedorParcelaFinal7().getBanco().equals("")
								&& !this.objetoContratoCobranca.getRecebedorParcelaFinal7().getAgencia().equals("")) {

							p1 = new Paragraph(
									"BANCO - " + this.objetoContratoCobranca.getRecebedorParcelaFinal7().getBanco());
							p1.setAlignment(Element.ALIGN_LEFT);
							doc.add(p1);

							p1 = new Paragraph("AG. "
									+ this.objetoContratoCobranca.getRecebedorParcelaFinal7().getAgencia() + " C/C "
									+ this.objetoContratoCobranca.getRecebedorParcelaFinal7().getConta());
							p1.setAlignment(Element.ALIGN_LEFT);
							doc.add(p1);

							if (this.objetoContratoCobranca.getRecebedorParcelaFinal7() != null) {
								p1 = new Paragraph("VALOR - R$ " + this.objetoContratoCobranca.getVlrFinalRecebedor7()
										.toString().replace(".", ","));
								p1.setAlignment(Element.ALIGN_LEFT);
								doc.add(p1);
							} else {
								p1 = new Paragraph("VALOR - R$ 0,00");
								p1.setAlignment(Element.ALIGN_LEFT);
								doc.add(p1);
							}
						}
					}

					if (this.objetoContratoCobranca.getRecebedorParcelaFinal7().getNomeCC() != null) {
						if (!this.objetoContratoCobranca.getRecebedorParcelaFinal7().getNomeCC().equals("")) {
							p1 = new Paragraph("FAVORECIDO - "
									+ this.objetoContratoCobranca.getRecebedorParcelaFinal7().getNomeCC());
							p1.setAlignment(Element.ALIGN_LEFT);
							doc.add(p1);
						}
					}

					if (this.objetoContratoCobranca.getRecebedorParcelaFinal7().getCpfCC() != null) {
						if (!this.objetoContratoCobranca.getRecebedorParcelaFinal7().getCpfCC().equals("")) {
							p1 = new Paragraph(
									"CPF - " + this.objetoContratoCobranca.getRecebedorParcelaFinal7().getCpfCC());
							p1.setAlignment(Element.ALIGN_LEFT);
							doc.add(p1);
						}
					}

					if (this.objetoContratoCobranca.getRecebedorParcelaFinal7().getCnpj() != null) {
						if (!this.objetoContratoCobranca.getRecebedorParcelaFinal7().getCnpj().equals("")) {
							p1 = new Paragraph(
									"CNPJ - " + this.objetoContratoCobranca.getRecebedorParcelaFinal7().getCnpj());
							p1.setAlignment(Element.ALIGN_LEFT);
							doc.add(p1);
						}
					}
				}

				if (this.objetoContratoCobranca.getRecebedorParcelaFinal8() != null) {

					p1 = new Paragraph("RECEBEDOR PARCELA FINAL ", subtitulo);
					p1.setAlignment(Element.ALIGN_LEFT);
					p1.setSpacingBefore(10);
					doc.add(p1);

					if (this.objetoContratoCobranca.getRecebedorParcelaFinal8().getConta() != null
							&& this.objetoContratoCobranca.getRecebedorParcelaFinal8().getAgencia() != null
							&& this.objetoContratoCobranca.getRecebedorParcelaFinal8().getBanco() != null) {
						if (!this.objetoContratoCobranca.getRecebedorParcelaFinal8().getConta().equals("")
								&& !this.objetoContratoCobranca.getRecebedorParcelaFinal8().getBanco().equals("")
								&& !this.objetoContratoCobranca.getRecebedorParcelaFinal8().getAgencia().equals("")) {

							p1 = new Paragraph(
									"BANCO - " + this.objetoContratoCobranca.getRecebedorParcelaFinal8().getBanco());
							p1.setAlignment(Element.ALIGN_LEFT);
							doc.add(p1);

							p1 = new Paragraph("AG. "
									+ this.objetoContratoCobranca.getRecebedorParcelaFinal8().getAgencia() + " C/C "
									+ this.objetoContratoCobranca.getRecebedorParcelaFinal8().getConta());
							p1.setAlignment(Element.ALIGN_LEFT);
							doc.add(p1);

							if (this.objetoContratoCobranca.getRecebedorParcelaFinal8() != null) {
								p1 = new Paragraph("VALOR - R$ " + this.objetoContratoCobranca.getVlrFinalRecebedor8()
										.toString().replace(".", ","));
								p1.setAlignment(Element.ALIGN_LEFT);
								doc.add(p1);
							} else {
								p1 = new Paragraph("VALOR - R$ 0,00");
								p1.setAlignment(Element.ALIGN_LEFT);
								doc.add(p1);
							}
						}
					}

					if (this.objetoContratoCobranca.getRecebedorParcelaFinal8().getNomeCC() != null) {
						if (!this.objetoContratoCobranca.getRecebedorParcelaFinal8().getNomeCC().equals("")) {
							p1 = new Paragraph("FAVORECIDO - "
									+ this.objetoContratoCobranca.getRecebedorParcelaFinal8().getNomeCC());
							p1.setAlignment(Element.ALIGN_LEFT);
							doc.add(p1);
						}
					}

					if (this.objetoContratoCobranca.getRecebedorParcelaFinal8().getCpfCC() != null) {
						if (!this.objetoContratoCobranca.getRecebedorParcelaFinal8().getCpfCC().equals("")) {
							p1 = new Paragraph(
									"CPF - " + this.objetoContratoCobranca.getRecebedorParcelaFinal8().getCpfCC());
							p1.setAlignment(Element.ALIGN_LEFT);
							doc.add(p1);
						}
					}

					if (this.objetoContratoCobranca.getRecebedorParcelaFinal8().getCnpj() != null) {
						if (!this.objetoContratoCobranca.getRecebedorParcelaFinal8().getCnpj().equals("")) {
							p1 = new Paragraph(
									"CNPJ - " + this.objetoContratoCobranca.getRecebedorParcelaFinal8().getCnpj());
							p1.setAlignment(Element.ALIGN_LEFT);
							doc.add(p1);
						}
					}
				}

				if (this.objetoContratoCobranca.getRecebedorParcelaFinal9() != null) {

					p1 = new Paragraph("RECEBEDOR PARCELA FINAL ", subtitulo);
					p1.setAlignment(Element.ALIGN_LEFT);
					p1.setSpacingBefore(10);
					doc.add(p1);

					if (this.objetoContratoCobranca.getRecebedorParcelaFinal9().getConta() != null
							&& this.objetoContratoCobranca.getRecebedorParcelaFinal9().getAgencia() != null
							&& this.objetoContratoCobranca.getRecebedorParcelaFinal9().getBanco() != null) {
						if (!this.objetoContratoCobranca.getRecebedorParcelaFinal9().getConta().equals("")
								&& !this.objetoContratoCobranca.getRecebedorParcelaFinal9().getBanco().equals("")
								&& !this.objetoContratoCobranca.getRecebedorParcelaFinal9().getAgencia().equals("")) {

							p1 = new Paragraph(
									"BANCO - " + this.objetoContratoCobranca.getRecebedorParcelaFinal9().getBanco());
							p1.setAlignment(Element.ALIGN_LEFT);
							doc.add(p1);

							p1 = new Paragraph("AG. "
									+ this.objetoContratoCobranca.getRecebedorParcelaFinal9().getAgencia() + " C/C "
									+ this.objetoContratoCobranca.getRecebedorParcelaFinal9().getConta());
							p1.setAlignment(Element.ALIGN_LEFT);
							doc.add(p1);

							if (this.objetoContratoCobranca.getRecebedorParcelaFinal9() != null) {
								p1 = new Paragraph("VALOR - R$ " + this.objetoContratoCobranca.getVlrFinalRecebedor9()
										.toString().replace(".", ","));
								p1.setAlignment(Element.ALIGN_LEFT);
								doc.add(p1);
							} else {
								p1 = new Paragraph("VALOR - R$ 0,00");
								p1.setAlignment(Element.ALIGN_LEFT);
								doc.add(p1);
							}
						}
					}

					if (this.objetoContratoCobranca.getRecebedorParcelaFinal9().getNomeCC() != null) {
						if (!this.objetoContratoCobranca.getRecebedorParcelaFinal9().getNomeCC().equals("")) {
							p1 = new Paragraph("FAVORECIDO - "
									+ this.objetoContratoCobranca.getRecebedorParcelaFinal9().getNomeCC());
							p1.setAlignment(Element.ALIGN_LEFT);
							doc.add(p1);
						}
					}

					if (this.objetoContratoCobranca.getRecebedorParcelaFinal9().getCpfCC() != null) {
						if (!this.objetoContratoCobranca.getRecebedorParcelaFinal9().getCpfCC().equals("")) {
							p1 = new Paragraph(
									"CPF - " + this.objetoContratoCobranca.getRecebedorParcelaFinal9().getCpfCC());
							p1.setAlignment(Element.ALIGN_LEFT);
							doc.add(p1);
						}
					}

					if (this.objetoContratoCobranca.getRecebedorParcelaFinal9().getCnpj() != null) {
						if (!this.objetoContratoCobranca.getRecebedorParcelaFinal9().getCnpj().equals("")) {
							p1 = new Paragraph(
									"CNPJ - " + this.objetoContratoCobranca.getRecebedorParcelaFinal9().getCnpj());
							p1.setAlignment(Element.ALIGN_LEFT);
							doc.add(p1);
						}
					}
				}

				if (this.objetoContratoCobranca.getRecebedorParcelaFinal10() != null) {

					p1 = new Paragraph("RECEBEDOR PARCELA FINAL ", subtitulo);
					p1.setAlignment(Element.ALIGN_LEFT);
					p1.setSpacingBefore(10);
					doc.add(p1);

					if (this.objetoContratoCobranca.getRecebedorParcelaFinal10().getConta() != null
							&& this.objetoContratoCobranca.getRecebedorParcelaFinal10().getAgencia() != null
							&& this.objetoContratoCobranca.getRecebedorParcelaFinal10().getBanco() != null) {
						if (!this.objetoContratoCobranca.getRecebedorParcelaFinal10().getConta().equals("")
								&& !this.objetoContratoCobranca.getRecebedorParcelaFinal10().getBanco().equals("")
								&& !this.objetoContratoCobranca.getRecebedorParcelaFinal10().getAgencia().equals("")) {

							p1 = new Paragraph(
									"BANCO - " + this.objetoContratoCobranca.getRecebedorParcelaFinal10().getBanco());
							p1.setAlignment(Element.ALIGN_LEFT);
							doc.add(p1);

							p1 = new Paragraph("AG. "
									+ this.objetoContratoCobranca.getRecebedorParcelaFinal10().getAgencia() + " C/C "
									+ this.objetoContratoCobranca.getRecebedorParcelaFinal10().getConta());
							p1.setAlignment(Element.ALIGN_LEFT);
							doc.add(p1);

							if (this.objetoContratoCobranca.getRecebedorParcelaFinal10() != null) {
								p1 = new Paragraph("VALOR - R$ " + this.objetoContratoCobranca.getVlrFinalRecebedor10()
										.toString().replace(".", ","));
								p1.setAlignment(Element.ALIGN_LEFT);
								doc.add(p1);
							} else {
								p1 = new Paragraph("VALOR - R$ 0,00");
								p1.setAlignment(Element.ALIGN_LEFT);
								doc.add(p1);
							}
						}
					}

					if (this.objetoContratoCobranca.getRecebedorParcelaFinal10().getNomeCC() != null) {
						if (!this.objetoContratoCobranca.getRecebedorParcelaFinal10().getNomeCC().equals("")) {
							p1 = new Paragraph("FAVORECIDO - "
									+ this.objetoContratoCobranca.getRecebedorParcelaFinal10().getNomeCC());
							p1.setAlignment(Element.ALIGN_LEFT);
							doc.add(p1);
						}
					}

					if (this.objetoContratoCobranca.getRecebedorParcelaFinal10().getCpfCC() != null) {
						if (!this.objetoContratoCobranca.getRecebedorParcelaFinal10().getCpfCC().equals("")) {
							p1 = new Paragraph(
									"CPF - " + this.objetoContratoCobranca.getRecebedorParcelaFinal10().getCpfCC());
							p1.setAlignment(Element.ALIGN_LEFT);
							doc.add(p1);
						}
					}

					if (this.objetoContratoCobranca.getRecebedorParcelaFinal10().getCnpj() != null) {
						if (!this.objetoContratoCobranca.getRecebedorParcelaFinal10().getCnpj().equals("")) {
							p1 = new Paragraph(
									"CNPJ - " + this.objetoContratoCobranca.getRecebedorParcelaFinal10().getCnpj());
							p1.setAlignment(Element.ALIGN_LEFT);
							doc.add(p1);
						}
					}
				}
			}

			if (this.objetoContratoCobranca.getAcao() != null && this.objetoContratoCobranca.getAcao() != "") {
				p1 = new Paragraph("AÇÃO", subtituloIdent);
				p1.setSpacingBefore(10);
				p1.setAlignment(Element.ALIGN_LEFT);
				doc.add(p1);

				p1 = new Paragraph(this.objetoContratoCobranca.getAcao());
				p1.setAlignment(Element.ALIGN_LEFT);
				doc.add(p1);
			}

			if (this.objetoContratoCobranca.getObservacao() != null
					&& this.objetoContratoCobranca.getObservacao() != "") {
				p1 = new Paragraph("OBSERVAÇÃO", subtituloIdent);
				p1.setSpacingBefore(10);
				p1.setAlignment(Element.ALIGN_LEFT);
				doc.add(p1);

				p1 = new Paragraph(this.objetoContratoCobranca.getObservacao());
				p1.setAlignment(Element.ALIGN_LEFT);
				doc.add(p1);
			}

			if (this.objetoContratoCobranca.getObservacao2() != null
					&& this.objetoContratoCobranca.getObservacao2() != "") {
				p1 = new Paragraph(this.objetoContratoCobranca.getObservacao2());
				p1.setAlignment(Element.ALIGN_LEFT);
				doc.add(p1);
			}

			p1 = new Paragraph("DETALHAMENTO - FORMA DE PAGAMENTO", subtituloIdent);
			p1.setAlignment(Element.ALIGN_LEFT);
			p1.setSpacingBefore(10);
			doc.add(p1);

			PdfPTable table = new PdfPTable(new float[] { 0.10f, 0.22f, 0.16f, 0.16f, 0.22f, 0.16f, 0.10f });
			table.setWidthPercentage(100.0f);

			PdfPCell cell1 = new PdfPCell(new Phrase(" "));
			cell1.setBorder(Rectangle.NO_BORDER);
			table.addCell(cell1);

			PdfPCell cell2 = new PdfPCell(new Phrase("VENCIMENTO"));
			cell2.setBorder(Rectangle.NO_BORDER);
			table.addCell(cell2);

			PdfPCell cell3 = new PdfPCell(new Phrase("VALOR"));
			cell3.setBorder(Rectangle.NO_BORDER);
			table.addCell(cell3);

			PdfPCell cell4 = new PdfPCell(new Phrase("INVESTIDOR"));
			cell4.setBorder(Rectangle.NO_BORDER);
			table.addCell(cell4);

			PdfPCell cell5 = new PdfPCell(new Phrase("ADMINISTRAÇÃO"));
			cell5.setBorder(Rectangle.NO_BORDER);
			table.addCell(cell5);

			PdfPCell cell7 = new PdfPCell(new Phrase("REPASSE"));
			cell7.setBorder(Rectangle.NO_BORDER);
			table.addCell(cell7);

			PdfPCell cell6 = new PdfPCell(new Phrase("PAGO?"));
			cell6.setBorder(Rectangle.NO_BORDER);
			table.addCell(cell6);

			for (ContratoCobrancaDetalhes ccd : this.objetoContratoCobranca.getListContratoCobrancaDetalhes()) {
				cell1 = new PdfPCell(new Phrase(ccd.getNumeroParcela()));
				cell1.setBorder(Rectangle.NO_BORDER);
				table.addCell(cell1);

				cell2 = new PdfPCell(new Phrase(sdfDataPagamento.format(ccd.getDataVencimento())));
				cell2.setBorder(Rectangle.NO_BORDER);
				table.addCell(cell2);

				cell3 = new PdfPCell(new Phrase("R$ " + ccd.getVlrParcela().toString().replace(".", ",")));
				cell3.setBorder(Rectangle.NO_BORDER);
				table.addCell(cell3);

				cell4 = new PdfPCell(new Phrase("R$" + ccd.getVlrRepasse().toString().replace(".", ",")));
				cell4.setBorder(Rectangle.NO_BORDER);
				table.addCell(cell4);

				cell5 = new PdfPCell(new Phrase("R$" + ccd.getVlrRetencao().toString().replace(".", ",")));
				cell5.setBorder(Rectangle.NO_BORDER);
				table.addCell(cell5);

				if (ccd.getVlrComissao() != null) {
					cell7 = new PdfPCell(new Phrase("R$" + ccd.getVlrComissao().toString().replace(".", ",")));
				} else {
					cell7 = new PdfPCell(new Phrase(" "));
				}
				cell7.setBorder(Rectangle.NO_BORDER);
				table.addCell(cell7);

				if (ccd.isParcelaPaga()) {
					cell6 = new PdfPCell(new Phrase("SIM"));
					cell6.setBorder(Rectangle.NO_BORDER);
					table.addCell(cell6);
				} else {
					cell6 = new PdfPCell(new Phrase("NÃO"));
					cell6.setBorder(Rectangle.NO_BORDER);
					table.addCell(cell6);
				}
			}

			doc.add(table);

		} catch (FileNotFoundException e) {
			// TODO Auto-generated catch block
			context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR,
					"Contrato de Cobrança: Este contrato está aberto por algum outro programa, por favor, feche-o e tente novamente! (Contrato: "
							+ this.objetoContratoCobranca.getNumeroContrato() + ")" + e,
					""));
			return "/Atendimento/Cobranca/ContratoCobrancaConsultar.xhtml";
		} catch (Exception e) {
			context.addMessage(null,
					new FacesMessage(FacesMessage.SEVERITY_ERROR,
							"Contrato de Cobrança: Ocorreu um problema ao gerar o contrato! (Contrato: "
									+ this.objetoContratoCobranca.getNumeroContrato() + ")" + e,
							""));

			return "/Atendimento/Cobranca/ContratoCobrancaConsultar.xhtml";
		} finally {
			if (doc != null) {
				// fechamento do documento
				doc.close();
			}
			if (os != null) {
				// fechamento da stream de saída
				try {
					os.close();
				} catch (IOException e) {
					// TODO Auto-generated catch block
					e.printStackTrace();
				}
			}

			context.addMessage(null,
					new FacesMessage(FacesMessage.SEVERITY_INFO,
							"Contrato de Cobrança: Contrato gerado com sucesso! (Contrato: "
									+ this.objetoContratoCobranca.getNumeroContrato() + ")",
							""));
		}

		return "/Atendimento/Cobranca/ContratoCobrancaSucesso.xhtml";
	}

	public void geraPDFFinanceiroAtraso() {
		FacesContext context = FacesContext.getCurrentInstance();
		/*
		 * Referência iText - Gerador PDF
		 * http://www.dicas-l.com.br/arquivo/gerando_pdf_utilizando_java.php#.
		 * VGpT0_nF_h4
		 */

		Document doc = null;
		OutputStream os = null;
		try {
			/*
			 * Fonts Utilizadas no PDF
			 */
			Font header = new Font(FontFamily.HELVETICA, 12, Font.BOLD);

			Font titulo = new Font(FontFamily.HELVETICA, 10, Font.BOLD);
			Font subtitulo = new Font(FontFamily.HELVETICA, 10, Font.BOLD);
			Font subtituloIdent = new Font(FontFamily.HELVETICA, 10, Font.BOLD);
			Font destaque = new Font(FontFamily.HELVETICA, 8, Font.BOLD);

			TimeZone zone = TimeZone.getDefault();
			Locale locale = new Locale("pt", "BR");

			Calendar date = Calendar.getInstance(zone, locale);

			SimpleDateFormat sdfDataRel = new SimpleDateFormat("dd/MMM/yyyy", locale);
			SimpleDateFormat sdfDataRelComHoras = new SimpleDateFormat("dd/MMM/yyyy hh:mm:ss", locale);

			ParametrosDao pDao = new ParametrosDao();

			/*
			 * Configuração inicial do PDF - Cria o documento tamanho A4, margens de 2,54cm
			 */
			doc = new Document(PageSize.A4.rotate(), 10, 10, 10, 10);
			this.pathContrato = pDao.findByFilter("nome", "LOCACAO_PATH_COBRANCA").get(0).getValorString();
			this.nomeContrato = "Relatório Financeiro Cobrança.pdf";
			os = new FileOutputStream(this.pathContrato + this.nomeContrato);

			// Associa a stream de saída ao
			PdfWriter.getInstance(doc, os);

			// Abre o documento
			doc.open();

			Paragraph p1 = new Paragraph("RELATÓRIO FINANCEIRO DE COBRANÇA");
			if (this.tipoFiltros) {
				p1 = new Paragraph("RELATÓRIO FINANCEIRO DE COBRANÇA - " + sdfDataRel.format(this.relDataContratoInicio)
						+ " a " + sdfDataRel.format(this.relDataContratoFim), header);
			} else {
				if (relObjetoContratoCobranca.size() > 0) {
					p1 = new Paragraph("RELATÓRIO FINANCEIRO DE COBRANÇA - CONTRATO "
							+ relObjetoContratoCobranca.get(0).getNumeroContrato(), header);
				}
			}

			p1.setAlignment(Element.ALIGN_CENTER);
			p1.setSpacingAfter(10);
			doc.add(p1);

			PdfPTable table = new PdfPTable(
					new float[] { 0.16f, 0.16f, 0.16f, 0.16f, 0.16f, 0.16f, 0.16f, 0.16f, 0.16f, 0.16f, 0.16f });
			table.setWidthPercentage(100.0f);

			PdfPCell cell1 = new PdfPCell(new Phrase("CONTRATO", titulo));
			cell1.setBorderColor(BaseColor.BLACK);
			cell1.setVerticalAlignment(Element.ALIGN_MIDDLE);
			cell1.setHorizontalAlignment(Element.ALIGN_CENTER);
			cell1.setBackgroundColor(BaseColor.LIGHT_GRAY);
			cell1.setUseBorderPadding(true);
			cell1.setGrayFill(0.9f);
			cell1.setPaddingTop(10f);
			cell1.setPaddingBottom(10f);
			table.addCell(cell1);

			PdfPCell cell2 = new PdfPCell(new Phrase("DATA", titulo));
			cell2.setBorderColor(BaseColor.BLACK);
			cell2.setVerticalAlignment(Element.ALIGN_MIDDLE);
			cell2.setHorizontalAlignment(Element.ALIGN_CENTER);
			cell2.setBackgroundColor(BaseColor.LIGHT_GRAY);
			cell2.setUseBorderPadding(true);
			cell2.setGrayFill(0.9f);
			cell2.setPaddingTop(2f);
			cell2.setPaddingBottom(2f);
			table.addCell(cell2);

			PdfPCell cell3 = new PdfPCell(new Phrase("RESPONSÁVEL", titulo));
			cell3.setBorderColor(BaseColor.BLACK);
			cell3.setVerticalAlignment(Element.ALIGN_MIDDLE);
			cell3.setHorizontalAlignment(Element.ALIGN_CENTER);
			cell3.setBackgroundColor(BaseColor.LIGHT_GRAY);
			cell3.setUseBorderPadding(true);
			cell3.setGrayFill(0.9f);
			cell3.setPaddingTop(2f);
			cell3.setPaddingBottom(2f);
			table.addCell(cell3);

			PdfPCell cell4 = new PdfPCell(new Phrase("PAGADOR", titulo));
			cell4.setBorderColor(BaseColor.BLACK);
			cell4.setVerticalAlignment(Element.ALIGN_MIDDLE);
			cell4.setHorizontalAlignment(Element.ALIGN_CENTER);
			cell4.setBackgroundColor(BaseColor.LIGHT_GRAY);
			cell4.setUseBorderPadding(true);
			cell4.setGrayFill(0.9f);
			cell4.setPaddingTop(2f);
			cell4.setPaddingBottom(2f);
			table.addCell(cell4);

			PdfPCell cell6 = new PdfPCell(new Phrase("PARCELA", titulo));
			cell6.setBorderColor(BaseColor.BLACK);
			cell6.setVerticalAlignment(Element.ALIGN_MIDDLE);
			cell6.setHorizontalAlignment(Element.ALIGN_CENTER);
			cell6.setBackgroundColor(BaseColor.LIGHT_GRAY);
			cell6.setUseBorderPadding(true);
			cell6.setGrayFill(0.9f);
			cell6.setPaddingTop(2f);
			cell6.setPaddingBottom(2f);
			table.addCell(cell6);

			PdfPCell cell7 = new PdfPCell(new Phrase("VENCIMENTO", titulo));
			cell7.setBorderColor(BaseColor.BLACK);
			cell7.setVerticalAlignment(Element.ALIGN_MIDDLE);
			cell7.setHorizontalAlignment(Element.ALIGN_CENTER);
			cell7.setBackgroundColor(BaseColor.LIGHT_GRAY);
			cell7.setUseBorderPadding(true);
			cell7.setGrayFill(0.9f);
			cell7.setPaddingTop(2f);
			cell7.setPaddingBottom(2f);
			table.addCell(cell7);

			PdfPCell cell8 = new PdfPCell(new Phrase("VENCIMENTO ATUALIZADO", titulo));
			cell8.setBorderColor(BaseColor.BLACK);
			cell8.setVerticalAlignment(Element.ALIGN_MIDDLE);
			cell8.setHorizontalAlignment(Element.ALIGN_CENTER);
			cell8.setBackgroundColor(BaseColor.LIGHT_GRAY);
			cell8.setUseBorderPadding(true);
			cell8.setGrayFill(0.9f);
			cell8.setPaddingTop(2f);
			cell8.setPaddingBottom(2f);
			table.addCell(cell8);

			PdfPCell cell9 = new PdfPCell(new Phrase("VALOR", titulo));
			cell9.setBorderColor(BaseColor.BLACK);
			cell9.setVerticalAlignment(Element.ALIGN_MIDDLE);
			cell9.setHorizontalAlignment(Element.ALIGN_CENTER);
			cell9.setBackgroundColor(BaseColor.LIGHT_GRAY);
			cell9.setUseBorderPadding(true);
			cell9.setGrayFill(0.9f);
			cell9.setPaddingTop(2f);
			cell9.setPaddingBottom(2f);
			table.addCell(cell9);

			PdfPCell cell99 = new PdfPCell(new Phrase("VALOR ATUAL.", titulo));
			cell99.setBorderColor(BaseColor.BLACK);
			cell99.setVerticalAlignment(Element.ALIGN_MIDDLE);
			cell99.setHorizontalAlignment(Element.ALIGN_CENTER);
			cell99.setBackgroundColor(BaseColor.LIGHT_GRAY);
			cell99.setUseBorderPadding(true);
			cell99.setGrayFill(0.9f);
			cell99.setPaddingTop(2f);
			cell99.setPaddingBottom(2f);
			table.addCell(cell99);

			PdfPCell cell10 = new PdfPCell(new Phrase("PARCELAS EM ABERTO", titulo));
			cell10.setBorderColor(BaseColor.BLACK);
			cell10.setVerticalAlignment(Element.ALIGN_MIDDLE);
			cell10.setHorizontalAlignment(Element.ALIGN_CENTER);
			cell10.setBackgroundColor(BaseColor.LIGHT_GRAY);
			cell10.setUseBorderPadding(true);
			cell10.setGrayFill(0.9f);
			cell10.setPaddingTop(2f);
			cell10.setPaddingBottom(2f);
			table.addCell(cell10);

			PdfPCell cell11 = new PdfPCell(new Phrase("COM BAIXAS PARCIAIS", titulo));
			cell11.setBorderColor(BaseColor.BLACK);
			cell11.setVerticalAlignment(Element.ALIGN_MIDDLE);
			cell11.setHorizontalAlignment(Element.ALIGN_CENTER);
			cell11.setBackgroundColor(BaseColor.LIGHT_GRAY);
			cell11.setUseBorderPadding(true);
			cell11.setGrayFill(0.9f);
			cell11.setPaddingTop(2f);
			cell11.setPaddingBottom(2f);
			table.addCell(cell11);

			BigDecimal totalVencido = BigDecimal.ZERO;
			BigDecimal totalVencidoAtualizado = BigDecimal.ZERO;
			BigDecimal totalRetencao = BigDecimal.ZERO;
			BigDecimal totalComissao = BigDecimal.ZERO;

			for (RelatorioFinanceiroCobranca r : this.relObjetoContratoCobranca) {
				cell1 = new PdfPCell(new Phrase(r.getNumeroContrato()));
				cell1.setBorderColor(BaseColor.BLACK);
				cell1.setVerticalAlignment(Element.ALIGN_MIDDLE);
				cell1.setHorizontalAlignment(Element.ALIGN_CENTER);
				cell1.setPaddingTop(5f);
				cell1.setPaddingBottom(5f);
				table.addCell(cell1);

				cell2 = new PdfPCell(new Phrase(sdfDataRel.format(r.getDataContrato())));
				cell2.setBorderColor(BaseColor.BLACK);
				cell2.setVerticalAlignment(Element.ALIGN_MIDDLE);
				cell2.setHorizontalAlignment(Element.ALIGN_CENTER);
				cell2.setPaddingTop(5f);
				cell2.setPaddingBottom(5f);
				table.addCell(cell2);

				cell3 = new PdfPCell(new Phrase(r.getNomeResponsavel()));
				cell3.setBorderColor(BaseColor.BLACK);
				cell3.setVerticalAlignment(Element.ALIGN_MIDDLE);
				cell3.setHorizontalAlignment(Element.ALIGN_CENTER);
				cell3.setPaddingTop(5f);
				cell3.setPaddingBottom(5f);
				table.addCell(cell3);

				cell4 = new PdfPCell(new Phrase(r.getNomePagador()));
				cell4.setBorderColor(BaseColor.BLACK);
				cell4.setVerticalAlignment(Element.ALIGN_MIDDLE);
				cell4.setHorizontalAlignment(Element.ALIGN_CENTER);
				cell4.setPaddingTop(5f);
				cell4.setPaddingBottom(5f);
				table.addCell(cell4);

				cell6 = new PdfPCell(new Phrase(r.getParcela()));
				cell6.setBorderColor(BaseColor.BLACK);
				cell6.setVerticalAlignment(Element.ALIGN_MIDDLE);
				cell6.setHorizontalAlignment(Element.ALIGN_CENTER);
				cell6.setPaddingTop(5f);
				cell6.setPaddingBottom(5f);
				table.addCell(cell6);

				cell7 = new PdfPCell(new Phrase(sdfDataRel.format(r.getDataVencimento())));
				cell7.setBorderColor(BaseColor.BLACK);
				cell7.setVerticalAlignment(Element.ALIGN_MIDDLE);
				cell7.setHorizontalAlignment(Element.ALIGN_CENTER);
				cell7.setPaddingTop(5f);
				cell7.setPaddingBottom(5f);
				table.addCell(cell7);

				cell8 = new PdfPCell(new Phrase(sdfDataRel.format(r.getDataVencimentoAtual())));
				cell8.setBorderColor(BaseColor.BLACK);
				cell8.setVerticalAlignment(Element.ALIGN_MIDDLE);
				cell8.setHorizontalAlignment(Element.ALIGN_CENTER);
				cell8.setPaddingTop(5f);
				cell8.setPaddingBottom(5f);
				table.addCell(cell8);

				cell9 = new PdfPCell(new Phrase("R$ " + r.getValor().toString().replace(".", ",")));
				cell9.setBorderColor(BaseColor.BLACK);
				cell9.setVerticalAlignment(Element.ALIGN_MIDDLE);
				cell9.setHorizontalAlignment(Element.ALIGN_CENTER);
				cell9.setPaddingTop(5f);
				cell9.setPaddingBottom(5f);
				table.addCell(cell9);

				if (r.getVlrParcelaAtualizada() != null) {
					cell99 = new PdfPCell(new Phrase("R$ " + r.getVlrParcelaAtualizada().toString().replace(".", ",")));
				} else {
					cell99 = new PdfPCell(new Phrase("--"));
				}

				cell99.setBorderColor(BaseColor.BLACK);
				cell99.setVerticalAlignment(Element.ALIGN_MIDDLE);
				cell99.setHorizontalAlignment(Element.ALIGN_CENTER);
				cell99.setPaddingTop(5f);
				cell99.setPaddingBottom(5f);
				table.addCell(cell99);

				cell10 = new PdfPCell(new Phrase(r.getQtdeAtrasos()));
				cell10.setBorderColor(BaseColor.BLACK);
				cell10.setVerticalAlignment(Element.ALIGN_MIDDLE);
				cell10.setHorizontalAlignment(Element.ALIGN_CENTER);
				cell10.setPaddingTop(5f);
				cell10.setPaddingBottom(5f);
				table.addCell(cell10);

				cell11 = new PdfPCell(new Phrase(r.getQtdeBaixasParciais()));
				cell11.setBorderColor(BaseColor.BLACK);
				cell11.setVerticalAlignment(Element.ALIGN_MIDDLE);
				cell11.setHorizontalAlignment(Element.ALIGN_CENTER);
				cell11.setPaddingTop(5f);
				cell11.setPaddingBottom(5f);
				table.addCell(cell11);

				totalVencido = totalVencido.add(r.getValor());

				if (r.getVlrParcelaAtualizada() != null) {
					totalVencidoAtualizado = totalVencidoAtualizado.add(r.getVlrParcelaAtualizada());
				}

			}

			cell1 = new PdfPCell(new Phrase(""));
			cell1.setBorder(Rectangle.NO_BORDER);
			cell1.setVerticalAlignment(Element.ALIGN_MIDDLE);
			cell1.setHorizontalAlignment(Element.ALIGN_CENTER);
			table.addCell(cell1);

			cell2 = new PdfPCell(new Phrase(""));
			cell2.setBorder(Rectangle.NO_BORDER);
			cell2.setVerticalAlignment(Element.ALIGN_MIDDLE);
			cell2.setHorizontalAlignment(Element.ALIGN_CENTER);
			table.addCell(cell2);

			cell3 = new PdfPCell(new Phrase(""));
			cell3.setBorder(Rectangle.NO_BORDER);
			cell3.setVerticalAlignment(Element.ALIGN_MIDDLE);
			cell3.setHorizontalAlignment(Element.ALIGN_CENTER);
			table.addCell(cell3);

			cell4 = new PdfPCell(new Phrase(""));
			cell4.setBorder(Rectangle.NO_BORDER);
			cell4.setVerticalAlignment(Element.ALIGN_MIDDLE);
			cell4.setHorizontalAlignment(Element.ALIGN_CENTER);
			table.addCell(cell4);

			cell6 = new PdfPCell(new Phrase(""));
			cell6.setBorder(Rectangle.NO_BORDER);
			cell6.setVerticalAlignment(Element.ALIGN_MIDDLE);
			cell6.setHorizontalAlignment(Element.ALIGN_CENTER);
			table.addCell(cell6);

			cell7 = new PdfPCell(new Phrase(""));
			cell7.setBorder(Rectangle.NO_BORDER);
			cell7.setVerticalAlignment(Element.ALIGN_MIDDLE);
			cell7.setHorizontalAlignment(Element.ALIGN_CENTER);
			table.addCell(cell7);

			cell8 = new PdfPCell(new Phrase("Total", header));
			cell8.setBorder(Rectangle.NO_BORDER);
			cell8.setVerticalAlignment(Element.ALIGN_MIDDLE);
			cell8.setHorizontalAlignment(Element.ALIGN_CENTER);
			cell8.setBorderWidthBottom(1f);
			cell8.setPaddingTop(5f);
			cell8.setPaddingBottom(5f);
			table.addCell(cell8);

			cell9 = new PdfPCell(new Phrase("R$ " + totalVencido.toString().replace(".", ","), header));
			cell9.setBorder(Rectangle.NO_BORDER);
			cell9.setVerticalAlignment(Element.ALIGN_MIDDLE);
			cell9.setHorizontalAlignment(Element.ALIGN_CENTER);
			cell9.setBorderWidthBottom(1f);
			cell9.setPaddingTop(5f);
			cell9.setPaddingBottom(5f);
			table.addCell(cell9);

			cell99 = new PdfPCell(new Phrase("R$ " + totalVencidoAtualizado.toString().replace(".", ","), header));
			cell99.setBorder(Rectangle.NO_BORDER);
			cell99.setVerticalAlignment(Element.ALIGN_MIDDLE);
			cell99.setHorizontalAlignment(Element.ALIGN_CENTER);
			cell99.setBorderWidthBottom(1f);
			cell99.setPaddingTop(5f);
			cell99.setPaddingBottom(5f);
			table.addCell(cell99);

			cell10 = new PdfPCell(new Phrase(""));
			cell10.setBorder(Rectangle.NO_BORDER);
			cell10.setVerticalAlignment(Element.ALIGN_MIDDLE);
			cell10.setHorizontalAlignment(Element.ALIGN_CENTER);
			table.addCell(cell10);

			cell11 = new PdfPCell(new Phrase(""));
			cell11.setBorder(Rectangle.NO_BORDER);
			cell11.setVerticalAlignment(Element.ALIGN_MIDDLE);
			cell11.setHorizontalAlignment(Element.ALIGN_CENTER);
			table.addCell(cell11);

			doc.add(table);

		} catch (FileNotFoundException e) {
			// TODO Auto-generated catch block
			context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR,
					"Contrato de Cobrança: Este contrato está aberto por algum outro programa, por favor, feche-o e tente novamente! (Contrato: "
							+ this.objetoContratoCobranca.getNumeroContrato() + ")" + e,
					""));
		} catch (Exception e) {
			context.addMessage(null,
					new FacesMessage(FacesMessage.SEVERITY_ERROR,
							"Contrato de Cobrança: Ocorreu um problema ao gerar o contrato! (Contrato: "
									+ this.objetoContratoCobranca.getNumeroContrato() + ")" + e,
							""));
		} finally {
			this.contratoGerado = true;

			if (doc != null) {
				// fechamento do documento
				doc.close();
			}
			if (os != null) {
				// fechamento da stream de saída
				try {
					os.close();
				} catch (IOException e) {
					// TODO Auto-generated catch block
					e.printStackTrace();
				}
			}
		}
	}

	public void imprimeRelatorioFinanceiro() {
		FacesContext context = FacesContext.getCurrentInstance();
		/*
		 * Referência iText - Gerador PDF
		 * http://www.dicas-l.com.br/arquivo/gerando_pdf_utilizando_java.php#.
		 * VGpT0_nF_h4
		 */

		Document doc = null;
		OutputStream os = null;
		try {
			/*
			 * Fonts Utilizadas no PDF
			 */
			ByteArrayOutputStream baos = new ByteArrayOutputStream();
			Font header = new Font(FontFamily.HELVETICA, 12, Font.BOLD);

			Font titulo = new Font(FontFamily.HELVETICA, 10, Font.BOLD);
			Font subtitulo = new Font(FontFamily.HELVETICA, 10, Font.BOLD);
			Font subtituloIdent = new Font(FontFamily.HELVETICA, 10, Font.BOLD);
			Font destaque = new Font(FontFamily.HELVETICA, 8, Font.BOLD);

			TimeZone zone = TimeZone.getDefault();
			Locale locale = new Locale("pt", "BR");

			Calendar date = Calendar.getInstance(zone, locale);

			SimpleDateFormat sdfDataRel = new SimpleDateFormat("dd/MMM/yyyy", locale);
			SimpleDateFormat sdfDataRelComHoras = new SimpleDateFormat("dd/MMM/yyyy hh:mm:ss", locale);

			ParametrosDao pDao = new ParametrosDao();

			/*
			 * Configuração inicial do PDF - Cria o documento tamanho A4, margens de 2,54cm
			 */
			doc = new Document(PageSize.A4.rotate(), 10, 10, 10, 10);

			// Associa a stream de saída ao
			PdfWriter.getInstance(doc, baos);

			// Abre o documento
			doc.open();

			Paragraph p1 = new Paragraph("RELATÓRIO FINANCEIRO DE COBRANÇA");
			if (this.tipoFiltros) {
				p1 = new Paragraph("RELATÓRIO FINANCEIRO DE COBRANÇA - " + sdfDataRel.format(this.relDataContratoInicio)
						+ " a " + sdfDataRel.format(this.relDataContratoFim), header);
			} else {
				if (relObjetoContratoCobranca.size() > 0) {
					p1 = new Paragraph("RELATÓRIO FINANCEIRO DE COBRANÇA - CONTRATO "
							+ relObjetoContratoCobranca.get(0).getNumeroContrato(), header);
				}
			}

			p1.setAlignment(Element.ALIGN_CENTER);
			p1.setSpacingAfter(10);
			doc.add(p1);

			PdfPTable table = new PdfPTable(
					new float[] { 0.16f, 0.16f, 0.16f, 0.16f, 0.16f, 0.16f, 0.16f, 0.16f, 0.16f, 0.16f });
			table.setWidthPercentage(100.0f);

			PdfPCell cell1 = new PdfPCell(new Phrase("CONTRATO", titulo));
			cell1.setBorderColor(BaseColor.BLACK);
			cell1.setVerticalAlignment(Element.ALIGN_MIDDLE);
			cell1.setHorizontalAlignment(Element.ALIGN_CENTER);
			cell1.setBackgroundColor(BaseColor.LIGHT_GRAY);
			cell1.setUseBorderPadding(true);
			cell1.setGrayFill(0.9f);
			cell1.setPaddingTop(10f);
			cell1.setPaddingBottom(10f);
			table.addCell(cell1);

			PdfPCell cell2 = new PdfPCell(new Phrase("DATA", titulo));
			cell2.setBorderColor(BaseColor.BLACK);
			cell2.setVerticalAlignment(Element.ALIGN_MIDDLE);
			cell2.setHorizontalAlignment(Element.ALIGN_CENTER);
			cell2.setBackgroundColor(BaseColor.LIGHT_GRAY);
			cell2.setUseBorderPadding(true);
			cell2.setGrayFill(0.9f);
			cell2.setPaddingTop(2f);
			cell2.setPaddingBottom(2f);
			table.addCell(cell2);

			PdfPCell cell3 = new PdfPCell(new Phrase("RESPONSÁVEL", titulo));
			cell3.setBorderColor(BaseColor.BLACK);
			cell3.setVerticalAlignment(Element.ALIGN_MIDDLE);
			cell3.setHorizontalAlignment(Element.ALIGN_CENTER);
			cell3.setBackgroundColor(BaseColor.LIGHT_GRAY);
			cell3.setUseBorderPadding(true);
			cell3.setGrayFill(0.9f);
			cell3.setPaddingTop(2f);
			cell3.setPaddingBottom(2f);
			table.addCell(cell3);

			PdfPCell cell4 = new PdfPCell(new Phrase("PAGADOR", titulo));
			cell4.setBorderColor(BaseColor.BLACK);
			cell4.setVerticalAlignment(Element.ALIGN_MIDDLE);
			cell4.setHorizontalAlignment(Element.ALIGN_CENTER);
			cell4.setBackgroundColor(BaseColor.LIGHT_GRAY);
			cell4.setUseBorderPadding(true);
			cell4.setGrayFill(0.9f);
			cell4.setPaddingTop(2f);
			cell4.setPaddingBottom(2f);
			table.addCell(cell4);

			PdfPCell cell6 = new PdfPCell(new Phrase("PARCELA", titulo));
			cell6.setBorderColor(BaseColor.BLACK);
			cell6.setVerticalAlignment(Element.ALIGN_MIDDLE);
			cell6.setHorizontalAlignment(Element.ALIGN_CENTER);
			cell6.setBackgroundColor(BaseColor.LIGHT_GRAY);
			cell6.setUseBorderPadding(true);
			cell6.setGrayFill(0.9f);
			cell6.setPaddingTop(2f);
			cell6.setPaddingBottom(2f);
			table.addCell(cell6);

			PdfPCell cell7 = new PdfPCell(new Phrase("VENCIMENTO", titulo));
			cell7.setBorderColor(BaseColor.BLACK);
			cell7.setVerticalAlignment(Element.ALIGN_MIDDLE);
			cell7.setHorizontalAlignment(Element.ALIGN_CENTER);
			cell7.setBackgroundColor(BaseColor.LIGHT_GRAY);
			cell7.setUseBorderPadding(true);
			cell7.setGrayFill(0.9f);
			cell7.setPaddingTop(2f);
			cell7.setPaddingBottom(2f);
			table.addCell(cell7);

			PdfPCell cell8 = new PdfPCell(new Phrase("VALOR", titulo));
			cell8.setBorderColor(BaseColor.BLACK);
			cell8.setVerticalAlignment(Element.ALIGN_MIDDLE);
			cell8.setHorizontalAlignment(Element.ALIGN_CENTER);
			cell8.setBackgroundColor(BaseColor.LIGHT_GRAY);
			cell8.setUseBorderPadding(true);
			cell8.setGrayFill(0.9f);
			cell8.setPaddingTop(2f);
			cell8.setPaddingBottom(2f);
			table.addCell(cell8);

			PdfPCell cell99 = new PdfPCell(new Phrase("VALOR ATUAL.", titulo));
			cell99.setBorderColor(BaseColor.BLACK);
			cell99.setVerticalAlignment(Element.ALIGN_MIDDLE);
			cell99.setHorizontalAlignment(Element.ALIGN_CENTER);
			cell99.setBackgroundColor(BaseColor.LIGHT_GRAY);
			cell99.setUseBorderPadding(true);
			cell99.setGrayFill(0.9f);
			cell99.setPaddingTop(2f);
			cell99.setPaddingBottom(2f);
			table.addCell(cell99);

			PdfPCell cell9 = new PdfPCell(new Phrase("INVESTIDOR", titulo));
			cell9.setBorderColor(BaseColor.BLACK);
			cell9.setVerticalAlignment(Element.ALIGN_MIDDLE);
			cell9.setHorizontalAlignment(Element.ALIGN_CENTER);
			cell9.setBackgroundColor(BaseColor.LIGHT_GRAY);
			cell9.setUseBorderPadding(true);
			cell9.setGrayFill(0.9f);
			cell9.setPaddingTop(2f);
			cell9.setPaddingBottom(2f);
			table.addCell(cell9);

			PdfPCell cell10 = new PdfPCell(new Phrase("ADMINISTRAÇÃO", titulo));
			cell10.setBorderColor(BaseColor.BLACK);
			cell10.setVerticalAlignment(Element.ALIGN_MIDDLE);
			cell10.setHorizontalAlignment(Element.ALIGN_CENTER);
			cell10.setBackgroundColor(BaseColor.LIGHT_GRAY);
			cell10.setUseBorderPadding(true);
			cell10.setGrayFill(0.9f);
			cell10.setPaddingTop(2f);
			cell10.setPaddingBottom(2f);
			table.addCell(cell10);

			BigDecimal totalVencido = BigDecimal.ZERO;
			BigDecimal totalVencidoAtualizado = BigDecimal.ZERO;
			BigDecimal totalRetencao = BigDecimal.ZERO;
			BigDecimal totalComissao = BigDecimal.ZERO;

			for (RelatorioFinanceiroCobranca r : this.relObjetoContratoCobranca) {
				cell1 = new PdfPCell(new Phrase(r.getNumeroContrato()));
				cell1.setBorderColor(BaseColor.BLACK);
				cell1.setVerticalAlignment(Element.ALIGN_MIDDLE);
				cell1.setHorizontalAlignment(Element.ALIGN_CENTER);
				cell1.setPaddingTop(5f);
				cell1.setPaddingBottom(5f);
				table.addCell(cell1);

				cell2 = new PdfPCell(new Phrase(sdfDataRel.format(r.getDataContrato())));
				cell1.setBorderColor(BaseColor.BLACK);
				cell2.setVerticalAlignment(Element.ALIGN_MIDDLE);
				cell2.setHorizontalAlignment(Element.ALIGN_CENTER);
				cell2.setPaddingTop(5f);
				cell2.setPaddingBottom(5f);
				table.addCell(cell2);

				cell3 = new PdfPCell(new Phrase(r.getNomeResponsavel()));
				cell1.setBorderColor(BaseColor.BLACK);
				cell3.setVerticalAlignment(Element.ALIGN_MIDDLE);
				cell3.setHorizontalAlignment(Element.ALIGN_CENTER);
				cell3.setPaddingTop(5f);
				cell3.setPaddingBottom(5f);
				table.addCell(cell3);

				cell4 = new PdfPCell(new Phrase(r.getNomePagador()));
				cell1.setBorderColor(BaseColor.BLACK);
				cell4.setVerticalAlignment(Element.ALIGN_MIDDLE);
				cell4.setHorizontalAlignment(Element.ALIGN_CENTER);
				cell4.setPaddingTop(5f);
				cell4.setPaddingBottom(5f);
				table.addCell(cell4);

				cell6 = new PdfPCell(new Phrase(r.getParcela()));
				cell1.setBorderColor(BaseColor.BLACK);
				cell6.setVerticalAlignment(Element.ALIGN_MIDDLE);
				cell6.setHorizontalAlignment(Element.ALIGN_CENTER);
				cell6.setPaddingTop(5f);
				cell6.setPaddingBottom(5f);
				table.addCell(cell6);

				cell7 = new PdfPCell(new Phrase(sdfDataRel.format(r.getDataVencimento())));
				cell1.setBorderColor(BaseColor.BLACK);
				cell7.setVerticalAlignment(Element.ALIGN_MIDDLE);
				cell7.setHorizontalAlignment(Element.ALIGN_CENTER);
				cell7.setPaddingTop(5f);
				cell7.setPaddingBottom(5f);
				table.addCell(cell7);

				cell8 = new PdfPCell(new Phrase("R$ " + r.getValor().toString().replace(".", ",")));
				cell1.setBorderColor(BaseColor.BLACK);
				cell8.setVerticalAlignment(Element.ALIGN_MIDDLE);
				cell8.setHorizontalAlignment(Element.ALIGN_CENTER);
				cell8.setPaddingTop(5f);
				cell8.setPaddingBottom(5f);
				table.addCell(cell8);

				if (r.getVlrParcelaAtualizada() != null) {
					cell99 = new PdfPCell(new Phrase("R$ " + r.getVlrParcelaAtualizada().toString().replace(".", ",")));
				} else {
					cell99 = new PdfPCell(new Phrase("--"));
				}

				cell1.setBorderColor(BaseColor.BLACK);
				cell99.setVerticalAlignment(Element.ALIGN_MIDDLE);
				cell99.setHorizontalAlignment(Element.ALIGN_CENTER);
				cell99.setPaddingTop(5f);
				cell99.setPaddingBottom(5f);
				table.addCell(cell99);

				cell9 = new PdfPCell(new Phrase("R$ " + r.getVlrRepasse().toString().replace(".", ",")));
				cell1.setBorderColor(BaseColor.BLACK);
				cell9.setVerticalAlignment(Element.ALIGN_MIDDLE);
				cell9.setHorizontalAlignment(Element.ALIGN_CENTER);
				cell9.setPaddingTop(5f);
				cell9.setPaddingBottom(5f);
				table.addCell(cell9);

				if (r.getValorComissao() != null) {
					cell10 = new PdfPCell(new Phrase("R$ " + r.getValorRetencao().toString().replace(".", ",")));
					totalComissao = totalComissao.add(r.getValorComissao());
				} else {
					cell10 = new PdfPCell(new Phrase("R$ 0,00"));
				}

				cell1.setBorderColor(BaseColor.BLACK);
				cell10.setVerticalAlignment(Element.ALIGN_MIDDLE);
				cell10.setHorizontalAlignment(Element.ALIGN_CENTER);
				cell10.setPaddingTop(5f);
				cell10.setPaddingBottom(5f);
				table.addCell(cell10);

				totalVencido = totalVencido.add(r.getValor());

				if (r.getVlrParcelaAtualizada() != null) {
					totalVencidoAtualizado = totalVencidoAtualizado.add(r.getVlrParcelaAtualizada());
				}

				totalRetencao = totalRetencao.add(r.getValorRetencao());

				if (this.relIsCompleto) {
					if (r.getContratoCobranca().getAcao() != null) {
						if (!r.getContratoCobranca().getAcao().equals("")) {
							cell1 = new PdfPCell(
									new Phrase("AÇÃO - " + r.getContratoCobranca().getAcao(), subtituloIdent));
							cell1.setBorderColor(BaseColor.BLACK);
							cell1.setVerticalAlignment(Element.ALIGN_MIDDLE);
							cell1.setHorizontalAlignment(Element.ALIGN_LEFT);
							cell1.setPaddingTop(5f);
							cell1.setPaddingBottom(5f);
							cell1.setColspan(10);
							table.addCell(cell1);
						}
					}

					if (r.getContratoCobranca().getRecebedor().getConta() != null
							&& r.getContratoCobranca().getRecebedor().getAgencia() != null
							&& r.getContratoCobranca().getRecebedor().getBanco() != null) {
						if (!r.getContratoCobranca().getRecebedor().getConta().equals("")
								&& !r.getContratoCobranca().getRecebedor().getBanco().equals("")
								&& !r.getContratoCobranca().getRecebedor().getAgencia().equals("")) {

							if (r.getContratoCobranca().getVlrRecebedor() != null) {
								cell1 = new PdfPCell(new Phrase("BANCO - "
										+ r.getContratoCobranca().getRecebedor().getBanco() + " AG. "
										+ r.getContratoCobranca().getRecebedor().getAgencia() + " C/C "
										+ r.getContratoCobranca().getRecebedor().getConta() + " VALOR - R$ "
										+ r.getContratoCobranca().getVlrRecebedor().toString().replace(".", ",")));
							} else {
								cell1 = new PdfPCell(
										new Phrase("BANCO - " + r.getContratoCobranca().getRecebedor().getBanco()
												+ " AG. " + r.getContratoCobranca().getRecebedor().getAgencia()
												+ " C/C " + r.getContratoCobranca().getRecebedor().getConta()));
							}
							cell1.setBorderColor(BaseColor.BLACK);
							cell1.disableBorderSide(2);// (1-Top,2-Bottom,3-left and 4-Right border)
							cell1.setVerticalAlignment(Element.ALIGN_MIDDLE);
							cell1.setHorizontalAlignment(Element.ALIGN_LEFT);
							cell1.setPaddingTop(5f);
							cell1.setPaddingBottom(5f);
							cell1.setColspan(10);
							table.addCell(cell1);
						}
					}

					if (r.getContratoCobranca().getRecebedor().getNomeCC() != null) {
						if (!r.getContratoCobranca().getRecebedor().getNomeCC().equals("")) {
							cell1 = new PdfPCell(
									new Phrase("FAVORECIDO - " + r.getContratoCobranca().getRecebedor().getNomeCC()));
							cell1.setBorderColor(BaseColor.BLACK);
							cell1.disableBorderSide(2);// (1-Top,2-Bottom,3-left and 4-Right border)
							cell1.disableBorderSide(1);
							cell1.setVerticalAlignment(Element.ALIGN_MIDDLE);
							cell1.setHorizontalAlignment(Element.ALIGN_LEFT);

							cell1.setPaddingTop(5f);
							cell1.setPaddingBottom(5f);
							cell1.setColspan(10);
							table.addCell(cell1);
						}
					}

					String texto = null;
					if (r.getContratoCobranca().getRecebedor().getCpfCC() != null) {
						if (!r.getContratoCobranca().getRecebedor().getCpfCC().equals("")) {
							texto = "CPF - " + r.getContratoCobranca().getRecebedor().getCpfCC();
						}
					}

					if (r.getContratoCobranca().getRecebedor().getCnpjCC() != null) {
						if (!r.getContratoCobranca().getRecebedor().getCnpjCC().equals("")) {
							texto = "CNPJ - " + r.getContratoCobranca().getRecebedor().getCnpj();

						}
					}

					if (texto != null) {
						cell1 = new PdfPCell(new Phrase(texto));
						cell1.setBorderColor(BaseColor.BLACK);
						cell1.disableBorderSide(1);
						cell1.setVerticalAlignment(Element.ALIGN_MIDDLE);
						cell1.setHorizontalAlignment(Element.ALIGN_LEFT);

						cell1.setPaddingTop(5f);
						cell1.setPaddingBottom(5f);
						cell1.setColspan(10);
						table.addCell(cell1);
					}

					if (r.getContratoCobranca().getRecebedor2() != null) {

						if (r.getContratoCobranca().getRecebedor2().getConta() != null
								&& r.getContratoCobranca().getRecebedor2().getAgencia() != null
								&& r.getContratoCobranca().getRecebedor2().getBanco() != null) {
							if (!r.getContratoCobranca().getRecebedor2().getConta().equals("")
									&& !r.getContratoCobranca().getRecebedor2().getBanco().equals("")
									&& !r.getContratoCobranca().getRecebedor2().getAgencia().equals("")) {

								if (r.getContratoCobranca().getVlrRecebedor2() != null) {
									cell1 = new PdfPCell(new Phrase("BANCO - "
											+ r.getContratoCobranca().getRecebedor2().getBanco() + " AG. "
											+ r.getContratoCobranca().getRecebedor2().getAgencia() + " C/C "
											+ r.getContratoCobranca().getRecebedor2().getConta() + " VALOR - R$ "
											+ r.getContratoCobranca().getVlrRecebedor2().toString().replace(".", ",")));
								} else {
									cell1 = new PdfPCell(
											new Phrase("BANCO - " + r.getContratoCobranca().getRecebedor2().getBanco()
													+ " AG. " + r.getContratoCobranca().getRecebedor2().getAgencia()
													+ " C/C " + r.getContratoCobranca().getRecebedor2().getConta()));
								}

								cell1.setBorderColor(BaseColor.BLACK);
								cell1.disableBorderSide(2);// (1-Top,2-Bottom,3-left and 4-Right border)
								cell1.setVerticalAlignment(Element.ALIGN_MIDDLE);
								cell1.setHorizontalAlignment(Element.ALIGN_LEFT);

								cell1.setPaddingTop(5f);
								cell1.setPaddingBottom(5f);
								cell1.setColspan(10);
								table.addCell(cell1);
							}
						}

						if (r.getContratoCobranca().getRecebedor2().getNomeCC() != null) {
							if (!r.getContratoCobranca().getRecebedor2().getNomeCC().equals("")) {
								cell1 = new PdfPCell(new Phrase(
										"FAVORECIDO - " + r.getContratoCobranca().getRecebedor2().getNomeCC()));
								cell1.setBorderColor(BaseColor.BLACK);
								cell1.disableBorderSide(2);// (1-Top,2-Bottom,3-left and 4-Right border)
								cell1.disableBorderSide(1);
								cell1.setVerticalAlignment(Element.ALIGN_MIDDLE);
								cell1.setHorizontalAlignment(Element.ALIGN_LEFT);

								cell1.setPaddingTop(5f);
								cell1.setPaddingBottom(5f);
								cell1.setColspan(10);
								table.addCell(cell1);
							}
						}

						texto = null;
						if (r.getContratoCobranca().getRecebedor2().getCpfCC() != null) {
							if (!r.getContratoCobranca().getRecebedor2().getCpfCC().equals("")) {
								texto = "CPF - " + r.getContratoCobranca().getRecebedor2().getCpfCC();
							}
						}

						if (r.getContratoCobranca().getRecebedor2().getCnpjCC() != null) {
							if (!r.getContratoCobranca().getRecebedor2().getCnpjCC().equals("")) {
								texto = "CNPJ - " + r.getContratoCobranca().getRecebedor2().getCnpj();

							}
						}

						if (texto != null) {
							cell1 = new PdfPCell(new Phrase(texto));
							cell1.setBorderColor(BaseColor.BLACK);
							cell1.disableBorderSide(1);
							cell1.setVerticalAlignment(Element.ALIGN_MIDDLE);
							cell1.setHorizontalAlignment(Element.ALIGN_LEFT);

							cell1.setPaddingTop(5f);
							cell1.setPaddingBottom(5f);
							cell1.setColspan(10);
							table.addCell(cell1);
						}
					}

					if (r.getContratoCobranca().getRecebedor3() != null) {

						if (r.getContratoCobranca().getRecebedor3().getConta() != null
								&& r.getContratoCobranca().getRecebedor3().getAgencia() != null
								&& r.getContratoCobranca().getRecebedor3().getBanco() != null) {
							if (!r.getContratoCobranca().getRecebedor3().getConta().equals("")
									&& !r.getContratoCobranca().getRecebedor3().getBanco().equals("")
									&& !r.getContratoCobranca().getRecebedor3().getAgencia().equals("")) {

								if (r.getContratoCobranca().getVlrRecebedor3() != null) {
									cell1 = new PdfPCell(new Phrase("BANCO - "
											+ r.getContratoCobranca().getRecebedor3().getBanco() + " AG. "
											+ r.getContratoCobranca().getRecebedor3().getAgencia() + " C/C "
											+ r.getContratoCobranca().getRecebedor3().getConta() + " VALOR - R$ "
											+ r.getContratoCobranca().getVlrRecebedor3().toString().replace(".", ",")));
								} else {
									cell1 = new PdfPCell(
											new Phrase("BANCO - " + r.getContratoCobranca().getRecebedor3().getBanco()
													+ " AG. " + r.getContratoCobranca().getRecebedor3().getAgencia()
													+ " C/C " + r.getContratoCobranca().getRecebedor3().getConta()));
								}

								cell1.setBorderColor(BaseColor.BLACK);
								cell1.disableBorderSide(2);// (1-Top,2-Bottom,3-left and 4-Right border)
								cell1.setVerticalAlignment(Element.ALIGN_MIDDLE);
								cell1.setHorizontalAlignment(Element.ALIGN_LEFT);

								cell1.setPaddingTop(5f);
								cell1.setPaddingBottom(5f);
								cell1.setColspan(10);
								table.addCell(cell1);
							}
						}

						if (r.getContratoCobranca().getRecebedor3().getNomeCC() != null) {
							if (!r.getContratoCobranca().getRecebedor3().getNomeCC().equals("")) {
								cell1 = new PdfPCell(new Phrase(
										"FAVORECIDO - " + r.getContratoCobranca().getRecebedor3().getNomeCC()));
								cell1.setBorderColor(BaseColor.BLACK);
								cell1.disableBorderSide(2);// (1-Top,2-Bottom,3-left and 4-Right border)
								cell1.disableBorderSide(1);
								cell1.setVerticalAlignment(Element.ALIGN_MIDDLE);
								cell1.setHorizontalAlignment(Element.ALIGN_LEFT);

								cell1.setPaddingTop(5f);
								cell1.setPaddingBottom(5f);
								cell1.setColspan(10);
								table.addCell(cell1);
							}
						}

						texto = null;
						if (r.getContratoCobranca().getRecebedor3().getCpfCC() != null) {
							if (!r.getContratoCobranca().getRecebedor3().getCpfCC().equals("")) {
								texto = "CPF - " + r.getContratoCobranca().getRecebedor3().getCpfCC();
							}
						}

						if (r.getContratoCobranca().getRecebedor3().getCnpjCC() != null) {
							if (!r.getContratoCobranca().getRecebedor3().getCnpjCC().equals("")) {
								texto = "CNPJ - " + r.getContratoCobranca().getRecebedor3().getCnpj();

							}
						}

						if (texto != null) {
							cell1 = new PdfPCell(new Phrase(texto));
							cell1.setBorderColor(BaseColor.BLACK);
							cell1.disableBorderSide(1);
							cell1.setVerticalAlignment(Element.ALIGN_MIDDLE);
							cell1.setHorizontalAlignment(Element.ALIGN_LEFT);

							cell1.setPaddingTop(5f);
							cell1.setPaddingBottom(5f);
							cell1.setColspan(10);
							table.addCell(cell1);
						}
					}

					if (r.getContratoCobranca().getRecebedor4() != null) {

						if (r.getContratoCobranca().getRecebedor4().getConta() != null
								&& r.getContratoCobranca().getRecebedor4().getAgencia() != null
								&& r.getContratoCobranca().getRecebedor4().getBanco() != null) {
							if (!r.getContratoCobranca().getRecebedor4().getConta().equals("")
									&& !r.getContratoCobranca().getRecebedor4().getBanco().equals("")
									&& !r.getContratoCobranca().getRecebedor4().getAgencia().equals("")) {

								if (r.getContratoCobranca().getVlrRecebedor4() != null) {
									cell1 = new PdfPCell(new Phrase("BANCO - "
											+ r.getContratoCobranca().getRecebedor4().getBanco() + " AG. "
											+ r.getContratoCobranca().getRecebedor4().getAgencia() + " C/C "
											+ r.getContratoCobranca().getRecebedor4().getConta() + " VALOR - R$ "
											+ r.getContratoCobranca().getVlrRecebedor4().toString().replace(".", ",")));
								} else {
									cell1 = new PdfPCell(
											new Phrase("BANCO - " + r.getContratoCobranca().getRecebedor4().getBanco()
													+ " AG. " + r.getContratoCobranca().getRecebedor4().getAgencia()
													+ " C/C " + r.getContratoCobranca().getRecebedor4().getConta()));
								}

								cell1.setBorderColor(BaseColor.BLACK);
								cell1.disableBorderSide(2);// (1-Top,2-Bottom,3-left and 4-Right border)
								cell1.setVerticalAlignment(Element.ALIGN_MIDDLE);
								cell1.setHorizontalAlignment(Element.ALIGN_LEFT);

								cell1.setPaddingTop(5f);
								cell1.setPaddingBottom(5f);
								cell1.setColspan(10);
								table.addCell(cell1);
							}
						}

						if (r.getContratoCobranca().getRecebedor4().getNomeCC() != null) {
							if (!r.getContratoCobranca().getRecebedor4().getNomeCC().equals("")) {
								cell1 = new PdfPCell(new Phrase(
										"FAVORECIDO - " + r.getContratoCobranca().getRecebedor4().getNomeCC()));
								cell1.setBorderColor(BaseColor.BLACK);
								cell1.disableBorderSide(2);// (1-Top,2-Bottom,3-left and 4-Right border)
								cell1.disableBorderSide(1);
								cell1.setVerticalAlignment(Element.ALIGN_MIDDLE);
								cell1.setHorizontalAlignment(Element.ALIGN_LEFT);

								cell1.setPaddingTop(5f);
								cell1.setPaddingBottom(5f);
								cell1.setColspan(10);
								table.addCell(cell1);
							}
						}

						texto = null;
						if (r.getContratoCobranca().getRecebedor4().getCpfCC() != null) {
							if (!r.getContratoCobranca().getRecebedor4().getCpfCC().equals("")) {
								texto = "CPF - " + r.getContratoCobranca().getRecebedor4().getCpfCC();
							}
						}

						if (r.getContratoCobranca().getRecebedor4().getCnpjCC() != null) {
							if (!r.getContratoCobranca().getRecebedor4().getCnpjCC().equals("")) {
								texto = "CNPJ - " + r.getContratoCobranca().getRecebedor4().getCnpj();

							}
						}

						if (texto != null) {
							cell1 = new PdfPCell(new Phrase(texto));
							cell1.setBorderColor(BaseColor.BLACK);
							cell1.disableBorderSide(1);
							cell1.setVerticalAlignment(Element.ALIGN_MIDDLE);
							cell1.setHorizontalAlignment(Element.ALIGN_LEFT);

							cell1.setPaddingTop(5f);
							cell1.setPaddingBottom(5f);
							cell1.setColspan(10);
							table.addCell(cell1);
						}
					}

					if (r.getContratoCobranca().getRecebedor5() != null) {

						if (r.getContratoCobranca().getRecebedor5().getConta() != null
								&& r.getContratoCobranca().getRecebedor5().getAgencia() != null
								&& r.getContratoCobranca().getRecebedor5().getBanco() != null) {
							if (!r.getContratoCobranca().getRecebedor5().getConta().equals("")
									&& !r.getContratoCobranca().getRecebedor5().getBanco().equals("")
									&& !r.getContratoCobranca().getRecebedor5().getAgencia().equals("")) {

								if (r.getContratoCobranca().getVlrRecebedor5() != null) {
									cell1 = new PdfPCell(new Phrase("BANCO - "
											+ r.getContratoCobranca().getRecebedor5().getBanco() + " AG. "
											+ r.getContratoCobranca().getRecebedor5().getAgencia() + " C/C "
											+ r.getContratoCobranca().getRecebedor5().getConta() + " VALOR - R$ "
											+ r.getContratoCobranca().getVlrRecebedor5().toString().replace(".", ",")));
								} else {
									cell1 = new PdfPCell(
											new Phrase("BANCO - " + r.getContratoCobranca().getRecebedor5().getBanco()
													+ " AG. " + r.getContratoCobranca().getRecebedor5().getAgencia()
													+ " C/C " + r.getContratoCobranca().getRecebedor5().getConta()));
								}

								cell1.setBorderColor(BaseColor.BLACK);
								cell1.disableBorderSide(2);// (1-Top,2-Bottom,3-left and 4-Right border)
								cell1.setVerticalAlignment(Element.ALIGN_MIDDLE);
								cell1.setHorizontalAlignment(Element.ALIGN_LEFT);

								cell1.setPaddingTop(5f);
								cell1.setPaddingBottom(5f);
								cell1.setColspan(10);
								table.addCell(cell1);
							}
						}

						if (r.getContratoCobranca().getRecebedor5().getNomeCC() != null) {
							if (!r.getContratoCobranca().getRecebedor5().getNomeCC().equals("")) {
								cell1 = new PdfPCell(new Phrase(
										"FAVORECIDO - " + r.getContratoCobranca().getRecebedor5().getNomeCC()));
								cell1.setBorderColor(BaseColor.BLACK);
								cell1.disableBorderSide(2);// (1-Top,2-Bottom,3-left and 4-Right border)
								cell1.disableBorderSide(1);
								cell1.setVerticalAlignment(Element.ALIGN_MIDDLE);
								cell1.setHorizontalAlignment(Element.ALIGN_LEFT);

								cell1.setPaddingTop(5f);
								cell1.setPaddingBottom(5f);
								cell1.setColspan(10);
								table.addCell(cell1);
							}
						}

						texto = null;
						if (r.getContratoCobranca().getRecebedor5().getCpfCC() != null) {
							if (!r.getContratoCobranca().getRecebedor5().getCpfCC().equals("")) {
								texto = "CPF - " + r.getContratoCobranca().getRecebedor5().getCpfCC();
							}
						}

						if (r.getContratoCobranca().getRecebedor5().getCnpjCC() != null) {
							if (!r.getContratoCobranca().getRecebedor5().getCnpjCC().equals("")) {
								texto = "CNPJ - " + r.getContratoCobranca().getRecebedor5().getCnpj();

							}
						}

						if (texto != null) {
							cell1 = new PdfPCell(new Phrase(texto));
							cell1.setBorderColor(BaseColor.BLACK);
							cell1.disableBorderSide(1);
							cell1.setVerticalAlignment(Element.ALIGN_MIDDLE);
							cell1.setHorizontalAlignment(Element.ALIGN_LEFT);

							cell1.setPaddingTop(5f);
							cell1.setPaddingBottom(5f);
							cell1.setColspan(10);
							table.addCell(cell1);
						}
					}

					if (r.getContratoCobranca().getRecebedor6() != null) {

						if (r.getContratoCobranca().getRecebedor6().getConta() != null
								&& r.getContratoCobranca().getRecebedor6().getAgencia() != null
								&& r.getContratoCobranca().getRecebedor6().getBanco() != null) {
							if (!r.getContratoCobranca().getRecebedor6().getConta().equals("")
									&& !r.getContratoCobranca().getRecebedor6().getBanco().equals("")
									&& !r.getContratoCobranca().getRecebedor6().getAgencia().equals("")) {

								if (r.getContratoCobranca().getVlrRecebedor6() != null) {
									cell1 = new PdfPCell(new Phrase("BANCO - "
											+ r.getContratoCobranca().getRecebedor6().getBanco() + " AG. "
											+ r.getContratoCobranca().getRecebedor6().getAgencia() + " C/C "
											+ r.getContratoCobranca().getRecebedor6().getConta() + " VALOR - R$ "
											+ r.getContratoCobranca().getVlrRecebedor6().toString().replace(".", ",")));
								} else {
									cell1 = new PdfPCell(
											new Phrase("BANCO - " + r.getContratoCobranca().getRecebedor6().getBanco()
													+ " AG. " + r.getContratoCobranca().getRecebedor6().getAgencia()
													+ " C/C " + r.getContratoCobranca().getRecebedor6().getConta()));
								}

								cell1.setBorderColor(BaseColor.BLACK);
								cell1.disableBorderSide(2);// (1-Top,2-Bottom,3-left and 4-Right border)
								cell1.setVerticalAlignment(Element.ALIGN_MIDDLE);
								cell1.setHorizontalAlignment(Element.ALIGN_LEFT);

								cell1.setPaddingTop(5f);
								cell1.setPaddingBottom(5f);
								cell1.setColspan(10);
								table.addCell(cell1);
							}
						}

						if (r.getContratoCobranca().getRecebedor6().getNomeCC() != null) {
							if (!r.getContratoCobranca().getRecebedor6().getNomeCC().equals("")) {
								cell1 = new PdfPCell(new Phrase(
										"FAVORECIDO - " + r.getContratoCobranca().getRecebedor6().getNomeCC()));
								cell1.setBorderColor(BaseColor.BLACK);
								cell1.disableBorderSide(2);// (1-Top,2-Bottom,3-left and 4-Right border)
								cell1.disableBorderSide(1);
								cell1.setVerticalAlignment(Element.ALIGN_MIDDLE);
								cell1.setHorizontalAlignment(Element.ALIGN_LEFT);

								cell1.setPaddingTop(5f);
								cell1.setPaddingBottom(5f);
								cell1.setColspan(10);
								table.addCell(cell1);
							}
						}

						texto = null;
						if (r.getContratoCobranca().getRecebedor6().getCpfCC() != null) {
							if (!r.getContratoCobranca().getRecebedor6().getCpfCC().equals("")) {
								texto = "CPF - " + r.getContratoCobranca().getRecebedor6().getCpfCC();
							}
						}

						if (r.getContratoCobranca().getRecebedor6().getCnpjCC() != null) {
							if (!r.getContratoCobranca().getRecebedor6().getCnpjCC().equals("")) {
								texto = "CNPJ - " + r.getContratoCobranca().getRecebedor6().getCnpj();

							}
						}

						if (texto != null) {
							cell1 = new PdfPCell(new Phrase(texto));
							cell1.setBorderColor(BaseColor.BLACK);
							cell1.disableBorderSide(1);
							cell1.setVerticalAlignment(Element.ALIGN_MIDDLE);
							cell1.setHorizontalAlignment(Element.ALIGN_LEFT);

							cell1.setPaddingTop(5f);
							cell1.setPaddingBottom(5f);
							cell1.setColspan(10);
							table.addCell(cell1);
						}
					}

					if (r.getContratoCobranca().getRecebedor7() != null) {

						if (r.getContratoCobranca().getRecebedor7().getConta() != null
								&& r.getContratoCobranca().getRecebedor7().getAgencia() != null
								&& r.getContratoCobranca().getRecebedor7().getBanco() != null) {
							if (!r.getContratoCobranca().getRecebedor7().getConta().equals("")
									&& !r.getContratoCobranca().getRecebedor7().getBanco().equals("")
									&& !r.getContratoCobranca().getRecebedor7().getAgencia().equals("")) {

								if (r.getContratoCobranca().getVlrRecebedor7() != null) {
									cell1 = new PdfPCell(new Phrase("BANCO - "
											+ r.getContratoCobranca().getRecebedor7().getBanco() + " AG. "
											+ r.getContratoCobranca().getRecebedor7().getAgencia() + " C/C "
											+ r.getContratoCobranca().getRecebedor7().getConta() + " VALOR - R$ "
											+ r.getContratoCobranca().getVlrRecebedor7().toString().replace(".", ",")));
								} else {
									cell1 = new PdfPCell(
											new Phrase("BANCO - " + r.getContratoCobranca().getRecebedor7().getBanco()
													+ " AG. " + r.getContratoCobranca().getRecebedor7().getAgencia()
													+ " C/C " + r.getContratoCobranca().getRecebedor7().getConta()));
								}

								cell1.setBorderColor(BaseColor.BLACK);
								cell1.disableBorderSide(2);// (1-Top,2-Bottom,3-left and 4-Right border)
								cell1.setVerticalAlignment(Element.ALIGN_MIDDLE);
								cell1.setHorizontalAlignment(Element.ALIGN_LEFT);

								cell1.setPaddingTop(5f);
								cell1.setPaddingBottom(5f);
								cell1.setColspan(10);
								table.addCell(cell1);
							}
						}

						if (r.getContratoCobranca().getRecebedor7().getNomeCC() != null) {
							if (!r.getContratoCobranca().getRecebedor7().getNomeCC().equals("")) {
								cell1 = new PdfPCell(new Phrase(
										"FAVORECIDO - " + r.getContratoCobranca().getRecebedor7().getNomeCC()));
								cell1.setBorderColor(BaseColor.BLACK);
								cell1.disableBorderSide(2);// (1-Top,2-Bottom,3-left and 4-Right border)
								cell1.disableBorderSide(1);
								cell1.setVerticalAlignment(Element.ALIGN_MIDDLE);
								cell1.setHorizontalAlignment(Element.ALIGN_LEFT);

								cell1.setPaddingTop(5f);
								cell1.setPaddingBottom(5f);
								cell1.setColspan(10);
								table.addCell(cell1);
							}
						}

						texto = null;
						if (r.getContratoCobranca().getRecebedor7().getCpfCC() != null) {
							if (!r.getContratoCobranca().getRecebedor7().getCpfCC().equals("")) {
								texto = "CPF - " + r.getContratoCobranca().getRecebedor7().getCpfCC();
							}
						}

						if (r.getContratoCobranca().getRecebedor7().getCnpjCC() != null) {
							if (!r.getContratoCobranca().getRecebedor7().getCnpjCC().equals("")) {
								texto = "CNPJ - " + r.getContratoCobranca().getRecebedor7().getCnpj();

							}
						}

						if (texto != null) {
							cell1 = new PdfPCell(new Phrase(texto));
							cell1.setBorderColor(BaseColor.BLACK);
							cell1.disableBorderSide(1);
							cell1.setVerticalAlignment(Element.ALIGN_MIDDLE);
							cell1.setHorizontalAlignment(Element.ALIGN_LEFT);

							cell1.setPaddingTop(5f);
							cell1.setPaddingBottom(5f);
							cell1.setColspan(10);
							table.addCell(cell1);
						}
					}

					if (r.getContratoCobranca().getRecebedor8() != null) {

						if (r.getContratoCobranca().getRecebedor8().getConta() != null
								&& r.getContratoCobranca().getRecebedor8().getAgencia() != null
								&& r.getContratoCobranca().getRecebedor8().getBanco() != null) {
							if (!r.getContratoCobranca().getRecebedor8().getConta().equals("")
									&& !r.getContratoCobranca().getRecebedor8().getBanco().equals("")
									&& !r.getContratoCobranca().getRecebedor8().getAgencia().equals("")) {

								if (r.getContratoCobranca().getVlrRecebedor8() != null) {
									cell1 = new PdfPCell(new Phrase("BANCO - "
											+ r.getContratoCobranca().getRecebedor8().getBanco() + " AG. "
											+ r.getContratoCobranca().getRecebedor8().getAgencia() + " C/C "
											+ r.getContratoCobranca().getRecebedor8().getConta() + " VALOR - R$ "
											+ r.getContratoCobranca().getVlrRecebedor8().toString().replace(".", ",")));
								} else {
									cell1 = new PdfPCell(
											new Phrase("BANCO - " + r.getContratoCobranca().getRecebedor8().getBanco()
													+ " AG. " + r.getContratoCobranca().getRecebedor8().getAgencia()
													+ " C/C " + r.getContratoCobranca().getRecebedor8().getConta()));
								}

								cell1.setBorderColor(BaseColor.BLACK);
								cell1.disableBorderSide(2);// (1-Top,2-Bottom,3-left and 4-Right border)
								cell1.setVerticalAlignment(Element.ALIGN_MIDDLE);
								cell1.setHorizontalAlignment(Element.ALIGN_LEFT);

								cell1.setPaddingTop(5f);
								cell1.setPaddingBottom(5f);
								cell1.setColspan(10);
								table.addCell(cell1);
							}
						}

						if (r.getContratoCobranca().getRecebedor8().getNomeCC() != null) {
							if (!r.getContratoCobranca().getRecebedor8().getNomeCC().equals("")) {
								cell1 = new PdfPCell(new Phrase(
										"FAVORECIDO - " + r.getContratoCobranca().getRecebedor8().getNomeCC()));
								cell1.setBorderColor(BaseColor.BLACK);
								cell1.disableBorderSide(2);// (1-Top,2-Bottom,3-left and 4-Right border)
								cell1.disableBorderSide(1);
								cell1.setVerticalAlignment(Element.ALIGN_MIDDLE);
								cell1.setHorizontalAlignment(Element.ALIGN_LEFT);

								cell1.setPaddingTop(5f);
								cell1.setPaddingBottom(5f);
								cell1.setColspan(10);
								table.addCell(cell1);
							}
						}

						texto = null;
						if (r.getContratoCobranca().getRecebedor8().getCpfCC() != null) {
							if (!r.getContratoCobranca().getRecebedor8().getCpfCC().equals("")) {
								texto = "CPF - " + r.getContratoCobranca().getRecebedor8().getCpfCC();
							}
						}

						if (r.getContratoCobranca().getRecebedor8().getCnpjCC() != null) {
							if (!r.getContratoCobranca().getRecebedor8().getCnpjCC().equals("")) {
								texto = "CNPJ - " + r.getContratoCobranca().getRecebedor8().getCnpj();

							}
						}

						if (texto != null) {
							cell1 = new PdfPCell(new Phrase(texto));
							cell1.setBorderColor(BaseColor.BLACK);
							cell1.disableBorderSide(1);
							cell1.setVerticalAlignment(Element.ALIGN_MIDDLE);
							cell1.setHorizontalAlignment(Element.ALIGN_LEFT);

							cell1.setPaddingTop(5f);
							cell1.setPaddingBottom(5f);
							cell1.setColspan(10);
							table.addCell(cell1);
						}
					}

					if (r.getContratoCobranca().getRecebedor9() != null) {

						if (r.getContratoCobranca().getRecebedor9().getConta() != null
								&& r.getContratoCobranca().getRecebedor9().getAgencia() != null
								&& r.getContratoCobranca().getRecebedor9().getBanco() != null) {
							if (!r.getContratoCobranca().getRecebedor9().getConta().equals("")
									&& !r.getContratoCobranca().getRecebedor9().getBanco().equals("")
									&& !r.getContratoCobranca().getRecebedor9().getAgencia().equals("")) {

								if (r.getContratoCobranca().getVlrRecebedor9() != null) {
									cell1 = new PdfPCell(new Phrase("BANCO - "
											+ r.getContratoCobranca().getRecebedor9().getBanco() + " AG. "
											+ r.getContratoCobranca().getRecebedor9().getAgencia() + " C/C "
											+ r.getContratoCobranca().getRecebedor9().getConta() + " VALOR - R$ "
											+ r.getContratoCobranca().getVlrRecebedor9().toString().replace(".", ",")));
								} else {
									cell1 = new PdfPCell(
											new Phrase("BANCO - " + r.getContratoCobranca().getRecebedor9().getBanco()
													+ " AG. " + r.getContratoCobranca().getRecebedor9().getAgencia()
													+ " C/C " + r.getContratoCobranca().getRecebedor9().getConta()));
								}

								cell1.setBorderColor(BaseColor.BLACK);
								cell1.disableBorderSide(2);// (1-Top,2-Bottom,3-left and 4-Right border)
								cell1.setVerticalAlignment(Element.ALIGN_MIDDLE);
								cell1.setHorizontalAlignment(Element.ALIGN_LEFT);

								cell1.setPaddingTop(5f);
								cell1.setPaddingBottom(5f);
								cell1.setColspan(10);
								table.addCell(cell1);
							}
						}

						if (r.getContratoCobranca().getRecebedor9().getNomeCC() != null) {
							if (!r.getContratoCobranca().getRecebedor9().getNomeCC().equals("")) {
								cell1 = new PdfPCell(new Phrase(
										"FAVORECIDO - " + r.getContratoCobranca().getRecebedor9().getNomeCC()));
								cell1.setBorderColor(BaseColor.BLACK);
								cell1.disableBorderSide(2);// (1-Top,2-Bottom,3-left and 4-Right border)
								cell1.disableBorderSide(1);
								cell1.setVerticalAlignment(Element.ALIGN_MIDDLE);
								cell1.setHorizontalAlignment(Element.ALIGN_LEFT);

								cell1.setPaddingTop(5f);
								cell1.setPaddingBottom(5f);
								cell1.setColspan(10);
								table.addCell(cell1);

							}
						}

						texto = null;
						if (r.getContratoCobranca().getRecebedor9().getCpfCC() != null) {
							if (!r.getContratoCobranca().getRecebedor9().getCpfCC().equals("")) {
								texto = "CPF - " + r.getContratoCobranca().getRecebedor9().getCpfCC();
							}
						}

						if (r.getContratoCobranca().getRecebedor9().getCnpjCC() != null) {
							if (!r.getContratoCobranca().getRecebedor9().getCnpjCC().equals("")) {
								texto = "CNPJ - " + r.getContratoCobranca().getRecebedor9().getCnpj();

							}
						}

						if (texto != null) {
							cell1 = new PdfPCell(new Phrase(texto));
							cell1.setBorderColor(BaseColor.BLACK);
							cell1.disableBorderSide(1);
							cell1.setVerticalAlignment(Element.ALIGN_MIDDLE);
							cell1.setHorizontalAlignment(Element.ALIGN_LEFT);

							cell1.setPaddingTop(5f);
							cell1.setPaddingBottom(5f);
							cell1.setColspan(10);
							table.addCell(cell1);
						}
					}

					if (r.getContratoCobranca().getRecebedor10() != null) {

						if (r.getContratoCobranca().getRecebedor10().getConta() != null
								&& r.getContratoCobranca().getRecebedor10().getAgencia() != null
								&& r.getContratoCobranca().getRecebedor10().getBanco() != null) {
							if (!r.getContratoCobranca().getRecebedor10().getConta().equals("")
									&& !r.getContratoCobranca().getRecebedor10().getBanco().equals("")
									&& !r.getContratoCobranca().getRecebedor10().getAgencia().equals("")) {

								if (r.getContratoCobranca().getVlrRecebedor10() != null) {
									cell1 = new PdfPCell(
											new Phrase("BANCO - " + r.getContratoCobranca().getRecebedor10().getBanco()
													+ " AG. " + r.getContratoCobranca().getRecebedor10().getAgencia()
													+ " C/C " + r.getContratoCobranca().getRecebedor10().getConta()
													+ " VALOR - R$ " + r.getContratoCobranca().getVlrRecebedor10()
															.toString().replace(".", ",")));
								} else {
									cell1 = new PdfPCell(
											new Phrase("BANCO - " + r.getContratoCobranca().getRecebedor10().getBanco()
													+ " AG. " + r.getContratoCobranca().getRecebedor10().getAgencia()
													+ " C/C " + r.getContratoCobranca().getRecebedor10().getConta()));
								}

								cell1.setBorderColor(BaseColor.BLACK);
								cell1.disableBorderSide(2);// (1-Top,2-Bottom,3-left and 4-Right border)
								cell1.setVerticalAlignment(Element.ALIGN_MIDDLE);
								cell1.setHorizontalAlignment(Element.ALIGN_LEFT);

								cell1.setPaddingTop(5f);
								cell1.setPaddingBottom(5f);
								cell1.setColspan(10);
								table.addCell(cell1);
							}
						}

						if (r.getContratoCobranca().getRecebedor10().getNomeCC() != null) {
							if (!r.getContratoCobranca().getRecebedor10().getNomeCC().equals("")) {
								cell1 = new PdfPCell(new Phrase(
										"FAVORECIDO - " + r.getContratoCobranca().getRecebedor10().getNomeCC()));
								cell1.setBorderColor(BaseColor.BLACK);
								cell1.disableBorderSide(2);// (1-Top,2-Bottom,3-left and 4-Right border)
								cell1.disableBorderSide(1);
								cell1.setVerticalAlignment(Element.ALIGN_MIDDLE);
								cell1.setHorizontalAlignment(Element.ALIGN_LEFT);

								cell1.setPaddingTop(5f);
								cell1.setPaddingBottom(5f);
								cell1.setColspan(10);
								table.addCell(cell1);

							}
						}

						texto = null;
						if (r.getContratoCobranca().getRecebedor10().getCpfCC() != null) {
							if (!r.getContratoCobranca().getRecebedor10().getCpfCC().equals("")) {
								texto = "CPF - " + r.getContratoCobranca().getRecebedor10().getCpfCC();
							}
						}

						if (r.getContratoCobranca().getRecebedor10().getCnpjCC() != null) {
							if (!r.getContratoCobranca().getRecebedor10().getCnpjCC().equals("")) {
								texto = "CNPJ - " + r.getContratoCobranca().getRecebedor10().getCnpj();

							}
						}

						if (texto != null) {
							cell1 = new PdfPCell(new Phrase(texto));
							cell1.setBorderColor(BaseColor.BLACK);
							cell1.disableBorderSide(1);
							cell1.setVerticalAlignment(Element.ALIGN_MIDDLE);
							cell1.setHorizontalAlignment(Element.ALIGN_LEFT);

							cell1.setPaddingTop(5f);
							cell1.setPaddingBottom(5f);
							cell1.setColspan(10);
							table.addCell(cell1);
						}
					}

					cell1 = new PdfPCell(new Phrase(" "));
					cell1.setBorderColorTop(BaseColor.BLACK);
					cell1.setVerticalAlignment(Element.ALIGN_MIDDLE);
					cell1.setHorizontalAlignment(Element.ALIGN_LEFT);
					cell1.setBorderWidthBottom(1f);
					cell1.setPaddingTop(5f);
					cell1.setPaddingBottom(5f);
					cell1.setColspan(10);
					table.addCell(cell1);
				} else {
					cell1 = new PdfPCell(new Phrase(" "));
					cell1.setBorder(Rectangle.NO_BORDER);
					cell1.setVerticalAlignment(Element.ALIGN_MIDDLE);
					cell1.setHorizontalAlignment(Element.ALIGN_LEFT);
					cell1.setBorderWidthBottom(1f);
					cell1.setPaddingTop(5f);
					cell1.setPaddingBottom(5f);
					cell1.setColspan(10);
					table.addCell(cell1);
				}

				if (!this.tipoFiltros) {
					break;
				}
			}

			cell1 = new PdfPCell(new Phrase(""));
			cell1.setBorder(Rectangle.NO_BORDER);
			cell1.setVerticalAlignment(Element.ALIGN_MIDDLE);
			cell1.setHorizontalAlignment(Element.ALIGN_CENTER);
			table.addCell(cell1);

			cell2 = new PdfPCell(new Phrase(""));
			cell2.setBorder(Rectangle.NO_BORDER);
			cell2.setVerticalAlignment(Element.ALIGN_MIDDLE);
			cell2.setHorizontalAlignment(Element.ALIGN_CENTER);
			table.addCell(cell2);

			cell3 = new PdfPCell(new Phrase(""));
			cell3.setBorder(Rectangle.NO_BORDER);
			cell3.setVerticalAlignment(Element.ALIGN_MIDDLE);
			cell3.setHorizontalAlignment(Element.ALIGN_CENTER);
			table.addCell(cell3);

			cell4 = new PdfPCell(new Phrase(""));
			cell4.setBorder(Rectangle.NO_BORDER);
			cell4.setVerticalAlignment(Element.ALIGN_MIDDLE);
			cell4.setHorizontalAlignment(Element.ALIGN_CENTER);
			table.addCell(cell4);

			cell6 = new PdfPCell(new Phrase(""));
			cell6.setBorder(Rectangle.NO_BORDER);
			cell6.setVerticalAlignment(Element.ALIGN_MIDDLE);
			cell6.setHorizontalAlignment(Element.ALIGN_CENTER);
			table.addCell(cell6);

			cell7 = new PdfPCell(new Phrase("Total", header));
			cell7.setBorder(Rectangle.NO_BORDER);
			cell7.setVerticalAlignment(Element.ALIGN_MIDDLE);
			cell7.setHorizontalAlignment(Element.ALIGN_CENTER);
			cell7.setBorderWidthBottom(1f);
			cell7.setPaddingTop(5f);
			cell7.setPaddingBottom(5f);
			table.addCell(cell7);

			cell8 = new PdfPCell(new Phrase("R$ " + totalVencido.toString().replace(".", ","), header));
			cell8.setBorder(Rectangle.NO_BORDER);
			cell8.setVerticalAlignment(Element.ALIGN_MIDDLE);
			cell8.setHorizontalAlignment(Element.ALIGN_CENTER);
			cell8.setBorderWidthBottom(1f);
			cell8.setPaddingTop(5f);
			cell8.setPaddingBottom(5f);
			table.addCell(cell8);

			cell99 = new PdfPCell(new Phrase("R$ " + totalVencidoAtualizado.toString().replace(".", ","), header));
			cell99.setBorder(Rectangle.NO_BORDER);
			cell99.setVerticalAlignment(Element.ALIGN_MIDDLE);
			cell99.setHorizontalAlignment(Element.ALIGN_CENTER);
			cell99.setBorderWidthBottom(1f);
			cell99.setPaddingTop(5f);
			cell99.setPaddingBottom(5f);
			table.addCell(cell99);

			cell9 = new PdfPCell(new Phrase("R$ " + totalRetencao.toString().replace(".", ","), header));
			cell9.setBorder(Rectangle.NO_BORDER);
			cell9.setVerticalAlignment(Element.ALIGN_MIDDLE);
			cell9.setHorizontalAlignment(Element.ALIGN_CENTER);
			cell9.setBorderWidthBottom(1f);
			cell9.setPaddingTop(5f);
			cell9.setPaddingBottom(5f);
			table.addCell(cell9);

			if (totalComissao != BigDecimal.ZERO) {
				cell10 = new PdfPCell(new Phrase("R$ " + totalComissao.toString().replace(".", ","), header));
			} else {
				cell10 = new PdfPCell(new Phrase("R$ 0,00", header));
			}

			cell10.setBorder(Rectangle.NO_BORDER);
			cell10.setVerticalAlignment(Element.ALIGN_MIDDLE);
			cell10.setHorizontalAlignment(Element.ALIGN_CENTER);
			cell10.setBorderWidthBottom(1f);
			cell10.setPaddingTop(5f);
			cell10.setPaddingBottom(5f);
			table.addCell(cell10);

			doc.add(table);
			doc.close();
			final GeradorRelatorioDownloadCliente gerador = new GeradorRelatorioDownloadCliente(
					FacesContext.getCurrentInstance());
			String nomeArquivoDownload = String.format("Galleria Bank - Financeiro.pdf", "");
			gerador.open(nomeArquivoDownload);
			gerador.feed(new ByteArrayInputStream(baos.toByteArray()));
			gerador.close();

		} catch (Exception e) {
			context.addMessage(null,
					new FacesMessage(FacesMessage.SEVERITY_ERROR,
							"Contrato de Cobrança: Ocorreu um problema ao gerar o contrato! (Contrato: "
									+ this.objetoContratoCobranca.getNumeroContrato() + ")" + e,
							""));
		} finally {
			this.contratoGerado = true;

		}

	}

	public void imprimeRelatorioFinanceiroContabilidadeXLS() throws IOException {
		this.pathContrato = "";
		this.nomeContrato = "";
		this.file = null;
		this.contratoGerado = false;

		ByteArrayOutputStream baos = new ByteArrayOutputStream();

		TimeZone zone = TimeZone.getDefault();
		Locale locale = new Locale("pt", "BR");
		Calendar dataHoje = Calendar.getInstance(zone, locale);

		dataHoje.set(Calendar.HOUR_OF_DAY, 0);
		dataHoje.set(Calendar.MINUTE, 0);
		dataHoje.set(Calendar.SECOND, 0);
		dataHoje.set(Calendar.MILLISECOND, 0);

		// dataHoje.add(Calendar.DAY_OF_MONTH, 1);

		String excelFileName = this.pathContrato + this.nomeContrato;// name of excel file

		SimpleDateFormat sdfDataRel = new SimpleDateFormat("dd-MM-yyyy", locale);

		String sheetName = sdfDataRel.format(this.getRelDataContratoInicio()) + " a "
				+ sdfDataRel.format(this.getRelDataContratoFim());// name of sheet

		XSSFWorkbook wb = new XSSFWorkbook();
		XSSFSheet sheet = wb.createSheet(sheetName);
		sheet.setDefaultColumnWidth(25);

		// Style para cabeçalho
		XSSFCellStyle cell_style = wb.createCellStyle();
		cell_style.setFillForegroundColor(IndexedColors.GREY_25_PERCENT.getIndex());
		cell_style.setFillPattern(FillPatternType.SOLID_FOREGROUND);

		XSSFFont font = wb.createFont();
		font.setBold(true);
		cell_style.setFont(font);
		cell_style.setAlignment(HorizontalAlignment.CENTER);
		cell_style.setVerticalAlignment(VerticalAlignment.CENTER);
		cell_style.setBorderBottom(BorderStyle.THIN);
		cell_style.setBorderTop(BorderStyle.THIN);
		cell_style.setBorderRight(BorderStyle.THIN);
		cell_style.setBorderLeft(BorderStyle.THIN);
		cell_style.setWrapText(true);

		// iterating r number of rows
		// cria CABEÇALHO
		int countLine = 0;
		XSSFRow row = sheet.createRow(countLine);
		XSSFCell cell;
		cell = row.createCell(0);
		cell.setCellValue("Contrato");
		cell.setCellStyle(cell_style);
		cell = row.createCell(1);
		cell.setCellValue("Pagador");
		cell.setCellStyle(cell_style);
		cell = row.createCell(2);
		cell.setCellValue("Parcela");
		cell.setCellStyle(cell_style);
		cell = row.createCell(3);
		cell.setCellValue("Vencimento Original");
		cell.setCellStyle(cell_style);
		cell = row.createCell(4);
		cell.setCellValue("Valor");
		cell.setCellStyle(cell_style);
		cell = row.createCell(5);
		cell.setCellValue("Data Pagamento");
		cell.setCellStyle(cell_style);
		cell = row.createCell(6);
		cell.setCellValue("Valor Pago");
		cell.setCellStyle(cell_style);
		cell = row.createCell(7);
		cell.setCellValue("Valor Juros");
		cell.setCellStyle(cell_style);
		cell = row.createCell(8);
		cell.setCellValue("Valor Amortização");
		cell.setCellStyle(cell_style);

		// cria estilo para dados em geral
		cell_style = wb.createCellStyle();
		cell_style.setAlignment(HorizontalAlignment.CENTER);
		cell_style.setVerticalAlignment(VerticalAlignment.CENTER);
		cell_style.setBorderBottom(BorderStyle.THIN);
		cell_style.setBorderTop(BorderStyle.THIN);
		cell_style.setBorderRight(BorderStyle.THIN);
		cell_style.setBorderLeft(BorderStyle.THIN);
		cell_style.setWrapText(true);

		// cria estilo especifico para coluna type numérico
		CellStyle numericStyle = wb.createCellStyle();
		numericStyle.setAlignment(HorizontalAlignment.CENTER);
		numericStyle.setVerticalAlignment(VerticalAlignment.CENTER);
		numericStyle.setBorderBottom(BorderStyle.THIN);
		numericStyle.setBorderTop(BorderStyle.THIN);
		numericStyle.setBorderRight(BorderStyle.THIN);
		numericStyle.setBorderLeft(BorderStyle.THIN);
		numericStyle.setWrapText(true);
		// cria a formatação para moeda
		CreationHelper ch = wb.getCreationHelper();
		numericStyle.setDataFormat(
				ch.createDataFormat().getFormat("_(R$* #,##0.00_);_(R$* (#,##0.00);_(R$* \"-\"??_);_(@_)"));

		// cria estilo especifico para coluna type Date
		CellStyle dateStyle = wb.createCellStyle();
		dateStyle.setAlignment(HorizontalAlignment.CENTER);
		dateStyle.setVerticalAlignment(VerticalAlignment.CENTER);
		dateStyle.setBorderBottom(BorderStyle.THIN);
		dateStyle.setBorderTop(BorderStyle.THIN);
		dateStyle.setBorderRight(BorderStyle.THIN);
		dateStyle.setBorderLeft(BorderStyle.THIN);
		dateStyle.setWrapText(true);
		// cria a formatação para Date
		dateStyle.setDataFormat((short) BuiltinFormats.getBuiltinFormat("m/d/yy"));

		for (RelatorioFinanceiroCobranca record : this.relObjetoContratoCobranca) {
			countLine++;
			row = sheet.createRow(countLine);

			// Contrato
			cell = row.createCell(0);
			cell.setCellStyle(cell_style);
			cell.setCellValue(record.getNumeroContrato());

			// Pagador
			cell = row.createCell(1);
			cell.setCellStyle(cell_style);
			cell.setCellValue(record.getNomePagador());

			// Parcela
			cell = row.createCell(2);
			cell.setCellStyle(cell_style);
			cell.setCellValue(record.getParcela());

			// Vencimento Original
			cell = row.createCell(3);
			cell.setCellStyle(dateStyle);

			if (record.getDataVencimento() != null) {
				cell.setCellValue(record.getDataVencimento());
			} else {
				cell.setCellValue("");
			}

			// Valor
			cell = row.createCell(4);
			cell.setCellStyle(numericStyle);
			cell.setCellType(CellType.NUMERIC);

			if (record.getVlrParcela() != null) {
				cell.setCellValue(((BigDecimal) record.getVlrParcela()).doubleValue());
			} else {
				cell.setCellValue(((BigDecimal) BigDecimal.ZERO).doubleValue());
			}

			// Data Pagamento
			cell = row.createCell(5);
			cell.setCellStyle(dateStyle);

			if (record.getDataUltimoPagamento() != null) {
				cell.setCellValue(record.getDataUltimoPagamento());
			} else {
				cell.setCellValue("");
			}

			// Valor Pago
			cell = row.createCell(6);
			cell.setCellStyle(numericStyle);
			cell.setCellType(CellType.NUMERIC);

			if (record.getVlrTotalPago() != null) {
				cell.setCellValue(((BigDecimal) record.getVlrTotalPago()).doubleValue());
			} else {
				cell.setCellValue(((BigDecimal) BigDecimal.ZERO).doubleValue());
			}

			// Valor Juros
			cell = row.createCell(7);
			cell.setCellStyle(numericStyle);
			cell.setCellType(CellType.NUMERIC);

			if (record.getVlrJurosParcela() != null) {
				cell.setCellValue(((BigDecimal) record.getVlrJurosParcela()).doubleValue());
			} else {
				cell.setCellValue(((BigDecimal) BigDecimal.ZERO).doubleValue());
			}

			// Valor Amortizacao
			cell = row.createCell(8);
			cell.setCellStyle(numericStyle);
			cell.setCellType(CellType.NUMERIC);

			if (record.getVlrAmortizacaoParcela() != null) {
				cell.setCellValue(((BigDecimal) record.getVlrAmortizacaoParcela()).doubleValue());
			} else {
				cell.setCellValue(((BigDecimal) BigDecimal.ZERO).doubleValue());
			}
		}

		// write this workbook to an Outputstream.
		wb.write(baos);
		final GeradorRelatorioDownloadCliente gerador = new GeradorRelatorioDownloadCliente(
				FacesContext.getCurrentInstance());
		String nomeArquivoDownload = String.format("Galleria Bank - FinanceiroContabilidade.xlsx", "");
		gerador.open(nomeArquivoDownload);
		gerador.feed(new ByteArrayInputStream(baos.toByteArray()));
		gerador.close();

		this.contratoGerado = true;
	}

	public void imprimeRelatorioFinanceiroContabilidade() {
		FacesContext context = FacesContext.getCurrentInstance();
		/*
		 * Referência iText - Gerador PDF
		 * http://www.dicas-l.com.br/arquivo/gerando_pdf_utilizando_java.php#.
		 * VGpT0_nF_h4
		 */

		Document doc = null;
		OutputStream os = null;
		try {
			/*
			 * Fonts Utilizadas no PDF
			 */
			ByteArrayOutputStream baos = new ByteArrayOutputStream();
			Font header = new Font(FontFamily.HELVETICA, 12, Font.BOLD);

			Font titulo = new Font(FontFamily.HELVETICA, 10, Font.BOLD);
			Font subtitulo = new Font(FontFamily.HELVETICA, 10, Font.BOLD);
			Font subtituloIdent = new Font(FontFamily.HELVETICA, 10, Font.BOLD);
			Font destaque = new Font(FontFamily.HELVETICA, 8, Font.BOLD);

			TimeZone zone = TimeZone.getDefault();
			Locale locale = new Locale("pt", "BR");

			Calendar date = Calendar.getInstance(zone, locale);

			SimpleDateFormat sdfDataRel = new SimpleDateFormat("dd/MMM/yyyy", locale);
			SimpleDateFormat sdfDataRelComHoras = new SimpleDateFormat("dd/MMM/yyyy hh:mm:ss", locale);

			/*
			 * Configuração inicial do PDF - Cria o documento tamanho A4, margens de 2,54cm
			 */
			doc = new Document(PageSize.A4.rotate(), 10, 10, 10, 10);

			// Associa a stream de saída ao
			PdfWriter.getInstance(doc, baos);

			// Abre o documento
			doc.open();

			Paragraph p1 = new Paragraph("RELATÓRIO FINANCEIRO CONTABILIDADE");

			p1 = new Paragraph("RELATÓRIO FINANCEIRO DE COBRANÇA - " + sdfDataRel.format(this.relDataContratoInicio)
					+ " a " + sdfDataRel.format(this.relDataContratoFim), header);

			p1.setAlignment(Element.ALIGN_CENTER);
			p1.setSpacingAfter(10);
			doc.add(p1);

			PdfPTable table = new PdfPTable(
					new float[] { 0.16f, 0.16f, 0.16f, 0.16f, 0.16f, 0.16f, 0.16f, 0.16f, 0.16f });
			table.setWidthPercentage(100.0f);

			PdfPCell cell1 = new PdfPCell(new Phrase("CONTRATO", titulo));
			cell1.setBorderColor(BaseColor.BLACK);
			cell1.setVerticalAlignment(Element.ALIGN_MIDDLE);
			cell1.setHorizontalAlignment(Element.ALIGN_CENTER);
			cell1.setBackgroundColor(BaseColor.LIGHT_GRAY);
			cell1.setUseBorderPadding(true);
			cell1.setGrayFill(0.9f);
			cell1.setPaddingTop(10f);
			cell1.setPaddingBottom(10f);
			table.addCell(cell1);

			PdfPCell cell2 = new PdfPCell(new Phrase("PAGADOR", titulo));
			cell2.setBorderColor(BaseColor.BLACK);
			cell2.setVerticalAlignment(Element.ALIGN_MIDDLE);
			cell2.setHorizontalAlignment(Element.ALIGN_CENTER);
			cell2.setBackgroundColor(BaseColor.LIGHT_GRAY);
			cell2.setUseBorderPadding(true);
			cell2.setGrayFill(0.9f);
			cell2.setPaddingTop(2f);
			cell2.setPaddingBottom(2f);
			table.addCell(cell2);

			PdfPCell cell3 = new PdfPCell(new Phrase("PARCELA", titulo));
			cell3.setBorderColor(BaseColor.BLACK);
			cell3.setVerticalAlignment(Element.ALIGN_MIDDLE);
			cell3.setHorizontalAlignment(Element.ALIGN_CENTER);
			cell3.setBackgroundColor(BaseColor.LIGHT_GRAY);
			cell3.setUseBorderPadding(true);
			cell3.setGrayFill(0.9f);
			cell3.setPaddingTop(2f);
			cell3.setPaddingBottom(2f);
			table.addCell(cell3);

			PdfPCell cell4 = new PdfPCell(new Phrase("DATA VENCIMENTO", titulo));
			cell4.setBorderColor(BaseColor.BLACK);
			cell4.setVerticalAlignment(Element.ALIGN_MIDDLE);
			cell4.setHorizontalAlignment(Element.ALIGN_CENTER);
			cell4.setBackgroundColor(BaseColor.LIGHT_GRAY);
			cell4.setUseBorderPadding(true);
			cell4.setGrayFill(0.9f);
			cell4.setPaddingTop(2f);
			cell4.setPaddingBottom(2f);
			table.addCell(cell4);

			PdfPCell cell6 = new PdfPCell(new Phrase("VALOR", titulo));
			cell6.setBorderColor(BaseColor.BLACK);
			cell6.setVerticalAlignment(Element.ALIGN_MIDDLE);
			cell6.setHorizontalAlignment(Element.ALIGN_CENTER);
			cell6.setBackgroundColor(BaseColor.LIGHT_GRAY);
			cell6.setUseBorderPadding(true);
			cell6.setGrayFill(0.9f);
			cell6.setPaddingTop(2f);
			cell6.setPaddingBottom(2f);
			table.addCell(cell6);

			PdfPCell cell7 = new PdfPCell(new Phrase("DATA PAGAMENTO", titulo));
			cell7.setBorderColor(BaseColor.BLACK);
			cell7.setVerticalAlignment(Element.ALIGN_MIDDLE);
			cell7.setHorizontalAlignment(Element.ALIGN_CENTER);
			cell7.setBackgroundColor(BaseColor.LIGHT_GRAY);
			cell7.setUseBorderPadding(true);
			cell7.setGrayFill(0.9f);
			cell7.setPaddingTop(2f);
			cell7.setPaddingBottom(2f);
			table.addCell(cell7);

			PdfPCell cell8 = new PdfPCell(new Phrase("VALOR PAGO", titulo));
			cell8.setBorderColor(BaseColor.BLACK);
			cell8.setVerticalAlignment(Element.ALIGN_MIDDLE);
			cell8.setHorizontalAlignment(Element.ALIGN_CENTER);
			cell8.setBackgroundColor(BaseColor.LIGHT_GRAY);
			cell8.setUseBorderPadding(true);
			cell8.setGrayFill(0.9f);
			cell8.setPaddingTop(2f);
			cell8.setPaddingBottom(2f);
			table.addCell(cell8);

			PdfPCell cell99 = new PdfPCell(new Phrase("VALOR JUROS", titulo));
			cell99.setBorderColor(BaseColor.BLACK);
			cell99.setVerticalAlignment(Element.ALIGN_MIDDLE);
			cell99.setHorizontalAlignment(Element.ALIGN_CENTER);
			cell99.setBackgroundColor(BaseColor.LIGHT_GRAY);
			cell99.setUseBorderPadding(true);
			cell99.setGrayFill(0.9f);
			cell99.setPaddingTop(2f);
			cell99.setPaddingBottom(2f);
			table.addCell(cell99);

			PdfPCell cell10 = new PdfPCell(new Phrase("VALOR AMORTIZAÇÃO", titulo));
			cell10.setBorderColor(BaseColor.BLACK);
			cell10.setVerticalAlignment(Element.ALIGN_MIDDLE);
			cell10.setHorizontalAlignment(Element.ALIGN_CENTER);
			cell10.setBackgroundColor(BaseColor.LIGHT_GRAY);
			cell10.setUseBorderPadding(true);
			cell10.setGrayFill(0.9f);
			cell10.setPaddingTop(2f);
			cell10.setPaddingBottom(2f);
			table.addCell(cell10);

			BigDecimal totalParcela = BigDecimal.ZERO;
			BigDecimal totalPago = BigDecimal.ZERO;
			BigDecimal totalJuros = BigDecimal.ZERO;
			BigDecimal totalAmortizacao = BigDecimal.ZERO;

			for (RelatorioFinanceiroCobranca r : this.relObjetoContratoCobranca) {
				cell1 = new PdfPCell(new Phrase(r.getNumeroContrato()));
				cell1.setBorderColor(BaseColor.BLACK);
				cell1.setVerticalAlignment(Element.ALIGN_MIDDLE);
				cell1.setHorizontalAlignment(Element.ALIGN_CENTER);
				cell1.setPaddingTop(5f);
				cell1.setPaddingBottom(5f);
				table.addCell(cell1);

				cell2 = new PdfPCell(new Phrase(r.getNomePagador()));
				cell2.setBorderColor(BaseColor.BLACK);
				cell2.setVerticalAlignment(Element.ALIGN_MIDDLE);
				cell2.setHorizontalAlignment(Element.ALIGN_CENTER);
				cell2.setPaddingTop(5f);
				cell2.setPaddingBottom(5f);
				table.addCell(cell2);

				cell3 = new PdfPCell(new Phrase(r.getParcela()));
				cell3.setBorderColor(BaseColor.BLACK);
				cell3.setVerticalAlignment(Element.ALIGN_MIDDLE);
				cell3.setHorizontalAlignment(Element.ALIGN_CENTER);
				cell3.setPaddingTop(5f);
				cell3.setPaddingBottom(5f);
				table.addCell(cell3);

				cell4 = new PdfPCell(new Phrase(sdfDataRel.format(r.getDataVencimento())));
				cell4.setBorderColor(BaseColor.BLACK);
				cell4.setVerticalAlignment(Element.ALIGN_MIDDLE);
				cell4.setHorizontalAlignment(Element.ALIGN_CENTER);
				cell4.setPaddingTop(5f);
				cell4.setPaddingBottom(5f);
				table.addCell(cell4);

				if (r.getVlrParcela() != null) {
					if (r.getVlrParcela() != BigDecimal.ZERO) {
						cell6 = new PdfPCell(new Phrase("R$ " + r.getVlrParcela().toString().replace(".", ",")));
						totalParcela = totalParcela.add(r.getVlrParcela());
					} else {
						cell6 = new PdfPCell(new Phrase("R$ 0,00"));
					}
				}
				cell6.setBorderColor(BaseColor.BLACK);
				cell6.setVerticalAlignment(Element.ALIGN_MIDDLE);
				cell6.setHorizontalAlignment(Element.ALIGN_CENTER);
				cell6.setPaddingTop(5f);
				cell6.setPaddingBottom(5f);
				table.addCell(cell6);

				if (r.getDataUltimoPagamento() != null) {
					cell7 = new PdfPCell(new Phrase(sdfDataRel.format(r.getDataUltimoPagamento())));
				} else {
					cell7 = new PdfPCell(new Phrase(""));
				}

				cell7.setBorderColor(BaseColor.BLACK);
				cell7.setVerticalAlignment(Element.ALIGN_MIDDLE);
				cell7.setHorizontalAlignment(Element.ALIGN_CENTER);
				cell7.setPaddingTop(5f);
				cell7.setPaddingBottom(5f);
				table.addCell(cell7);

				if (r.getVlrTotalPago() != null) {
					if (r.getVlrTotalPago() != BigDecimal.ZERO) {
						cell8 = new PdfPCell(new Phrase("R$ " + r.getVlrTotalPago().toString().replace(".", ",")));
						totalPago = totalPago.add(r.getVlrTotalPago());
					} else {
						cell8 = new PdfPCell(new Phrase("R$ 0,00"));
					}
				} else {
					cell8 = new PdfPCell(new Phrase("R$ 0,00"));
				}

				cell8.setBorderColor(BaseColor.BLACK);
				cell8.setVerticalAlignment(Element.ALIGN_MIDDLE);
				cell8.setHorizontalAlignment(Element.ALIGN_CENTER);
				cell8.setPaddingTop(5f);
				cell8.setPaddingBottom(5f);
				table.addCell(cell8);

				if (r.getVlrJurosParcela() != null) {
					if (r.getVlrJurosParcela() != BigDecimal.ZERO) {
						cell99 = new PdfPCell(new Phrase("R$ " + r.getVlrJurosParcela().toString().replace(".", ",")));
						totalJuros = totalJuros.add(r.getVlrJurosParcela());
					} else {
						cell99 = new PdfPCell(new Phrase("R$ 0,00"));
					}
				} else {
					cell99 = new PdfPCell(new Phrase("R$ 0,00"));
				}

				cell99.setBorderColor(BaseColor.BLACK);
				cell99.setVerticalAlignment(Element.ALIGN_MIDDLE);
				cell99.setHorizontalAlignment(Element.ALIGN_CENTER);
				cell99.setPaddingTop(5f);
				cell99.setPaddingBottom(5f);
				table.addCell(cell99);

				if (r.getVlrAmortizacaoParcela() != null) {
					if (r.getVlrAmortizacaoParcela() != BigDecimal.ZERO) {
						cell10 = new PdfPCell(
								new Phrase("R$ " + r.getVlrAmortizacaoParcela().toString().replace(".", ",")));
						totalAmortizacao = totalAmortizacao.add(r.getVlrAmortizacaoParcela());
					} else {
						cell10 = new PdfPCell(new Phrase("R$ 0,00"));
					}
				} else {
					cell10 = new PdfPCell(new Phrase("R$ 0,00"));
				}

				cell10.setBorderColor(BaseColor.BLACK);
				cell10.setVerticalAlignment(Element.ALIGN_MIDDLE);
				cell10.setHorizontalAlignment(Element.ALIGN_CENTER);
				cell10.setPaddingTop(5f);
				cell10.setPaddingBottom(5f);
				table.addCell(cell10);
			}

			cell1 = new PdfPCell(new Phrase(""));
			cell1.setBorder(Rectangle.NO_BORDER);
			cell1.setVerticalAlignment(Element.ALIGN_MIDDLE);
			cell1.setHorizontalAlignment(Element.ALIGN_CENTER);
			table.addCell(cell1);

			cell2 = new PdfPCell(new Phrase(""));
			cell2.setBorder(Rectangle.NO_BORDER);
			cell2.setVerticalAlignment(Element.ALIGN_MIDDLE);
			cell2.setHorizontalAlignment(Element.ALIGN_CENTER);
			table.addCell(cell2);

			cell3 = new PdfPCell(new Phrase(""));
			cell3.setBorder(Rectangle.NO_BORDER);
			cell3.setVerticalAlignment(Element.ALIGN_MIDDLE);
			cell3.setHorizontalAlignment(Element.ALIGN_CENTER);
			table.addCell(cell3);

			cell4 = new PdfPCell(new Phrase("Total"));
			cell4.setBorder(Rectangle.NO_BORDER);
			cell4.setVerticalAlignment(Element.ALIGN_MIDDLE);
			cell4.setHorizontalAlignment(Element.ALIGN_CENTER);
			table.addCell(cell4);

			if (totalParcela != null) {
				if (totalParcela != BigDecimal.ZERO) {
					cell6 = new PdfPCell(new Phrase("R$ " + totalParcela.toString().replace(".", ","), header));
				} else {
					cell6 = new PdfPCell(new Phrase("R$ 0,00", header));
				}
			} else {
				cell6 = new PdfPCell(new Phrase("R$ 0,00"));
			}
			cell6.setBorder(Rectangle.NO_BORDER);
			cell6.setBorderWidthBottom(1f);
			cell6.setVerticalAlignment(Element.ALIGN_MIDDLE);
			cell6.setHorizontalAlignment(Element.ALIGN_CENTER);
			table.addCell(cell6);

			cell7 = new PdfPCell(new Phrase(""));
			cell7.setBorder(Rectangle.NO_BORDER);
			cell7.setVerticalAlignment(Element.ALIGN_MIDDLE);
			cell7.setHorizontalAlignment(Element.ALIGN_CENTER);
			cell7.setBorderWidthBottom(1f);
			cell7.setPaddingTop(5f);
			cell7.setPaddingBottom(5f);
			table.addCell(cell7);

			if (totalPago != null) {
				if (totalPago != BigDecimal.ZERO) {
					cell8 = new PdfPCell(new Phrase("R$ " + totalPago.toString().replace(".", ","), header));
				} else {
					cell8 = new PdfPCell(new Phrase("R$ 0,00", header));
				}
			} else {
				cell8 = new PdfPCell(new Phrase("R$ 0,00"));
			}

			cell8.setBorder(Rectangle.NO_BORDER);
			cell8.setVerticalAlignment(Element.ALIGN_MIDDLE);
			cell8.setHorizontalAlignment(Element.ALIGN_CENTER);
			cell8.setBorderWidthBottom(1f);
			cell8.setPaddingTop(5f);
			cell8.setPaddingBottom(5f);
			table.addCell(cell8);

			if (totalJuros != null) {
				if (totalJuros != BigDecimal.ZERO) {
					cell99 = new PdfPCell(new Phrase("R$ " + totalJuros.toString().replace(".", ","), header));
				} else {
					cell99 = new PdfPCell(new Phrase("R$ 0,00", header));
				}
			} else {
				cell99 = new PdfPCell(new Phrase("R$ 0,00"));
			}

			cell99.setBorder(Rectangle.NO_BORDER);
			cell99.setVerticalAlignment(Element.ALIGN_MIDDLE);
			cell99.setHorizontalAlignment(Element.ALIGN_CENTER);
			cell99.setBorderWidthBottom(1f);
			cell99.setPaddingTop(5f);
			cell99.setPaddingBottom(5f);
			table.addCell(cell99);

			if (totalAmortizacao != null) {
				if (totalAmortizacao != BigDecimal.ZERO) {
					cell10 = new PdfPCell(new Phrase("R$ " + totalAmortizacao.toString().replace(".", ","), header));
				} else {
					cell10 = new PdfPCell(new Phrase("R$ 0,00", header));
				}
			} else {
				cell10 = new PdfPCell(new Phrase("R$ 0,00"));
			}

			cell10.setBorder(Rectangle.NO_BORDER);
			cell10.setVerticalAlignment(Element.ALIGN_MIDDLE);
			cell10.setHorizontalAlignment(Element.ALIGN_CENTER);
			cell10.setBorderWidthBottom(1f);
			cell10.setPaddingTop(5f);
			cell10.setPaddingBottom(5f);
			table.addCell(cell10);

			doc.add(table);
			doc.close();
			final GeradorRelatorioDownloadCliente gerador = new GeradorRelatorioDownloadCliente(
					FacesContext.getCurrentInstance());
			String nomeArquivoDownload = String.format("Galleria Bank - Financeiro.pdf", "");
			gerador.open(nomeArquivoDownload);
			gerador.feed(new ByteArrayInputStream(baos.toByteArray()));
			gerador.close();

		} catch (Exception e) {
			context.addMessage(null,
					new FacesMessage(FacesMessage.SEVERITY_ERROR,
							"Contrato de Cobrança: Ocorreu um problema ao gerar o contrato! (Contrato: "
									+ this.objetoContratoCobranca.getNumeroContrato() + ")" + e,
							""));
		} finally {
			this.contratoGerado = true;

		}

	}

	public void writeXWPFileBaixado() throws IOException {
		String wordFileName = "Relatório Financeiro Baixado Cobranças.docx";// name of excel file

		String sheetName = "Resultado";// name of sheet

		XWPFDocument document = new XWPFDocument();
		XWPFTable sheet = document.createTable();
		sheet.setWidth(25);

		FileOutputStream fileOut = new FileOutputStream(wordFileName);

		// write this workbook to an Outputstream.
		document.write(fileOut);

	}

	public void writeXLSXFileBaixado() throws IOException {
		ParametrosDao pDao = new ParametrosDao();
		this.pathContrato = pDao.findByFilter("nome", "LOCACAO_PATH_COBRANCA").get(0).getValorString();
		this.nomeContrato = "Relatório Financeiro Baixado Cobranças.xlsx";

		TimeZone zone = TimeZone.getDefault();
		Locale locale = new Locale("pt", "BR");
		Calendar dataHoje = Calendar.getInstance(zone, locale);

		dataHoje.set(Calendar.HOUR_OF_DAY, 0);
		dataHoje.set(Calendar.MINUTE, 0);
		dataHoje.set(Calendar.SECOND, 0);
		dataHoje.set(Calendar.MILLISECOND, 0);

		// dataHoje.add(Calendar.DAY_OF_MONTH, 1);

		String excelFileName = this.pathContrato + this.nomeContrato;// name of excel file

		String sheetName = "Resultado";// name of sheet

		XSSFWorkbook wb = new XSSFWorkbook();
		XSSFSheet sheet = wb.createSheet(sheetName);
		sheet.setDefaultColumnWidth(25);

		// Style para cabeçalho
		XSSFCellStyle cell_style = wb.createCellStyle();
		cell_style.setFillForegroundColor(IndexedColors.GREY_25_PERCENT.getIndex());
		cell_style.setFillPattern(FillPatternType.SOLID_FOREGROUND);

		XSSFFont font = wb.createFont();
		font.setBold(true);
		cell_style.setFont(font);
		cell_style.setAlignment(HorizontalAlignment.CENTER);
		cell_style.setVerticalAlignment(VerticalAlignment.CENTER);
		cell_style.setBorderBottom(BorderStyle.THIN);
		cell_style.setBorderTop(BorderStyle.THIN);
		cell_style.setBorderRight(BorderStyle.THIN);
		cell_style.setBorderLeft(BorderStyle.THIN);
		cell_style.setWrapText(true);

		// iterating r number of rows
		// cria CABEÇALHO
		int countLine = 0;
		XSSFRow row = sheet.createRow(countLine);
		XSSFCell cell;
		cell = row.createCell(0);
		cell.setCellValue("Contrato");
		cell.setCellStyle(cell_style);
		cell = row.createCell(1);
		cell.setCellValue("Data Contrato");
		cell.setCellStyle(cell_style);
		cell = row.createCell(2);
		cell.setCellValue("Responsável");
		cell.setCellStyle(cell_style);
		cell = row.createCell(3);
		cell.setCellValue("Pagador");
		cell.setCellStyle(cell_style);
		cell = row.createCell(4);
		cell.setCellValue("Parcela");
		cell.setCellStyle(cell_style);
		cell = row.createCell(5);
		cell.setCellValue("Vencimento Original");
		cell.setCellStyle(cell_style);
		cell = row.createCell(6);
		cell.setCellValue("Vencimento Atualizado");
		cell.setCellStyle(cell_style);
		cell = row.createCell(7);
		cell.setCellValue("Valor");
		cell.setCellStyle(cell_style);
		cell = row.createCell(8);
		cell.setCellValue("Valor Original");
		cell.setCellStyle(cell_style);
		cell = row.createCell(9);
		cell.setCellValue("Acréscimo");
		cell.setCellStyle(cell_style);
		cell = row.createCell(10);
		cell.setCellValue("Liquidação");
		cell.setCellStyle(cell_style);

		// cria estilo para dados em geral
		cell_style = wb.createCellStyle();
		cell_style.setAlignment(HorizontalAlignment.CENTER);
		cell_style.setVerticalAlignment(VerticalAlignment.CENTER);
		cell_style.setBorderBottom(BorderStyle.THIN);
		cell_style.setBorderTop(BorderStyle.THIN);
		cell_style.setBorderRight(BorderStyle.THIN);
		cell_style.setBorderLeft(BorderStyle.THIN);
		cell_style.setWrapText(true);

		// cria estilo especifico para coluna type numérico
		CellStyle numericStyle = wb.createCellStyle();
		numericStyle.setAlignment(HorizontalAlignment.CENTER);
		numericStyle.setVerticalAlignment(VerticalAlignment.CENTER);
		numericStyle.setBorderBottom(BorderStyle.THIN);
		numericStyle.setBorderTop(BorderStyle.THIN);
		numericStyle.setBorderRight(BorderStyle.THIN);
		numericStyle.setBorderLeft(BorderStyle.THIN);
		numericStyle.setWrapText(true);
		// cria a formatação para moeda
		CreationHelper ch = wb.getCreationHelper();
		numericStyle.setDataFormat(
				ch.createDataFormat().getFormat("_(R$* #,##0.00_);_(R$* (#,##0.00);_(R$* \"-\"??_);_(@_)"));

		// cria estilo especifico para coluna type Date
		CellStyle dateStyle = wb.createCellStyle();
		dateStyle.setAlignment(HorizontalAlignment.CENTER);
		dateStyle.setVerticalAlignment(VerticalAlignment.CENTER);
		dateStyle.setBorderBottom(BorderStyle.THIN);
		dateStyle.setBorderTop(BorderStyle.THIN);
		dateStyle.setBorderRight(BorderStyle.THIN);
		dateStyle.setBorderLeft(BorderStyle.THIN);
		dateStyle.setWrapText(true);
		// cria a formatação para Date
		dateStyle.setDataFormat((short) BuiltinFormats.getBuiltinFormat("m/d/yy"));

		for (RelatorioFinanceiroCobranca record : this.relObjetoContratoCobranca) {
			countLine++;
			row = sheet.createRow(countLine);

			// Contrato
			cell = row.createCell(0);
			cell.setCellStyle(cell_style);
			cell.setCellValue(record.getNumeroContrato());

			// Data do Contrato
			cell = row.createCell(1);
			cell.setCellStyle(dateStyle);
			cell.setCellValue(record.getDataContrato());

			// Responsavel
			cell = row.createCell(2);
			cell.setCellStyle(cell_style);
			cell.setCellValue(record.getContratoCobranca().getResponsavel().getNome());

			// Pagador
			cell = row.createCell(3);
			cell.setCellStyle(cell_style);
			cell.setCellValue(record.getContratoCobranca().getPagador().getNome());

			// Parcela
			cell = row.createCell(4);
			cell.setCellStyle(cell_style);
			cell.setCellValue(record.getParcela());

			// Vencimento
			cell = row.createCell(5);
			cell.setCellStyle(dateStyle);
			cell.setCellValue(record.getDataVencimento());

			// Vencimento Atualizado
			cell = row.createCell(6);
			cell.setCellStyle(dateStyle);
			cell.setCellValue(record.getDataVencimentoAtual());

			// Valor
			cell = row.createCell(7);
			cell.setCellStyle(numericStyle);
			cell.setCellType(CellType.NUMERIC);
			cell.setCellValue(((BigDecimal) record.getValor()).doubleValue());

			// Valor Parcela
			cell = row.createCell(8);
			cell.setCellStyle(numericStyle);
			cell.setCellType(CellType.NUMERIC);
			cell.setCellValue(((BigDecimal) record.getVlrParcela()).doubleValue());

			// Acréscimo
			cell = row.createCell(9);
			cell.setCellStyle(numericStyle);
			cell.setCellType(CellType.NUMERIC);
			cell.setCellValue(((BigDecimal) record.getAcrescimo()).doubleValue());

			// Liquidação
			cell = row.createCell(10);
			cell.setCellStyle(cell_style);
			cell.setCellValue(record.getParcelaPagaStr());
		}

		FileOutputStream fileOut = new FileOutputStream(excelFileName);

		// write this workbook to an Outputstream.
		wb.write(fileOut);
		fileOut.flush();
		fileOut.close();

		this.contratoGerado = true;
	}

	public void writeXLSXFile() throws IOException {
		ParametrosDao pDao = new ParametrosDao();
		ByteArrayOutputStream baos = new ByteArrayOutputStream();
		this.pathContrato = pDao.findByFilter("nome", "LOCACAO_PATH_COBRANCA").get(0).getValorString();
		this.nomeContrato = "Relatório Financeiro Cobrança.xlsx";

		TimeZone zone = TimeZone.getDefault();
		Locale locale = new Locale("pt", "BR");
		Calendar dataHoje = Calendar.getInstance(zone, locale);

		dataHoje.set(Calendar.HOUR_OF_DAY, 0);
		dataHoje.set(Calendar.MINUTE, 0);
		dataHoje.set(Calendar.SECOND, 0);
		dataHoje.set(Calendar.MILLISECOND, 0);

		// dataHoje.add(Calendar.DAY_OF_MONTH, 1);

		String excelFileName = this.pathContrato + this.nomeContrato;// name of excel file

		String sheetName = "Resultado";// name of sheet

		XSSFWorkbook wb = new XSSFWorkbook();
		XSSFSheet sheet = wb.createSheet(sheetName);
		sheet.setDefaultColumnWidth(25);

		// Style para cabeçalho
		XSSFCellStyle cell_style = wb.createCellStyle();
		cell_style.setFillForegroundColor(IndexedColors.GREY_25_PERCENT.getIndex());
		cell_style.setFillPattern(FillPatternType.SOLID_FOREGROUND);

		XSSFFont font = wb.createFont();
		font.setBold(true);
		cell_style.setFont(font);
		cell_style.setAlignment(HorizontalAlignment.CENTER);
		cell_style.setVerticalAlignment(VerticalAlignment.CENTER);
		cell_style.setBorderBottom(BorderStyle.THIN);
		cell_style.setBorderTop(BorderStyle.THIN);
		cell_style.setBorderRight(BorderStyle.THIN);
		cell_style.setBorderLeft(BorderStyle.THIN);
		cell_style.setWrapText(true);

		// iterating r number of rows
		// cria CABEÇALHO
		int countLine = 0;
		XSSFRow row = sheet.createRow(countLine);
		XSSFCell cell;
		cell = row.createCell(0);
		cell.setCellValue("Contrato");
		cell.setCellStyle(cell_style);
		cell = row.createCell(1);
		cell.setCellValue("Data Contrato");
		cell.setCellStyle(cell_style);
		cell = row.createCell(2);
		cell.setCellValue("Responsável");
		cell.setCellStyle(cell_style);
		cell = row.createCell(3);
		cell.setCellValue("Pagador");
		cell.setCellStyle(cell_style);
		cell = row.createCell(4);
		cell.setCellValue("Parcela");
		cell.setCellStyle(cell_style);
		cell = row.createCell(5);
		cell.setCellValue("Vencimento");
		cell.setCellStyle(cell_style);
		cell = row.createCell(6);
		cell.setCellValue("Valor");
		cell.setCellStyle(cell_style);
		cell = row.createCell(7);
		cell.setCellValue("Valor Atualizado");
		cell.setCellStyle(cell_style);
		cell = row.createCell(8);
		cell.setCellValue("Status");
		cell.setCellStyle(cell_style);

		int indexColuna = 8 + 1;

		if (this.isRelIsRelAtraso()) {
			cell = row.createCell(50);
			cell.setCellValue("Parcelas em Aberto");
			cell.setCellStyle(cell_style);
			cell = row.createCell(50);
			cell.setCellValue("Com Baixas Parciais (# Parcela)");
			cell.setCellStyle(cell_style);

			indexColuna = 50 + 1;
		}

		if (this.exibeSomenteFavorecidosFiltrados.equals("Todos")) {
			cell = row.createCell(9);
			cell.setCellValue("Favorecido");
			cell.setCellStyle(cell_style);
			cell = row.createCell(10);
			cell.setCellValue("Valor");
			cell.setCellStyle(cell_style);
			cell = row.createCell(11);
			cell.setCellValue("Favorecido 2");
			cell.setCellStyle(cell_style);
			cell = row.createCell(12);
			cell.setCellValue("Valor");
			cell.setCellStyle(cell_style);
			cell = row.createCell(13);
			cell.setCellValue("Favorecido 3");
			cell.setCellStyle(cell_style);
			cell = row.createCell(14);
			cell.setCellValue("Valor");
			cell.setCellStyle(cell_style);
			cell = row.createCell(15);
			cell.setCellValue("Favorecido 4");
			cell.setCellStyle(cell_style);
			cell = row.createCell(16);
			cell.setCellValue("Valor");
			cell.setCellStyle(cell_style);
			cell = row.createCell(17);
			cell.setCellValue("Favorecido 5");
			cell.setCellStyle(cell_style);
			cell = row.createCell(18);
			cell.setCellValue("Valor");
			cell.setCellStyle(cell_style);
			cell = row.createCell(19);
			cell.setCellValue("Favorecido 6");
			cell.setCellStyle(cell_style);
			cell = row.createCell(20);
			cell.setCellValue("Valor");
			cell.setCellStyle(cell_style);
			cell = row.createCell(21);
			cell.setCellValue("Favorecido 7");
			cell.setCellStyle(cell_style);
			cell = row.createCell(22);
			cell.setCellValue("Valor");
			cell.setCellStyle(cell_style);
			cell = row.createCell(23);
			cell.setCellValue("Favorecido 8");
			cell.setCellStyle(cell_style);
			cell = row.createCell(24);
			cell.setCellValue("Valor");
			cell.setCellStyle(cell_style);
			cell = row.createCell(25);
			cell.setCellValue("Favorecido 9");
			cell.setCellStyle(cell_style);
			cell = row.createCell(26);
			cell.setCellValue("Valor");
			cell.setCellStyle(cell_style);
			cell = row.createCell(27);
			cell.setCellValue("Favorecido 10");
			cell.setCellStyle(cell_style);
			cell = row.createCell(28);
			cell.setCellValue("Valor");
			cell.setCellStyle(cell_style);

			indexColuna = 28 + 1;
		}

		if (this.exibeSomenteFavorecidosFiltrados.equals("Somente Filtrados")) {
			if (this.idRecebedor > 0) {
				cell = row.createCell(9);
				cell.setCellValue("Favorecido");
				cell.setCellStyle(cell_style);
				cell = row.createCell(10);
				cell.setCellValue("Valor");
				cell.setCellStyle(cell_style);

				indexColuna = 10 + 1;
			}
			if (this.idRecebedor2 > 0) {
				cell = row.createCell(11);
				cell.setCellValue("Favorecido 2");
				cell.setCellStyle(cell_style);
				cell = row.createCell(12);
				cell.setCellValue("Valor");
				cell.setCellStyle(cell_style);

				indexColuna = 12 + 1;
			}
		}

		cell = row.createCell(indexColuna);
		cell.setCellValue("Tipo Cálculo");
		cell.setCellStyle(cell_style);

		// cria estilo para dados em geral
		cell_style = wb.createCellStyle();
		cell_style.setAlignment(HorizontalAlignment.CENTER);
		cell_style.setVerticalAlignment(VerticalAlignment.CENTER);
		cell_style.setBorderBottom(BorderStyle.THIN);
		cell_style.setBorderTop(BorderStyle.THIN);
		cell_style.setBorderRight(BorderStyle.THIN);
		cell_style.setBorderLeft(BorderStyle.THIN);
		cell_style.setWrapText(true);

		// cria estilo especifico para coluna type numérico
		CellStyle numericStyle = wb.createCellStyle();
		numericStyle.setAlignment(HorizontalAlignment.CENTER);
		numericStyle.setVerticalAlignment(VerticalAlignment.CENTER);
		numericStyle.setBorderBottom(BorderStyle.THIN);
		numericStyle.setBorderTop(BorderStyle.THIN);
		numericStyle.setBorderRight(BorderStyle.THIN);
		numericStyle.setBorderLeft(BorderStyle.THIN);
		numericStyle.setWrapText(true);
		// cria a formatação para moeda
		CreationHelper ch = wb.getCreationHelper();
		numericStyle.setDataFormat(
				ch.createDataFormat().getFormat("_(R$* #,##0.00_);_(R$* (#,##0.00);_(R$* \"-\"??_);_(@_)"));

		// cria estilo especifico para coluna type Date
		CellStyle dateStyle = wb.createCellStyle();
		dateStyle.setAlignment(HorizontalAlignment.CENTER);
		dateStyle.setVerticalAlignment(VerticalAlignment.CENTER);
		dateStyle.setBorderBottom(BorderStyle.THIN);
		dateStyle.setBorderTop(BorderStyle.THIN);
		dateStyle.setBorderRight(BorderStyle.THIN);
		dateStyle.setBorderLeft(BorderStyle.THIN);
		dateStyle.setWrapText(true);
		// cria a formatação para Date
		dateStyle.setDataFormat((short) BuiltinFormats.getBuiltinFormat("m/d/yy"));

		for (RelatorioFinanceiroCobranca record : this.relObjetoContratoCobranca) {
			countLine++;
			row = sheet.createRow(countLine);

			// Contrato
			cell = row.createCell(0);
			cell.setCellStyle(cell_style);
			cell.setCellValue(record.getNumeroContrato());

			// Data do Contrato
			cell = row.createCell(1);
			cell.setCellStyle(dateStyle);
			cell.setCellValue(record.getDataContrato());

			// Responsavel
			cell = row.createCell(2);
			cell.setCellStyle(cell_style);
			cell.setCellValue(record.getContratoCobranca().getResponsavel().getNome());

			// Pagador
			cell = row.createCell(3);
			cell.setCellStyle(cell_style);
			cell.setCellValue(record.getContratoCobranca().getPagador().getNome());

			// Parcela
			cell = row.createCell(4);
			cell.setCellStyle(cell_style);
			cell.setCellValue(record.getParcela());

			// Vencimento
			cell = row.createCell(5);
			cell.setCellStyle(dateStyle);
			cell.setCellValue(record.getDataVencimento());

			// Valor
			cell = row.createCell(6);
			cell.setCellStyle(numericStyle);
			cell.setCellType(CellType.NUMERIC);
			cell.setCellValue(((BigDecimal) record.valor).doubleValue());

			// Valor Atualizado
			cell = row.createCell(7);
			if (record.getVlrParcelaAtualizada() != null) {
				cell.setCellStyle(numericStyle);
				cell.setCellType(CellType.NUMERIC);
				cell.setCellValue(((BigDecimal) record.getVlrParcelaAtualizada()).doubleValue());
			} else {
				cell.setCellStyle(cell_style);
				cell.setCellValue("--");
			}

			// status
			cell = row.createCell(8);

			// Style para cabeçalho
			XSSFCellStyle cell_style_pago = wb.createCellStyle();
			cell_style_pago = wb.createCellStyle();
			cell_style_pago.setAlignment(HorizontalAlignment.CENTER);
			cell_style_pago.setVerticalAlignment(VerticalAlignment.CENTER);
			cell_style_pago.setBorderBottom(BorderStyle.THIN);
			cell_style_pago.setBorderTop(BorderStyle.THIN);
			cell_style_pago.setBorderRight(BorderStyle.THIN);
			cell_style_pago.setBorderLeft(BorderStyle.THIN);
			cell_style_pago.setWrapText(true);
			cell_style_pago.setFillForegroundColor(IndexedColors.BRIGHT_GREEN.getIndex());
			cell_style_pago.setFillPattern(FillPatternType.SOLID_FOREGROUND);

			XSSFCellStyle cell_style_aberto = wb.createCellStyle();
			cell_style_aberto = wb.createCellStyle();
			cell_style_aberto.setAlignment(HorizontalAlignment.CENTER);
			cell_style_aberto.setVerticalAlignment(VerticalAlignment.CENTER);
			cell_style_aberto.setBorderBottom(BorderStyle.THIN);
			cell_style_aberto.setBorderTop(BorderStyle.THIN);
			cell_style_aberto.setBorderRight(BorderStyle.THIN);
			cell_style_aberto.setBorderLeft(BorderStyle.THIN);
			cell_style_aberto.setWrapText(true);
			cell_style_aberto.setFillForegroundColor(IndexedColors.YELLOW.getIndex());
			cell_style_aberto.setFillPattern(FillPatternType.SOLID_FOREGROUND);

			XSSFCellStyle cell_style_atraso = wb.createCellStyle();
			cell_style_atraso = wb.createCellStyle();
			cell_style_atraso.setAlignment(HorizontalAlignment.CENTER);
			cell_style_atraso.setVerticalAlignment(VerticalAlignment.CENTER);
			cell_style_atraso.setBorderBottom(BorderStyle.THIN);
			cell_style_atraso.setBorderTop(BorderStyle.THIN);
			cell_style_atraso.setBorderRight(BorderStyle.THIN);
			cell_style_atraso.setBorderLeft(BorderStyle.THIN);
			cell_style_atraso.setWrapText(true);
			cell_style_atraso.setFillForegroundColor(IndexedColors.RED.getIndex());
			cell_style_atraso.setFillPattern(FillPatternType.SOLID_FOREGROUND);

			XSSFCellStyle cell_style_bx_parcial = wb.createCellStyle();
			cell_style_bx_parcial = wb.createCellStyle();
			cell_style_bx_parcial.setAlignment(HorizontalAlignment.CENTER);
			cell_style_bx_parcial.setVerticalAlignment(VerticalAlignment.CENTER);
			cell_style_bx_parcial.setBorderBottom(BorderStyle.THIN);
			cell_style_bx_parcial.setBorderTop(BorderStyle.THIN);
			cell_style_bx_parcial.setBorderRight(BorderStyle.THIN);
			cell_style_bx_parcial.setBorderLeft(BorderStyle.THIN);
			cell_style_bx_parcial.setWrapText(true);
			cell_style_bx_parcial.setFillForegroundColor(IndexedColors.ORANGE.getIndex());
			cell_style_bx_parcial.setFillPattern(FillPatternType.SOLID_FOREGROUND);

			if (record.isParcelaPaga()) {
				cell.setCellStyle(cell_style_pago);
				cell.setCellValue("Pago");
			} else {
				ContratoCobrancaDetalhesDao ccdDao = new ContratoCobrancaDetalhesDao();
				ContratoCobrancaDetalhes ccd = ccdDao.findById(record.getIdParcela());

				Calendar dataParcela = Calendar.getInstance(zone, locale);
				if (!CommonsUtil.semValor(ccd.getDataVencimentoAtual())) {
					dataParcela.setTime(ccd.getDataVencimentoAtual());
				} else {
					dataParcela.setTime(ccd.getDataVencimento());
				}
				dataHoje.set(Calendar.HOUR_OF_DAY, 0);
				dataHoje.set(Calendar.MINUTE, 0);
				dataHoje.set(Calendar.SECOND, 0);
				dataHoje.set(Calendar.MILLISECOND, 0);

				if (dataParcela.before(dataHoje)) {
					cell.setCellStyle(cell_style_atraso);
					cell.setCellValue("Em atraso");
				} else {
					if (ccd.getListContratoCobrancaDetalhesParcial().size() > 0) {
						cell.setCellStyle(cell_style_bx_parcial);
						cell.setCellValue("Baixado parcialmente");
					} else {
						cell.setCellStyle(cell_style_aberto);
						cell.setCellValue("Em aberto");
					}
				}
			}

			// Parcela
			cell = row.createCell(indexColuna);
			cell.setCellStyle(cell_style);
			cell.setCellValue(record.getTipoCalculo());

			if (this.exibeSomenteFavorecidosFiltrados.equals("Todos")) {
				// FAvorecido 1
				cell = row.createCell(9);
				cell.setCellStyle(cell_style);

				// row.setHeightInPoints((5*sheet.getDefaultRowHeightInPoints()));

				if (record.getContratoCobranca().getRecebedor() != null) {
					String dadosRecebedor = "";
					dadosRecebedor = record.getContratoCobranca().getRecebedor().getNomeCC();
					cell.setCellValue(dadosRecebedor);
				}

				// Valor
				cell = row.createCell(10);
				cell.setCellStyle(numericStyle);
				cell.setCellType(CellType.NUMERIC);
				if (record.getContratoCobranca().getVlrRecebedor() != null) {
					cell.setCellValue(((BigDecimal) record.getContratoCobranca().getVlrRecebedor()).doubleValue());
				}

				// FAvorecido 2
				cell = row.createCell(11);
				cell.setCellStyle(cell_style);
				if (record.getContratoCobranca().getRecebedor2() != null) {
					String dadosRecebedor = "";
					dadosRecebedor = record.getContratoCobranca().getRecebedor2().getNomeCC();
					cell.setCellValue(dadosRecebedor);
				}

				// Valor
				cell = row.createCell(12);
				cell.setCellStyle(numericStyle);
				cell.setCellType(CellType.NUMERIC);
				if (record.getContratoCobranca().getVlrRecebedor2() != null) {
					cell.setCellValue(((BigDecimal) record.getContratoCobranca().getVlrRecebedor2()).doubleValue());
				}

				// FAvorecido 3
				cell = row.createCell(13);
				cell.setCellStyle(cell_style);
				if (record.getContratoCobranca().getRecebedor3() != null) {
					String dadosRecebedor = "";
					dadosRecebedor = record.getContratoCobranca().getRecebedor3().getNomeCC();
					cell.setCellValue(dadosRecebedor);
				}

				// Valor
				cell = row.createCell(14);
				cell.setCellStyle(numericStyle);
				cell.setCellType(CellType.NUMERIC);
				if (record.getContratoCobranca().getVlrRecebedor3() != null) {
					cell.setCellValue(((BigDecimal) record.getContratoCobranca().getVlrRecebedor3()).doubleValue());
				}

				// FAvorecido 4
				cell = row.createCell(15);
				cell.setCellStyle(cell_style);
				if (record.getContratoCobranca().getRecebedor4() != null) {
					String dadosRecebedor = "";
					dadosRecebedor = record.getContratoCobranca().getRecebedor4().getNomeCC();
					cell.setCellValue(dadosRecebedor);
				}

				// Valor
				cell = row.createCell(16);
				cell.setCellStyle(numericStyle);
				cell.setCellType(CellType.NUMERIC);
				if (record.getContratoCobranca().getVlrRecebedor4() != null) {
					cell.setCellValue(((BigDecimal) record.getContratoCobranca().getVlrRecebedor4()).doubleValue());
				}

				// FAvorecido 5
				cell = row.createCell(17);
				cell.setCellStyle(cell_style);
				if (record.getContratoCobranca().getRecebedor5() != null) {
					String dadosRecebedor = "";
					dadosRecebedor = record.getContratoCobranca().getRecebedor5().getNomeCC();
					cell.setCellValue(dadosRecebedor);
				}

				// Valor
				cell = row.createCell(18);
				cell.setCellStyle(numericStyle);
				cell.setCellType(CellType.NUMERIC);
				if (record.getContratoCobranca().getVlrRecebedor5() != null) {
					cell.setCellValue(((BigDecimal) record.getContratoCobranca().getVlrRecebedor5()).doubleValue());
				}

				// FAvorecido 6
				cell = row.createCell(19);
				cell.setCellStyle(cell_style);
				if (record.getContratoCobranca().getRecebedor6() != null) {
					String dadosRecebedor = "";
					dadosRecebedor = record.getContratoCobranca().getRecebedor6().getNomeCC();
					cell.setCellValue(dadosRecebedor);
				}

				// Valor
				cell = row.createCell(20);
				cell.setCellStyle(numericStyle);
				cell.setCellType(CellType.NUMERIC);
				if (record.getContratoCobranca().getVlrRecebedor6() != null) {
					cell.setCellValue(((BigDecimal) record.getContratoCobranca().getVlrRecebedor6()).doubleValue());
				}

				// FAvorecido 7
				cell = row.createCell(21);
				cell.setCellStyle(cell_style);
				if (record.getContratoCobranca().getRecebedor7() != null) {
					String dadosRecebedor = "";
					dadosRecebedor = record.getContratoCobranca().getRecebedor7().getNomeCC();
					cell.setCellValue(dadosRecebedor);
				}

				// Valor
				cell = row.createCell(22);
				cell.setCellStyle(numericStyle);
				cell.setCellType(CellType.NUMERIC);
				if (record.getContratoCobranca().getVlrRecebedor7() != null) {
					cell.setCellValue(((BigDecimal) record.getContratoCobranca().getVlrRecebedor7()).doubleValue());
				}

				// FAvorecido 8
				cell = row.createCell(23);
				cell.setCellStyle(cell_style);
				if (record.getContratoCobranca().getRecebedor8() != null) {
					String dadosRecebedor = "";
					dadosRecebedor = record.getContratoCobranca().getRecebedor8().getNomeCC();
					cell.setCellValue(dadosRecebedor);
				}

				// Valor
				cell = row.createCell(24);
				cell.setCellStyle(numericStyle);
				cell.setCellType(CellType.NUMERIC);
				if (record.getContratoCobranca().getVlrRecebedor8() != null) {
					cell.setCellValue(((BigDecimal) record.getContratoCobranca().getVlrRecebedor8()).doubleValue());
				}

				// FAvorecido 9
				cell = row.createCell(25);
				cell.setCellStyle(cell_style);
				if (record.getContratoCobranca().getRecebedor9() != null) {
					String dadosRecebedor = "";
					dadosRecebedor = record.getContratoCobranca().getRecebedor9().getNomeCC();
					cell.setCellValue(dadosRecebedor);
				}

				// Valor
				cell = row.createCell(26);
				cell.setCellStyle(numericStyle);
				cell.setCellType(CellType.NUMERIC);
				if (record.getContratoCobranca().getVlrRecebedor9() != null) {
					cell.setCellValue(((BigDecimal) record.getContratoCobranca().getVlrRecebedor9()).doubleValue());
				}

				// FAvorecido 10
				cell = row.createCell(27);
				cell.setCellStyle(cell_style);
				if (record.getContratoCobranca().getRecebedor10() != null) {
					String dadosRecebedor = "";
					dadosRecebedor = record.getContratoCobranca().getRecebedor10().getNomeCC();
					cell.setCellValue(dadosRecebedor);
				}

				// Valor
				cell = row.createCell(28);
				cell.setCellStyle(numericStyle);
				cell.setCellType(CellType.NUMERIC);
				if (record.getContratoCobranca().getVlrRecebedor10() != null) {
					cell.setCellValue(((BigDecimal) record.getContratoCobranca().getVlrRecebedor10()).doubleValue());
				}
			}

			if (this.exibeSomenteFavorecidosFiltrados.equals("Somente Filtrados")) {
				boolean usouFavorecido1 = false;
				// trata favorecido 1 FILTRADO
				if (this.idRecebedor > 0) {
					if (record.getContratoCobranca().getRecebedor() != null) {
						if (record.getContratoCobranca().getRecebedor().getId() == this.idRecebedor) {
							// FAvorecido 1
							cell = row.createCell(9);
							cell.setCellStyle(cell_style);
							if (record.getContratoCobranca().getRecebedor() != null) {
								String dadosRecebedor = "";
								dadosRecebedor = record.getContratoCobranca().getRecebedor().getNomeCC();
								cell.setCellValue(dadosRecebedor);
							}

							// Valor
							cell = row.createCell(10);
							cell.setCellStyle(numericStyle);
							cell.setCellType(CellType.NUMERIC);
							if ((BigDecimal) record.getContratoCobranca().getVlrRecebedor() != null) {
								cell.setCellValue(
										((BigDecimal) record.getContratoCobranca().getVlrRecebedor()).doubleValue());
							} else {
								cell.setCellValue(BigDecimal.ZERO.doubleValue());
							}

							usouFavorecido1 = true;
						}
					}
					if (record.getContratoCobranca().getRecebedor2() != null) {
						if (record.getContratoCobranca().getRecebedor2().getId() == this.idRecebedor) {
							// FAvorecido 1
							cell = row.createCell(9);
							cell.setCellStyle(cell_style);
							if (record.getContratoCobranca().getRecebedor2() != null) {
								String dadosRecebedor = "";
								dadosRecebedor = record.getContratoCobranca().getRecebedor2().getNomeCC();
								cell.setCellValue(dadosRecebedor);
							}

							// Valor
							cell = row.createCell(10);
							cell.setCellStyle(numericStyle);
							cell.setCellType(CellType.NUMERIC);
							if ((BigDecimal) record.getContratoCobranca().getVlrRecebedor2() != null) {
								cell.setCellValue(
										((BigDecimal) record.getContratoCobranca().getVlrRecebedor2()).doubleValue());
							} else {
								cell.setCellValue(BigDecimal.ZERO.doubleValue());
							}

							usouFavorecido1 = true;
						}
					}
					if (record.getContratoCobranca().getRecebedor3() != null) {
						if (record.getContratoCobranca().getRecebedor3().getId() == this.idRecebedor) {
							// FAvorecido 1
							cell = row.createCell(9);
							cell.setCellStyle(cell_style);
							if (record.getContratoCobranca().getRecebedor3() != null) {
								String dadosRecebedor = "";
								dadosRecebedor = record.getContratoCobranca().getRecebedor3().getNomeCC();
								cell.setCellValue(dadosRecebedor);
							}

							// Valor
							cell = row.createCell(10);
							cell.setCellStyle(numericStyle);
							cell.setCellType(CellType.NUMERIC);
							if ((BigDecimal) record.getContratoCobranca().getVlrRecebedor3() != null) {
								cell.setCellValue(
										((BigDecimal) record.getContratoCobranca().getVlrRecebedor3()).doubleValue());
							} else {
								cell.setCellValue(BigDecimal.ZERO.doubleValue());
							}

							usouFavorecido1 = true;
						}
					}
					if (record.getContratoCobranca().getRecebedor4() != null) {
						if (record.getContratoCobranca().getRecebedor4().getId() == this.idRecebedor) {
							// FAvorecido 1
							cell = row.createCell(9);
							cell.setCellStyle(cell_style);
							if (record.getContratoCobranca().getRecebedor4() != null) {
								String dadosRecebedor = "";
								dadosRecebedor = record.getContratoCobranca().getRecebedor4().getNomeCC();
								cell.setCellValue(dadosRecebedor);
							}

							// Valor
							cell = row.createCell(10);
							cell.setCellStyle(numericStyle);
							cell.setCellType(CellType.NUMERIC);
							if ((BigDecimal) record.getContratoCobranca().getVlrRecebedor4() != null) {
								cell.setCellValue(
										((BigDecimal) record.getContratoCobranca().getVlrRecebedor4()).doubleValue());
							} else {
								cell.setCellValue(BigDecimal.ZERO.doubleValue());
							}

							usouFavorecido1 = true;
						}
					}
					if (record.getContratoCobranca().getRecebedor5() != null) {
						if (record.getContratoCobranca().getRecebedor5().getId() == this.idRecebedor) {
							// FAvorecido 1
							cell = row.createCell(9);
							cell.setCellStyle(cell_style);
							if (record.getContratoCobranca().getRecebedor5() != null) {
								String dadosRecebedor = "";
								dadosRecebedor = record.getContratoCobranca().getRecebedor5().getNomeCC();
								cell.setCellValue(dadosRecebedor);
							}

							// Valor
							cell = row.createCell(10);
							cell.setCellStyle(numericStyle);
							cell.setCellType(CellType.NUMERIC);
							if ((BigDecimal) record.getContratoCobranca().getVlrRecebedor5() != null) {
								cell.setCellValue(
										((BigDecimal) record.getContratoCobranca().getVlrRecebedor5()).doubleValue());
							} else {
								cell.setCellValue(BigDecimal.ZERO.doubleValue());
							}

							usouFavorecido1 = true;
						}
					}
					if (record.getContratoCobranca().getRecebedor6() != null) {
						if (record.getContratoCobranca().getRecebedor6().getId() == this.idRecebedor) {
							// FAvorecido 1
							cell = row.createCell(9);
							cell.setCellStyle(cell_style);
							if (record.getContratoCobranca().getRecebedor6() != null) {
								String dadosRecebedor = "";
								dadosRecebedor = record.getContratoCobranca().getRecebedor6().getNomeCC();
								cell.setCellValue(dadosRecebedor);
							}

							// Valor
							cell = row.createCell(10);
							cell.setCellStyle(numericStyle);
							cell.setCellType(CellType.NUMERIC);
							if ((BigDecimal) record.getContratoCobranca().getVlrRecebedor6() != null) {
								cell.setCellValue(
										((BigDecimal) record.getContratoCobranca().getVlrRecebedor6()).doubleValue());
							} else {
								cell.setCellValue(BigDecimal.ZERO.doubleValue());
							}

							usouFavorecido1 = true;
						}
					}
					if (record.getContratoCobranca().getRecebedor7() != null) {
						if (record.getContratoCobranca().getRecebedor7().getId() == this.idRecebedor) {
							// FAvorecido 1
							cell = row.createCell(9);
							cell.setCellStyle(cell_style);
							if (record.getContratoCobranca().getRecebedor7() != null) {
								String dadosRecebedor = "";
								dadosRecebedor = record.getContratoCobranca().getRecebedor7().getNomeCC();
								cell.setCellValue(dadosRecebedor);
							}

							// Valor
							cell = row.createCell(10);
							cell.setCellStyle(numericStyle);
							cell.setCellType(CellType.NUMERIC);
							if ((BigDecimal) record.getContratoCobranca().getVlrRecebedor7() != null) {
								cell.setCellValue(
										((BigDecimal) record.getContratoCobranca().getVlrRecebedor7()).doubleValue());
							} else {
								cell.setCellValue(BigDecimal.ZERO.doubleValue());
							}

							usouFavorecido1 = true;
						}
					}
					if (record.getContratoCobranca().getRecebedor8() != null) {
						if (record.getContratoCobranca().getRecebedor8().getId() == this.idRecebedor) {
							// FAvorecido 1
							cell = row.createCell(9);
							cell.setCellStyle(cell_style);
							if (record.getContratoCobranca().getRecebedor8() != null) {
								String dadosRecebedor = "";
								dadosRecebedor = record.getContratoCobranca().getRecebedor8().getNomeCC();
								cell.setCellValue(dadosRecebedor);
							}

							// Valor
							cell = row.createCell(10);
							cell.setCellStyle(numericStyle);
							cell.setCellType(CellType.NUMERIC);
							if ((BigDecimal) record.getContratoCobranca().getVlrRecebedor8() != null) {
								cell.setCellValue(
										((BigDecimal) record.getContratoCobranca().getVlrRecebedor8()).doubleValue());
							} else {
								cell.setCellValue(BigDecimal.ZERO.doubleValue());
							}

							usouFavorecido1 = true;
						}
					}
					if (record.getContratoCobranca().getRecebedor9() != null) {
						if (record.getContratoCobranca().getRecebedor9().getId() == this.idRecebedor) {
							// FAvorecido 1
							cell = row.createCell(9);
							cell.setCellStyle(cell_style);
							if (record.getContratoCobranca().getRecebedor9() != null) {
								String dadosRecebedor = "";
								dadosRecebedor = record.getContratoCobranca().getRecebedor9().getNomeCC();
								cell.setCellValue(dadosRecebedor);
							}

							// Valor
							cell = row.createCell(10);
							cell.setCellStyle(numericStyle);
							cell.setCellType(CellType.NUMERIC);
							if ((BigDecimal) record.getContratoCobranca().getVlrRecebedor9() != null) {
								cell.setCellValue(
										((BigDecimal) record.getContratoCobranca().getVlrRecebedor9()).doubleValue());
							} else {
								cell.setCellValue(BigDecimal.ZERO.doubleValue());
							}

							usouFavorecido1 = true;
						}
					}
					if (record.getContratoCobranca().getRecebedor10() != null) {
						if (record.getContratoCobranca().getRecebedor10().getId() == this.idRecebedor) {
							// FAvorecido 1
							cell = row.createCell(9);
							cell.setCellStyle(cell_style);
							if (record.getContratoCobranca().getRecebedor10() != null) {
								String dadosRecebedor = "";
								dadosRecebedor = record.getContratoCobranca().getRecebedor10().getNomeCC();
								cell.setCellValue(dadosRecebedor);
							}

							// Valor
							cell = row.createCell(10);
							cell.setCellStyle(numericStyle);
							cell.setCellType(CellType.NUMERIC);
							if ((BigDecimal) record.getContratoCobranca().getVlrRecebedor10() != null) {
								cell.setCellValue(
										((BigDecimal) record.getContratoCobranca().getVlrRecebedor10()).doubleValue());
							} else {
								cell.setCellValue(BigDecimal.ZERO.doubleValue());
							}

							usouFavorecido1 = true;
						}
					}
				}
				// trata favorecido 2 FILTRADO
				if (this.idRecebedor2 > 0) {
					// controle de locação de células
					int idxColumnFavorecido2 = 0;
					int idxColumnValor2 = 0;

					if (usouFavorecido1) {
						idxColumnFavorecido2 = 10;
						idxColumnValor2 = 11;
					} else {
						idxColumnFavorecido2 = 8;
						idxColumnValor2 = 9;
					}

					boolean usouFavorecido2 = false;

					if (record.getContratoCobranca().getRecebedor() != null) {
						if (record.getContratoCobranca().getRecebedor().getId() == this.idRecebedor2) {
							// FAvorecido 1
							cell = row.createCell(idxColumnFavorecido2);
							cell.setCellStyle(cell_style);
							if (record.getContratoCobranca().getRecebedor() != null) {
								String dadosRecebedor = "";
								dadosRecebedor = record.getContratoCobranca().getRecebedor().getNomeCC();
								cell.setCellValue(dadosRecebedor);
							}

							// Valor
							cell = row.createCell(idxColumnValor2);
							cell.setCellStyle(numericStyle);
							cell.setCellType(CellType.NUMERIC);
							cell.setCellValue(
									((BigDecimal) record.getContratoCobranca().getVlrRecebedor()).doubleValue());

							usouFavorecido2 = true;
						}
					}
					if (record.getContratoCobranca().getRecebedor2() != null) {
						if (record.getContratoCobranca().getRecebedor2().getId() == this.idRecebedor2) {
							// FAvorecido 1
							cell = row.createCell(idxColumnFavorecido2);
							cell.setCellStyle(cell_style);
							if (record.getContratoCobranca().getRecebedor2() != null) {
								String dadosRecebedor = "";
								dadosRecebedor = record.getContratoCobranca().getRecebedor2().getNomeCC();
								cell.setCellValue(dadosRecebedor);
							}

							// Valor
							cell = row.createCell(idxColumnValor2);
							cell.setCellStyle(numericStyle);
							cell.setCellType(CellType.NUMERIC);
							cell.setCellValue(
									((BigDecimal) record.getContratoCobranca().getVlrRecebedor2()).doubleValue());

							usouFavorecido2 = true;
						}
					}
					if (record.getContratoCobranca().getRecebedor3() != null) {
						if (record.getContratoCobranca().getRecebedor3().getId() == this.idRecebedor2) {
							// FAvorecido 1
							cell = row.createCell(idxColumnFavorecido2);
							cell.setCellStyle(cell_style);
							if (record.getContratoCobranca().getRecebedor3() != null) {
								String dadosRecebedor = "";
								dadosRecebedor = record.getContratoCobranca().getRecebedor3().getNomeCC();
								cell.setCellValue(dadosRecebedor);
							}

							// Valor
							cell = row.createCell(idxColumnValor2);
							cell.setCellStyle(numericStyle);
							cell.setCellType(CellType.NUMERIC);
							cell.setCellValue(
									((BigDecimal) record.getContratoCobranca().getVlrRecebedor3()).doubleValue());

							usouFavorecido2 = true;
						}
					}
					if (record.getContratoCobranca().getRecebedor4() != null) {
						if (record.getContratoCobranca().getRecebedor4().getId() == this.idRecebedor2) {
							// FAvorecido 1
							cell = row.createCell(idxColumnFavorecido2);
							cell.setCellStyle(cell_style);
							if (record.getContratoCobranca().getRecebedor4() != null) {
								String dadosRecebedor = "";
								dadosRecebedor = record.getContratoCobranca().getRecebedor4().getNomeCC();
								cell.setCellValue(dadosRecebedor);
							}

							// Valor
							cell = row.createCell(idxColumnValor2);
							cell.setCellStyle(numericStyle);
							cell.setCellType(CellType.NUMERIC);
							cell.setCellValue(
									((BigDecimal) record.getContratoCobranca().getVlrRecebedor4()).doubleValue());

							usouFavorecido2 = true;
						}
					}
					if (record.getContratoCobranca().getRecebedor5() != null) {
						if (record.getContratoCobranca().getRecebedor5().getId() == this.idRecebedor2) {
							// FAvorecido 1
							cell = row.createCell(idxColumnFavorecido2);
							cell.setCellStyle(cell_style);
							if (record.getContratoCobranca().getRecebedor5() != null) {
								String dadosRecebedor = "";
								dadosRecebedor = record.getContratoCobranca().getRecebedor5().getNomeCC();
								cell.setCellValue(dadosRecebedor);
							}

							// Valor
							cell = row.createCell(idxColumnValor2);
							cell.setCellStyle(numericStyle);
							cell.setCellType(CellType.NUMERIC);
							cell.setCellValue(
									((BigDecimal) record.getContratoCobranca().getVlrRecebedor5()).doubleValue());

							usouFavorecido2 = true;
						}
					}
					if (record.getContratoCobranca().getRecebedor6() != null) {
						if (record.getContratoCobranca().getRecebedor6().getId() == this.idRecebedor2) {
							// FAvorecido 1
							cell = row.createCell(idxColumnFavorecido2);
							cell.setCellStyle(cell_style);
							if (record.getContratoCobranca().getRecebedor6() != null) {
								String dadosRecebedor = "";
								dadosRecebedor = record.getContratoCobranca().getRecebedor6().getNomeCC();
								cell.setCellValue(dadosRecebedor);
							}

							// Valor
							cell = row.createCell(idxColumnValor2);
							cell.setCellStyle(numericStyle);
							cell.setCellType(CellType.NUMERIC);
							cell.setCellValue(
									((BigDecimal) record.getContratoCobranca().getVlrRecebedor6()).doubleValue());

							usouFavorecido2 = true;
						}
					}
					if (record.getContratoCobranca().getRecebedor7() != null) {
						if (record.getContratoCobranca().getRecebedor7().getId() == this.idRecebedor2) {
							// FAvorecido 1
							cell = row.createCell(idxColumnFavorecido2);
							cell.setCellStyle(cell_style);
							if (record.getContratoCobranca().getRecebedor7() != null) {
								String dadosRecebedor = "";
								dadosRecebedor = record.getContratoCobranca().getRecebedor7().getNomeCC();
								cell.setCellValue(dadosRecebedor);
							}

							// Valor
							cell = row.createCell(idxColumnValor2);
							cell.setCellStyle(numericStyle);
							cell.setCellType(CellType.NUMERIC);
							cell.setCellValue(
									((BigDecimal) record.getContratoCobranca().getVlrRecebedor7()).doubleValue());

							usouFavorecido2 = true;
						}
					}
					if (record.getContratoCobranca().getRecebedor8() != null) {
						if (record.getContratoCobranca().getRecebedor8().getId() == this.idRecebedor2) {
							// FAvorecido 1
							cell = row.createCell(idxColumnFavorecido2);
							cell.setCellStyle(cell_style);
							if (record.getContratoCobranca().getRecebedor8() != null) {
								String dadosRecebedor = "";
								dadosRecebedor = record.getContratoCobranca().getRecebedor8().getNomeCC();
								cell.setCellValue(dadosRecebedor);
							}

							// Valor
							cell = row.createCell(idxColumnValor2);
							cell.setCellStyle(numericStyle);
							cell.setCellType(CellType.NUMERIC);
							cell.setCellValue(
									((BigDecimal) record.getContratoCobranca().getVlrRecebedor8()).doubleValue());

							usouFavorecido2 = true;
						}
					}
					if (record.getContratoCobranca().getRecebedor9() != null) {
						if (record.getContratoCobranca().getRecebedor9().getId() == this.idRecebedor2) {
							// FAvorecido 1
							cell = row.createCell(idxColumnFavorecido2);
							cell.setCellStyle(cell_style);
							if (record.getContratoCobranca().getRecebedor9() != null) {
								String dadosRecebedor = "";
								dadosRecebedor = record.getContratoCobranca().getRecebedor9().getNomeCC();
								cell.setCellValue(dadosRecebedor);
							}

							// Valor
							cell = row.createCell(idxColumnValor2);
							cell.setCellStyle(numericStyle);
							cell.setCellType(CellType.NUMERIC);
							cell.setCellValue(
									((BigDecimal) record.getContratoCobranca().getVlrRecebedor9()).doubleValue());

							usouFavorecido2 = true;
						}
					}
					if (record.getContratoCobranca().getRecebedor10() != null) {
						if (record.getContratoCobranca().getRecebedor10().getId() == this.idRecebedor2) {
							// FAvorecido 1
							cell = row.createCell(idxColumnFavorecido2);
							cell.setCellStyle(cell_style);
							if (record.getContratoCobranca().getRecebedor10() != null) {
								String dadosRecebedor = "";
								dadosRecebedor = record.getContratoCobranca().getRecebedor10().getNomeCC();
								cell.setCellValue(dadosRecebedor);
							}

							// Valor
							cell = row.createCell(idxColumnValor2);
							cell.setCellStyle(numericStyle);
							cell.setCellType(CellType.NUMERIC);
							cell.setCellValue(
									((BigDecimal) record.getContratoCobranca().getVlrRecebedor10()).doubleValue());

							usouFavorecido2 = true;
						}
					}

					// cria estilo da coluna mesmo se não tiver valor
					if (!usouFavorecido2) {
						cell = row.createCell(idxColumnFavorecido2);
						cell.setCellStyle(cell_style);

						cell = row.createCell(idxColumnValor2);
						cell.setCellStyle(numericStyle);
						cell.setCellType(CellType.NUMERIC);
					}
					if (idxColumnFavorecido2 == 7 && idxColumnValor2 == 8) {
						cell = row.createCell(11);
						cell.setCellStyle(cell_style);

						cell = row.createCell(12);
						cell.setCellStyle(numericStyle);
						cell.setCellType(CellType.NUMERIC);
					}
				}
			}
		}

		// Resize columns to fit data
		// TODO MIGRACAO POI
		/*
		 * int noOfColumns = sheet.getRow(0).getLastCellNum(); for (int i = 0; i <
		 * noOfColumns; i++) { sheet.autoSizeColumn(i); }
		 */

		// write this workbook to an Outputstream.
		wb.write(baos);
		final GeradorRelatorioDownloadCliente gerador = new GeradorRelatorioDownloadCliente(
				FacesContext.getCurrentInstance());
		String nomeArquivoDownload = String.format("Galleria Bank - Financeiro.xlsx", "");
		gerador.open(nomeArquivoDownload);
		gerador.feed(new ByteArrayInputStream(baos.toByteArray()));
		gerador.close();

		this.contratoGerado = true;
	}

	public void gerarXLSFinanceiroBaixadoCRI(String relatorioTipo) throws IOException {
		if (financeiroGalleria) {
			gerarXLSFinanceiroBaixadoEspelhoCRI(relatorioTipo);
			return;
		}
		ParametrosDao pDao = new ParametrosDao();
		this.pathContrato = pDao.findByFilter("nome", "LOCACAO_PATH_COBRANCA").get(0).getValorString();
		this.nomeContrato = "Relatório Financeiro Baixado " + relatorioTipo + ".xlsx";

		TimeZone zone = TimeZone.getDefault();
		Locale locale = new Locale("pt", "BR");
		Calendar dataHoje = Calendar.getInstance(zone, locale);

		dataHoje.set(Calendar.HOUR_OF_DAY, 0);
		dataHoje.set(Calendar.MINUTE, 0);
		dataHoje.set(Calendar.SECOND, 0);
		dataHoje.set(Calendar.MILLISECOND, 0);

		// dataHoje.add(Calendar.DAY_OF_MONTH, 1);

		String excelFileName = this.pathContrato + this.nomeContrato;// name of excel file

		String sheetName = "Resultado";// name of sheet

		XSSFWorkbook wb = new XSSFWorkbook();
		XSSFSheet sheet = wb.createSheet(sheetName);
		sheet.setDefaultColumnWidth(25);

		// Style para cabeçalho
		XSSFCellStyle cell_style = wb.createCellStyle();
		cell_style.setFillForegroundColor(IndexedColors.GREY_25_PERCENT.getIndex());
		cell_style.setFillPattern(FillPatternType.SOLID_FOREGROUND);

		XSSFFont font = wb.createFont();
		font.setBold(true);
		cell_style.setFont(font);
		cell_style.setAlignment(HorizontalAlignment.CENTER);
		cell_style.setVerticalAlignment(VerticalAlignment.CENTER);
		cell_style.setBorderBottom(BorderStyle.THIN);
		cell_style.setBorderTop(BorderStyle.THIN);
		cell_style.setBorderRight(BorderStyle.THIN);
		cell_style.setBorderLeft(BorderStyle.THIN);
		cell_style.setWrapText(true);

		// iterating r number of rows
		// cria CABEÇALHO
		int countLine = 0;
		XSSFRow row = sheet.createRow(countLine);
		XSSFCell cell;
		cell = row.createCell(0);
		cell.setCellValue("Contrato");
		cell.setCellStyle(cell_style);
		cell = row.createCell(1);
		cell.setCellValue("Responsável");
		cell.setCellStyle(cell_style);
		cell = row.createCell(2);
		cell.setCellValue("Pagador");
		cell.setCellStyle(cell_style);
		cell = row.createCell(3);
		cell.setCellValue("CCB");
		cell.setCellStyle(cell_style);
		cell = row.createCell(4);
		cell.setCellValue("Valor CCB");
		cell.setCellStyle(cell_style);
		cell = row.createCell(5);
		cell.setCellValue("Parcela");
		cell.setCellStyle(cell_style);
		cell = row.createCell(6);
		cell.setCellValue("Valor Parcela");
		cell.setCellStyle(cell_style);
		cell = row.createCell(7);
		cell.setCellValue("Data Vencimento");
		cell.setCellStyle(cell_style);
		cell = row.createCell(8);
		cell.setCellValue("Data Pagamento");
		cell.setCellStyle(cell_style);
		cell = row.createCell(9);
		cell.setCellValue("Valor Pago");
		cell.setCellStyle(cell_style);

		// cria estilo para dados em geral
		cell_style = wb.createCellStyle();
		cell_style.setAlignment(HorizontalAlignment.CENTER);
		cell_style.setVerticalAlignment(VerticalAlignment.CENTER);
		cell_style.setBorderBottom(BorderStyle.THIN);
		cell_style.setBorderTop(BorderStyle.THIN);
		cell_style.setBorderRight(BorderStyle.THIN);
		cell_style.setBorderLeft(BorderStyle.THIN);
		cell_style.setWrapText(true);

		// cria estilo especifico para coluna type numérico
		CellStyle numericStyle = wb.createCellStyle();
		numericStyle.setAlignment(HorizontalAlignment.CENTER);
		numericStyle.setVerticalAlignment(VerticalAlignment.CENTER);
		numericStyle.setBorderBottom(BorderStyle.THIN);
		numericStyle.setBorderTop(BorderStyle.THIN);
		numericStyle.setBorderRight(BorderStyle.THIN);
		numericStyle.setBorderLeft(BorderStyle.THIN);
		numericStyle.setWrapText(true);
		// cria a formatação para moeda
		CreationHelper ch = wb.getCreationHelper();
		numericStyle.setDataFormat(
				ch.createDataFormat().getFormat("_(R$* #,##0.00_);_(R$* (#,##0.00);_(R$* \"-\"??_);_(@_)"));

		// cria estilo especifico para coluna type Date
		CellStyle dateStyle = wb.createCellStyle();
		dateStyle.setAlignment(HorizontalAlignment.CENTER);
		dateStyle.setVerticalAlignment(VerticalAlignment.CENTER);
		dateStyle.setBorderBottom(BorderStyle.THIN);
		dateStyle.setBorderTop(BorderStyle.THIN);
		dateStyle.setBorderRight(BorderStyle.THIN);
		dateStyle.setBorderLeft(BorderStyle.THIN);
		dateStyle.setWrapText(true);
		// cria a formatação para Date
		dateStyle.setDataFormat((short) BuiltinFormats.getBuiltinFormat("m/d/yy"));

		for (RelatorioFinanceiroCobranca record : this.relObjetoContratoCobranca) {
			countLine++;
			row = sheet.createRow(countLine);

			// Contrato
			cell = row.createCell(0);
			cell.setCellStyle(cell_style);
			cell.setCellValue(record.getNumeroContrato());

			// Responsável
			cell = row.createCell(1);
			cell.setCellStyle(cell_style);
			cell.setCellValue(record.getNomeResponsavel());

			// Pagador
			cell = row.createCell(2);
			cell.setCellStyle(cell_style);
			cell.setCellValue(record.getNomePagador());

			// CCB
			cell = row.createCell(3);
			cell.setCellStyle(cell_style);
			cell.setCellValue(record.getParcelaCCB());

			// Valor CCB
			cell = row.createCell(4);
			cell.setCellStyle(numericStyle);
			cell.setCellType(CellType.NUMERIC);
			cell.setCellValue(((BigDecimal) record.getValorCCB()).doubleValue());

			// Parcela
			cell = row.createCell(5);
			cell.setCellStyle(cell_style);
			cell.setCellValue(record.getParcela());

			// Valor Parcela
			cell = row.createCell(6);
			cell.setCellStyle(numericStyle);
			cell.setCellType(CellType.NUMERIC);
			cell.setCellValue(((BigDecimal) record.getVlrParcela()).doubleValue());

			// Vencimento
			cell = row.createCell(7);
			cell.setCellStyle(dateStyle);
			cell.setCellValue(record.getDataVencimento());

			// Pagamento
			cell = row.createCell(8);
			cell.setCellStyle(dateStyle);
			cell.setCellValue(record.getDataPagamento());

			// Valor Pago
			cell = row.createCell(9);
			cell.setCellStyle(numericStyle);
			cell.setCellType(CellType.NUMERIC);
			cell.setCellValue(((BigDecimal) record.getVlrTotalPago()).doubleValue());
		}

		FileOutputStream fileOut = new FileOutputStream(excelFileName);

		// write this workbook to an Outputstream.
		wb.write(fileOut);
		fileOut.flush();
		fileOut.close();

		this.contratoGerado = true;
	}

	public void gerarXLSFinanceiroBaixadoEspelhoCRI(String relatorioTipo) throws IOException {
		ParametrosDao pDao = new ParametrosDao();
		this.pathContrato = pDao.findByFilter("nome", "LOCACAO_PATH_COBRANCA").get(0).getValorString();
		this.nomeContrato = "Relatório Financeiro Baixado " + relatorioTipo + ".xlsx";

		TimeZone zone = TimeZone.getDefault();
		Locale locale = new Locale("pt", "BR");
		Calendar dataHoje = Calendar.getInstance(zone, locale);

		dataHoje.set(Calendar.HOUR_OF_DAY, 0);
		dataHoje.set(Calendar.MINUTE, 0);
		dataHoje.set(Calendar.SECOND, 0);
		dataHoje.set(Calendar.MILLISECOND, 0);

		// dataHoje.add(Calendar.DAY_OF_MONTH, 1);

		String excelFileName = this.pathContrato + this.nomeContrato;// name of excel file

		String sheetName = "Resultado";// name of sheet

		XSSFWorkbook wb = new XSSFWorkbook();
		XSSFSheet sheet = wb.createSheet(sheetName);
		sheet.setDefaultColumnWidth(25);

		// Style para cabeçalho
		XSSFCellStyle cell_style = wb.createCellStyle();
		cell_style.setFillForegroundColor(IndexedColors.GREY_25_PERCENT.getIndex());
		cell_style.setFillPattern(FillPatternType.SOLID_FOREGROUND);

		XSSFFont font = wb.createFont();
		font.setBold(true);
		cell_style.setFont(font);
		cell_style.setAlignment(HorizontalAlignment.CENTER);
		cell_style.setVerticalAlignment(VerticalAlignment.CENTER);
		cell_style.setBorderBottom(BorderStyle.THIN);
		cell_style.setBorderTop(BorderStyle.THIN);
		cell_style.setBorderRight(BorderStyle.THIN);
		cell_style.setBorderLeft(BorderStyle.THIN);
		cell_style.setWrapText(true);

		// iterating r number of rows
		// cria CABEÇALHO
		int countLine = 0;
		XSSFRow row = sheet.createRow(countLine);
		XSSFCell cell;
		cell = row.createCell(0);
		cell.setCellValue("Contrato");
		cell.setCellStyle(cell_style);
		cell = row.createCell(1);
		cell.setCellValue("Pagador");
		cell.setCellStyle(cell_style);
		cell = row.createCell(2);
		cell.setCellValue("CCB");
		cell.setCellStyle(cell_style);
		cell = row.createCell(3);
		cell.setCellValue("Valor CCB");
		cell.setCellStyle(cell_style);
		cell = row.createCell(4);
		cell.setCellValue("Parcela");
		cell.setCellStyle(cell_style);
		cell = row.createCell(5);
		cell.setCellValue("Valor Parcela");
		cell.setCellStyle(cell_style);
		cell = row.createCell(6);
		cell.setCellValue("Data Vencimento");
		cell.setCellStyle(cell_style);
		cell = row.createCell(7);
		cell.setCellValue("Data Pagamento");
		cell.setCellStyle(cell_style);
		cell = row.createCell(8);
		cell.setCellValue("Valor Pago");
		cell.setCellStyle(cell_style);

		// cria estilo para dados em geral
		cell_style = wb.createCellStyle();
		cell_style.setAlignment(HorizontalAlignment.CENTER);
		cell_style.setVerticalAlignment(VerticalAlignment.CENTER);
		cell_style.setBorderBottom(BorderStyle.THIN);
		cell_style.setBorderTop(BorderStyle.THIN);
		cell_style.setBorderRight(BorderStyle.THIN);
		cell_style.setBorderLeft(BorderStyle.THIN);
		cell_style.setWrapText(true);

		// cria estilo especifico para coluna type numérico
		CellStyle numericStyle = wb.createCellStyle();
		numericStyle.setAlignment(HorizontalAlignment.CENTER);
		numericStyle.setVerticalAlignment(VerticalAlignment.CENTER);
		numericStyle.setBorderBottom(BorderStyle.THIN);
		numericStyle.setBorderTop(BorderStyle.THIN);
		numericStyle.setBorderRight(BorderStyle.THIN);
		numericStyle.setBorderLeft(BorderStyle.THIN);
		numericStyle.setWrapText(true);
		// cria a formatação para moeda
		CreationHelper ch = wb.getCreationHelper();
		numericStyle.setDataFormat(
				ch.createDataFormat().getFormat("_(R$* #,##0.00_);_(R$* (#,##0.00);_(R$* \"-\"??_);_(@_)"));

		// cria estilo especifico para coluna type Date
		CellStyle dateStyle = wb.createCellStyle();
		dateStyle.setAlignment(HorizontalAlignment.CENTER);
		dateStyle.setVerticalAlignment(VerticalAlignment.CENTER);
		dateStyle.setBorderBottom(BorderStyle.THIN);
		dateStyle.setBorderTop(BorderStyle.THIN);
		dateStyle.setBorderRight(BorderStyle.THIN);
		dateStyle.setBorderLeft(BorderStyle.THIN);
		dateStyle.setWrapText(true);
		// cria a formatação para Date
		dateStyle.setDataFormat((short) BuiltinFormats.getBuiltinFormat("m/d/yy"));

		for (RelatorioFinanceiroCobranca record : this.relObjetoContratoCobranca) {
			countLine++;
			row = sheet.createRow(countLine);

			// Contrato
			cell = row.createCell(0);
			cell.setCellStyle(cell_style);
			cell.setCellValue(record.getNumeroContrato());

			// Pagador
			cell = row.createCell(1);
			cell.setCellStyle(cell_style);
			cell.setCellValue(record.getNomePagador());

			// CCB
			cell = row.createCell(2);
			cell.setCellStyle(cell_style);
			cell.setCellValue(record.getParcelaCCB());

			// Valor CCB
			cell = row.createCell(3);
			cell.setCellStyle(numericStyle);
			cell.setCellType(CellType.NUMERIC);
			cell.setCellValue(((BigDecimal) record.getValorCCB()).doubleValue());

			// Parcela
			cell = row.createCell(4);
			cell.setCellStyle(cell_style);
			cell.setCellValue(record.getParcela());

			// Valor Parcela
			cell = row.createCell(5);
			cell.setCellStyle(numericStyle);
			cell.setCellType(CellType.NUMERIC);
			cell.setCellValue(((BigDecimal) record.getVlrParcela()).doubleValue());

			// Vencimento
			cell = row.createCell(6);
			cell.setCellStyle(dateStyle);
			cell.setCellValue(record.getDataVencimento());

			// Pagamento
			cell = row.createCell(7);
			cell.setCellStyle(dateStyle);
			cell.setCellValue(record.getDataPagamento());

			// Valor Pago
			cell = row.createCell(8);
			cell.setCellStyle(numericStyle);
			cell.setCellType(CellType.NUMERIC);
			cell.setCellValue(((BigDecimal) record.getVlrTotalPago()).doubleValue());
		}

		FileOutputStream fileOut = new FileOutputStream(excelFileName);

		// write this workbook to an Outputstream.
		wb.write(fileOut);
		fileOut.flush();
		fileOut.close();

		this.contratoGerado = true;
	}

	public void gerarXLSFinanceiroBaixadoFIDC() throws IOException {
		if (financeiroGalleria) {
			gerarXLSFinanceiroBaixadoEspelhoFIDC();
			return;
		}
		ParametrosDao pDao = new ParametrosDao();
		this.pathContrato = pDao.findByFilter("nome", "LOCACAO_PATH_COBRANCA").get(0).getValorString();
		this.nomeContrato = "Relatório Financeiro Baixado FIDC.xlsx";

		TimeZone zone = TimeZone.getDefault();
		Locale locale = new Locale("pt", "BR");
		Calendar dataHoje = Calendar.getInstance(zone, locale);

		dataHoje.set(Calendar.HOUR_OF_DAY, 0);
		dataHoje.set(Calendar.MINUTE, 0);
		dataHoje.set(Calendar.SECOND, 0);
		dataHoje.set(Calendar.MILLISECOND, 0);

		// dataHoje.add(Calendar.DAY_OF_MONTH, 1);

		String excelFileName = this.pathContrato + this.nomeContrato;// name of excel file

		String sheetName = "Resultado";// name of sheet

		XSSFWorkbook wb = new XSSFWorkbook();
		XSSFSheet sheet = wb.createSheet(sheetName);
		sheet.setDefaultColumnWidth(25);

		// Style para cabeçalho
		XSSFCellStyle cell_style = wb.createCellStyle();
		cell_style.setFillForegroundColor(IndexedColors.GREY_25_PERCENT.getIndex());
		cell_style.setFillPattern(FillPatternType.SOLID_FOREGROUND);

		XSSFFont font = wb.createFont();
		font.setBold(true);
		cell_style.setFont(font);
		cell_style.setAlignment(HorizontalAlignment.CENTER);
		cell_style.setVerticalAlignment(VerticalAlignment.CENTER);
		cell_style.setBorderBottom(BorderStyle.THIN);
		cell_style.setBorderTop(BorderStyle.THIN);
		cell_style.setBorderRight(BorderStyle.THIN);
		cell_style.setBorderLeft(BorderStyle.THIN);
		cell_style.setWrapText(true);

		// iterating r number of rows
		// cria CABEÇALHO
		int countLine = 0;
		XSSFRow row = sheet.createRow(countLine);
		XSSFCell cell;
		cell = row.createCell(0);
		cell.setCellValue("Contrato");
		cell.setCellStyle(cell_style);
		cell = row.createCell(1);
		cell.setCellValue("Responsável");
		cell.setCellStyle(cell_style);
		cell = row.createCell(2);
		cell.setCellValue("Pagador");
		cell.setCellStyle(cell_style);
		cell = row.createCell(3);
		cell.setCellValue("CCB");
		cell.setCellStyle(cell_style);
		cell = row.createCell(4);
		cell.setCellValue("Valor CCB");
		cell.setCellStyle(cell_style);
		cell = row.createCell(5);
		cell.setCellValue("Parcela");
		cell.setCellStyle(cell_style);
		cell = row.createCell(6);
		cell.setCellValue("Valor Parcela");
		cell.setCellStyle(cell_style);
		cell = row.createCell(7);
		cell.setCellValue("Data Vencimento");
		cell.setCellStyle(cell_style);
		cell = row.createCell(8);
		cell.setCellValue("Data Pagamento");
		cell.setCellStyle(cell_style);
		cell = row.createCell(9);
		cell.setCellValue("Valor Pago");
		cell.setCellStyle(cell_style);

		// cria estilo para dados em geral
		cell_style = wb.createCellStyle();
		cell_style.setAlignment(HorizontalAlignment.CENTER);
		cell_style.setVerticalAlignment(VerticalAlignment.CENTER);
		cell_style.setBorderBottom(BorderStyle.THIN);
		cell_style.setBorderTop(BorderStyle.THIN);
		cell_style.setBorderRight(BorderStyle.THIN);
		cell_style.setBorderLeft(BorderStyle.THIN);
		cell_style.setWrapText(true);

		// cria estilo especifico para coluna type numérico
		CellStyle numericStyle = wb.createCellStyle();
		numericStyle.setAlignment(HorizontalAlignment.CENTER);
		numericStyle.setVerticalAlignment(VerticalAlignment.CENTER);
		numericStyle.setBorderBottom(BorderStyle.THIN);
		numericStyle.setBorderTop(BorderStyle.THIN);
		numericStyle.setBorderRight(BorderStyle.THIN);
		numericStyle.setBorderLeft(BorderStyle.THIN);
		numericStyle.setWrapText(true);
		// cria a formatação para moeda
		CreationHelper ch = wb.getCreationHelper();
		numericStyle.setDataFormat(
				ch.createDataFormat().getFormat("_(R$* #,##0.00_);_(R$* (#,##0.00);_(R$* \"-\"??_);_(@_)"));

		// cria estilo especifico para coluna type Date
		CellStyle dateStyle = wb.createCellStyle();
		dateStyle.setAlignment(HorizontalAlignment.CENTER);
		dateStyle.setVerticalAlignment(VerticalAlignment.CENTER);
		dateStyle.setBorderBottom(BorderStyle.THIN);
		dateStyle.setBorderTop(BorderStyle.THIN);
		dateStyle.setBorderRight(BorderStyle.THIN);
		dateStyle.setBorderLeft(BorderStyle.THIN);
		dateStyle.setWrapText(true);
		// cria a formatação para Date
		dateStyle.setDataFormat((short) BuiltinFormats.getBuiltinFormat("m/d/yy"));

		for (RelatorioFinanceiroCobranca record : this.relObjetoContratoCobranca) {
			countLine++;
			row = sheet.createRow(countLine);

			// Contrato
			cell = row.createCell(0);
			cell.setCellStyle(cell_style);
			cell.setCellValue(record.getNumeroContrato());

			// Responsável
			cell = row.createCell(1);
			cell.setCellStyle(cell_style);
			cell.setCellValue(record.getNomeResponsavel());

			// Pagador
			cell = row.createCell(2);
			cell.setCellStyle(cell_style);
			cell.setCellValue(record.getNomePagador());

			// CCB
			cell = row.createCell(3);
			cell.setCellStyle(cell_style);
			cell.setCellValue(record.getParcelaCCB());

			// Valor CCB
			cell = row.createCell(4);
			cell.setCellStyle(numericStyle);
			cell.setCellType(CellType.NUMERIC);
			cell.setCellValue(((BigDecimal) record.getValorCCB()).doubleValue());

			// Parcela
			cell = row.createCell(5);
			cell.setCellStyle(cell_style);
			cell.setCellValue(record.getParcela());

			// Valor Parcela
			cell = row.createCell(6);
			cell.setCellStyle(numericStyle);
			cell.setCellType(CellType.NUMERIC);
			cell.setCellValue(((BigDecimal) record.getVlrParcela()).doubleValue());

			// Vencimento
			cell = row.createCell(7);
			cell.setCellStyle(dateStyle);
			cell.setCellValue(record.getDataVencimento());

			// Pagamento
			cell = row.createCell(8);
			cell.setCellStyle(dateStyle);
			cell.setCellValue(record.getDataPagamento());

			// Valor Pago
			cell = row.createCell(9);
			cell.setCellStyle(numericStyle);
			cell.setCellType(CellType.NUMERIC);
			cell.setCellValue(((BigDecimal) record.getVlrTotalPago()).doubleValue());
		}

		FileOutputStream fileOut = new FileOutputStream(excelFileName);

		// write this workbook to an Outputstream.
		wb.write(fileOut);
		fileOut.flush();
		fileOut.close();

		this.contratoGerado = true;
	}

	public void gerarXLSFinanceiroBaixadoEspelhoFIDC() throws IOException {
		ParametrosDao pDao = new ParametrosDao();
		this.pathContrato = pDao.findByFilter("nome", "LOCACAO_PATH_COBRANCA").get(0).getValorString();
		this.nomeContrato = "Relatório Financeiro Baixado FIDC.xlsx";

		TimeZone zone = TimeZone.getDefault();
		Locale locale = new Locale("pt", "BR");
		Calendar dataHoje = Calendar.getInstance(zone, locale);

		dataHoje.set(Calendar.HOUR_OF_DAY, 0);
		dataHoje.set(Calendar.MINUTE, 0);
		dataHoje.set(Calendar.SECOND, 0);
		dataHoje.set(Calendar.MILLISECOND, 0);

		// dataHoje.add(Calendar.DAY_OF_MONTH, 1);

		String excelFileName = this.pathContrato + this.nomeContrato;// name of excel file

		String sheetName = "Resultado";// name of sheet

		XSSFWorkbook wb = new XSSFWorkbook();
		XSSFSheet sheet = wb.createSheet(sheetName);
		sheet.setDefaultColumnWidth(25);

		// Style para cabeçalho
		XSSFCellStyle cell_style = wb.createCellStyle();
		cell_style.setFillForegroundColor(IndexedColors.GREY_25_PERCENT.getIndex());
		cell_style.setFillPattern(FillPatternType.SOLID_FOREGROUND);

		XSSFFont font = wb.createFont();
		font.setBold(true);
		cell_style.setFont(font);
		cell_style.setAlignment(HorizontalAlignment.CENTER);
		cell_style.setVerticalAlignment(VerticalAlignment.CENTER);
		cell_style.setBorderBottom(BorderStyle.THIN);
		cell_style.setBorderTop(BorderStyle.THIN);
		cell_style.setBorderRight(BorderStyle.THIN);
		cell_style.setBorderLeft(BorderStyle.THIN);
		cell_style.setWrapText(true);

		// iterating r number of rows
		// cria CABEÇALHO
		int countLine = 0;
		XSSFRow row = sheet.createRow(countLine);
		XSSFCell cell;
		cell = row.createCell(0);
		cell.setCellValue("Contrato");
		cell.setCellStyle(cell_style);
		cell = row.createCell(1);
		cell.setCellValue("Pagador");
		cell.setCellStyle(cell_style);
		cell = row.createCell(2);
		cell.setCellValue("CCB");
		cell.setCellStyle(cell_style);
		cell = row.createCell(3);
		cell.setCellValue("Valor CCB");
		cell.setCellStyle(cell_style);
		cell = row.createCell(4);
		cell.setCellValue("Parcela");
		cell.setCellStyle(cell_style);
		cell = row.createCell(5);
		cell.setCellValue("Valor Parcela");
		cell.setCellStyle(cell_style);
		cell = row.createCell(6);
		cell.setCellValue("Data Vencimento");
		cell.setCellStyle(cell_style);
		cell = row.createCell(7);
		cell.setCellValue("Data Pagamento");
		cell.setCellStyle(cell_style);
		cell = row.createCell(8);
		cell.setCellValue("Valor Pago");
		cell.setCellStyle(cell_style);

		// cria estilo para dados em geral
		cell_style = wb.createCellStyle();
		cell_style.setAlignment(HorizontalAlignment.CENTER);
		cell_style.setVerticalAlignment(VerticalAlignment.CENTER);
		cell_style.setBorderBottom(BorderStyle.THIN);
		cell_style.setBorderTop(BorderStyle.THIN);
		cell_style.setBorderRight(BorderStyle.THIN);
		cell_style.setBorderLeft(BorderStyle.THIN);
		cell_style.setWrapText(true);

		// cria estilo especifico para coluna type numérico
		CellStyle numericStyle = wb.createCellStyle();
		numericStyle.setAlignment(HorizontalAlignment.CENTER);
		numericStyle.setVerticalAlignment(VerticalAlignment.CENTER);
		numericStyle.setBorderBottom(BorderStyle.THIN);
		numericStyle.setBorderTop(BorderStyle.THIN);
		numericStyle.setBorderRight(BorderStyle.THIN);
		numericStyle.setBorderLeft(BorderStyle.THIN);
		numericStyle.setWrapText(true);
		// cria a formatação para moeda
		CreationHelper ch = wb.getCreationHelper();
		numericStyle.setDataFormat(
				ch.createDataFormat().getFormat("_(R$* #,##0.00_);_(R$* (#,##0.00);_(R$* \"-\"??_);_(@_)"));

		// cria estilo especifico para coluna type Date
		CellStyle dateStyle = wb.createCellStyle();
		dateStyle.setAlignment(HorizontalAlignment.CENTER);
		dateStyle.setVerticalAlignment(VerticalAlignment.CENTER);
		dateStyle.setBorderBottom(BorderStyle.THIN);
		dateStyle.setBorderTop(BorderStyle.THIN);
		dateStyle.setBorderRight(BorderStyle.THIN);
		dateStyle.setBorderLeft(BorderStyle.THIN);
		dateStyle.setWrapText(true);
		// cria a formatação para Date
		dateStyle.setDataFormat((short) BuiltinFormats.getBuiltinFormat("m/d/yy"));

		for (RelatorioFinanceiroCobranca record : this.relObjetoContratoCobranca) {
			countLine++;
			row = sheet.createRow(countLine);

			// Contrato
			cell = row.createCell(0);
			cell.setCellStyle(cell_style);
			cell.setCellValue(record.getNumeroContrato());

			// Pagador
			cell = row.createCell(1);
			cell.setCellStyle(cell_style);
			cell.setCellValue(record.getNomePagador());

			// CCB
			cell = row.createCell(2);
			cell.setCellStyle(cell_style);
			cell.setCellValue(record.getParcelaCCB());

			// Valor CCB
			cell = row.createCell(3);
			cell.setCellStyle(numericStyle);
			cell.setCellType(CellType.NUMERIC);
			cell.setCellValue(((BigDecimal) record.getValorCCB()).doubleValue());

			// Parcela
			cell = row.createCell(4);
			cell.setCellStyle(cell_style);
			cell.setCellValue(record.getParcela());

			// Valor Parcela
			cell = row.createCell(5);
			cell.setCellStyle(numericStyle);
			cell.setCellType(CellType.NUMERIC);
			cell.setCellValue(((BigDecimal) record.getVlrParcela()).doubleValue());

			// Vencimento
			cell = row.createCell(6);
			cell.setCellStyle(dateStyle);
			cell.setCellValue(record.getDataVencimento());

			// Pagamento
			cell = row.createCell(7);
			cell.setCellStyle(dateStyle);
			cell.setCellValue(record.getDataPagamento());

			// Valor Pago
			cell = row.createCell(8);
			cell.setCellStyle(numericStyle);
			cell.setCellType(CellType.NUMERIC);
			cell.setCellValue(((BigDecimal) record.getVlrTotalPago()).doubleValue());
		}

		FileOutputStream fileOut = new FileOutputStream(excelFileName);

		// write this workbook to an Outputstream.
		wb.write(fileOut);
		fileOut.flush();
		fileOut.close();

		this.contratoGerado = true;
	}

	public void geraXLSFinanceiroAtraso() throws IOException {
		ParametrosDao pDao = new ParametrosDao();
		this.pathContrato = pDao.findByFilter("nome", "LOCACAO_PATH_COBRANCA").get(0).getValorString();
		this.nomeContrato = "Relatório Financeiro Cobrança.xlsx";

		TimeZone zone = TimeZone.getDefault();
		Locale locale = new Locale("pt", "BR");
		Calendar dataHoje = Calendar.getInstance(zone, locale);

		dataHoje.set(Calendar.HOUR_OF_DAY, 0);
		dataHoje.set(Calendar.MINUTE, 0);
		dataHoje.set(Calendar.SECOND, 0);
		dataHoje.set(Calendar.MILLISECOND, 0);

		// dataHoje.add(Calendar.DAY_OF_MONTH, 1);

		String excelFileName = this.pathContrato + this.nomeContrato;// name of excel file

		String sheetName = "Resultado";// name of sheet

		XSSFWorkbook wb = new XSSFWorkbook();
		XSSFSheet sheet = wb.createSheet(sheetName);
		sheet.setDefaultColumnWidth(25);

		// Style para cabeçalho
		XSSFCellStyle cell_style = wb.createCellStyle();
		cell_style.setFillForegroundColor(IndexedColors.GREY_25_PERCENT.getIndex());
		cell_style.setFillPattern(FillPatternType.SOLID_FOREGROUND);

		XSSFFont font = wb.createFont();
		font.setBold(true);
		cell_style.setFont(font);
		cell_style.setAlignment(HorizontalAlignment.CENTER);
		cell_style.setVerticalAlignment(VerticalAlignment.CENTER);
		cell_style.setBorderBottom(BorderStyle.THIN);
		cell_style.setBorderTop(BorderStyle.THIN);
		cell_style.setBorderRight(BorderStyle.THIN);
		cell_style.setBorderLeft(BorderStyle.THIN);
		cell_style.setWrapText(true);

		// iterating r number of rows
		// cria CABEÇALHO
		int countLine = 0;
		XSSFRow row = sheet.createRow(countLine);
		XSSFCell cell;
		cell = row.createCell(0);
		cell.setCellValue("Contrato");
		cell.setCellStyle(cell_style);
		cell = row.createCell(1);
		cell.setCellValue("Data Contrato");
		cell.setCellStyle(cell_style);
		cell = row.createCell(2);
		cell.setCellValue("Responsável");
		cell.setCellStyle(cell_style);
		cell = row.createCell(3);
		cell.setCellValue("Pagador");
		cell.setCellStyle(cell_style);
		cell = row.createCell(4);
		cell.setCellValue("Parcela");
		cell.setCellStyle(cell_style);
		cell = row.createCell(5);
		cell.setCellValue("Vencimento");
		cell.setCellStyle(cell_style);
		cell = row.createCell(6);
		cell.setCellValue("Valor");
		cell.setCellStyle(cell_style);
		cell = row.createCell(7);
		cell.setCellValue("Valor Atualizado");
		cell.setCellStyle(cell_style);
		cell = row.createCell(8);
		cell.setCellValue("Status");
		cell.setCellStyle(cell_style);
		cell = row.createCell(9);
		cell.setCellValue("Parcelas em Aberto");
		cell.setCellStyle(cell_style);
		cell = row.createCell(10);
		cell.setCellValue("Com Baixas Parciais (# Parcela)");
		cell.setCellStyle(cell_style);

		// cria estilo para dados em geral
		cell_style = wb.createCellStyle();
		cell_style.setAlignment(HorizontalAlignment.CENTER);
		cell_style.setVerticalAlignment(VerticalAlignment.CENTER);
		cell_style.setBorderBottom(BorderStyle.THIN);
		cell_style.setBorderTop(BorderStyle.THIN);
		cell_style.setBorderRight(BorderStyle.THIN);
		cell_style.setBorderLeft(BorderStyle.THIN);
		cell_style.setWrapText(true);

		// cria estilo especifico para coluna type numérico
		CellStyle numericStyle = wb.createCellStyle();
		numericStyle.setAlignment(HorizontalAlignment.CENTER);
		numericStyle.setVerticalAlignment(VerticalAlignment.CENTER);
		numericStyle.setBorderBottom(BorderStyle.THIN);
		numericStyle.setBorderTop(BorderStyle.THIN);
		numericStyle.setBorderRight(BorderStyle.THIN);
		numericStyle.setBorderLeft(BorderStyle.THIN);
		numericStyle.setWrapText(true);
		// cria a formatação para moeda
		CreationHelper ch = wb.getCreationHelper();
		numericStyle.setDataFormat(
				ch.createDataFormat().getFormat("_(R$* #,##0.00_);_(R$* (#,##0.00);_(R$* \"-\"??_);_(@_)"));

		// cria estilo especifico para coluna type Date
		CellStyle dateStyle = wb.createCellStyle();
		dateStyle.setAlignment(HorizontalAlignment.CENTER);
		dateStyle.setVerticalAlignment(VerticalAlignment.CENTER);
		dateStyle.setBorderBottom(BorderStyle.THIN);
		dateStyle.setBorderTop(BorderStyle.THIN);
		dateStyle.setBorderRight(BorderStyle.THIN);
		dateStyle.setBorderLeft(BorderStyle.THIN);
		dateStyle.setWrapText(true);
		// cria a formatação para Date
		dateStyle.setDataFormat((short) BuiltinFormats.getBuiltinFormat("m/d/yy"));

		for (RelatorioFinanceiroCobranca record : this.relObjetoContratoCobranca) {
			countLine++;
			row = sheet.createRow(countLine);

			// Contrato
			cell = row.createCell(0);
			cell.setCellStyle(cell_style);
			cell.setCellValue(record.getNumeroContrato());

			// Data do Contrato
			cell = row.createCell(1);
			cell.setCellStyle(dateStyle);
			cell.setCellValue(record.getDataContrato());

			// Responsavel
			cell = row.createCell(2);
			cell.setCellStyle(cell_style);
			cell.setCellValue(record.getContratoCobranca().getResponsavel().getNome());

			// Pagador
			cell = row.createCell(3);
			cell.setCellStyle(cell_style);
			cell.setCellValue(record.getContratoCobranca().getPagador().getNome());

			// Parcela
			cell = row.createCell(4);
			cell.setCellStyle(cell_style);
			cell.setCellValue(record.getParcela());

			// Vencimento
			cell = row.createCell(5);
			cell.setCellStyle(dateStyle);
			cell.setCellValue(record.getDataVencimento());

			// Valor
			cell = row.createCell(6);
			cell.setCellStyle(numericStyle);
			cell.setCellType(CellType.NUMERIC);
			cell.setCellValue(((BigDecimal) record.valor).doubleValue());

			// Valor Atualizado
			cell = row.createCell(7);
			if (record.getVlrParcelaAtualizada() != null) {
				cell.setCellStyle(numericStyle);
				cell.setCellType(CellType.NUMERIC);
				cell.setCellValue(((BigDecimal) record.getVlrParcelaAtualizada()).doubleValue());
			} else {
				cell.setCellStyle(cell_style);
				cell.setCellValue("--");
			}

			// status
			cell = row.createCell(8);

			// Style para cabeçalho
			XSSFCellStyle cell_style_pago = wb.createCellStyle();
			cell_style_pago = wb.createCellStyle();
			cell_style_pago.setAlignment(HorizontalAlignment.CENTER);
			cell_style_pago.setVerticalAlignment(VerticalAlignment.CENTER);
			cell_style_pago.setBorderBottom(BorderStyle.THIN);
			cell_style_pago.setBorderTop(BorderStyle.THIN);
			cell_style_pago.setBorderRight(BorderStyle.THIN);
			cell_style_pago.setBorderLeft(BorderStyle.THIN);
			cell_style_pago.setWrapText(true);
			cell_style_pago.setFillForegroundColor(IndexedColors.BRIGHT_GREEN.getIndex());
			cell_style_pago.setFillPattern(FillPatternType.SOLID_FOREGROUND);

			XSSFCellStyle cell_style_aberto = wb.createCellStyle();
			cell_style_aberto = wb.createCellStyle();
			cell_style_aberto.setAlignment(HorizontalAlignment.CENTER);
			cell_style_aberto.setVerticalAlignment(VerticalAlignment.CENTER);
			cell_style_aberto.setBorderBottom(BorderStyle.THIN);
			cell_style_aberto.setBorderTop(BorderStyle.THIN);
			cell_style_aberto.setBorderRight(BorderStyle.THIN);
			cell_style_aberto.setBorderLeft(BorderStyle.THIN);
			cell_style_aberto.setWrapText(true);
			cell_style_aberto.setFillForegroundColor(IndexedColors.YELLOW.getIndex());
			cell_style_aberto.setFillPattern(FillPatternType.SOLID_FOREGROUND);

			XSSFCellStyle cell_style_atraso = wb.createCellStyle();
			cell_style_atraso = wb.createCellStyle();
			cell_style_atraso.setAlignment(HorizontalAlignment.CENTER);
			cell_style_atraso.setVerticalAlignment(VerticalAlignment.CENTER);
			cell_style_atraso.setBorderBottom(BorderStyle.THIN);
			cell_style_atraso.setBorderTop(BorderStyle.THIN);
			cell_style_atraso.setBorderRight(BorderStyle.THIN);
			cell_style_atraso.setBorderLeft(BorderStyle.THIN);
			cell_style_atraso.setWrapText(true);
			cell_style_atraso.setFillForegroundColor(IndexedColors.RED.getIndex());
			cell_style_atraso.setFillPattern(FillPatternType.SOLID_FOREGROUND);

			XSSFCellStyle cell_style_bx_parcial = wb.createCellStyle();
			cell_style_bx_parcial = wb.createCellStyle();
			cell_style_bx_parcial.setAlignment(HorizontalAlignment.CENTER);
			cell_style_bx_parcial.setVerticalAlignment(VerticalAlignment.CENTER);
			cell_style_bx_parcial.setBorderBottom(BorderStyle.THIN);
			cell_style_bx_parcial.setBorderTop(BorderStyle.THIN);
			cell_style_bx_parcial.setBorderRight(BorderStyle.THIN);
			cell_style_bx_parcial.setBorderLeft(BorderStyle.THIN);
			cell_style_bx_parcial.setWrapText(true);
			cell_style_bx_parcial.setFillForegroundColor(IndexedColors.ORANGE.getIndex());
			cell_style_bx_parcial.setFillPattern(FillPatternType.SOLID_FOREGROUND);

			if (record.isParcelaPaga()) {
				cell.setCellStyle(cell_style_pago);
				cell.setCellValue("Pago");
			} else {
				ContratoCobrancaDetalhesDao ccdDao = new ContratoCobrancaDetalhesDao();
				ContratoCobrancaDetalhes ccd = ccdDao.findById(record.getIdParcela());

				Calendar dataParcela = Calendar.getInstance(zone, locale);
				dataParcela.setTime(ccd.getDataVencimentoAtual());
				dataHoje.set(Calendar.HOUR_OF_DAY, 0);
				dataHoje.set(Calendar.MINUTE, 0);
				dataHoje.set(Calendar.SECOND, 0);
				dataHoje.set(Calendar.MILLISECOND, 0);

				if (dataParcela.before(dataHoje)) {
					cell.setCellStyle(cell_style_atraso);
					cell.setCellValue("Em atraso");
				} else {
					if (ccd.getListContratoCobrancaDetalhesParcial().size() > 0) {
						cell.setCellStyle(cell_style_bx_parcial);
						cell.setCellValue("Baixado parcialmente");
					} else {
						cell.setCellStyle(cell_style_aberto);
						cell.setCellValue("Em aberto");
					}
				}
			}

			cell = row.createCell(9);
			cell.setCellStyle(cell_style);
			cell.setCellValue(record.getQtdeAtrasos());

			cell = row.createCell(10);
			cell.setCellStyle(cell_style);
			cell.setCellValue(record.getQtdeBaixasParciais());
		}

		// Resize columns to fit data
		// TODO MIGRACAO POI
		/*
		 * int noOfColumns = sheet.getRow(0).getLastCellNum(); for (int i = 0; i <
		 * noOfColumns; i++) { sheet.autoSizeColumn(i); }
		 */
		FileOutputStream fileOut = new FileOutputStream(excelFileName);

		// write this workbook to an Outputstream.
		wb.write(fileOut);
		fileOut.flush();
		fileOut.close();

		this.contratoGerado = true;
	}

	public void geraXLSFinanceiroAtrasoFIDC() throws IOException {
		ParametrosDao pDao = new ParametrosDao();
		this.pathContrato = pDao.findByFilter("nome", "LOCACAO_PATH_COBRANCA").get(0).getValorString();
		this.nomeContrato = "Relatório Atraso FIDC.xlsx";

		TimeZone zone = TimeZone.getDefault();
		Locale locale = new Locale("pt", "BR");
		Calendar dataHoje = Calendar.getInstance(zone, locale);

		dataHoje.set(Calendar.HOUR_OF_DAY, 0);
		dataHoje.set(Calendar.MINUTE, 0);
		dataHoje.set(Calendar.SECOND, 0);
		dataHoje.set(Calendar.MILLISECOND, 0);

		// dataHoje.add(Calendar.DAY_OF_MONTH, 1);

		String excelFileName = this.pathContrato + this.nomeContrato;// name of excel file

		String sheetName = "Resultado";// name of sheet

		XSSFWorkbook wb = new XSSFWorkbook();
		XSSFSheet sheet = wb.createSheet(sheetName);
		sheet.setDefaultColumnWidth(25);

		// Style para cabeçalho
		XSSFCellStyle cell_style = wb.createCellStyle();
		cell_style.setFillForegroundColor(IndexedColors.GREY_25_PERCENT.getIndex());
		cell_style.setFillPattern(FillPatternType.SOLID_FOREGROUND);

		XSSFFont font = wb.createFont();
		font.setBold(true);
		cell_style.setFont(font);
		cell_style.setAlignment(HorizontalAlignment.CENTER);
		cell_style.setVerticalAlignment(VerticalAlignment.CENTER);
		cell_style.setBorderBottom(BorderStyle.THIN);
		cell_style.setBorderTop(BorderStyle.THIN);
		cell_style.setBorderRight(BorderStyle.THIN);
		cell_style.setBorderLeft(BorderStyle.THIN);
		cell_style.setWrapText(true);

		// iterating r number of rows
		// cria CABEÇALHO
		int countLine = 0;
		XSSFRow row = sheet.createRow(countLine);
		XSSFCell cell;
		cell = row.createCell(0);
		cell.setCellValue("Contrato");
		cell.setCellStyle(cell_style);
		cell = row.createCell(1);
		cell.setCellValue("Responsável");
		cell.setCellStyle(cell_style);
		cell = row.createCell(2);
		cell.setCellValue("Pagador");
		cell.setCellStyle(cell_style);
		cell = row.createCell(3);
		cell.setCellValue("CCB");
		cell.setCellStyle(cell_style);
		cell = row.createCell(4);
		cell.setCellValue("CCB/Parcela");
		cell.setCellStyle(cell_style);
		cell = row.createCell(5);
		cell.setCellValue("Vencimento");
		cell.setCellStyle(cell_style);
		cell = row.createCell(6);
		cell.setCellValue("Valor");
		cell.setCellStyle(cell_style);

		// cria estilo para dados em geral
		cell_style = wb.createCellStyle();
		cell_style.setAlignment(HorizontalAlignment.CENTER);
		cell_style.setVerticalAlignment(VerticalAlignment.CENTER);
		cell_style.setBorderBottom(BorderStyle.THIN);
		cell_style.setBorderTop(BorderStyle.THIN);
		cell_style.setBorderRight(BorderStyle.THIN);
		cell_style.setBorderLeft(BorderStyle.THIN);
		cell_style.setWrapText(true);

		// cria estilo especifico para coluna type numérico
		CellStyle numericStyle = wb.createCellStyle();
		numericStyle.setAlignment(HorizontalAlignment.CENTER);
		numericStyle.setVerticalAlignment(VerticalAlignment.CENTER);
		numericStyle.setBorderBottom(BorderStyle.THIN);
		numericStyle.setBorderTop(BorderStyle.THIN);
		numericStyle.setBorderRight(BorderStyle.THIN);
		numericStyle.setBorderLeft(BorderStyle.THIN);
		numericStyle.setWrapText(true);
		// cria a formatação para moeda
		CreationHelper ch = wb.getCreationHelper();
		numericStyle.setDataFormat(
				ch.createDataFormat().getFormat("_(R$* #,##0.00_);_(R$* (#,##0.00);_(R$* \"-\"??_);_(@_)"));

		// cria estilo especifico para coluna type Date
		CellStyle dateStyle = wb.createCellStyle();
		dateStyle.setAlignment(HorizontalAlignment.CENTER);
		dateStyle.setVerticalAlignment(VerticalAlignment.CENTER);
		dateStyle.setBorderBottom(BorderStyle.THIN);
		dateStyle.setBorderTop(BorderStyle.THIN);
		dateStyle.setBorderRight(BorderStyle.THIN);
		dateStyle.setBorderLeft(BorderStyle.THIN);
		dateStyle.setWrapText(true);
		// cria a formatação para Date
		dateStyle.setDataFormat((short) BuiltinFormats.getBuiltinFormat("m/d/yy"));

		for (RelatorioFinanceiroCobranca record : this.relObjetoContratoCobranca) {
			countLine++;
			row = sheet.createRow(countLine);

			// Contrato
			cell = row.createCell(0);
			cell.setCellStyle(cell_style);
			cell.setCellValue(record.getNumeroContrato());

			// Responsavel
			cell = row.createCell(1);
			cell.setCellStyle(cell_style);
			cell.setCellValue(record.getContratoCobranca().getResponsavel().getNome());

			// Pagador
			cell = row.createCell(2);
			cell.setCellStyle(cell_style);
			cell.setCellValue(record.getContratoCobranca().getPagador().getNome());

			// CCB
			cell = row.createCell(3);
			cell.setCellStyle(cell_style);
			cell.setCellValue(record.getCcb());

			// CCB/Parcela
			cell = row.createCell(4);
			cell.setCellStyle(cell_style);
			cell.setCellValue(record.getCcb() + "-" + record.getParcela());

			// Vencimento
			cell = row.createCell(5);
			cell.setCellStyle(dateStyle);
			cell.setCellValue(record.getDataVencimento());

			// Valor
			cell = row.createCell(6);
			cell.setCellStyle(numericStyle);
			cell.setCellType(CellType.NUMERIC);
			cell.setCellValue(((BigDecimal) record.valor).doubleValue());
		}

		// Resize columns to fit data
		// TODO MIGRACAO POI
		/*
		 * int noOfColumns = sheet.getRow(0).getLastCellNum(); for (int i = 0; i <
		 * noOfColumns; i++) { sheet.autoSizeColumn(i); }
		 */
		FileOutputStream fileOut = new FileOutputStream(excelFileName);

		// write this workbook to an Outputstream.
		wb.write(fileOut);
		fileOut.flush();
		fileOut.close();

		this.contratoGerado = true;
	}

	public void geraXLSFinanceiroAtrasoSecuritizadora() throws IOException {
		ParametrosDao pDao = new ParametrosDao();
		this.pathContrato = pDao.findByFilter("nome", "LOCACAO_PATH_COBRANCA").get(0).getValorString();
		this.nomeContrato = "Relatório Atraso Securitizadora.xlsx";

		TimeZone zone = TimeZone.getDefault();
		Locale locale = new Locale("pt", "BR");
		Calendar dataHoje = Calendar.getInstance(zone, locale);

		dataHoje.set(Calendar.HOUR_OF_DAY, 0);
		dataHoje.set(Calendar.MINUTE, 0);
		dataHoje.set(Calendar.SECOND, 0);
		dataHoje.set(Calendar.MILLISECOND, 0);

		// dataHoje.add(Calendar.DAY_OF_MONTH, 1);

		String excelFileName = this.pathContrato + this.nomeContrato;// name of excel file

		String sheetName = "Resultado";// name of sheet

		XSSFWorkbook wb = new XSSFWorkbook();
		XSSFSheet sheet = wb.createSheet(sheetName);
		sheet.setDefaultColumnWidth(25);

		// Style para cabeçalho
		XSSFCellStyle cell_style = wb.createCellStyle();
		cell_style.setFillForegroundColor(IndexedColors.GREY_25_PERCENT.getIndex());
		cell_style.setFillPattern(FillPatternType.SOLID_FOREGROUND);

		XSSFFont font = wb.createFont();
		font.setBold(true);
		cell_style.setFont(font);
		cell_style.setAlignment(HorizontalAlignment.CENTER);
		cell_style.setVerticalAlignment(VerticalAlignment.CENTER);
		cell_style.setBorderBottom(BorderStyle.THIN);
		cell_style.setBorderTop(BorderStyle.THIN);
		cell_style.setBorderRight(BorderStyle.THIN);
		cell_style.setBorderLeft(BorderStyle.THIN);
		cell_style.setWrapText(true);

		// iterating r number of rows
		// cria CABEÇALHO
		int countLine = 0;
		XSSFRow row = sheet.createRow(countLine);
		XSSFCell cell;
		cell = row.createCell(0);
		cell.setCellValue("Contrato");
		cell.setCellStyle(cell_style);
		cell = row.createCell(1);
		cell.setCellValue("Responsável");
		cell.setCellStyle(cell_style);
		cell = row.createCell(2);
		cell.setCellValue("Pagador");
		cell.setCellStyle(cell_style);
		cell = row.createCell(3);
		cell.setCellValue("CCB");
		cell.setCellStyle(cell_style);
		cell = row.createCell(4);
		cell.setCellValue("CCB/Parcela");
		cell.setCellStyle(cell_style);
		cell = row.createCell(5);
		cell.setCellValue("Vencimento");
		cell.setCellStyle(cell_style);
		cell = row.createCell(6);
		cell.setCellValue("Valor");
		cell.setCellStyle(cell_style);

		// cria estilo para dados em geral
		cell_style = wb.createCellStyle();
		cell_style.setAlignment(HorizontalAlignment.CENTER);
		cell_style.setVerticalAlignment(VerticalAlignment.CENTER);
		cell_style.setBorderBottom(BorderStyle.THIN);
		cell_style.setBorderTop(BorderStyle.THIN);
		cell_style.setBorderRight(BorderStyle.THIN);
		cell_style.setBorderLeft(BorderStyle.THIN);
		cell_style.setWrapText(true);

		// cria estilo especifico para coluna type numérico
		CellStyle numericStyle = wb.createCellStyle();
		numericStyle.setAlignment(HorizontalAlignment.CENTER);
		numericStyle.setVerticalAlignment(VerticalAlignment.CENTER);
		numericStyle.setBorderBottom(BorderStyle.THIN);
		numericStyle.setBorderTop(BorderStyle.THIN);
		numericStyle.setBorderRight(BorderStyle.THIN);
		numericStyle.setBorderLeft(BorderStyle.THIN);
		numericStyle.setWrapText(true);
		// cria a formatação para moeda
		CreationHelper ch = wb.getCreationHelper();
		numericStyle.setDataFormat(
				ch.createDataFormat().getFormat("_(R$* #,##0.00_);_(R$* (#,##0.00);_(R$* \"-\"??_);_(@_)"));

		// cria estilo especifico para coluna type Date
		CellStyle dateStyle = wb.createCellStyle();
		dateStyle.setAlignment(HorizontalAlignment.CENTER);
		dateStyle.setVerticalAlignment(VerticalAlignment.CENTER);
		dateStyle.setBorderBottom(BorderStyle.THIN);
		dateStyle.setBorderTop(BorderStyle.THIN);
		dateStyle.setBorderRight(BorderStyle.THIN);
		dateStyle.setBorderLeft(BorderStyle.THIN);
		dateStyle.setWrapText(true);
		// cria a formatação para Date
		dateStyle.setDataFormat((short) BuiltinFormats.getBuiltinFormat("m/d/yy"));

		for (RelatorioFinanceiroCobranca record : this.relObjetoContratoCobranca) {
			countLine++;
			row = sheet.createRow(countLine);

			// Contrato
			cell = row.createCell(0);
			cell.setCellStyle(cell_style);
			cell.setCellValue(record.getNumeroContrato());

			// Responsavel
			cell = row.createCell(1);
			cell.setCellStyle(cell_style);
			cell.setCellValue(record.getContratoCobranca().getResponsavel().getNome());

			// Pagador
			cell = row.createCell(2);
			cell.setCellStyle(cell_style);
			cell.setCellValue(record.getContratoCobranca().getPagador().getNome());

			// CCB
			cell = row.createCell(3);
			cell.setCellStyle(cell_style);
			cell.setCellValue(record.getCcb());

			// CCB/Parcela
			cell = row.createCell(4);
			cell.setCellStyle(cell_style);
			cell.setCellValue(record.getCcb() + "-" + record.getParcela());

			// Vencimento
			cell = row.createCell(5);
			cell.setCellStyle(dateStyle);
			cell.setCellValue(record.getDataVencimento());

			// Valor
			cell = row.createCell(6);
			cell.setCellStyle(numericStyle);
			cell.setCellType(CellType.NUMERIC);
			cell.setCellValue(((BigDecimal) record.valor).doubleValue());
		}

		// Resize columns to fit data
		// TODO MIGRACAO POI
		/*
		 * int noOfColumns = sheet.getRow(0).getLastCellNum(); for (int i = 0; i <
		 * noOfColumns; i++) { sheet.autoSizeColumn(i); }
		 */
		FileOutputStream fileOut = new FileOutputStream(excelFileName);

		// write this workbook to an Outputstream.
		wb.write(fileOut);
		fileOut.flush();
		fileOut.close();

		this.contratoGerado = true;
	}

	public void geraXLSFinanceiroAtrasoCRI(String relatorioTipo) throws IOException {
		ParametrosDao pDao = new ParametrosDao();
		this.pathContrato = pDao.findByFilter("nome", "LOCACAO_PATH_COBRANCA").get(0).getValorString();
		this.nomeContrato = "Relatório Atraso " + relatorioTipo + ".xlsx";

		TimeZone zone = TimeZone.getDefault();
		Locale locale = new Locale("pt", "BR");
		Calendar dataHoje = Calendar.getInstance(zone, locale);

		dataHoje.set(Calendar.HOUR_OF_DAY, 0);
		dataHoje.set(Calendar.MINUTE, 0);
		dataHoje.set(Calendar.SECOND, 0);
		dataHoje.set(Calendar.MILLISECOND, 0);

		// dataHoje.add(Calendar.DAY_OF_MONTH, 1);

		String excelFileName = this.pathContrato + this.nomeContrato;// name of excel file

		String sheetName = "Resultado";// name of sheet

		XSSFWorkbook wb = new XSSFWorkbook();
		XSSFSheet sheet = wb.createSheet(sheetName);
		sheet.setDefaultColumnWidth(25);

		// Style para cabeçalho
		XSSFCellStyle cell_style = wb.createCellStyle();
		cell_style.setFillForegroundColor(IndexedColors.GREY_25_PERCENT.getIndex());
		cell_style.setFillPattern(FillPatternType.SOLID_FOREGROUND);

		XSSFFont font = wb.createFont();
		font.setBold(true);
		cell_style.setFont(font);
		cell_style.setAlignment(HorizontalAlignment.CENTER);
		cell_style.setVerticalAlignment(VerticalAlignment.CENTER);
		cell_style.setBorderBottom(BorderStyle.THIN);
		cell_style.setBorderTop(BorderStyle.THIN);
		cell_style.setBorderRight(BorderStyle.THIN);
		cell_style.setBorderLeft(BorderStyle.THIN);
		cell_style.setWrapText(true);

		// iterating r number of rows
		// cria CABEÇALHO
		int countLine = 0;
		XSSFRow row = sheet.createRow(countLine);
		XSSFCell cell;
		cell = row.createCell(0);
		cell.setCellValue("Contrato");
		cell.setCellStyle(cell_style);
		cell = row.createCell(1);
		cell.setCellValue("Responsável");
		cell.setCellStyle(cell_style);
		cell = row.createCell(2);
		cell.setCellValue("Pagador");
		cell.setCellStyle(cell_style);
		cell = row.createCell(3);
		cell.setCellValue("CCB");
		cell.setCellStyle(cell_style);
		cell = row.createCell(4);
		cell.setCellValue("CCB/Parcela");
		cell.setCellStyle(cell_style);
		cell = row.createCell(5);
		cell.setCellValue("Vencimento");
		cell.setCellStyle(cell_style);
		cell = row.createCell(6);
		cell.setCellValue("Valor");
		cell.setCellStyle(cell_style);

		// cria estilo para dados em geral
		cell_style = wb.createCellStyle();
		cell_style.setAlignment(HorizontalAlignment.CENTER);
		cell_style.setVerticalAlignment(VerticalAlignment.CENTER);
		cell_style.setBorderBottom(BorderStyle.THIN);
		cell_style.setBorderTop(BorderStyle.THIN);
		cell_style.setBorderRight(BorderStyle.THIN);
		cell_style.setBorderLeft(BorderStyle.THIN);
		cell_style.setWrapText(true);

		// cria estilo especifico para coluna type numérico
		CellStyle numericStyle = wb.createCellStyle();
		numericStyle.setAlignment(HorizontalAlignment.CENTER);
		numericStyle.setVerticalAlignment(VerticalAlignment.CENTER);
		numericStyle.setBorderBottom(BorderStyle.THIN);
		numericStyle.setBorderTop(BorderStyle.THIN);
		numericStyle.setBorderRight(BorderStyle.THIN);
		numericStyle.setBorderLeft(BorderStyle.THIN);
		numericStyle.setWrapText(true);
		// cria a formatação para moeda
		CreationHelper ch = wb.getCreationHelper();
		numericStyle.setDataFormat(
				ch.createDataFormat().getFormat("_(R$* #,##0.00_);_(R$* (#,##0.00);_(R$* \"-\"??_);_(@_)"));

		// cria estilo especifico para coluna type Date
		CellStyle dateStyle = wb.createCellStyle();
		dateStyle.setAlignment(HorizontalAlignment.CENTER);
		dateStyle.setVerticalAlignment(VerticalAlignment.CENTER);
		dateStyle.setBorderBottom(BorderStyle.THIN);
		dateStyle.setBorderTop(BorderStyle.THIN);
		dateStyle.setBorderRight(BorderStyle.THIN);
		dateStyle.setBorderLeft(BorderStyle.THIN);
		dateStyle.setWrapText(true);
		// cria a formatação para Date
		dateStyle.setDataFormat((short) BuiltinFormats.getBuiltinFormat("m/d/yy"));

		for (RelatorioFinanceiroCobranca record : this.relObjetoContratoCobranca) {
			countLine++;
			row = sheet.createRow(countLine);

			// Contrato
			cell = row.createCell(0);
			cell.setCellStyle(cell_style);
			cell.setCellValue(record.getNumeroContrato());

			// Responsavel
			cell = row.createCell(1);
			cell.setCellStyle(cell_style);
			cell.setCellValue(record.getContratoCobranca().getResponsavel().getNome());

			// Pagador
			cell = row.createCell(2);
			cell.setCellStyle(cell_style);
			cell.setCellValue(record.getContratoCobranca().getPagador().getNome());

			// CCB
			cell = row.createCell(3);
			cell.setCellStyle(cell_style);
			cell.setCellValue(record.getCcb());

			// CCB/Parcela
			cell = row.createCell(4);
			cell.setCellStyle(cell_style);
			cell.setCellValue(record.getCcb() + "-" + record.getParcela());

			// Vencimento
			cell = row.createCell(5);
			cell.setCellStyle(dateStyle);
			cell.setCellValue(record.getDataVencimento());

			// Valor
			cell = row.createCell(6);
			cell.setCellStyle(numericStyle);
			cell.setCellType(CellType.NUMERIC);
			cell.setCellValue(((BigDecimal) record.valor).doubleValue());
		}

		// Resize columns to fit data
		// TODO MIGRACAO POI
		/*
		 * int noOfColumns = sheet.getRow(0).getLastCellNum(); for (int i = 0; i <
		 * noOfColumns; i++) { sheet.autoSizeColumn(i); }
		 */
		FileOutputStream fileOut = new FileOutputStream(excelFileName);

		// write this workbook to an Outputstream.
		wb.write(fileOut);
		fileOut.flush();
		fileOut.close();

		this.contratoGerado = true;
	}

	public StreamedContent geraXLSEnviarB3(List<ContratoCobranca> listaContratos) throws IOException {
		XSSFWorkbook wb = new XSSFWorkbook(getClass().getResourceAsStream("/resource/TabelaVazia.xlsx"));
		XSSFSheet sheet = wb.getSheetAt(0);
		XSSFRow linha = sheet.getRow(0);
		if (linha == null) {
			sheet.createRow(0);
			linha = sheet.getRow(0);
		}

		CellStyle cell_style = wb.createCellStyle();
		XSSFFont font = wb.createFont();
		font.setBold(true);
		font.setFontHeightInPoints((short) 9);
		cell_style.setFont(font);
		cell_style.setAlignment(HorizontalAlignment.CENTER);
		cell_style.setVerticalAlignment(VerticalAlignment.CENTER);
		cell_style.setBorderBottom(BorderStyle.THIN);
		cell_style.setBorderTop(BorderStyle.THIN);
		cell_style.setBorderRight(BorderStyle.THIN);
		cell_style.setBorderLeft(BorderStyle.THIN);
		cell_style.setWrapText(true);

		gravaCelula(0, "Data de Emissão", linha, cell_style);
		gravaCelula(1, "Data de Vencimento", linha, cell_style);
		gravaCelula(2, "Valor Financeiro de Emissão", linha, cell_style);
		gravaCelula(3, "Data da Constituição do Crédito", linha, cell_style);
		gravaCelula(4, "Data de Vencimento do Crédito", linha, cell_style);
		gravaCelula(5, "Taxa de Juros / Spread", linha, cell_style);
		gravaCelula(6, "Numeração CCI", linha, cell_style);
		gravaCelula(7, "Série CCI", linha, cell_style);
		gravaCelula(8, "Nome ou Razão Social do Devedor", linha, cell_style);
		gravaCelula(9, "CPF/CNPJ do Devedor", linha, cell_style);
		gravaCelula(10, "Natureza do Devedor", linha, cell_style);
		gravaCelula(11, "UF do Endereço do Devedor", linha, cell_style);
		gravaCelula(12, "Cidade do Devedor", linha, cell_style);
		gravaCelula(13, "Logradouro do Endereço do Devedor", linha, cell_style);
		gravaCelula(14, "Número do Endereço do Devedor", linha, cell_style);
		gravaCelula(15, "Complemento do Endereço do Devedor", linha, cell_style);
		gravaCelula(16, "Bairro do Endereço do Devedor", linha, cell_style);
		gravaCelula(17, "CEP do Endereço do Devedor", linha, cell_style);
		gravaCelula(18, "UF do Endereço do Imóvel", linha, cell_style);
		gravaCelula(19, "Município do Endereço do Imóvel", linha, cell_style);
		gravaCelula(20, "Logradouro do Endereço do Imóvel", linha, cell_style);
		gravaCelula(21, "Número do Endereço do Imóvel", linha, cell_style);
		gravaCelula(22, "Complemento do Endereço do Imóvel", linha, cell_style);
		gravaCelula(23, "Bairro do Endereço do Imóvel", linha, cell_style);
		gravaCelula(24, "CEP do Endereço do Imóvel", linha, cell_style);
		gravaCelula(25, "Matrícula do Imóvel", linha, cell_style);
		gravaCelula(26, "Natureza da Garantia (PF ou PJ)", linha, cell_style);
		gravaCelula(27, "Numero Controle Interno (nº Contrato)", linha, cell_style);

		// cria estilo especifico para coluna type numérico
		CellStyle numericStyle = wb.createCellStyle();
		numericStyle.setFont(font);
		numericStyle.setAlignment(HorizontalAlignment.CENTER);
		numericStyle.setVerticalAlignment(VerticalAlignment.CENTER);
		numericStyle.setBorderBottom(BorderStyle.THIN);
		numericStyle.setBorderTop(BorderStyle.THIN);
		numericStyle.setBorderRight(BorderStyle.THIN);
		numericStyle.setBorderLeft(BorderStyle.THIN);
		numericStyle.setWrapText(true);
		// cria a formatação para moeda
		CreationHelper ch = wb.getCreationHelper();
		numericStyle.setDataFormat(
				ch.createDataFormat().getFormat("_(R$* #,##0.00_);_(R$* (#,##0.00);_(R$* \"-\"??_);_(@_)"));

		// cria estilo especifico para coluna type numérico
		CellStyle numberStyle = wb.createCellStyle();
		numberStyle.setFont(font);
		numberStyle.setAlignment(HorizontalAlignment.CENTER);
		numberStyle.setVerticalAlignment(VerticalAlignment.CENTER);
		numberStyle.setBorderBottom(BorderStyle.THIN);
		numberStyle.setBorderTop(BorderStyle.THIN);
		numberStyle.setBorderRight(BorderStyle.THIN);
		numberStyle.setBorderLeft(BorderStyle.THIN);
		numberStyle.setWrapText(true);

		// cria estilo especifico para coluna type Date
		CellStyle dateStyle = wb.createCellStyle();
		dateStyle.setFont(font);
		dateStyle.setAlignment(HorizontalAlignment.CENTER);
		dateStyle.setVerticalAlignment(VerticalAlignment.CENTER);
		dateStyle.setBorderBottom(BorderStyle.THIN);
		dateStyle.setBorderTop(BorderStyle.THIN);
		dateStyle.setBorderRight(BorderStyle.THIN);
		dateStyle.setBorderLeft(BorderStyle.THIN);
		dateStyle.setWrapText(true);
		// cria a formatação para Date
		dateStyle.setDataFormat((short) BuiltinFormats.getBuiltinFormat("m/d/yy"));

		int iLinha = 1;
		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();
		int col = 0;
		for (ContratoCobranca contrato : listaContratos) {
			col = 0;
			RelatorioB3 relatorio = contratoCobrancaDao.pegarRelatorioB3(contrato);
			linha = sheet.getRow(iLinha);
			if (linha == null) {
				sheet.createRow(iLinha);
				linha = sheet.getRow(iLinha);
			}

			Locale locale = new Locale("pt", "BR");
			SimpleDateFormat sdf = new SimpleDateFormat("dd/MM/yyyy", locale);
			String dataStr = sdf.format(relatorio.dataEmissao);
			gravaCelula(col, relatorio.dataEmissao, linha, dateStyle);
			col++;
			gravaCelula(col, relatorio.dataVencimento, linha, dateStyle);
			col++;
			gravaCelula(col, relatorio.valorEmissao, linha, numberStyle);
			col++;
			gravaCelula(col, relatorio.dataConstituicaoCredito, linha, dateStyle);
			col++;
			gravaCelula(col, relatorio.dataVencimentoCredito, linha, dateStyle);
			col++;
			gravaCelula(col, relatorio.taxaJuros, linha, numberStyle);
			col++;
			gravaCelula(col, relatorio.numercaoCci, linha);
			col++;
			gravaCelula(col, relatorio.serieCci, linha);
			col++;
			gravaCelula(col, relatorio.nomeDevedor, linha);
			col++;
			gravaCelula(col, relatorio.cpfCnpjDevedor, linha);
			col++;
			gravaCelula(col, relatorio.naturezaDevedor, linha);
			col++;
			gravaCelula(col, relatorio.ufDevedor, linha);
			col++;
			gravaCelula(col, relatorio.cidadeDevedor, linha);
			col++;
			gravaCelula(col, relatorio.logradouroDevedor, linha);
			col++;
			gravaCelula(col, relatorio.numeroEnderecoDevedor, linha);
			col++;
			gravaCelula(col, relatorio.complementoDevedor, linha);
			col++;
			gravaCelula(col, relatorio.bairroDevedor, linha);
			col++;
			gravaCelula(col, relatorio.cepDevedor, linha);
			col++;
			gravaCelula(col, relatorio.ufImovel, linha);
			col++;
			gravaCelula(col, relatorio.municipioImovel, linha);
			col++;
			gravaCelula(col, relatorio.logradouroImovel, linha);
			col++;
			gravaCelula(col, relatorio.numeroEnderecoImovel, linha);
			col++;
			gravaCelula(col, relatorio.complementoImovel, linha);
			col++;
			gravaCelula(col, relatorio.bairroImovel, linha);
			col++;
			gravaCelula(col, relatorio.cepImovel, linha);
			col++;
			gravaCelula(col, relatorio.matriculaImovel, linha);
			col++;
			gravaCelula(col, relatorio.naturezaGarantia, linha);
			col++;
			gravaCelula(col, relatorio.numeroContrato, linha);
			col++;
			iLinha++;
		}
		for (int i = 0; i < col; i++) {
			sheet.autoSizeColumn(i);
		}

		for (int i = 0; i < iLinha; i++) {
			sheet.getRow(i).setHeightInPoints((short) 12);
		}

		ByteArrayOutputStream fileOut = new ByteArrayOutputStream();
		wb.write(fileOut);
		wb.close();
		final GeradorRelatorioDownloadCliente gerador = new GeradorRelatorioDownloadCliente(
				FacesContext.getCurrentInstance());
		String nomeArquivoDownload = String.format("Galleria Bank - Relatorio B3" + "%s.xlsx", "");
		gerador.open(nomeArquivoDownload);
		gerador.feed(new ByteArrayInputStream(fileOut.toByteArray()));
		gerador.close();

		return null;
	}

	public void geraRecibo(ContratoCobrancaDetalhesParcial bpContratoDetalhes) {
		FacesContext context = FacesContext.getCurrentInstance();

		Document doc = null;
		OutputStream os = null;

		if (bpContratoDetalhes.getId() > 0) {
			try {
				/*
				 * Fonts Utilizadas no PDF
				 */
				Font titulo = new Font(FontFamily.HELVETICA, 20, Font.BOLD);
				Font subtitulo = new Font(FontFamily.HELVETICA, 12, Font.BOLD);
				Font subtituloIdent = new Font(FontFamily.HELVETICA, 12, Font.BOLD);
				Font destaque = new Font(FontFamily.HELVETICA, 10, Font.BOLD);

				TimeZone zone = TimeZone.getDefault();
				Locale locale = new Locale("pt", "BR");

				/*
				 * Formatadores de Data/Hora
				 */
				SimpleDateFormat sdfDataHora = new SimpleDateFormat("dd/MMM/yyyy HH:mm:ss", locale);
				SimpleDateFormat sdfHora = new SimpleDateFormat("HH:mm:ss", locale);
				SimpleDateFormat sdfDataArquivo = new SimpleDateFormat("dd-MMM-yyyy", locale);
				SimpleDateFormat sdfData = new SimpleDateFormat("dd/MMM/yyyy", locale);
				SimpleDateFormat sdfDia = new SimpleDateFormat("dd", locale);
				SimpleDateFormat sdfMesExtenso = new SimpleDateFormat("MMMM", locale);
				SimpleDateFormat sdfAno = new SimpleDateFormat("yyyy", locale);

				/*
				 * Instancia Calendário
				 */
				Calendar date = Calendar.getInstance(zone, locale);
				ParametrosDao pDao = new ParametrosDao();

				/*
				 * Configuração inicial do PDF - Cria o documento tamanho A4, margens de 2,54cm
				 */
				doc = new Document(PageSize.A4, 10, 10, 10, 10);
				this.pathRecibo = pDao.findByFilter("nome", "LOCACAO_PATH_COBRANCA").get(0).getValorString();
				this.nomeRecibo = sdfDataArquivo.format(date.getTime()) + "_Recibo_Contrato_"
						+ this.objetoContratoCobranca.getNumeroContrato() + "_Parcela_"
						+ bpContratoDetalhes.getNumeroParcela() + ".pdf";
				// this.objetoContratoCobranca.getNumeroContrato() + " - Parcela: " +
				// this.bpContratoCobrancaDetalhes.getNumeroParcela()
				os = new FileOutputStream(this.pathRecibo + this.nomeRecibo);

				// Associa a stream de saída ao
				PdfWriter.getInstance(doc, os);

				// Abre o documento
				doc.open();

				Paragraph p1;

				PdfPTable table = new PdfPTable(1);
				table.setWidthPercentage(100.0f);

				Paragraph p2;
				p2 = new Paragraph("RECIBO DE PAGAMENTO", titulo);

				PdfPCell cell1;
				cell1 = new PdfPCell(p2);
				cell1.setVerticalAlignment(Element.ALIGN_MIDDLE);
				cell1.setHorizontalAlignment(Element.ALIGN_CENTER);
				cell1.setPaddingTop(20f);
				cell1.disableBorderSide(2);
				table.addCell(cell1);

				p2 = new Paragraph("emitido em " + sdfData.format(date.getTime()), subtituloIdent);

				PdfPCell cell20;
				cell20 = new PdfPCell(p2);
				cell20.setVerticalAlignment(Element.ALIGN_MIDDLE);
				cell20.setHorizontalAlignment(Element.ALIGN_CENTER);
				cell20.setPaddingBottom(20f);
				cell20.disableBorderSide(1);
				table.addCell(cell20);

				p1 = new Paragraph("Número do Contrato: " + this.objetoContratoCobranca.getNumeroContrato(), subtitulo);
				p1.setAlignment(Element.ALIGN_LEFT);

				PdfPCell cell2;
				cell2 = new PdfPCell(p1);
				cell2.setPaddingTop(20f);
				cell2.setPaddingLeft(20f);
				cell2.disableBorderSide(2);

				table.addCell(cell2);

				int numParcela = 0;
				if (bpContratoDetalhes.getNumeroParcela() != null) {
					numParcela = Integer.valueOf(bpContratoDetalhes.getNumeroParcela());
				}

				p1 = new Paragraph("Parcela: " + String.format("%02d", numParcela), subtitulo);
				p1.setAlignment(Element.ALIGN_LEFT);

				PdfPCell cell3;
				cell3 = new PdfPCell(p1);
				cell3.disableBorderSide(1);
				cell3.disableBorderSide(2);
				cell3.setPaddingTop(10f);
				cell3.setPaddingLeft(20f);

				table.addCell(cell3);

				p1 = new Paragraph("Data Parcela: " + sdfData.format(bpContratoDetalhes.getDataVencimento()),
						subtitulo);

				PdfPCell cell4;
				cell4 = new PdfPCell(p1);
				cell4.disableBorderSide(1);
				cell4.disableBorderSide(2);
				cell4.setPaddingTop(10f);
				cell4.setPaddingLeft(20f);
				table.addCell(cell4);

				p1 = new Paragraph("Valor da Parcela: R$ "
						+ this.objetoContratoCobranca.getVlrParcela().toString().replace(".", ","), subtitulo);

				PdfPCell cell8;
				cell8 = new PdfPCell(p1);
				cell8.disableBorderSide(1);
				cell8.disableBorderSide(2);
				cell8.setPaddingTop(10f);
				cell8.setPaddingLeft(20f);
				table.addCell(cell8);

				if (bpContratoDetalhes.getVlrParcelaAtualizado() != null) {
					p1 = new Paragraph(
							"Valor da Parcela Atualizada: R$ "
									+ bpContratoDetalhes.getVlrParcelaAtualizado().toString().replace(".", ","),
							subtitulo);
					PdfPCell cell5;
					cell5 = new PdfPCell(p1);
					cell5.disableBorderSide(1);
					cell5.disableBorderSide(2);
					cell5.setPaddingTop(10f);
					cell5.setPaddingLeft(20f);
					table.addCell(cell5);
				}

				p1 = new Paragraph("Data do Pagamento: " + sdfData.format(bpContratoDetalhes.getDataPagamento()),
						subtitulo);

				PdfPCell cell21;
				cell21 = new PdfPCell(p1);
				cell21.disableBorderSide(1);
				cell21.disableBorderSide(2);
				cell21.setPaddingTop(10f);
				cell21.setPaddingLeft(20f);
				table.addCell(cell21);

				p1 = new Paragraph(
						"Valor Recebido: R$ " + bpContratoDetalhes.getVlrRecebido().toString().replace(".", ","),
						subtitulo);

				PdfPCell cell6;
				cell6 = new PdfPCell(p1);
				cell6.disableBorderSide(1);
				cell6.disableBorderSide(2);
				cell6.setPaddingTop(10f);
				cell6.setPaddingLeft(20f);
				table.addCell(cell6);

				if (bpContratoDetalhes.getSaldoAPagar() != null) {
					p1 = new Paragraph(
							"Saldo a Pagar: R$ " + bpContratoDetalhes.getSaldoAPagar().toString().replace(".", ","),
							subtitulo);

					PdfPCell cell9;
					cell9 = new PdfPCell(p1);
					cell9.disableBorderSide(1);
					cell9.disableBorderSide(2);
					cell9.setPaddingTop(10f);
					cell9.setPaddingLeft(20f);
					table.addCell(cell9);
				}

				if (bpContratoDetalhes.getRecebedor() != null) {
					p1 = new Paragraph("Forma de Pagamento: " + bpContratoDetalhes.getRecebedor().getNome(), subtitulo);
					PdfPCell cell7;
					cell7 = new PdfPCell(p1);
					cell7.disableBorderSide(1);
					cell7.disableBorderSide(2);
					cell7.setPaddingTop(10f);
					cell7.setPaddingLeft(20f);
					table.addCell(cell7);
				}

				if (bpContratoDetalhes.getObservacaoRecebedor() != null
						&& !bpContratoDetalhes.getObservacaoRecebedor().equals("")) {
					p1 = new Paragraph("Observação: " + bpContratoDetalhes.getObservacaoRecebedor(), subtitulo);
					PdfPCell cell22;
					cell22 = new PdfPCell(p1);
					cell22.disableBorderSide(1);
					cell22.disableBorderSide(2);
					cell22.setPaddingTop(10f);
					cell22.setPaddingLeft(20f);
					table.addCell(cell22);
				}

				p1 = new Paragraph(" ", subtitulo);
				PdfPCell cell23;
				cell23 = new PdfPCell(p1);
				cell23.disableBorderSide(1);
				cell23.setPaddingLeft(20f);
				table.addCell(cell23);

				doc.add(table);

				/*
				 * PdfPCell cell1 = new PdfPCell(new Phrase("CONTRATO", titulo));
				 * cell1.setBorderColor(BaseColor.BLACK);
				 * cell1.setVerticalAlignment(Element.ALIGN_MIDDLE);
				 * cell1.setHorizontalAlignment(Element.ALIGN_CENTER);
				 * cell1.setBackgroundColor(BaseColor.LIGHT_GRAY);
				 * cell1.setUseBorderPadding(true); cell1.setGrayFill(0.9f);
				 * cell1.setPaddingTop(10f); cell1.setPaddingBottom(10f); table.addCell(cell1);
				 * Paragraph p1 = new Paragraph("RECIBO DE PAGAMENTO" , titulo);
				 * p1.setAlignment(Element.ALIGN_CENTER); p1.setSpacingAfter(10); doc.add(p1);
				 */

			} catch (FileNotFoundException e) {
				// TODO Auto-generated catch block
				context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR,
						"Contrato Cobrança: Este contrato está aberto por algum outro programa, por favor, feche-o e tente novamente! (Contrato: "
								+ this.objetoContratoCobranca.getNumeroContrato() + " - Parcela: "
								+ this.bpContratoCobrancaDetalhes.getNumeroParcela() + ")" + e,
						""));
			} catch (Exception e) {
				context.addMessage(null,
						new FacesMessage(FacesMessage.SEVERITY_ERROR,
								"Contrato Cobrança: Ocorreu um problema ao gerar o recibo! (Contrato: "
										+ this.objetoContratoCobranca.getNumeroContrato() + " - Parcela: "
										+ this.bpContratoCobrancaDetalhes.getNumeroParcela() + ")" + e,
								""));
			} finally {
				if (doc != null) {
					// fechamento do documento
					doc.close();
				}
				if (os != null) {
					// fechamento da stream de saída
					try {
						os.close();
					} catch (IOException e) {
						// TODO Auto-generated catch block
						e.printStackTrace();
					}
				}
			}

			this.reciboGerado = true;

			context.addMessage(null,
					new FacesMessage(FacesMessage.SEVERITY_INFO,
							"Contrato Cobrança: Recibo gerado com sucesso! (Contrato: "
									+ this.objetoContratoCobranca.getNumeroContrato() + " - Parcela: "
									+ this.bpContratoCobrancaDetalhes.getNumeroParcela() + ")",
							""));
		}
	}

	public void marcaParaDocumentoAnalise(DocumentoAnalise documentoAnalise) {
		DocumentoAnaliseDao documentoAnaliseDao = new DocumentoAnaliseDao();
		documentoAnaliseDao.merge(documentoAnalise);
		listaArquivosAnaliseDocumentos();
		listaRestricoesPessoas();
	}

	public void executarConsultasAnaliseDocumento() throws SchedulerException {

		try {
			DocumentoAnaliseService documentoAnaliseService = new DocumentoAnaliseService();
			documentoAnaliseService.criandoJobExecutarConsultas(listaDocumentoAnalise, loginBean.getUsuarioLogado(),
					this.objetoContratoCobranca);
		} catch (SchedulerException e) {
			e.printStackTrace();
		}
		this.objetoContratoCobranca.setDocumentosAnalisados(false);
	}

	public boolean checkConsultasAnaliseDocumento() throws SchedulerException {
		try {
			SchedulerFactory shedFact = new StdSchedulerFactory();
			Scheduler scheduler = shedFact.getScheduler();
			JobKey key = JobKey.jobKey("documentoAnaliseJOB", objetoContratoCobranca.getNumeroContrato());
			boolean jobExist = scheduler.checkExists(key);

			return jobExist;
		} catch (SchedulerException e) {
			e.printStackTrace();
			return false;
		}
	}

	public void limparConsultasVencidas() {
		DocumentoAnaliseDao documentoAnaliseDao = new DocumentoAnaliseDao();
		for (DocumentoAnalise docAnalise : listaDocumentoAnalise) {
			if (!docAnalise.isLiberadoAnalise())
				continue;
			PagadorRecebedorConsultaDao pagadorRecebedorConsultaDao = new PagadorRecebedorConsultaDao();
			if (CommonsUtil.semValor(docAnalise.getPagador())) {
				// TODO verificar rea
				continue;
			}
			PagadorRecebedor pagador = docAnalise.getPagador();
			if (!CommonsUtil.semValor(docAnalise.getEngine())
					&& !CommonsUtil.semValor(docAnalise.getEngine().getData())) {
				if (DateUtil.getDifferenceDays(docAnalise.getEngine().getData(), DateUtil.gerarDataHoje()) > 30) {
					docAnalise.setEngine(null);
					docAnalise.setRetornoEngine(null);
					docAnalise.addObservacao("Engine Expirado");
				}
			} else {
				PagadorRecebedorConsulta consultaEngine = pagadorRecebedorConsultaDao
						.getConsultaVencidaByPagadorAndRetorno(pagador, DocumentosAnaliseEnum.ENGINE,
								docAnalise.getRetornoEngine());
				if (!CommonsUtil.semValor(consultaEngine)) {
					consultaEngine.setRetornoConsulta(null);
					consultaEngine.setDataConsulta(new Date());
					docAnalise.setEngine(null);
					docAnalise.setRetornoEngine(null);
					docAnalise.addObservacao("Engine Expirado");
				}
			}
			PagadorRecebedorConsulta consultaProcessos = pagadorRecebedorConsultaDao
					.getConsultaVencidaByPagadorAndRetorno(pagador, DocumentosAnaliseEnum.PROCESSOB,
							docAnalise.getRetornoProcesso());
			if (!CommonsUtil.semValor(consultaProcessos)) {
				consultaProcessos.setRetornoConsulta(null);
				consultaProcessos.setDataConsulta(new Date());
				docAnalise.setRetornoProcesso(null);
				docAnalise.addObservacao("Processos Expirado");
			}
			PagadorRecebedorConsulta consultaRelacionamento = pagadorRecebedorConsultaDao
					.getConsultaVencidaByPagadorAndRetorno(pagador, DocumentosAnaliseEnum.RELACIONAMENTO,
							docAnalise.getRetornoRelacionamento());
			if (!CommonsUtil.semValor(consultaRelacionamento)) {
				consultaRelacionamento.setRetornoConsulta(null);
				consultaRelacionamento.setDataConsulta(new Date());
				docAnalise.setRetornoRelacionamento(null);
				docAnalise.addObservacao("Relacionamento Expirado");
			}
			PagadorRecebedorConsulta consultaCenprot = pagadorRecebedorConsultaDao
					.getConsultaVencidaByPagadorAndRetorno(pagador, DocumentosAnaliseEnum.CENPROT,
							docAnalise.getRetornoCenprot());
			if (!CommonsUtil.semValor(consultaCenprot)) {
				consultaCenprot.setRetornoConsulta(null);
				consultaCenprot.setDataConsulta(new Date());
				docAnalise.setRetornoCenprot(null);
				docAnalise.addObservacao("Protesto Expirado");
			}
			PagadorRecebedorConsulta consultaSCR = pagadorRecebedorConsultaDao.getConsultaVencidaByPagadorAndRetorno(
					pagador, DocumentosAnaliseEnum.SCR, docAnalise.getRetornoScr());
			if (!CommonsUtil.semValor(consultaSCR)) {
				consultaSCR.setRetornoConsulta(null);
				consultaSCR.setDataConsulta(new Date());
				docAnalise.setRetornoScr(null);
				docAnalise.addObservacao("SCR Expirado");
			}
			Date hoje = DateUtil.gerarDataHoje();
			PlexiConsultaDao plexiConsultaDao = new PlexiConsultaDao();
			for (PlexiConsulta plexi : docAnalise.getPlexiConsultas()) {
				if (DateUtil.getDifferenceDays(plexi.getDataConsulta(), hoje) >= 30) {
					plexi.setRequestId(null);
					plexi.setWebhookRetorno(null);
					plexi.setPdf(null);
					plexi.setStatus("Consulta Expirada");
					plexiConsultaDao.merge(plexi);
				}
			}
			NetrinConsultaDao netrinConsultaDao = new NetrinConsultaDao();
			for (NetrinConsulta netrin : docAnalise.getNetrinConsultas()) {
				if (DateUtil.getDifferenceDays(netrin.getDataConsulta(), hoje) >= 30) {
					netrin.setRetorno(null);
					netrin.setPdf(null);
					netrin.setStatus("Consulta Expirada");
					netrinConsultaDao.merge(netrin);
				}
			}
			DocketConsultaDao docketConsultaDao = new DocketConsultaDao();
			for (DocketConsulta docket : docAnalise.getDocketConsultas()) {
				if (DateUtil.getDifferenceDays(docket.getDataConsulta(), hoje) >= 30) {
					docket.setIdDocket(null);
					docket.setRetorno(null);
					docket.setPdf(null);
					docket.setStatus("Consulta Expirada");
					docketConsultaDao.merge(docket);
				}
			}
			documentoAnaliseDao.merge(docAnalise);
		}
	}

	/**
	 * @return the fileRecibo
	 */
	public StreamedContent getFileRecibo() {
		String caminho = this.pathRecibo + this.nomeRecibo;
		String arquivo = this.nomeRecibo;
		FileInputStream stream = null;

		this.reciboGerado = false;
		try {
			stream = new FileInputStream(caminho);
		} catch (FileNotFoundException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
		fileRecibo = new DefaultStreamedContent(stream, caminho, arquivo);

		return fileRecibo;
	}

	public void geraLaudo() {
		try {
			String apikey = "cApKsaLHk1dgXwlkXbVGaqwnL4CPOuq3ICbMc8Va";
			this.objetoImovelCobranca.separaEnderecoNumero(this.objetoImovelCobranca.getEndereco());
			getLatAndLon(this.objetoImovelCobranca.getEndereco());

			JSONObject assessingObj = new JSONObject();
			assessingObj.put("category_id", this.objetoImovelCobranca.getCategoria());
			assessingObj.put("lat", imovelCobrancaLatitude);
			assessingObj.put("lon", imovelCobrancaLongitude);
			assessingObj.put("neighborhood", this.objetoImovelCobranca.getBairro());
			assessingObj.put("area", (this.objetoImovelCobranca.getAreaConstruida().isEmpty()) ? 0.0
					: Double.valueOf(this.objetoImovelCobranca.getAreaConstruida().replace(",", "\\.")));
			assessingObj.put("street", this.objetoImovelCobranca.getEnderecoSemNumero());
			assessingObj.put("number", this.objetoImovelCobranca.getNumeroImovel());
			assessingObj.put("sub_category_id", this.objetoImovelCobranca.getCategoria());
			assessingObj.put("city", this.objetoImovelCobranca.getCidade());
			assessingObj.put("postal_code", this.objetoImovelCobranca.getCep());
			assessingObj.put("state", this.objetoImovelCobranca.getEstado());
			assessingObj.put("complement", this.objetoImovelCobranca.getComplemento());

			JSONObject assessingTypo = new JSONObject();
			assessingTypo.put("features_bathroom", (this.objetoImovelCobranca.getNumeroBanheiros() <= 0) ? 1
					: this.objetoImovelCobranca.getNumeroBanheiros());
			assessingTypo.put("features_bedroom", (this.objetoImovelCobranca.getNumeroQuartos() <= 0) ? 1
					: this.objetoImovelCobranca.getNumeroQuartos());
			assessingTypo.put("features_suite", (this.objetoImovelCobranca.getNumeroSuites() <= 0) ? 1
					: this.objetoImovelCobranca.getNumeroSuites());
			assessingTypo.put("features_garage", (this.objetoImovelCobranca.getNumeroGaragens() <= 0) ? 1
					: this.objetoImovelCobranca.getNumeroGaragens());

			assessingObj.put("typology", assessingTypo);

			JSONObject address = new JSONObject();
			address.put("street", this.objetoImovelCobranca.getEnderecoSemNumero());
			address.put("neighborhood", this.objetoImovelCobranca.getBairro());
			address.put("city", this.objetoImovelCobranca.getCidade());
			address.put("postal_code", this.objetoImovelCobranca.getCep());
			address.put("state", this.objetoImovelCobranca.getEstado());
			address.put("street_long", this.objetoImovelCobranca.getEnderecoSemNumero());
			address.put("number", this.objetoImovelCobranca.getNumeroImovel());

			JSONObject location = new JSONObject();
			location.put("radius", 0);
			location.put("lat", imovelCobrancaLatitude);
			location.put("lon", imovelCobrancaLongitude);

			JSONObject typologyWithArray = new JSONObject();
			typologyWithArray.put("features_bathroom", new JSONArray());
			typologyWithArray.put("features_bedroom", new JSONArray());
			typologyWithArray.put("features_suite", new JSONArray());
			typologyWithArray.put("features_garage", new JSONArray());

			JSONObject realty_type = new JSONObject();
			JSONArray catArray = new JSONArray();
			catArray = (this.objetoImovelCobranca.getCategoria() == 1) ? catArray.put(1) : catArray.put(2);
			realty_type.put("category_id", catArray);
			realty_type.put("sub_category_id", new JSONArray());

			JSONObject price_total = new JSONObject();
			price_total.put("value", 0);
			price_total.put("percentage", 100);

			JSONObject priceAreaUsefulObj = new JSONObject();
			priceAreaUsefulObj.put("value", 0);
			priceAreaUsefulObj.put("percentage", 100);

			JSONObject priceAreaTotalObj = new JSONObject();
			priceAreaTotalObj.put("value", 0);
			priceAreaTotalObj.put("percentage", 100);

			JSONObject price_AreaObj = new JSONObject();
			price_AreaObj.put("useful", priceAreaUsefulObj);
			price_AreaObj.put("total", priceAreaTotalObj);

			JSONObject areaUsefulObj = new JSONObject();
			areaUsefulObj.put("value", Double.valueOf(this.objetoImovelCobranca.getAreaConstruida()));
			areaUsefulObj.put("percentage", 40);

			JSONObject areaTotalObj = new JSONObject();
			areaTotalObj.put("value", 0);
			areaTotalObj.put("percentage", 100);

			JSONObject areaObj = new JSONObject();
			areaObj.put("useful", areaUsefulObj);
			areaObj.put("total", areaTotalObj);

			JSONObject searchObj = new JSONObject();
			searchObj.put("is_sale", true);
			searchObj.put("max_age", 0);
			searchObj.put("address", address);
			searchObj.put("typology", typologyWithArray);
			searchObj.put("area", areaObj);
			searchObj.put("price_area", price_AreaObj);
			searchObj.put("price_total", price_total);
			searchObj.put("location", location);
			searchObj.put("realty_type", realty_type);

			JSONObject moreFilters = new JSONObject();
			moreFilters.put("full_address", true);
			moreFilters.put("remove_duplicates", true);
			moreFilters.put("active_ads", true);
			moreFilters.put("recent_ads", false);
			moreFilters.put("min_quantity_ad", 2);
			moreFilters.put("min_similarity", 0.3);

			JSONObject postObj = new JSONObject();
			postObj.put("search", searchObj);
			postObj.put("assessing", assessingObj);
			postObj.put("more_filters", moreFilters);

			if (!this.objetoImovelCobranca.getAreaConstruida().isEmpty()) {
				this.objetoImovelCobranca.setAreaConstruida(this.objetoImovelCobranca.getAreaConstruida());
				PrimeFaces.current().ajax().update("form:Imovel");
			}

			String idAval = "";

			URL myURL = new URL(
					"https://api.prd.valuation.eemovel.com.br/valuation/assessment/internal/realty/calculator");

			HttpURLConnection myURLConnection = (HttpURLConnection) myURL.openConnection();
			myURLConnection.setRequestMethod("POST");
			myURLConnection.setUseCaches(false);
			myURLConnection.setRequestProperty("Accept", "application/json");
			myURLConnection.setRequestProperty("Accept-Charset", "utf-8");
			myURLConnection.setRequestProperty("Content-Type", "application/json; charset=utf-8");
			myURLConnection.setRequestProperty("x-api-key", apikey);
			myURLConnection.setDoOutput(true);

			try (OutputStream os = myURLConnection.getOutputStream()) {
				byte[] input = postObj.toString().getBytes("utf-8");
				os.write(input, 0, input.length);
				os.close();
			}

			if (myURLConnection.getResponseCode() == HttpURLConnection.HTTP_INTERNAL_ERROR) {
				BufferedReader in = new BufferedReader(
						new InputStreamReader(myURLConnection.getErrorStream(), "utf-8"));
				String inputLine;
				StringBuilder response = new StringBuilder();

				while ((inputLine = in.readLine()) != null) {
					response.append(inputLine);
				}
				in.close();
				erroPedidoLaudo = true;
				JSONObject responseObj = new JSONObject(response.toString());
				System.out.println("Retorno postER: " + responseObj);
			}

			if (myURLConnection.getResponseCode() == HttpURLConnection.HTTP_OK) {
				BufferedReader in = new BufferedReader(
						new InputStreamReader(myURLConnection.getInputStream(), "utf-8"));
				String inputLine;
				StringBuilder response = new StringBuilder();

				while ((inputLine = in.readLine()) != null) {
					response.append(inputLine);
				}
				in.close();

				JSONObject responseObj = new JSONObject(response.toString());

				if (responseObj.has("data")) {
					idAval = responseObj.getString("data");
				}
			}
			myURLConnection.disconnect();

			laudoDone = getLaudoStatus(idAval, apikey);

			if (laudoDone && !erroPedidoLaudo) {
				myURL = new URL("https://api.prd.valuation.eemovel.com.br/valuation/files/public/report/" + idAval);

				HttpURLConnection myURLConnectionPdf = (HttpURLConnection) myURL.openConnection();
				myURLConnectionPdf.setRequestMethod("GET");
				myURLConnectionPdf.setUseCaches(false);
				myURLConnectionPdf.setRequestProperty("Accept", "application/json");
				myURLConnectionPdf.setRequestProperty("Accept-Charset", "utf-8");
				myURLConnectionPdf.setRequestProperty("Content-Type", "application/json; charset=utf-8");
				myURLConnectionPdf.setRequestProperty("x-api-key", apikey);

				if (myURLConnectionPdf.getResponseCode() == HttpURLConnection.HTTP_OK) {
					BufferedReader in = new BufferedReader(new InputStreamReader(myURLConnectionPdf.getInputStream()));
					String inputLine;
					StringBuffer response = new StringBuffer();

					while ((inputLine = in.readLine()) != null) {
						response.append(inputLine);
					}
					in.close();

					JSONObject responseObj = new JSONObject(response.toString());
					if (responseObj.has("data")) {
						String dataObj = responseObj.getString("data");
						laudoEndereco = dataObj;
						FileService fileService = new FileService();
						fileService.salvarPdfRetorno("", this.objetoContratoCobranca.getNumeroContrato(),
								retornaBase64(laudoEndereco), "LaudoRobo", "interno");
						fileService.salvarPdfRetorno("", this.objetoContratoCobranca.getNumeroContrato(),
								retornaBase64(laudoEndereco), "LaudoRobo", "juridico");
						PrimeFaces.current().ajax().update("form:ArquivosInternosSalvos");
					}
				}
				myURLConnection.disconnect();
			}
		} catch (MalformedURLException e) {
			e.printStackTrace();
		} catch (IOException e) {
			e.printStackTrace();
		} catch (Exception e) {
			e.printStackTrace();
		}
	}

	public String retornaBase64(String str) throws Exception {
		java.net.URL url = new java.net.URL(str);
		InputStream is = url.openStream();
		byte[] bytes = org.apache.commons.io.IOUtils.toByteArray(is);
		byte[] encoded = Base64.getEncoder().encode(bytes);
		return new String(encoded);
	}

	public void abreLaudo() throws IOException {
		ExternalContext externalContext = FacesContext.getCurrentInstance().getExternalContext();
		externalContext.redirect(getLaudoEndereco());
	}

	private void getLatAndLon(String endereco) {
		try {
			int HTTP_COD_SUCESSO = 200;
			String accessKey = "pk.771df7af1e6ab5e0ea29d01bbdf717a7";

			URL myURL = new URL("https://us1.locationiq.com/v1/search/structured?street="
					+ this.objetoImovelCobranca.getEnderecoSemNumero() + " "
					+ this.objetoImovelCobranca.getNumeroImovel() + "&city=" + this.objetoImovelCobranca.getCidade()
					+ "&state=" + this.objetoImovelCobranca.getEstado() + "&country=Brazil&postalcode="
					+ this.objetoImovelCobranca.getCep() + "&format=json&key=" + accessKey);

			HttpURLConnection myURLConnection = (HttpURLConnection) myURL.openConnection();
			myURLConnection.setUseCaches(false);
			myURLConnection.setRequestMethod("GET");
			myURLConnection.setRequestProperty("Accept", "application/json");
			myURLConnection.setRequestProperty("Accept-Charset", "utf-8");
			myURLConnection.setRequestProperty("Content-Type", "application/json; charset=utf-8");
			myURLConnection.setDoOutput(true);

			if (myURLConnection.getResponseCode() != HTTP_COD_SUCESSO) {

			} else {

				BufferedReader in = new BufferedReader(new InputStreamReader(myURLConnection.getInputStream()));
				String inputLine;
				StringBuffer response = new StringBuffer();

				while ((inputLine = in.readLine()) != null) {
					response.append(inputLine);
				}
				in.close();

				JSONArray jsonObj = new JSONArray(response.toString());
				JSONObject dataObj = jsonObj.getJSONObject(0);
				if (dataObj.has("lat")) {
					imovelCobrancaLatitude = dataObj.getBigDecimal("lat");
				}

				if (dataObj.has("lon")) {
					imovelCobrancaLongitude = dataObj.getBigDecimal("lon");
				}
			}
			myURLConnection.disconnect();
		} catch (MalformedURLException e) {
			e.printStackTrace();
		} catch (IOException e) {
			e.printStackTrace();
		} catch (Exception e) {
			e.printStackTrace();
		}
	}

	public boolean getLaudoStatus(String avaliacaoString, String apikey) {
		boolean isLaudoDone = false;
		int quantidadePesquisa = 0;

		if (CommonsUtil.mesmoValor(avaliacaoString, "")) {
			return false;
		}

		while (!isLaudoDone && quantidadePesquisa < 7) {
			try {
				Thread.sleep(5000);
				URL myURL = new URL("https://api.prd.valuation.eemovel.com.br/valuation/assessment/internal/status/"
						+ avaliacaoString);

				HttpURLConnection myURLConnection = (HttpURLConnection) myURL.openConnection();
				myURLConnection.setRequestMethod("GET");
				myURLConnection.setUseCaches(false);
				myURLConnection.setRequestProperty("Accept", "application/json");
				myURLConnection.setRequestProperty("Accept-Charset", "utf-8");
				myURLConnection.setRequestProperty("Content-Type", "application/json; charset=utf-8");
				myURLConnection.setRequestProperty("x-api-key", apikey);
				myURLConnection.setDoOutput(true);

				if (myURLConnection.getResponseCode() == HttpURLConnection.HTTP_OK) {
					BufferedReader in = new BufferedReader(new InputStreamReader(myURLConnection.getInputStream()));
					String inputLine;
					StringBuffer response = new StringBuffer();

					while ((inputLine = in.readLine()) != null) {
						response.append(inputLine);
					}
					in.close();

					JSONObject responseObj = new JSONObject(response.toString());
					if (responseObj.has("data")) {
						JSONObject dataObj = responseObj.getJSONObject("data");
						if (dataObj.has("progress")) {
							JSONObject progressObj = dataObj.getJSONObject("progress");
							if (CommonsUtil.mesmoValor(progressObj.get("selection"),
									"Numero mínimo de amostras selecionadas não foi atingido.")) {
								break;
							} else if (progressObj.getBoolean("selection") && progressObj.getBoolean("search")
									&& progressObj.getBoolean("price")) {
								isLaudoDone = true;
								this.objetoContratoCobranca.setValorPreLaudo(dataObj.getBigDecimal("price"));
								PrimeFaces.current().ajax().update("form:RecebidoPajulaudoPanel");
							}
						}
					}
				}
				myURLConnection.disconnect();
				quantidadePesquisa++;
			} catch (MalformedURLException e) {
				e.printStackTrace();
			} catch (IOException e) {
				e.printStackTrace();
			} catch (Exception e) {
				e.printStackTrace();
			}
		}
		return isLaudoDone;

	}

	
	
	public void adicionarBlackFlagImovel() {
		ImovelCobrancaRestricaoService imovelCobrancaRestricaoService = new ImovelCobrancaRestricaoService();

		FacesContext context = FacesContext.getCurrentInstance();

		if (imovelCobrancaRestricaoService.adicionarBlackFlagImovel(objetoImovelCobranca, objetoContratoCobranca,
				getUsuarioLogado())) {
			context.addMessage(null,
					new FacesMessage(FacesMessage.SEVERITY_INFO, "Imovel adicionado na lista de Black Flag "
							+ this.objetoImovelCobranca.getNumeroMatricula() + " com sucesso!!!", ""));
			this.restricaoImovel = new ArrayList<>();
			listaRestricoesImovel();			
			PrimeFaces.current().ajax().update("form:Imovel");
			PrimeFaces.current().ajax().update("form:panelRestricao");
		}else
			context.addMessage(null,
					new FacesMessage(FacesMessage.SEVERITY_INFO, "Erro ao adicionar imvóvel na lista de Black Flag "
							+ this.objetoImovelCobranca.getNumeroMatricula(), ""));

	}

	public void removerBlackFlagImovel() {

		ImovelCobrancaRestricaoService imovelCobrancaRestricaoService = new ImovelCobrancaRestricaoService();

		FacesContext context = FacesContext.getCurrentInstance();

		if (imovelCobrancaRestricaoService.removerBlackFlagImovel(objetoImovelCobranca, objetoContratoCobranca,
				getUsuarioLogado())) {
			context.addMessage(null,
					new FacesMessage(FacesMessage.SEVERITY_INFO, "Imovel removida da lista de Black Flag "
							+ this.objetoImovelCobranca.getNumeroMatricula() + " com sucesso!!!", ""));
			this.restricaoImovel = new ArrayList<>();
			listaRestricoesImovel();			
			PrimeFaces.current().ajax().update("form:Imovel");
			PrimeFaces.current().ajax().update("form:panelRestricao");
		}else
			context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_INFO,
					"Erro ao remvover imvóvel na lista de Black Flag " + this.objetoImovelCobranca.getNumeroMatricula(),
					""));

	}
	
	
	
	/**
	 * @param fileRecibo the fileRecibo to set
	 */
	public void setFileRecibo(StreamedContent fileRecibo) {
		this.fileRecibo = fileRecibo;
	}

	/**
	 * @return the reciboGerado
	 */
	public boolean isReciboGerado() {
		return reciboGerado;
	}

	/**
	 * @param reciboGerado the reciboGerado to set
	 */
	public void setReciboGerado(boolean reciboGerado) {
		this.reciboGerado = reciboGerado;
	}

	/**
	 * @return the lazyModel
	 */
	public LazyDataModel<ContratoCobranca> getLazyModel() {
		return lazyModel;
	}

	/**
	 * @param lazyModel the lazyModel to set
	 */
	public void setLazyModel(LazyDataModel<ContratoCobranca> lazyModel) {
		this.lazyModel = lazyModel;
	}

	/**
	 * @return the objetoContratoCobranca
	 */
	public ContratoCobranca getObjetoContratoCobranca() {
		return objetoContratoCobranca;
	}

	/**
	 * @param objetoContratoCobranca the objetoContratoCobranca to set
	 */
	public void setObjetoContratoCobranca(ContratoCobranca objetoContratoCobranca) {
		this.objetoContratoCobranca = objetoContratoCobranca;
	}

	public String getNumeroContratoObjetoContratoCobranca() {
		return numeroContratoObjetoContratoCobranca;
	}

	public void setNumeroContratoObjetoContratoCobranca(String numeroContratoObjetoContratoCobranca) {
		this.numeroContratoObjetoContratoCobranca = numeroContratoObjetoContratoCobranca;
	}

	/**
	 * @return the updateMode
	 */
	public boolean isUpdateMode() {
		return updateMode;
	}

	/**
	 * @param updateMode the updateMode to set
	 */
	public void setUpdateMode(boolean updateMode) {
		if (updateMode) {
			this.tituloPainel = "Editar";
		} else {
			this.tituloPainel = "Visualizar";
		}
		this.updateMode = updateMode;
	}

	/**
	 * @return the deleteMode
	 */
	public boolean isDeleteMode() {
		return deleteMode;
	}

	/**
	 * @param deleteMode the deleteMode to set
	 */
	public void setDeleteMode(boolean deleteMode) {
		if (deleteMode) {
			this.tituloPainel = "Excluir";
		} else if (this.updateMode) {
			this.tituloPainel = "Editar";
		} else if (this.baixarMode) {
			this.tituloPainel = "Baixar";
		} else {
			this.tituloPainel = "Visualizar";
		}
		this.deleteMode = deleteMode;
	}

	public boolean isBaixarMode() {
		return baixarMode;
	}

	public void setBaixarMode(boolean baixarMode) {
		if (baixarMode) {
			this.tituloPainel = "Baixar";
		} else if (this.updateMode) {
			this.tituloPainel = "Editar";
		} else if (this.deleteMode) {
			this.tituloPainel = "Excluir";
		} else {
			this.tituloPainel = "Visualizar";
		}

		this.baixarMode = baixarMode;
	}

	public PagadorRecebedor getPagadorRecebedorObjeto(long id) {
		PagadorRecebedorDao pagadorRecebedorDao = new PagadorRecebedorDao();

		return pagadorRecebedorDao.findById(id);
	}

	/**
	 * @return the tituloPainel
	 */
	public String getTituloPainel() {
		return tituloPainel;
	}

	/**
	 * @param tituloPainel the tituloPainel to set
	 */
	public void setTituloPainel(String tituloPainel) {
		this.tituloPainel = tituloPainel;
	}

	/**
	 * @return the selectedPagador
	 */
	public PagadorRecebedor getSelectedPagador() {
		return selectedPagador;
	}

	/**
	 * @param selectedPagador the selectedPagador to set
	 */
	public void setSelectedPagador(PagadorRecebedor selectedPagador) {
		if (selectedPagador != null && selectedPagador.getId() > 0) {
			this.selectedPagador = getPagadorRecebedorObjeto(selectedPagador.getId());
		} else {
			this.selectedPagador = selectedPagador;
		}
	}

	public PagadorRecebedor getSelectedPagadorGenerico() {
		return selectedPagadorGenerico;
	}

	public void setSelectedPagadorGenerico(PagadorRecebedor selectedPagadorGenerico) {
		if (!CommonsUtil.semValor(selectedPagadorGenerico) && !CommonsUtil.semValor(selectedPagadorGenerico.getId()))
			this.selectedPagadorGenerico = getPagadorRecebedorObjeto(selectedPagadorGenerico.getId());
		else
			this.selectedPagadorGenerico = null;
	}

	/**
	 * @return the listPagadores
	 */
	public List<PagadorRecebedor> getListPagadores() {
		return listPagadores;
	}

	/**
	 * @param listPagadores the listPagadores to set
	 */
	public void setListPagadores(List<PagadorRecebedor> listPagadores) {
		this.listPagadores = listPagadores;
	}

	/**
	 * @return the nomePagador
	 */
	public String getNomePagador() {
		return nomePagador;
	}

	/**
	 * @param nomePagador the nomePagador to set
	 */
	public void setNomePagador(String nomePagador) {
		this.nomePagador = nomePagador;
	}

	/**
	 * @return the idPagador
	 */
	public long getIdPagador() {
		return idPagador;
	}

	/**
	 * @param idPagador the idPagador to set
	 */
	public void setIdPagador(long idPagador) {
		this.idPagador = idPagador;
	}

	/**
	 * @return the selectedRecebedor
	 */
	public PagadorRecebedor getSelectedRecebedor() {
		return selectedRecebedor;
	}

	/**
	 * @param selectedRecebedor the selectedRecebedor to set
	 */
	public void setSelectedRecebedor(PagadorRecebedor selectedRecebedor) {
		this.selectedRecebedor = getPagadorRecebedorObjeto(selectedRecebedor.getId());
	}

	/**
	 * @return the listRecebedores
	 */
	public List<PagadorRecebedor> getListRecebedores() {
		return listRecebedores;
	}

	/**
	 * @return the ListResposavel listRecebedorPagador
	 */
	public List<PagadorRecebedor> getListRecebedorPagador() {
		return listPagadores;
	}

	/**
	 * @param listRecebedores the listRecebedores to set
	 */
	public void setListRecebedores(List<PagadorRecebedor> listRecebedores) {
		this.listRecebedores = listRecebedores;
	}

	/**
	 * @return the nomeRecebedor
	 */
	public String getNomeRecebedor() {
		return nomeRecebedor;
	}

	/**
	 * @param nomeRecebedor the nomeRecebedor to set
	 */
	public void setNomeRecebedor(String nomeRecebedor) {
		this.nomeRecebedor = nomeRecebedor;
	}

	/**
	 * @return the idRecebedor
	 */
	public long getIdRecebedor() {
		return idRecebedor;
	}

	/**
	 * @param idRecebedor the idRecebedor to set
	 */
	public void setIdRecebedor(long idRecebedor) {
		this.idRecebedor = idRecebedor;
	}

	/**
	 * @return the selectedResponsavel
	 */
	public Responsavel getSelectedResponsavel() {
		return selectedResponsavel;
	}

	/**
	 * @param selectedResponsavel the selectedResponsavel to set
	 */
	public void setSelectedResponsavel(Responsavel selectedResponsavel) {
		this.selectedResponsavel = selectedResponsavel;
	}

	/**
	 * @return the listResponsaveis
	 */
	public List<Responsavel> getListResponsaveis() {
		return listResponsaveis;
	}

	/**
	 * @param listResponsaveis the listResponsaveis to set
	 */
	public void setListResponsaveis(List<Responsavel> listResponsaveis) {
		this.listResponsaveis = listResponsaveis;
	}

	/**
	 * @return the nomeResponsavel
	 */
	public String getNomeResponsavel() {
		return nomeResponsavel;
	}

	/**
	 * @param nomeResponsavel the nomeResponsavel to set
	 */
	public void setNomeResponsavel(String nomeResponsavel) {
		this.nomeResponsavel = nomeResponsavel;
	}

	/**
	 * @return the idResponsavel
	 */
	public long getIdResponsavel() {
		return idResponsavel;
	}

	/**
	 * @param idResponsavel the idResponsavel to set
	 */
	public void setIdResponsavel(long idResponsavel) {
		this.idResponsavel = idResponsavel;
	}

	/**
	 * @return the selectedImovel
	 */
	public ImovelCobranca getSelectedImovel() {
		return selectedImovel;
	}

	/**
	 * @param selectedImovel the selectedImovel to set
	 */
	public void setSelectedImovel(ImovelCobranca selectedImovel) {
		this.selectedImovel = selectedImovel;
	}

	/**
	 * @return the listImoveis
	 */
	public List<ImovelCobranca> getListImoveis() {
		return listImoveis;
	}

	/**
	 * @param listImoveis the listImoveis to set
	 */
	public void setListImoveis(List<ImovelCobranca> listImoveis) {
		this.listImoveis = listImoveis;
	}

	/**
	 * @return the nomeImovel
	 */
	public String getNomeImovel() {
		return nomeImovel;
	}

	/**
	 * @param nomeImovel the nomeImovel to set
	 */
	public void setNomeImovel(String nomeImovel) {
		this.nomeImovel = nomeImovel;
	}

	/**
	 * @return the idImovel
	 */
	public long getIdImovel() {
		return idImovel;
	}

	/**
	 * @param idImovel the idImovel to set
	 */
	public void setIdImovel(long idImovel) {
		this.idImovel = idImovel;
	}

	/**
	 * @return the contratoGerado
	 */
	public boolean isContratoGerado() {
		return contratoGerado;
	}

	/**
	 * @param contratoGerado the contratoGerado to set
	 */
	public void setContratoGerado(boolean contratoGerado) {
		this.contratoGerado = contratoGerado;
	}

	/**
	 * @return the qtdeParcelas
	 */
	public String getQtdeParcelas() {
		return qtdeParcelas;
	}

	/**
	 * @param qtdeParcelas the qtdeParcelas to set
	 */
	public void setQtdeParcelas(String qtdeParcelas) {
		this.qtdeParcelas = qtdeParcelas;
	}

	/**
	 * @return the relDataContratoInicio
	 */
	public Date getRelDataContratoInicio() {
		return relDataContratoInicio;
	}

	/**
	 * @param relDataContratoInicio the relDataContratoInicio to set
	 */
	public void setRelDataContratoInicio(Date relDataContratoInicio) {
		this.relDataContratoInicio = relDataContratoInicio;
	}

	/**
	 * @return the relDataContratoFim
	 */
	public Date getRelDataContratoFim() {
		return relDataContratoFim;
	}

	/**
	 * @param relDataContratoFim the relDataContratoFim to set
	 */
	public void setRelDataContratoFim(Date relDataContratoFim) {
		this.relDataContratoFim = relDataContratoFim;
	}

	/**
	 * @return the relObjetoContratoCobranca
	 */
	public List<RelatorioFinanceiroCobranca> getRelObjetoContratoCobranca() {
		return relObjetoContratoCobranca;
	}

	/**
	 * @param relObjetoContratoCobranca the relObjetoContratoCobranca to set
	 */
	public void setRelObjetoContratoCobranca(List<RelatorioFinanceiroCobranca> relObjetoContratoCobranca) {
		this.relObjetoContratoCobranca = relObjetoContratoCobranca;
	}

	/**
	 * @return the relSelectedObjetoContratoCobranca
	 */
	public RelatorioFinanceiroCobranca getRelSelectedObjetoContratoCobranca() {
		return relSelectedObjetoContratoCobranca;
	}

	/**
	 * @param relSelectedObjetoContratoCobranca the
	 *                                          relSelectedObjetoContratoCobranca to
	 *                                          set
	 */
	public void setRelSelectedObjetoContratoCobranca(RelatorioFinanceiroCobranca relSelectedObjetoContratoCobranca) {
		this.relSelectedObjetoContratoCobranca = relSelectedObjetoContratoCobranca;
	}

	public RelatorioFinanceiroCobrancaResumo getRelatorioFinanceiroCobrancaResumo() {
		return relatorioFinanceiroCobrancaResumo;
	}

	public void setRelatorioFinanceiroCobrancaResumo(
			RelatorioFinanceiroCobrancaResumo relatorioFinanceiroCobrancaResumo) {
		this.relatorioFinanceiroCobrancaResumo = relatorioFinanceiroCobrancaResumo;
	}

	/**
	 * @return the origemTelaBaixar
	 */
	public String getOrigemTelaBaixar() {
		return origemTelaBaixar;
	}

	/**
	 * @param origemTelaBaixar the origemTelaBaixar to set
	 */
	public void setOrigemTelaBaixar(String origemTelaBaixar) {
		this.origemTelaBaixar = origemTelaBaixar;
	}

	/**
	 * @return the relIsRelAtraso
	 */
	public boolean isRelIsRelAtraso() {
		return relIsRelAtraso;
	}

	/**
	 * @param relIsRelAtraso the relIsRelAtraso to set
	 */
	public void setRelIsRelAtraso(boolean relIsRelAtraso) {
		this.relIsRelAtraso = relIsRelAtraso;
	}

	/**
	 * @return the selectedContratoCobrancaDetalhes
	 */
	public ContratoCobrancaDetalhes getSelectedContratoCobrancaDetalhes() {
		return selectedContratoCobrancaDetalhes;
	}

	/**
	 * @param selectedContratoCobrancaDetalhes the selectedContratoCobrancaDetalhes
	 *                                         to set
	 */
	public void setSelectedContratoCobrancaDetalhes(ContratoCobrancaDetalhes selectedContratoCobrancaDetalhes) {
		this.selectedContratoCobrancaDetalhes = selectedContratoCobrancaDetalhes;
	}

	/**
	 * @return the listContratoCobrancaFavorecidos
	 */
	public List<ContratoCobrancaFavorecidos> getListContratoCobrancaFavorecidos() {
		return listContratoCobrancaFavorecidos;
	}

	/**
	 * @param listContratoCobrancaFavorecidos the listContratoCobrancaFavorecidos to
	 *                                        set
	 */
	public void setListContratoCobrancaFavorecidos(List<ContratoCobrancaFavorecidos> listContratoCobrancaFavorecidos) {
		this.listContratoCobrancaFavorecidos = listContratoCobrancaFavorecidos;
	}

	/**
	 * @return the tipoPessoaIsFisica
	 */
	public boolean isTipoPessoaIsFisica() {
		return tipoPessoaIsFisica;
	}

	/**
	 * @param tipoPessoaIsFisica the tipoPessoaIsFisica to set
	 */
	public void setTipoPessoaIsFisica(boolean tipoPessoaIsFisica) {
		this.tipoPessoaIsFisica = tipoPessoaIsFisica;
	}

	public boolean validaCPF(FacesContext facesContext, UIComponent uiComponent, Object object) {
		return ValidaCPF.isCPF(object.toString());
	}

	public boolean validaCPFPopulaCC(FacesContext facesContext, UIComponent uiComponent, Object object) {

		boolean retorno = ValidaCPF.isCPF(object.toString());

		if (retorno) {
			this.objetoPagadorRecebedor.setCpfCC(object.toString());
		}

		return retorno;
	}

	public boolean validaCNPJ(FacesContext facesContext, UIComponent uiComponent, Object object) {
		return ValidaCNPJ.isCNPJ(object.toString());
	}

	public void selectedTipoPessoa() {
		if (this.tipoPessoaIsFisica) {
			this.listContratoCobrancaFavorecidos.get(0).setCnpj(null);
			this.listContratoCobrancaFavorecidos.get(0).setNome(null);
		} else {
			this.listContratoCobrancaFavorecidos.get(0).setCpf(null);
			this.listContratoCobrancaFavorecidos.get(0).setNome(null);
		}
	}

	public void selectedTipoPessoaPublico() {
		if (this.tipoPessoaIsFisica) {
			this.objetoPagadorRecebedor.setCnpj(null);
			this.objetoPagadorRecebedor.setNome(null);

			this.objetoPagadorRecebedor.setCnpjCC(null);
			this.objetoPagadorRecebedor.setNomeCC(null);
		} else {
			this.objetoPagadorRecebedor.setCpf(null);
			this.objetoPagadorRecebedor.setRg(null);
			this.objetoPagadorRecebedor.setNome(null);

			this.objetoPagadorRecebedor.setCpfCC(null);
			this.objetoPagadorRecebedor.setNomeCC(null);
		}

		this.tipoPessoaIsFisicaCC = this.tipoPessoaIsFisica;
	}

	public void selectedTipoPessoaCC() {
		if (this.tipoPessoaIsFisica) {
			this.objetoPagadorRecebedor.setCnpjCC(null);
			this.objetoPagadorRecebedor.setNomeCC(null);
		} else {
			this.objetoPagadorRecebedor.setCpfCC(null);
			this.objetoPagadorRecebedor.setNomeCC(null);
		}
	}

	/**
	 * @return the vlrRepasse
	 */
	public BigDecimal getVlrRepasse() {
		return vlrRepasse;
	}

	/**
	 * @param vlrRepasse the vlrRepasse to set
	 */
	public void setVlrRepasse(BigDecimal vlrRepasse) {
		this.vlrRepasse = vlrRepasse;
	}

	/**
	 * @return the vlrRetencao
	 */
	public BigDecimal getVlrRetencao() {
		return vlrRetencao;
	}

	/**
	 * @param vlrRetencao the vlrRetencao to set
	 */
	public void setVlrRetencao(BigDecimal vlrRetencao) {
		this.vlrRetencao = vlrRetencao;
	}

	/**
	 * @return the vlrRepasseFinal
	 */
	public BigDecimal getVlrRepasseFinal() {
		return vlrRepasseFinal;
	}

	/**
	 * @param vlrRepasseFinal the vlrRepasseFinal to set
	 */
	public void setVlrRepasseFinal(BigDecimal vlrRepasseFinal) {
		this.vlrRepasseFinal = vlrRepasseFinal;
	}

	/**
	 * @return the vlrRetencaoFinal
	 */
	public BigDecimal getVlrRetencaoFinal() {
		return vlrRetencaoFinal;
	}

	/**
	 * @param vlrRetencaoFinal the vlrRetencaoFinal to set
	 */
	public void setVlrRetencaoFinal(BigDecimal vlrRetencaoFinal) {
		this.vlrRetencaoFinal = vlrRetencaoFinal;
	}

	/**
	 * @return the vlrParcelaFinal
	 */
	public BigDecimal getVlrParcelaFinal() {
		return vlrParcelaFinal;
	}

	/**
	 * @param vlrParcelaFinal the vlrParcelaFinal to set
	 */
	public void setVlrParcelaFinal(BigDecimal vlrParcelaFinal) {
		this.vlrParcelaFinal = vlrParcelaFinal;
	}

	/**
	 * @return the file
	 */
	public StreamedContent getFile() {
		String caminho = this.pathContrato + this.nomeContrato;
		String arquivo = this.nomeContrato;
		FileInputStream stream = null;
		try {
			stream = new FileInputStream(caminho);
		} catch (FileNotFoundException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
		file = new DefaultStreamedContent(stream, caminho, arquivo);

		return file;
	}

	/**
	 * @param file the file to set
	 */
	public void setFile(StreamedContent file) {
		this.file = file;
	}

	/**
	 * @return the vlrComissao
	 */
	public BigDecimal getVlrComissao() {
		return vlrComissao;
	}

	/**
	 * @param vlrComissao the vlrComissao to set
	 */
	public void setVlrComissao(BigDecimal vlrComissao) {
		this.vlrComissao = vlrComissao;
	}

	/**
	 * @return the vlrComissaoFinal
	 */
	public BigDecimal getVlrComissaoFinal() {
		return vlrComissaoFinal;
	}

	/**
	 * @param vlrComissaoFinal the vlrComissaoFinal to set
	 */
	public void setVlrComissaoFinal(BigDecimal vlrComissaoFinal) {
		this.vlrComissaoFinal = vlrComissaoFinal;
	}

	/**
	 * @return the selectedListContratoCobrancaDetalhes
	 */
	public List<ContratoCobrancaDetalhes> getSelectedListContratoCobrancaDetalhes() {
		return selectedListContratoCobrancaDetalhes;
	}

	/**
	 * @param selectedListContratoCobrancaDetalhes the
	 *                                             selectedListContratoCobrancaDetalhes
	 *                                             to set
	 */
	public void setSelectedListContratoCobrancaDetalhes(
			List<ContratoCobrancaDetalhes> selectedListContratoCobrancaDetalhes) {
		this.selectedListContratoCobrancaDetalhes = selectedListContratoCobrancaDetalhes;
	}

	/**
	 * @return the renderRecebedor2
	 */
	public boolean isRenderRecebedor2() {
		return renderRecebedor2;
	}

	/**
	 * @param renderRecebedor2 the renderRecebedor2 to set
	 */
	public void setRenderRecebedor2(boolean renderRecebedor2) {
		this.renderRecebedor2 = renderRecebedor2;
	}

	/**
	 * @return the renderRecebedor3
	 */
	public boolean isRenderRecebedor3() {
		return renderRecebedor3;
	}

	/**
	 * @param renderRecebedor3 the renderRecebedor3 to set
	 */
	public void setRenderRecebedor3(boolean renderRecebedor3) {
		this.renderRecebedor3 = renderRecebedor3;
	}

	/**
	 * @return the renderRecebedor4
	 */
	public boolean isRenderRecebedor4() {
		return renderRecebedor4;
	}

	/**
	 * @param renderRecebedor4 the renderRecebedor4 to set
	 */
	public void setRenderRecebedor4(boolean renderRecebedor4) {
		this.renderRecebedor4 = renderRecebedor4;
	}

	/**
	 * @return the renderRecebedor5
	 */
	public boolean isRenderRecebedor5() {
		return renderRecebedor5;
	}

	/**
	 * @param renderRecebedor5 the renderRecebedor5 to set
	 */
	public void setRenderRecebedor5(boolean renderRecebedor5) {
		this.renderRecebedor5 = renderRecebedor5;
	}

	/**
	 * @return the renderRecebedor6
	 */
	public boolean isRenderRecebedor6() {
		return renderRecebedor6;
	}

	/**
	 * @param renderRecebedor6 the renderRecebedor6 to set
	 */
	public void setRenderRecebedor6(boolean renderRecebedor6) {
		this.renderRecebedor6 = renderRecebedor6;
	}

	/**
	 * @return the renderRecebedor7
	 */
	public boolean isRenderRecebedor7() {
		return renderRecebedor7;
	}

	/**
	 * @param renderRecebedor7 the renderRecebedor7 to set
	 */
	public void setRenderRecebedor7(boolean renderRecebedor7) {
		this.renderRecebedor7 = renderRecebedor7;
	}

	/**
	 * @return the renderRecebedor8
	 */
	public boolean isRenderRecebedor8() {
		return renderRecebedor8;
	}

	/**
	 * @param renderRecebedor8 the renderRecebedor8 to set
	 */
	public void setRenderRecebedor8(boolean renderRecebedor8) {
		this.renderRecebedor8 = renderRecebedor8;
	}

	/**
	 * @return the renderRecebedor9
	 */
	public boolean isRenderRecebedor9() {
		return renderRecebedor9;
	}

	/**
	 * @param renderRecebedor9 the renderRecebedor9 to set
	 */
	public void setRenderRecebedor9(boolean renderRecebedor9) {
		this.renderRecebedor9 = renderRecebedor9;
	}

	/**
	 * @return the renderRecebedor10
	 */
	public boolean isRenderRecebedor10() {
		return renderRecebedor10;
	}

	/**
	 * @param renderRecebedor10 the renderRecebedor10 to set
	 */
	public void setRenderRecebedor10(boolean renderRecebedor10) {
		this.renderRecebedor10 = renderRecebedor10;
	}

	/**
	 * @return the nomeRecebedor2
	 */
	public String getNomeRecebedor2() {
		return nomeRecebedor2;
	}

	/**
	 * @param nomeRecebedor2 the nomeRecebedor2 to set
	 */
	public void setNomeRecebedor2(String nomeRecebedor2) {
		this.nomeRecebedor2 = nomeRecebedor2;
	}

	/**
	 * @return the idRecebedor2
	 */
	public long getIdRecebedor2() {
		return idRecebedor2;
	}

	/**
	 * @param idRecebedor2 the idRecebedor2 to set
	 */
	public void setIdRecebedor2(long idRecebedor2) {
		this.idRecebedor2 = idRecebedor2;
	}

	/**
	 * @return the nomeRecebedor3
	 */
	public String getNomeRecebedor3() {
		return nomeRecebedor3;
	}

	/**
	 * @param nomeRecebedor3 the nomeRecebedor3 to set
	 */
	public void setNomeRecebedor3(String nomeRecebedor3) {
		this.nomeRecebedor3 = nomeRecebedor3;
	}

	/**
	 * @return the idRecebedor3
	 */
	public long getIdRecebedor3() {
		return idRecebedor3;
	}

	/**
	 * @param idRecebedor3 the idRecebedor3 to set
	 */
	public void setIdRecebedor3(long idRecebedor3) {
		this.idRecebedor3 = idRecebedor3;
	}

	/**
	 * @return the nomeRecebedor4
	 */
	public String getNomeRecebedor4() {
		return nomeRecebedor4;
	}

	/**
	 * @param nomeRecebedor4 the nomeRecebedor4 to set
	 */
	public void setNomeRecebedor4(String nomeRecebedor4) {
		this.nomeRecebedor4 = nomeRecebedor4;
	}

	/**
	 * @return the idRecebedor4
	 */
	public long getIdRecebedor4() {
		return idRecebedor4;
	}

	/**
	 * @param idRecebedor4 the idRecebedor4 to set
	 */
	public void setIdRecebedor4(long idRecebedor4) {
		this.idRecebedor4 = idRecebedor4;
	}

	/**
	 * @return the nomeRecebedor5
	 */
	public String getNomeRecebedor5() {
		return nomeRecebedor5;
	}

	/**
	 * @param nomeRecebedor5 the nomeRecebedor5 to set
	 */
	public void setNomeRecebedor5(String nomeRecebedor5) {
		this.nomeRecebedor5 = nomeRecebedor5;
	}

	/**
	 * @return the idRecebedor5
	 */
	public long getIdRecebedor5() {
		return idRecebedor5;
	}

	/**
	 * @param idRecebedor5 the idRecebedor5 to set
	 */
	public void setIdRecebedor5(long idRecebedor5) {
		this.idRecebedor5 = idRecebedor5;
	}

	/**
	 * @return the nomeRecebedor6
	 */
	public String getNomeRecebedor6() {
		return nomeRecebedor6;
	}

	/**
	 * @param nomeRecebedor6 the nomeRecebedor6 to set
	 */
	public void setNomeRecebedor6(String nomeRecebedor6) {
		this.nomeRecebedor6 = nomeRecebedor6;
	}

	/**
	 * @return the idRecebedor6
	 */
	public long getIdRecebedor6() {
		return idRecebedor6;
	}

	/**
	 * @param idRecebedor6 the idRecebedor6 to set
	 */
	public void setIdRecebedor6(long idRecebedor6) {
		this.idRecebedor6 = idRecebedor6;
	}

	/**
	 * @return the nomeRecebedor7
	 */
	public String getNomeRecebedor7() {
		return nomeRecebedor7;
	}

	/**
	 * @param nomeRecebedor7 the nomeRecebedor7 to set
	 */
	public void setNomeRecebedor7(String nomeRecebedor7) {
		this.nomeRecebedor7 = nomeRecebedor7;
	}

	/**
	 * @return the idRecebedor7
	 */
	public long getIdRecebedor7() {
		return idRecebedor7;
	}

	/**
	 * @param idRecebedor7 the idRecebedor7 to set
	 */
	public void setIdRecebedor7(long idRecebedor7) {
		this.idRecebedor7 = idRecebedor7;
	}

	/**
	 * @return the nomeRecebedor8
	 */
	public String getNomeRecebedor8() {
		return nomeRecebedor8;
	}

	/**
	 * @param nomeRecebedor8 the nomeRecebedor8 to set
	 */
	public void setNomeRecebedor8(String nomeRecebedor8) {
		this.nomeRecebedor8 = nomeRecebedor8;
	}

	/**
	 * @return the idRecebedor8
	 */
	public long getIdRecebedor8() {
		return idRecebedor8;
	}

	/**
	 * @param idRecebedor8 the idRecebedor8 to set
	 */
	public void setIdRecebedor8(long idRecebedor8) {
		this.idRecebedor8 = idRecebedor8;
	}

	/**
	 * @return the nomeRecebedor9
	 */
	public String getNomeRecebedor9() {
		return nomeRecebedor9;
	}

	/**
	 * @param nomeRecebedor9 the nomeRecebedor9 to set
	 */
	public void setNomeRecebedor9(String nomeRecebedor9) {
		this.nomeRecebedor9 = nomeRecebedor9;
	}

	/**
	 * @return the idRecebedor9
	 */
	public long getIdRecebedor9() {
		return idRecebedor9;
	}

	/**
	 * @param idRecebedor9 the idRecebedor9 to set
	 */
	public void setIdRecebedor9(long idRecebedor9) {
		this.idRecebedor9 = idRecebedor9;
	}

	/**
	 * @return the nomeRecebedor10
	 */
	public String getNomeRecebedor10() {
		return nomeRecebedor10;
	}

	/**
	 * @param nomeRecebedor10 the nomeRecebedor10 to set
	 */
	public void setNomeRecebedor10(String nomeRecebedor10) {
		this.nomeRecebedor10 = nomeRecebedor10;
	}

	/**
	 * @return the idRecebedor10
	 */
	public long getIdRecebedor10() {
		return idRecebedor10;
	}

	/**
	 * @param idRecebedor10 the idRecebedor10 to set
	 */
	public void setIdRecebedor10(long idRecebedor10) {
		this.idRecebedor10 = idRecebedor10;
	}

	/**
	 * @return the nomeFavorecido
	 */
	public String getNomeFavorecido() {
		return nomeFavorecido;
	}

	/**
	 * @param nomeFavorecido the nomeFavorecido to set
	 */
	public void setNomeFavorecido(String nomeFavorecido) {
		this.nomeFavorecido = nomeFavorecido;
	}

	/**
	 * @return the nomeContrato
	 */
	public String getNomeContrato() {
		return nomeContrato;
	}

	/**
	 * @param nomeContrato the nomeContrato to set
	 */
	public void setNomeContrato(String nomeContrato) {
		this.nomeContrato = nomeContrato;
	}

	/**
	 * @return the selectedRecebedor2
	 */
	public PagadorRecebedor getSelectedRecebedor2() {
		return selectedRecebedor2;
	}

	/**
	 * @param selectedRecebedor2 the selectedRecebedor2 to set
	 */
	public void setSelectedRecebedor2(PagadorRecebedor selectedRecebedor2) {
		this.selectedRecebedor2 = getPagadorRecebedorObjeto(selectedRecebedor2.getId());
	}

	/**
	 * @return the selectedRecebedor3
	 */
	public PagadorRecebedor getSelectedRecebedor3() {
		return selectedRecebedor3;
	}

	/**
	 * @param selectedRecebedor3 the selectedRecebedor3 to set
	 */
	public void setSelectedRecebedor3(PagadorRecebedor selectedRecebedor3) {
		this.selectedRecebedor3 = getPagadorRecebedorObjeto(selectedRecebedor3.getId());
	}

	/**
	 * @return the selectedRecebedor4
	 */
	public PagadorRecebedor getSelectedRecebedor4() {
		return selectedRecebedor4;
	}

	/**
	 * @param selectedRecebedor4 the selectedRecebedor4 to set
	 */
	public void setSelectedRecebedor4(PagadorRecebedor selectedRecebedor4) {
		this.selectedRecebedor4 = getPagadorRecebedorObjeto(selectedRecebedor4.getId());
	}

	/**
	 * @return the selectedRecebedor5
	 */
	public PagadorRecebedor getSelectedRecebedor5() {
		return selectedRecebedor5;
	}

	/**
	 * @param selectedRecebedor5 the selectedRecebedor5 to set
	 */
	public void setSelectedRecebedor5(PagadorRecebedor selectedRecebedor5) {
		this.selectedRecebedor5 = getPagadorRecebedorObjeto(selectedRecebedor5.getId());
	}

	/**
	 * @return the selectedRecebedor6
	 */
	public PagadorRecebedor getSelectedRecebedor6() {
		return selectedRecebedor6;
	}

	/**
	 * @param selectedRecebedor6 the selectedRecebedor6 to set
	 */
	public void setSelectedRecebedor6(PagadorRecebedor selectedRecebedor6) {
		this.selectedRecebedor6 = getPagadorRecebedorObjeto(selectedRecebedor6.getId());
	}

	/**
	 * @return the selectedRecebedor7
	 */
	public PagadorRecebedor getSelectedRecebedor7() {
		return selectedRecebedor7;
	}

	/**
	 * @param selectedRecebedor7 the selectedRecebedor7 to set
	 */
	public void setSelectedRecebedor7(PagadorRecebedor selectedRecebedor7) {
		this.selectedRecebedor7 = getPagadorRecebedorObjeto(selectedRecebedor7.getId());
	}

	/**
	 * @return the selectedRecebedor8
	 */
	public PagadorRecebedor getSelectedRecebedor8() {
		return selectedRecebedor8;
	}

	/**
	 * @param selectedRecebedor8 the selectedRecebedor8 to set
	 */
	public void setSelectedRecebedor8(PagadorRecebedor selectedRecebedor8) {
		this.selectedRecebedor8 = getPagadorRecebedorObjeto(selectedRecebedor8.getId());
	}

	/**
	 * @return the selectedRecebedor9
	 */
	public PagadorRecebedor getSelectedRecebedor9() {
		return selectedRecebedor9;
	}

	/**
	 * @param selectedRecebedor9 the selectedRecebedor9 to set
	 */
	public void setSelectedRecebedor9(PagadorRecebedor selectedRecebedor9) {
		this.selectedRecebedor9 = getPagadorRecebedorObjeto(selectedRecebedor9.getId());
	}

	/**
	 * @return the selectedRecebedor10
	 */
	public PagadorRecebedor getSelectedRecebedor10() {
		return selectedRecebedor10;
	}

	/**
	 * @param selectedRecebedor10 the selectedRecebedor10 to set
	 */
	public void setSelectedRecebedor10(PagadorRecebedor selectedRecebedor10) {
		this.selectedRecebedor10 = getPagadorRecebedorObjeto(selectedRecebedor10.getId());
	}

	/**
	 * @return the relIsCompleto
	 */
	public boolean isRelIsCompleto() {
		return relIsCompleto;
	}

	/**
	 * @param relIsCompleto the relIsCompleto to set
	 */
	public void setRelIsCompleto(boolean relIsCompleto) {
		this.relIsCompleto = relIsCompleto;
	}

	/**
	 * @return the numContrato
	 */
	public String getNumContrato() {
		return numContrato;
	}

	/**
	 * @param numContrato the numContrato to set
	 */
	public void setNumContrato(String numContrato) {
		this.numContrato = numContrato;
	}

	/**
	 * @return the tipoFiltros
	 */
	public boolean isTipoFiltros() {
		return tipoFiltros;
	}

	/**
	 * @param tipoFiltros the tipoFiltros to set
	 */
	public void setTipoFiltros(boolean tipoFiltros) {
		this.tipoFiltros = tipoFiltros;
	}

	public LoginBean getLoginBean() {
		return loginBean;
	}

	public void setLoginBean(LoginBean loginBean) {
		this.loginBean = loginBean;
	}

	/**
	 * @return the exibeSomenteFavorecidosFiltrados
	 */
	public String getExibeSomenteFavorecidosFiltrados() {
		return exibeSomenteFavorecidosFiltrados;
	}

	/**
	 * @param exibeSomenteFavorecidosFiltrados the exibeSomenteFavorecidosFiltrados
	 *                                         to set
	 */
	public void setExibeSomenteFavorecidosFiltrados(String exibeSomenteFavorecidosFiltrados) {
		this.exibeSomenteFavorecidosFiltrados = exibeSomenteFavorecidosFiltrados;
	}

	/**
	 * @return the filtroRelBaixado
	 */
	public String getFiltroRelBaixado() {
		return filtroRelBaixado;
	}

	/**
	 * @param filtroRelBaixado the filtroRelBaixado to set
	 */
	public void setFiltroRelBaixado(String filtroRelBaixado) {
		this.filtroRelBaixado = filtroRelBaixado;
	}

	/**
	 * @return the contratosPendentes
	 */
	public Collection<ContratoCobranca> getContratosPendentes() {
		return contratosPendentes;
	}

	/**
	 * @param contratosPendentes the contratosPendentes to set
	 */
	public void setContratosPendentes(Collection<ContratoCobranca> contratosPendentes) {
		this.contratosPendentes = contratosPendentes;
	}

	/**
	 * @return the codigoResponsavel
	 */
	public String getCodigoResponsavel() {
		return codigoResponsavel;
	}

	/**
	 * @param codigoResponsavel the codigoResponsavel to set
	 */
	public void setCodigoResponsavel(String codigoResponsavel) {
		this.codigoResponsavel = codigoResponsavel;
	}

	/**
	 * @return the pagadorRecebedorMB
	 */
	public PagadorRecebedorMB getPagadorRecebedorMB() {
		return pagadorRecebedorMB;
	}

	/**
	 * @param pagadorRecebedorMB the pagadorRecebedorMB to set
	 */
	public void setPagadorRecebedorMB(PagadorRecebedorMB pagadorRecebedorMB) {
		this.pagadorRecebedorMB = pagadorRecebedorMB;
	}

	/**
	 * @return the imovelCobrancaMB
	 */
	public ImovelCobrancaMB getImovelCobrancaMB() {
		return imovelCobrancaMB;
	}

	/**
	 * @param imovelCobrancaMB the imovelCobrancaMB to set
	 */
	public void setImovelCobrancaMB(ImovelCobrancaMB imovelCobrancaMB) {
		this.imovelCobrancaMB = imovelCobrancaMB;
	}

	/**
	 * @return the objetoImovelCobranca
	 */
	public ImovelCobranca getObjetoImovelCobranca() {
		return objetoImovelCobranca;
	}

	/**
	 * @param objetoImovelCobranca the objetoImovelCobranca to set
	 */
	public void setObjetoImovelCobranca(ImovelCobranca objetoImovelCobranca) {
		this.objetoImovelCobranca = objetoImovelCobranca;
	}

	public ImovelEstoque getObjetoImovelEstoque() {
		return objetoImovelEstoque;
	}

	public void setObjetoImovelEstoque(ImovelEstoque objetoImovelEstoque) {
		this.objetoImovelEstoque = objetoImovelEstoque;
	}

	/**
	 * @return the objetoPagadorRecebedor
	 */
	public PagadorRecebedor getObjetoPagadorRecebedor() {
		return objetoPagadorRecebedor;
	}

	/**
	 * @param objetoPagadorRecebedor the objetoPagadorRecebedor to set
	 */
	public void setObjetoPagadorRecebedor(PagadorRecebedor objetoPagadorRecebedor) {
		this.objetoPagadorRecebedor = objetoPagadorRecebedor;
	}

	/**
	 * @return the vlrTotal
	 */
	public String getVlrTotal() {
		return vlrTotal;
	}

	/**
	 * @param vlrTotal the vlrTotal to set
	 */
	public void setVlrTotal(String vlrTotal) {
		this.vlrTotal = vlrTotal;
	}

	/**
	 * @return the vlrParcelas
	 */
	public String getVlrParcelas() {
		return vlrParcelas;
	}

	/**
	 * @param vlrParcelas the vlrParcelas to set
	 */
	public void setVlrParcelas(String vlrParcelas) {
		this.vlrParcelas = vlrParcelas;
	}

	/**
	 * @return the grupoFavorecidos
	 */
	public boolean isGrupoFavorecidos() {
		return grupoFavorecidos;
	}

	/**
	 * @param grupoFavorecidos the grupoFavorecidos to set
	 */
	public void setGrupoFavorecidos(boolean grupoFavorecidos) {
		this.grupoFavorecidos = grupoFavorecidos;
	}

	/**
	 * @return the rowEditNewDate
	 */
	public Date getRowEditNewDate() {
		return rowEditNewDate;
	}

	/**
	 * @param rowEditNewDate the rowEditNewDate to set
	 */
	public void setRowEditNewDate(Date rowEditNewDate) {
		this.rowEditNewDate = rowEditNewDate;
	}

	/**
	 * @return the bpContratoCobrancaDetalhes
	 */
	public ContratoCobrancaDetalhes getBpContratoCobrancaDetalhes() {
		return bpContratoCobrancaDetalhes;
	}

	/**
	 * @param bpContratoCobrancaDetalhes the bpContratoCobrancaDetalhes to set
	 */
	public void setBpContratoCobrancaDetalhes(ContratoCobrancaDetalhes bpContratoCobrancaDetalhes) {
		this.bpContratoCobrancaDetalhes = bpContratoCobrancaDetalhes;
	}

	/**
	 * @return the vlrParcelaAtualizada
	 */
	public String getVlrParcelaAtualizada() {
		return vlrParcelaAtualizada;
	}

	/**
	 * @param vlrParcelaAtualizada the vlrParcelaAtualizada to set
	 */
	public void setVlrParcelaAtualizada(String vlrParcelaAtualizada) {
		this.vlrParcelaAtualizada = vlrParcelaAtualizada;
	}

	/**
	 * @return the vlrRecebido
	 */
	public BigDecimal getVlrRecebido() {
		return vlrRecebido;
	}

	/**
	 * @param vlrRecebido the vlrRecebido to set
	 */
	public void setVlrRecebido(BigDecimal vlrRecebido) {
		this.vlrRecebido = vlrRecebido;
	}

	/**
	 * @return the vlrParcelaNew
	 */
	public BigDecimal getVlrParcelaNew() {
		return vlrParcelaNew;
	}

	/**
	 * @param vlrParcelaNew the vlrParcelaNew to set
	 */
	public void setVlrParcelaNew(BigDecimal vlrParcelaNew) {
		this.vlrParcelaNew = vlrParcelaNew;
	}

	/**
	 * @return the vlrParcelaAtualizadaNew
	 */
	public BigDecimal getVlrParcelaAtualizadaNew() {
		return vlrParcelaAtualizadaNew;
	}

	/**
	 * @param vlrParcelaAtualizadaNew the vlrParcelaAtualizadaNew to set
	 */
	public void setVlrParcelaAtualizadaNew(BigDecimal vlrParcelaAtualizadaNew) {
		this.vlrParcelaAtualizadaNew = vlrParcelaAtualizadaNew;
	}

	/**
	 * @return the selectedGrupoFavorecido
	 */
	public GruposFavorecidos getSelectedGrupoFavorecido() {
		return selectedGrupoFavorecido;
	}

	/**
	 * @param selectedGrupoFavorecido the selectedGrupoFavorecido to set
	 */
	public void setSelectedGrupoFavorecido(GruposFavorecidos selectedGrupoFavorecido) {
		this.selectedGrupoFavorecido = selectedGrupoFavorecido;
	}

	/**
	 * @return the listGrupoFavorecido
	 */
	public List<GruposFavorecidos> getListGrupoFavorecido() {
		return listGrupoFavorecido;
	}

	/**
	 * @param listGrupoFavorecido the listGrupoFavorecido to set
	 */
	public void setListGrupoFavorecido(List<GruposFavorecidos> listGrupoFavorecido) {
		this.listGrupoFavorecido = listGrupoFavorecido;
	}

	/**
	 * @return the nomeGrupoFavorecido
	 */
	public String getNomeGrupoFavorecido() {
		return nomeGrupoFavorecido;
	}

	/**
	 * @param nomeGrupoFavorecido the nomeGrupoFavorecido to set
	 */
	public void setNomeGrupoFavorecido(String nomeGrupoFavorecido) {
		this.nomeGrupoFavorecido = nomeGrupoFavorecido;
	}

	/**
	 * @return the idGrupoFavorecido
	 */
	public long getIdGrupoFavorecido() {
		return idGrupoFavorecido;
	}

	/**
	 * @param idGrupoFavorecido the idGrupoFavorecido to set
	 */
	public void setIdGrupoFavorecido(long idGrupoFavorecido) {
		this.idGrupoFavorecido = idGrupoFavorecido;
	}

	/**
	 * @return the relIsParcial
	 */
	public boolean isRelIsParcial() {
		return relIsParcial;
	}

	/**
	 * @param relIsParcial the relIsParcial to set
	 */
	public void setRelIsParcial(boolean relIsParcial) {
		this.relIsParcial = relIsParcial;
	}

	/**
	 * @return the relParcial
	 */
	public String getRelParcial() {
		return relParcial;
	}

	/**
	 * @param relParcial the relParcial to set
	 */
	public void setRelParcial(String relParcial) {
		this.relParcial = relParcial;
	}

	/**
	 * @return the geraBoletoInclusaoContrato
	 */
	public boolean isGeraBoletoInclusaoContrato() {
		return geraBoletoInclusaoContrato;
	}

	/**
	 * @param geraBoletoInclusaoContrato the geraBoletoInclusaoContrato to set
	 */
	public void setGeraBoletoInclusaoContrato(boolean geraBoletoInclusaoContrato) {
		this.geraBoletoInclusaoContrato = geraBoletoInclusaoContrato;
	}

	/**
	 * @return the fileBoleto
	 */
	public StreamedContent getFileBoleto() {
		return fileBoleto;
	}

	/**
	 * @param fileBoleto the fileBoleto to set
	 */
	public void setFileBoleto(StreamedContent fileBoleto) {
		this.fileBoleto = fileBoleto;
	}

	/**
	 * @return the dataVencimentoBoleto
	 */
	public Date getDataVencimentoBoleto() {
		if (dataVencimentoBoleto == null) {
			this.dataVencimentoBoleto = getDataHoje();
		}
		return dataVencimentoBoleto;
	}

	/**
	 * @param dataVencimentoBoleto the dataVencimentoBoleto to set
	 */
	public void setDataVencimentoBoleto(Date dataVencimentoBoleto) {
		this.dataVencimentoBoleto = dataVencimentoBoleto;
	}

	/**
	 * @return the valorBoleto
	 */
	public BigDecimal getValorBoleto() {
		return valorBoleto;
	}

	/**
	 * @param valorBoleto the valorBoleto to set
	 */
	public void setValorBoleto(BigDecimal valorBoleto) {
		this.valorBoleto = valorBoleto;
	}

	/**
	 * @return the observacao
	 */
	public String getObservacao() {
		return observacao;
	}

	/**
	 * @return the filtrarDataVencimento
	 */
	public String getFiltrarDataVencimento() {
		return filtrarDataVencimento;
	}

	/**
	 * @param filtrarDataVencimento the filtrarDataVencimento to set
	 */
	public void setFiltrarDataVencimento(String filtrarDataVencimento) {
		this.filtrarDataVencimento = filtrarDataVencimento;
	}

	/**
	 * @param observacao the observacao to set
	 */
	public void setObservacao(String observacao) {
		this.observacao = observacao;
	}

	/**
	 * @return the txZero
	 */
	public boolean isTxZero() {
		return txZero;
	}

	/**
	 * @param txZero the txZero to set
	 */
	public void setTxZero(boolean txZero) {
		this.txZero = txZero;
	}

	/***************************************
	 * Tratamento de Upload de Arquivos
	 **************************************/

	// Lista os arquivos contidos no diretório
	Collection<FileUploaded> files = new ArrayList<FileUploaded>();
	// armazena arquivo selecionado a ser excluido
	FileUploaded selectedFile = new FileUploaded();
	List<FileUploaded> deletefiles = new ArrayList<FileUploaded>();
	StreamedContent downloadFile;
	StreamedContent downloadAllFiles;

	StreamedContent downloadComprovanteStarkBank;
	public boolean comprovanteStarkBankGerado;

	Collection<FileUploaded> filesInterno = new ArrayList<FileUploaded>();
	Collection<FileUploaded> filesFaltante = new ArrayList<FileUploaded>();
	Collection<FileUploaded> filesJuridico = new ArrayList<FileUploaded>();
	Collection<FileUploaded> filesComite = new ArrayList<FileUploaded>();
	Collection<FileUploaded> filesPagar = new ArrayList<FileUploaded>();
	Collection<FileUploaded> filesCci = new ArrayList<FileUploaded>();

	List<FileUploaded> deletefilesInterno = new ArrayList<FileUploaded>();
	List<FileUploaded> deletefilesFaltante = new ArrayList<FileUploaded>();
	List<FileUploaded> deletefilesJuridico = new ArrayList<FileUploaded>();
	List<FileUploaded> deletefilesComite = new ArrayList<FileUploaded>();
	List<FileUploaded> deletefilesPagar = new ArrayList<FileUploaded>();
	List<FileUploaded> deletefilesCci = new ArrayList<FileUploaded>();
	List<FileUploaded> deleteFilesPagar = new ArrayList<FileUploaded>();
	List<FileUploaded> deleteFilesContas = new ArrayList<FileUploaded>();

	String contratoDocumentos = "";

	byte[] arquivos = null;
	private List<byte[]> bytes = new ArrayList<byte[]>();

	StreamedContent downloadAllFilesInterno;

	public void handleFileUpload(FileUploadEvent event) throws IOException {
		FacesContext context = FacesContext.getCurrentInstance();

		// cria o arquivo
		if (event.getFile().getFileName().endsWith(".zip")) {
			context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR,
					"Contrato Cobrança: não é possível anexar .zip", " não é possível anexar .zip"));
		} else {
			byte[] conteudo = event.getFile().getContents();
			fileService.salvarDocumento(conteudo, this.objetoContratoCobranca.getNumeroContrato(),
					event.getFile().getFileName(), "/numContrato/", getUsuarioLogado());

			// atualiza lista de arquivos contidos no diretório
			documentoConsultarTodos = new ArrayList<FileUploaded>();
			files = listaArquivos();
		}
	}

	public void handleAnaliseDocumentoFileUpload(FileUploadEvent event) throws IOException {
		FacesContext context = FacesContext.getCurrentInstance();

		ParametrosDao pDao = new ParametrosDao();
		String pathContrato = pDao.findByFilter("nome", "COBRANCA_DOCUMENTOS").get(0).getValorString();

		pathContrato += this.objetoContratoCobranca.getNumeroContrato();
		pathContrato += "/analise/";
		// cria o arquivo
		if (event.getFile().getFileName().endsWith(".zip")) {
			context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR,
					"Contrato Cobrança: não é possível anexar .zip", " não é possível anexar .zip"));
		} else {
			byte[] conteudo = event.getFile().getContents();
			fileService.salvarDocumento(conteudo, this.objetoContratoCobranca.getNumeroContrato(),
					event.getFile().getFileName(), "//analise/", getUsuarioLogado());

			DocumentoAnaliseDao documentoAnaliseDao = new DocumentoAnaliseDao();
			DocumentoAnalise documentoAnalise = new DocumentoAnalise();
			documentoAnalise.setContratoCobranca(this.objetoContratoCobranca);
			documentoAnalise.setMotivoAnalise("Matricula para consulta");
			documentoAnalise.setIdentificacao(event.getFile().getFileName());
			documentoAnalise.setPath(pathContrato + event.getFile().getFileName());
			documentoAnalise.setTipoEnum(DocumentosAnaliseEnum.REA);
			documentoAnalise.setLiberadoAnalise(true);
			documentoAnalise.adiconarEstadosPeloCadastro();
			documentoAnaliseDao.create(documentoAnalise);
			// atualiza lista de arquivos contidos no diretório

			documentoConsultarTodos = new ArrayList<FileUploaded>();
			listaArquivosAnaliseDocumentos();
		}
	}

	public void handleFileInternoUpload(FileUploadEvent event) throws IOException {
		FacesContext context = FacesContext.getCurrentInstance();

		if (event.getFile().getFileName().endsWith(".zip")) {
			context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR,
					"Contrato Cobrança: não é possível anexar .zip", " não é possível anexar .zip"));
		} else {
			byte[] conteudo = event.getFile().getContents();
			fileService.salvarDocumento(conteudo, this.objetoContratoCobranca.getNumeroContrato(),
					event.getFile().getFileName(), "interno", getUsuarioLogado());

			// atualiza lista de arquivos contidos no diretório
			documentoConsultarTodos = new ArrayList<FileUploaded>();
			filesInterno = listaArquivosInterno();
		}
	}

	public void handleFileFaltanteUpload(FileUploadEvent event) throws IOException {
		FacesContext context = FacesContext.getCurrentInstance();
		if (event.getFile().getFileName().endsWith(".zip")) {
			context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR,
					"Contrato Cobrança: não é possível anexar .zip", " não é possível anexar .zip"));
		} else {

			byte[] conteudo = event.getFile().getContents();
			fileService.salvarDocumento(conteudo, this.objetoContratoCobranca.getNumeroContrato(),
					event.getFile().getFileName(), "//faltante/", getUsuarioLogado());

			// atualiza lista de arquivos contidos no diretório
			documentoConsultarTodos = new ArrayList<FileUploaded>();
			filesFaltante = listaArquivosFaltante();
		}
	}

	public void handleFileJuridicoUpload(FileUploadEvent event) throws IOException {
		FacesContext context = FacesContext.getCurrentInstance();

		if (event.getFile().getFileName().endsWith(".zip")) {
			context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR,
					"Contrato Cobrança: não é possível anexar .zip", " não é possível anexar .zip"));
		} else {

			byte[] conteudo = event.getFile().getContents();
			fileService.salvarDocumento(conteudo, this.objetoContratoCobranca.getNumeroContrato(),
					event.getFile().getFileName(), "//juridico/", getUsuarioLogado());

			// atualiza lista de arquivos contidos no diretório
			documentoConsultarTodos = new ArrayList<FileUploaded>();
			filesJuridico = listaArquivosJuridico();
		}
	}

	public void handleFileComiteUpload(FileUploadEvent event) throws IOException {
		FacesContext context = FacesContext.getCurrentInstance();

		if (event.getFile().getFileName().endsWith(".zip")) {
			context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR,
					"Contrato Cobrança: não é possível anexar .zip", " não é possível anexar .zip"));
		} else {
			byte[] conteudo = event.getFile().getContents();
			fileService.salvarDocumento(conteudo, this.objetoContratoCobranca.getNumeroContrato(),
					event.getFile().getFileName(), "//comite/", getUsuarioLogado());

			// atualiza lista de arquivos contidos no diretório
			documentoConsultarTodos = new ArrayList<FileUploaded>();
			filesComite = listaArquivosComite();
		}
	}

	public void handleFilePagarUpload(FileUploadEvent event) throws IOException {
		FacesContext context = FacesContext.getCurrentInstance();

		if (event.getFile().getFileName().contains("Pag ") || event.getFile().getFileName().contains("PAG ")) {
			TakeBlipMB takeBlipMB = new TakeBlipMB();
			ResponsavelDao rDao = new ResponsavelDao();
			Responsavel rGerente = new Responsavel();
			rGerente = rDao.findById((long) 1175); // camilo
			takeBlipMB.sendWhatsAppMessageComprovante(rGerente, "comprovante_anexado", getNomeUsuarioLogado(),
					this.objetoContratoCobranca.getNumeroContrato(), event.getFile().getFileName());
		}

		if (event.getFile().getFileName().endsWith(".zip")) {
			context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR,
					"Contrato Cobrança: não é possível anexar .zip", " não é possível anexar .zip"));
		} else {
			byte[] conteudo = event.getFile().getContents();
			fileService.salvarDocumento(conteudo, this.objetoContratoCobranca.getNumeroContrato(),
					event.getFile().getFileName(), "//pagar/", getUsuarioLogado());

			// atualiza lista de arquivos contidos no diretório
			documentoConsultarTodos = new ArrayList<FileUploaded>();
			filesPagar = listaArquivosPagar();
		}
	}

	public void handleFileContaPagarUpload(FileUploadEvent event) throws IOException {
		FacesContext context = FacesContext.getCurrentInstance();
		ContasPagar conta = (ContasPagar) event.getComponent().getAttributes().get("foo");

		if (event.getFile().getFileName().contains("Pag ") || event.getFile().getFileName().contains("PAG ")) {
			TakeBlipMB takeBlipMB = new TakeBlipMB();
			ResponsavelDao rDao = new ResponsavelDao();
			Responsavel rGerente = new Responsavel();
			rGerente = rDao.findById((long) 1175); // camilo
			takeBlipMB.sendWhatsAppMessageComprovante(rGerente, "comprovante_anexado", getNomeUsuarioLogado(),
					this.objetoContratoCobranca.getNumeroContrato(), event.getFile().getFileName());
		}

		if (event.getFile().getFileName().endsWith(".zip")) {
			context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR,
					"Contrato Cobrança: não é possível anexar .zip", " não é possível anexar .zip"));
		} else {
			// cria o arquivo
			// event.getFile().getFileName();
			byte[] conteudo = event.getFile().getContents();
			fileService.salvarDocumento(conteudo, this.objetoContratoCobranca.getNumeroContrato(),
					event.getFile().getFileName(), "//pagar/" + conta.getFileListId() + "/", getUsuarioLogado());

			// atualiza lista de arquivos contidos no diretório

			documentoConsultarTodos = new ArrayList<FileUploaded>();
			conta.setFilesContas(listaArquivosContasPagar(conta));
		}
	}

	public void handleFileCciUpload(FileUploadEvent event) throws IOException {
		FacesContext context = FacesContext.getCurrentInstance();

		if (event.getFile().getFileName().endsWith(".zip")) {
			context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR,
					"Contrato Cobrança: não é possível anexar .zip", " não é possível anexar .zip"));
		} else {
			byte[] conteudo = event.getFile().getContents();
			fileService.salvarDocumento(conteudo, this.objetoContratoCobranca.getNumeroContrato(),
					event.getFile().getFileName(), "//cci/", getUsuarioLogado());

			// atualiza lista de arquivos contidos no diretório
			documentoConsultarTodos = new ArrayList<FileUploaded>();
			filesCci = listaArquivosCci();
		}
	}

	public void populateFilesContasPagar(ContasPagar conta) throws IOException {
		contasPagarArquivos = conta;
		contasPagarArquivos.setFilesContas(listaArquivosContasPagar(contasPagarArquivos));

		PrimeFaces current = PrimeFaces.current();
		current.executeScript("PF('contaArquivosdlg').show();");
	}

	public String generateFileID() {
		return CommonsUtil.stringValue(System.currentTimeMillis());
	}

	public void deleteFile() {
		for (FileUploaded f : deletefiles) {
			deleteFile(f);
		}

		deletefiles = new ArrayList<FileUploaded>();
		files = listaArquivos();
	}

	public void deleteArquivosAnalisados() {
		DocumentoAnaliseDao daoDocumentoAnalise = new DocumentoAnaliseDao();

		for (DocumentoAnalise d : listaDeleteAnalise) {
			d.setExcluido(true);
			daoDocumentoAnalise.merge(d);
		}

		listaArquivosAnaliseDocumentos();
		this.restricaoOperacao = new ArrayList<>();
		this.restricaoImovel = new ArrayList<>();

		listaRestricoesPessoas();

	}

	public void deleteFileInterno() {
		for (FileUploaded f : deletefilesInterno) {
			deleteFile(f);
		}

		deletefilesInterno = new ArrayList<FileUploaded>();
		filesInterno = listaArquivosInterno();
	}

	private void deleteFile(FileUploaded f) {
		FileService fileService = new FileService();
		fileService.excluirDocumento(this.objetoContratoCobranca.getNumeroContrato(), f.getPathOrigin(), f.getName(),
				getUsuarioLogado());
	}

	public void deleteFileFaltante() {
		for (FileUploaded f : deletefilesFaltante) {
			deleteFile(f);
		}

		deletefilesFaltante = new ArrayList<FileUploaded>();
		filesFaltante = listaArquivosFaltante();
	}

	public void deleteFileJuridico() {
		for (FileUploaded f : deletefilesJuridico) {
			deleteFile(f);
		}

		deletefilesJuridico = new ArrayList<FileUploaded>();
		filesJuridico = listaArquivosJuridico();
	}

	public void deleteFileComite() {
		for (FileUploaded f : deletefilesComite) {
			deleteFile(f);
		}

		deletefilesComite = new ArrayList<FileUploaded>();
		filesComite = listaArquivosComite();
	}

	public void deleteFilePagar() {
		for (FileUploaded f : deletefilesPagar) {
			deleteFile(f);
		}

		deletefilesPagar = new ArrayList<FileUploaded>();
		filesPagar = listaArquivosPagar();
	}

	public void deleteFileCci() {
		for (FileUploaded f : deletefilesCci) {
			deleteFile(f);
		}

		deletefilesCci = new ArrayList<FileUploaded>();
		filesCci = listaArquivosCci();
	}

	public void deleteFiles(Collection<FileUploaded> lista) {
		for (FileUploaded f : lista) {
			deleteFile(f);
		}
	}

	public void deleteFilesCci(Collection<FileUploaded> lista) {
		for (FileUploaded f : lista) {
			deleteFile(f);
		}
	}

	public void listaArquivosAnaliseDocumentos() {
		DocumentoAnaliseDao documentoAnaliseDao = new DocumentoAnaliseDao();
		this.listaDocumentoAnalise = documentoAnaliseDao.listagemDocumentoAnalise(this.objetoContratoCobranca);
		this.listaDocumentoAnaliseRea = documentoAnaliseDao
				.listagemDocumentoAnaliseNaoAnalisados(this.objetoContratoCobranca);
		Collections.sort(this.listaDocumentoAnalise, new Comparator<DocumentoAnalise>() {
			@Override
			public int compare(DocumentoAnalise one, DocumentoAnalise other) {
				return CommonsUtil.castAsLong(one.getId()).compareTo(other.getId());
			}
		});
	}

	public void preparaAdicionarPessoaAnalise() {
		this.documentoAnaliseAdicionar = new DocumentoAnalise();
		documentoAnaliseAdicionar.setPagador(new PagadorRecebedor());
		documentoAnaliseAdicionar.setContratoCobranca(this.objetoContratoCobranca);
		documentoAnaliseAdicionar.setObservacao(".");
		documentoAnaliseAdicionar.setLiberadoAnalise(true);
		documentoAnaliseAdicionar.setLiberadoCertidoes(true);
	}

	public void adicionarPessoaAnalise() {
		this.tituloPagadorRecebedorDialog = "";
		this.tipoPesquisaPagadorRecebedor = "";
		this.updatePagadorRecebedor = "";
		DocumentoAnaliseDao documentoAnaliseDao = new DocumentoAnaliseDao();
		DocumentoAnalise documentoAnalisePesquisa = documentoAnaliseDao.cadastradoAnalise(this.objetoContratoCobranca,
				documentoAnaliseAdicionar.getPagador().getCpf());

		if (!CommonsUtil.semValor(documentoAnalisePesquisa))
			documentoAnaliseAdicionar = documentoAnalisePesquisa;
		else {
			documentoAnaliseAdicionar.setOrigem("ContratoCobranca");
			documentoAnaliseAdicionar.setDataCadastro(DateUtil.getDataHoraAgora());
			documentoAnaliseAdicionar.setUsuarioCadastro(loginBean.getUsuarioLogado().getLogin());
			documentoAnaliseAdicionar.adiconarEstadosPeloCadastro();
			documentoAnaliseDao.merge(documentoAnaliseAdicionar);
			this.objetoContratoCobranca.setDocumentosAnalisados(false);
		}
		documentoAnaliseAdicionar.setLiberadoAnalise(true);
		listaArquivosAnaliseDocumentos();

		listaRestricoesPessoas();
		ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();
		contratoCobrancaDao.merge(objetoContratoCobranca);

	}

	public void adicionaEstado() {
		documentoAnalisePopup.adicionaEstados(estadoConsultaAdd);
		DocumentoAnaliseDao documentoAnaliseDao = new DocumentoAnaliseDao();
		documentoAnaliseDao.merge(documentoAnalisePopup);
	}

	public List<DocumentoAnalise> getListaDocumentoAnalise() {
//		if (CommonsUtil.semValor(listaDocumentoAnalise)) {
//			listaArquivosAnaliseDocumentos();
//		}
		return listaDocumentoAnalise;
	}

	public void setListaDocumentoAnalise(List<DocumentoAnalise> listaDocumentoAnalise) {
		this.listaDocumentoAnalise = listaDocumentoAnalise;
	}

	public Collection<FileUploaded> listaArquivos() {
		carregaDocumentos();
		return this.documentoConsultarTodos.stream()
				.filter(f -> CommonsUtil.mesmoValorIgnoreCase(f.getPathOrigin(), "numContrato"))
				.collect(Collectors.toList());
	}

	public List<FileUploaded> listaArquivosInterno() {
		carregaDocumentos();
		return this.documentoConsultarTodos.stream()
				.filter(f -> CommonsUtil.mesmoValorIgnoreCase(f.getPathOrigin(), "interno"))
				.collect(Collectors.toList());
	}

	public List<FileUploaded> listaArquivosFaltante() {
		carregaDocumentos();
		return this.documentoConsultarTodos.stream()
				.filter(f -> CommonsUtil.mesmoValorIgnoreCase(f.getPathOrigin(), "faltante"))
				.collect(Collectors.toList());
	}

	private void carregaDocumentos() {
		documentoConsultarTodos = new ArrayList<FileUploaded>();
		if (CommonsUtil.semValor(this.documentoConsultarTodos)) {
			FileService fileService = new FileService();
			this.documentoConsultarTodos = fileService
					.documentoConsultarTodos(this.objetoContratoCobranca.getNumeroContrato(), getUsuarioLogado());
		}
	}

	public List<FileUploaded> listaArquivosJuridico() {
		carregaDocumentos();
		return this.documentoConsultarTodos.stream()
				.filter(f -> CommonsUtil.mesmoValorIgnoreCase(f.getPathOrigin(), "juridico"))
				.collect(Collectors.toList());
	}

	public List<FileUploaded> listaArquivosComite() {
		carregaDocumentos();
		return this.documentoConsultarTodos.stream()
				.filter(f -> CommonsUtil.mesmoValorIgnoreCase(f.getPathOrigin(), "comite"))
				.collect(Collectors.toList());
	}

	public Collection<FileUploaded> listaArquivosPagar() {
		carregaDocumentos();
		return this.documentoConsultarTodos.stream()
				.filter(f -> CommonsUtil.mesmoValorIgnoreCase(f.getPathOrigin(), "pagar")).collect(Collectors.toList());
	}

	public Collection<FileUploaded> listaArquivosContasPagar(ContasPagar conta) {
		carregaDocumentos();
		return this.documentoConsultarTodos.stream()
				.filter(f -> CommonsUtil.mesmoValorIgnoreCase(f.getPathOrigin(), "pagar")).collect(Collectors.toList());

		/*
		 * if (CommonsUtil.semValor(conta.getFileListId())) { return new
		 * ArrayList<FileUploaded>(); }
		 * 
		 * // DateFormat formatData = new SimpleDateFormat("dd/MM/yyyy"); ParametrosDao
		 * pDao = new ParametrosDao(); String pathContrato = pDao.findByFilter("nome",
		 * "COBRANCA_DOCUMENTOS").get(0).getValorString() // String pathContrato =
		 * "C:/Users/Usuario/Desktop/" + this.objetoContratoCobranca.getNumeroContrato()
		 * + "//pagar/" + conta.getFileListId(); File diretorio = new
		 * File(pathContrato); File arqs[] = diretorio.listFiles();
		 * Collection<FileUploaded> lista = new ArrayList<FileUploaded>(); if (arqs !=
		 * null) { for (int i = 0; i < arqs.length; i++) { File arquivo = arqs[i];
		 * 
		 * // String nome = arquivo.getName(); // String dt_ateracao =
		 * formatData.format(new Date(arquivo.lastModified())); lista.add(new
		 * FileUploaded(arquivo.getName(), arquivo, pathContrato)); } } return lista;
		 */
	}

	public Collection<FileUploaded> listaArquivosCci() {
		carregaDocumentos();
		return this.documentoConsultarTodos.stream()
				.filter(f -> CommonsUtil.mesmoValorIgnoreCase(f.getPathOrigin(), "cci")).collect(Collectors.toList());
	}

	public void listaTodasSubpastas() {
		files = new ArrayList<FileUploaded>();
		files = listaArquivos();
		filesInterno = new ArrayList<FileUploaded>();
		filesInterno = listaArquivosInterno();
		filesFaltante = new ArrayList<FileUploaded>();
		filesFaltante = listaArquivosFaltante();
		filesJuridico = new ArrayList<FileUploaded>();
		filesJuridico = listaArquivosJuridico();
		filesComite = new ArrayList<FileUploaded>();
		filesComite = listaArquivosComite();
		filesPagar = new ArrayList<FileUploaded>();
		filesPagar = listaArquivosPagar();
		filesCci = new ArrayList<FileUploaded>();
		filesCci = listaArquivosCci();
	}

	public void viewFile(FileUploaded file) {
		String pathContrato = null;
		try {
			FacesContext facesContext = FacesContext.getCurrentInstance();
			ExternalContext externalContext = facesContext.getExternalContext();
			HttpServletResponse response = (HttpServletResponse) externalContext.getResponse();
			BufferedInputStream input = null;
			BufferedOutputStream output = null;
			String fileName = file.getName();
			String filePath = file.getPath();

			pathContrato = file.getPath() + "/" + fileName;
			String mineFile = "";

			if (fileName.contains(".jpg") || fileName.contains(".JPG")) {
				mineFile = "image-jpg";
			}

			if (fileName.contains(".jpeg") || fileName.contains(".jpeg")) {
				mineFile = "image-jpeg";
			}

			if (fileName.contains(".png") || fileName.contains(".PNG")) {
				mineFile = "image-png";
			}

			if (fileName.contains(".pdf") || fileName.contains(".PDF")) {
				mineFile = "application/pdf";
			}

			FileService fileService = new FileService();
			FileUploaded documentoSelecionado = new FileUploaded(fileName, null, filePath);
			byte[] arquivob = fileService.abrirDocumentos(documentoSelecionado,
					this.objetoContratoCobranca.getNumeroContrato(), getUsuarioLogado());
			InputStream arquivo = new ByteArrayInputStream(arquivob);

			input = new BufferedInputStream(arquivo, 10240);

			response.reset();
			// lire un fichier pdf
			response.setHeader("Content-type", mineFile);

			response.setContentLength(arquivob.length);

			response.setHeader("Content-disposition", "inline; filename=" + fileName);
			output = new BufferedOutputStream(response.getOutputStream(), 10240);

			// Write file contents to response.
			byte[] buffer = new byte[10240];
			int length;
			while ((length = input.read(buffer)) > 0) {
				output.write(buffer, 0, length);
			}

			// Finalize task.
			output.flush();
			output.close();
			facesContext.responseComplete();
		} catch (FileNotFoundException e) {
			// TODO Auto-generated catch block
			System.out.println(pathContrato);
			e.printStackTrace();
		} catch (IOException e) {
			System.out.println(pathContrato);
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
	}

	public void consultaDocsJuridico(ContratoCobranca contrato) throws IOException {
		filesJuridico = new ArrayList<FileUploaded>();
		objetoContratoCobranca = contrato;
		filesJuridico = listaArquivosJuridico();
		contratoDocumentos = contrato.getNumeroContrato();
		PrimeFaces current = PrimeFaces.current();
		current.executeScript("PF('bui').show();");
		for (FileUploaded file : filesJuridico) {
			if (file.getName().toLowerCase().endsWith(".pdf")) {
				PDDocument doc = PDDocument.load(fileService.abrirDocumentos(file,
						this.objetoContratoCobranca.getNumeroContrato(), getUsuarioLogado()));
				file.setPages(doc.getNumberOfPages());
			}
		}
	}

	public void closeDialogDocs() {
		objetoContratoCobranca = null;
		filesJuridico = new ArrayList<FileUploaded>();
		PrimeFaces current = PrimeFaces.current();
		current.executeScript("PF('bui').hide();");
	}

	public void fileSelectionListener() {
		// Apesar dessa função não fazer nada ela é importante para o funcionamento do
		// download em zip.
		// Não me pergunte o pq
	}

	public StreamedContent getDownloadAllFiles() {
		Map<String, byte[]> listaArquivos = new HashMap<String, byte[]>();
		try {
			CompactadorUtil compac = new CompactadorUtil();
			for (FileUploaded f : deletefiles) {
				String arquivo = f.getName();
				byte[] arquivoByte = fileService.abrirDocumentos(f, this.objetoContratoCobranca.getNumeroContrato(),
						getUsuarioLogado());
				listaArquivos.put(arquivo, arquivoByte);
			}
			arquivos = compac.compactarZipByte(listaArquivos);
			final GeradorRelatorioDownloadCliente gerador = new GeradorRelatorioDownloadCliente(
					FacesContext.getCurrentInstance());
			String nomeArquivoDownload = String.format(objetoContratoCobranca.getNumeroContrato() + " Documentos.zip",
					"");
			gerador.open(nomeArquivoDownload);
			gerador.feed(new ByteArrayInputStream(arquivos));
			gerador.close();
		} catch (Exception e) {
			System.out.println(e);
		}
		return null;
	}

	public StreamedContent getDownloadAllFilesInterno() {
		Map<String, byte[]> listaArquivos = new HashMap<String, byte[]>();
		try {
			CompactadorUtil compac = new CompactadorUtil();
			for (FileUploaded f : deletefilesInterno) {
				String arquivo = f.getName();
				byte[] arquivoByte = fileService.abrirDocumentos(f, this.objetoContratoCobranca.getNumeroContrato(),
						getUsuarioLogado());
				listaArquivos.put(arquivo, arquivoByte);
			}
			arquivos = compac.compactarZipByte(listaArquivos);
			final GeradorRelatorioDownloadCliente gerador = new GeradorRelatorioDownloadCliente(
					FacesContext.getCurrentInstance());
			String nomeArquivoDownload = String
					.format(objetoContratoCobranca.getNumeroContrato() + " Documentos_interno.zip", "");
			gerador.open(nomeArquivoDownload);
			gerador.feed(new ByteArrayInputStream(arquivos));
			gerador.close();
		} catch (Exception e) {
			System.out.println(e);
		}
		return null;
	}

	public StreamedContent getDownloadAllFilesComite() {
		Map<String, byte[]> listaArquivos = new HashMap<String, byte[]>();
		try {
			CompactadorUtil compac = new CompactadorUtil();
			for (FileUploaded f : deletefilesComite) {
				String arquivo = f.getName();
				byte[] arquivoByte = fileService.abrirDocumentos(f, this.objetoContratoCobranca.getNumeroContrato(),
						getUsuarioLogado());
				listaArquivos.put(arquivo, arquivoByte);
			}
			arquivos = compac.compactarZipByte(listaArquivos);
			final GeradorRelatorioDownloadCliente gerador = new GeradorRelatorioDownloadCliente(
					FacesContext.getCurrentInstance());
			String nomeArquivoDownload = String
					.format(objetoContratoCobranca.getNumeroContrato() + " Documentos_comite.zip", "");
			gerador.open(nomeArquivoDownload);
			gerador.feed(new ByteArrayInputStream(arquivos));
			gerador.close();
		} catch (Exception e) {
			System.out.println(e);
		}
		return null;
	}

	public StreamedContent getDownloadAllFilesFaltante() {
		Map<String, byte[]> listaArquivos = new HashMap<String, byte[]>();
		try {
			CompactadorUtil compac = new CompactadorUtil();
			for (FileUploaded f : deletefilesFaltante) {
				String arquivo = f.getName();
				byte[] arquivoByte = fileService.abrirDocumentos(f, this.objetoContratoCobranca.getNumeroContrato(),
						getUsuarioLogado());
				listaArquivos.put(arquivo, arquivoByte);
			}
			arquivos = compac.compactarZipByte(listaArquivos);
			final GeradorRelatorioDownloadCliente gerador = new GeradorRelatorioDownloadCliente(
					FacesContext.getCurrentInstance());
			String nomeArquivoDownload = String
					.format(objetoContratoCobranca.getNumeroContrato() + " Documentos_faltante.zip", "");
			gerador.open(nomeArquivoDownload);
			gerador.feed(new ByteArrayInputStream(arquivos));
			gerador.close();
		} catch (Exception e) {
			System.out.println(e);
		}
		return null;
	}

	public StreamedContent getDownloadAllFilesJuridico() {
		Map<String, byte[]> listaArquivos = new HashMap<String, byte[]>();
		try {
			CompactadorUtil compac = new CompactadorUtil();
			for (FileUploaded f : deletefilesJuridico) {
				String arquivo = f.getName();
				byte[] arquivoByte = fileService.abrirDocumentos(f, this.objetoContratoCobranca.getNumeroContrato(),
						getUsuarioLogado());
				listaArquivos.put(arquivo, arquivoByte);
			}
			arquivos = compac.compactarZipByte(listaArquivos);
			final GeradorRelatorioDownloadCliente gerador = new GeradorRelatorioDownloadCliente(
					FacesContext.getCurrentInstance());
			String nomeArquivoDownload = String
					.format(objetoContratoCobranca.getNumeroContrato() + " Documentos_juridico.zip", "");
			gerador.open(nomeArquivoDownload);
			gerador.feed(new ByteArrayInputStream(arquivos));
			gerador.close();
		} catch (Exception e) {
			System.out.println(e);
		}
		return null;
	}

	public StreamedContent getDownloadAllFilesCci() {
		Map<String, byte[]> listaArquivos = new HashMap<String, byte[]>();
		try {
			CompactadorUtil compac = new CompactadorUtil();
			for (FileUploaded f : deletefilesCci) {
				String arquivo = f.getName();
				byte[] arquivoByte = fileService.abrirDocumentos(f, this.objetoContratoCobranca.getNumeroContrato(),
						getUsuarioLogado());
				listaArquivos.put(arquivo, arquivoByte);
			}
			arquivos = compac.compactarZipByte(listaArquivos);
			final GeradorRelatorioDownloadCliente gerador = new GeradorRelatorioDownloadCliente(
					FacesContext.getCurrentInstance());
			String nomeArquivoDownload = String
					.format(objetoContratoCobranca.getNumeroContrato() + " Documentos_cci.zip", "");
			gerador.open(nomeArquivoDownload);
			gerador.feed(new ByteArrayInputStream(arquivos));
			gerador.close();
		} catch (Exception e) {
			System.out.println(e);
		}
		return null;
	}

	public StreamedContent getDownloadAllFilesPagar() {
		Map<String, byte[]> listaArquivos = new HashMap<String, byte[]>();
		try {
			CompactadorUtil compac = new CompactadorUtil();
			for (FileUploaded f : deleteFilesPagar) {
				String arquivo = f.getName();
				byte[] arquivoByte = fileService.abrirDocumentos(f, this.objetoContratoCobranca.getNumeroContrato(),
						getUsuarioLogado());
				listaArquivos.put(arquivo, arquivoByte);
			}
			arquivos = compac.compactarZipByte(listaArquivos);
			final GeradorRelatorioDownloadCliente gerador = new GeradorRelatorioDownloadCliente(
					FacesContext.getCurrentInstance());
			String nomeArquivoDownload = String
					.format(objetoContratoCobranca.getNumeroContrato() + " Documentos_pagar.zip", "");
			gerador.open(nomeArquivoDownload);
			gerador.feed(new ByteArrayInputStream(arquivos));
			gerador.close();
		} catch (Exception e) {
			System.out.println(e);
		}
		return null;
	}

	public StreamedContent getDownloadAllFilesContaPagar() {
		Map<String, byte[]> listaArquivos = new HashMap<String, byte[]>();
		try {
			CompactadorUtil compac = new CompactadorUtil();
			for (FileUploaded f : deleteFilesContas) {
				String arquivo = f.getName();
				byte[] arquivoByte = fileService.abrirDocumentos(f, this.objetoContratoCobranca.getNumeroContrato(),
						getUsuarioLogado());
				listaArquivos.put(arquivo, arquivoByte);
			}
			arquivos = compac.compactarZipByte(listaArquivos);
			final GeradorRelatorioDownloadCliente gerador = new GeradorRelatorioDownloadCliente(
					FacesContext.getCurrentInstance());
			String nomeArquivoDownload = String
					.format(objetoContratoCobranca.getNumeroContrato() + " Documentos_conta.zip", "");
			gerador.open(nomeArquivoDownload);
			gerador.feed(new ByteArrayInputStream(arquivos));
			gerador.close();
		} catch (Exception e) {
			System.out.println(e);
		}
		return null;
	}

	public BigDecimal calculaTotalVlrParcelaBaixaLoteSelecionadas() {
		BigDecimal valorTotal = BigDecimal.ZERO;

		if (this.selectedBoletosKobana != null) {
			for (BoletoKobana boletos : this.selectedBoletosKobana) {
				if (boletos.getVlrParcela() != null) {
					valorTotal = valorTotal.add(boletos.getVlrParcela());
				}
			}
		}

		return valorTotal;
	}

	public BigDecimal calculaTotalVlrPagoBaixaLoteSelecionadas() {
		BigDecimal valorTotal = BigDecimal.ZERO;

		for (BoletoKobana boletos : this.selectedBoletosKobana) {
			valorTotal = valorTotal.add(boletos.getPaidAmount());
		}

		return valorTotal;
	}

	public StreamedContent getDownloadFile() {
		if (this.selectedFile != null) {
			InputStream stream;
			FileService fileService = new FileService();
			stream = new ByteArrayInputStream(fileService.abrirDocumentos(this.selectedFile,
					this.objetoContratoCobranca.getNumeroContrato(), getUsuarioLogado()));
			downloadFile = new DefaultStreamedContent(stream, this.selectedFile.getPath(), this.selectedFile.getName());
		}
		return this.downloadFile;
	}

	// removido zippar arquivos (ou não)

	static public void zipFolder(String srcFolder, String destZipFile) throws Exception {
		ZipOutputStream zip = null;
		FileOutputStream fileWriter = null;

		fileWriter = new FileOutputStream(destZipFile);
		zip = new ZipOutputStream(fileWriter);

		addFolderToZip("", srcFolder, zip);
		zip.flush();
		zip.close();
	}

	static private void addFileToZip(String path, String srcFile, ZipOutputStream zip) throws Exception {

		File folder = new File(srcFile);
		if (folder.isDirectory()) {
			addFolderToZip(path, srcFile, zip);
		} else {
			byte[] buf = new byte[1024];
			int len;
			FileInputStream in = new FileInputStream(srcFile);
			zip.putNextEntry(new ZipEntry(folder.getName()));
			while ((len = in.read(buf)) > 0) {
				zip.write(buf, 0, len);
			}
		}
	}

	static private void addFolderToZip(String path, String srcFolder, ZipOutputStream zip) throws Exception {
		File folder = new File(srcFolder);

		for (String fileName : folder.list()) {
			if (path.equals("")) {
				addFileToZip(folder.getName(), srcFolder + "/" + fileName, zip);
			} else {
				addFileToZip(path + "/" + folder.getName(), srcFolder + "/" + fileName, zip);
			}
		}
	}

	/**
	 * @return the files
	 */
	public Collection<FileUploaded> getFiles() {
		return files;
	}

	/**
	 * @param files the files to set
	 */
	public void setFiles(Collection<FileUploaded> files) {
		this.files = files;
	}

	/**
	 * @return the selectedFile
	 */
	public FileUploaded getSelectedFile() {
		return selectedFile;
	}

	/**
	 * @param selectedFile the selectedFile to set
	 */
	public void setSelectedFile(FileUploaded selectedFile) {
		this.selectedFile = selectedFile;
	}

	/**
	 * @return the deletefiles
	 */
	public List<FileUploaded> getDeletefiles() {
		return deletefiles;
	}

	/**
	 * @param deletefiles the deletefiles to set
	 */
	public void setDeletefiles(List<FileUploaded> deletefiles) {
		this.deletefiles = deletefiles;
	}

	/**
	 * @param downloadFile the downloadFile to set
	 */
	public void setDownloadFile(StreamedContent downloadFile) {
		this.downloadFile = downloadFile;
	}

	public Collection<FileUploaded> getFilesInterno() {
		return filesInterno;
	}

	public void setFilesInterno(Collection<FileUploaded> filesInterno) {
		this.filesInterno = filesInterno;
	}

	public List<FileUploaded> getDeletefilesInterno() {
		return deletefilesInterno;
	}

	public void setDeletefilesInterno(List<FileUploaded> deletefilesInterno) {
		this.deletefilesInterno = deletefilesInterno;
	}

	public void setDownloadAllFilesInterno(StreamedContent downloadAllFilesInterno) {
		this.downloadAllFilesInterno = downloadAllFilesInterno;
	}

	public Collection<FileUploaded> getFilesFaltante() {
		return filesFaltante;
	}

	public void setFilesFaltante(Collection<FileUploaded> filesFaltante) {
		this.filesFaltante = filesFaltante;
	}

	public List<FileUploaded> getDeletefilesFaltante() {
		return deletefilesFaltante;
	}

	public void setDeletefilesFaltante(List<FileUploaded> deletefilesFaltante) {
		this.deletefilesFaltante = deletefilesFaltante;
	}

	public Collection<FileUploaded> getFilesJuridico() {
		return filesJuridico;
	}

	public void setFilesJuridico(Collection<FileUploaded> filesJuridico) {
		this.filesJuridico = filesJuridico;
	}

	public List<FileUploaded> getDeletefilesJuridico() {
		return deletefilesJuridico;
	}

	public void setDeletefilesJuridico(List<FileUploaded> deletefilesJuridico) {
		this.deletefilesJuridico = deletefilesJuridico;
	}

	/**
	 * @return the selectedRecebedorFinal1
	 */
	public PagadorRecebedor getSelectedRecebedorFinal1() {
		return selectedRecebedorFinal1;
	}

	/**
	 * @param selectedRecebedorFinal1 the selectedRecebedorFinal1 to set
	 */
	public void setSelectedRecebedorFinal1(PagadorRecebedor selectedRecebedorFinal1) {
		this.selectedRecebedorFinal1 = getPagadorRecebedorObjeto(selectedRecebedorFinal1.getId());
	}

	/**
	 * @return the nomeRecebedorFinal1
	 */
	public String getNomeRecebedorFinal1() {
		return nomeRecebedorFinal1;
	}

	/**
	 * @param nomeRecebedorFinal1 the nomeRecebedorFinal1 to set
	 */
	public void setNomeRecebedorFinal1(String nomeRecebedorFinal1) {
		this.nomeRecebedorFinal1 = nomeRecebedorFinal1;
	}

	/**
	 * @return the idRecebedorFinal1
	 */
	public long getIdRecebedorFinal1() {
		return idRecebedorFinal1;
	}

	/**
	 * @param idRecebedorFinal1 the idRecebedorFinal1 to set
	 */
	public void setIdRecebedorFinal1(long idRecebedorFinal1) {
		this.idRecebedorFinal1 = idRecebedorFinal1;
	}

	/**
	 * @return the selectedRecebedorFinal2
	 */
	public PagadorRecebedor getSelectedRecebedorFinal2() {
		return selectedRecebedorFinal2;
	}

	/**
	 * @param selectedRecebedorFinal2 the selectedRecebedorFinal2 to set
	 */
	public void setSelectedRecebedorFinal2(PagadorRecebedor selectedRecebedorFinal2) {
		this.selectedRecebedorFinal2 = getPagadorRecebedorObjeto(selectedRecebedorFinal2.getId());
	}

	/**
	 * @return the nomeRecebedorFinal2
	 */
	public String getNomeRecebedorFinal2() {
		return nomeRecebedorFinal2;
	}

	/**
	 * @param nomeRecebedorFinal2 the nomeRecebedorFinal2 to set
	 */
	public void setNomeRecebedorFinal2(String nomeRecebedorFinal2) {
		this.nomeRecebedorFinal2 = nomeRecebedorFinal2;
	}

	/**
	 * @return the idRecebedorFinal2
	 */
	public long getIdRecebedorFinal2() {
		return idRecebedorFinal2;
	}

	/**
	 * @param idRecebedorFinal2 the idRecebedorFinal2 to set
	 */
	public void setIdRecebedorFinal2(long idRecebedorFinal2) {
		this.idRecebedorFinal2 = idRecebedorFinal2;
	}

	/**
	 * @return the selectedRecebedorFinal3
	 */
	public PagadorRecebedor getSelectedRecebedorFinal3() {
		return selectedRecebedorFinal3;
	}

	/**
	 * @param selectedRecebedorFinal3 the selectedRecebedorFinal3 to set
	 */
	public void setSelectedRecebedorFinal3(PagadorRecebedor selectedRecebedorFinal3) {
		this.selectedRecebedorFinal3 = getPagadorRecebedorObjeto(selectedRecebedorFinal3.getId());
	}

	/**
	 * @return the nomeRecebedorFinal3
	 */
	public String getNomeRecebedorFinal3() {
		return nomeRecebedorFinal3;
	}

	/**
	 * @param nomeRecebedorFinal3 the nomeRecebedorFinal3 to set
	 */
	public void setNomeRecebedorFinal3(String nomeRecebedorFinal3) {
		this.nomeRecebedorFinal3 = nomeRecebedorFinal3;
	}

	/**
	 * @return the idRecebedorFinal3
	 */
	public long getIdRecebedorFinal3() {
		return idRecebedorFinal3;
	}

	/**
	 * @param idRecebedorFinal3 the idRecebedorFinal3 to set
	 */
	public void setIdRecebedorFinal3(long idRecebedorFinal3) {
		this.idRecebedorFinal3 = idRecebedorFinal3;
	}

	/**
	 * @return the selectedRecebedorFinal4
	 */
	public PagadorRecebedor getSelectedRecebedorFinal4() {
		return selectedRecebedorFinal4;
	}

	/**
	 * @param selectedRecebedorFinal4 the selectedRecebedorFinal4 to set
	 */
	public void setSelectedRecebedorFinal4(PagadorRecebedor selectedRecebedorFinal4) {
		this.selectedRecebedorFinal4 = getPagadorRecebedorObjeto(selectedRecebedorFinal4.getId());
	}

	/**
	 * @return the nomeRecebedorFinal4
	 */
	public String getNomeRecebedorFinal4() {
		return nomeRecebedorFinal4;
	}

	/**
	 * @param nomeRecebedorFinal4 the nomeRecebedorFinal4 to set
	 */
	public void setNomeRecebedorFinal4(String nomeRecebedorFinal4) {
		this.nomeRecebedorFinal4 = nomeRecebedorFinal4;
	}

	/**
	 * @return the idRecebedorFinal4
	 */
	public long getIdRecebedorFinal4() {
		return idRecebedorFinal4;
	}

	/**
	 * @param idRecebedorFinal4 the idRecebedorFinal4 to set
	 */
	public void setIdRecebedorFinal4(long idRecebedorFinal4) {
		this.idRecebedorFinal4 = idRecebedorFinal4;
	}

	/**
	 * @return the selectedRecebedorFinal5
	 */
	public PagadorRecebedor getSelectedRecebedorFinal5() {
		return selectedRecebedorFinal5;
	}

	/**
	 * @param selectedRecebedorFinal5 the selectedRecebedorFinal5 to set
	 */
	public void setSelectedRecebedorFinal5(PagadorRecebedor selectedRecebedorFinal5) {
		this.selectedRecebedorFinal5 = getPagadorRecebedorObjeto(selectedRecebedorFinal5.getId());
	}

	/**
	 * @return the nomeRecebedorFinal5
	 */
	public String getNomeRecebedorFinal5() {
		return nomeRecebedorFinal5;
	}

	/**
	 * @param nomeRecebedorFinal5 the nomeRecebedorFinal5 to set
	 */
	public void setNomeRecebedorFinal5(String nomeRecebedorFinal5) {
		this.nomeRecebedorFinal5 = nomeRecebedorFinal5;
	}

	/**
	 * @return the idRecebedorFinal5
	 */
	public long getIdRecebedorFinal5() {
		return idRecebedorFinal5;
	}

	/**
	 * @param idRecebedorFinal5 the idRecebedorFinal5 to set
	 */
	public void setIdRecebedorFinal5(long idRecebedorFinal5) {
		this.idRecebedorFinal5 = idRecebedorFinal5;
	}

	/**
	 * @return the renderRecebedorFinais
	 */
	public boolean isRenderRecebedorFinais() {
		return renderRecebedorFinais;
	}

	/**
	 * @param renderRecebedorFinais the renderRecebedorFinais to set
	 */
	public void setRenderRecebedorFinais(boolean renderRecebedorFinais) {
		this.renderRecebedorFinais = renderRecebedorFinais;
	}

	/**
	 * @return the renderRecebedorFinal2
	 */
	public boolean isRenderRecebedorFinal2() {
		return renderRecebedorFinal2;
	}

	/**
	 * @param renderRecebedorFinal2 the renderRecebedorFinal2 to set
	 */
	public void setRenderRecebedorFinal2(boolean renderRecebedorFinal2) {
		this.renderRecebedorFinal2 = renderRecebedorFinal2;
	}

	/**
	 * @return the renderRecebedorFinal3
	 */
	public boolean isRenderRecebedorFinal3() {
		return renderRecebedorFinal3;
	}

	/**
	 * @param renderRecebedorFinal3 the renderRecebedorFinal3 to set
	 */
	public void setRenderRecebedorFinal3(boolean renderRecebedorFinal3) {
		this.renderRecebedorFinal3 = renderRecebedorFinal3;
	}

	/**
	 * @return the renderRecebedorFinal4
	 */
	public boolean isRenderRecebedorFinal4() {
		return renderRecebedorFinal4;
	}

	/**
	 * @param renderRecebedorFinal4 the renderRecebedorFinal4 to set
	 */
	public void setRenderRecebedorFinal4(boolean renderRecebedorFinal4) {
		this.renderRecebedorFinal4 = renderRecebedorFinal4;
	}

	/**
	 * @return the renderRecebedorFinal5
	 */
	public boolean isRenderRecebedorFinal5() {
		return renderRecebedorFinal5;
	}

	/**
	 * @param renderRecebedorFinal5 the renderRecebedorFinal5 to set
	 */
	public void setRenderRecebedorFinal5(boolean renderRecebedorFinal5) {
		this.renderRecebedorFinal5 = renderRecebedorFinal5;
	}

	public String getPesquisaObservacao() {
		return pesquisaObservacao;
	}

	public void setPesquisaObservacao(String pesquisaObservacao) {
		this.pesquisaObservacao = pesquisaObservacao;
	}

	public List<PesquisaObservacoes> getListPesquisaObservacoes() {
		return listPesquisaObservacoes;
	}

	public void setListPesquisaObservacoes(List<PesquisaObservacoes> listPesquisaObservacoes) {
		this.listPesquisaObservacoes = listPesquisaObservacoes;
	}

	/**
	 * @return the dtReparcela
	 */
	public Date getDtReparcela() {
		return dtReparcela;
	}

	/**
	 * @param dtReparcela the dtReparcela to set
	 */
	public void setDtReparcela(Date dtReparcela) {
		this.dtReparcela = dtReparcela;
	}

	/**
	 * @return the vlrReparcela
	 */
	public BigDecimal getVlrReparcela() {
		return vlrReparcela;
	}

	/**
	 * @param vlrReparcela the vlrReparcela to set
	 */
	public void setVlrReparcela(BigDecimal vlrReparcela) {
		this.vlrReparcela = vlrReparcela;
	}

	/**
	 * @return the qtdeReparcela
	 */
	public String getQtdeReparcela() {
		return qtdeReparcela;
	}

	/**
	 * @param qtdeReparcela the qtdeReparcela to set
	 */
	public void setQtdeReparcela(String qtdeReparcela) {
		this.qtdeReparcela = qtdeReparcela;
	}

	/**
	 * @return the totalQtedParcelas
	 */
	public String getTotalQtedParcelas() {
		return totalQtedParcelas;
	}

	/**
	 * @param totalQtedParcelas the totalQtedParcelas to set
	 */
	public void setTotalQtedParcelas(String totalQtedParcelas) {
		this.totalQtedParcelas = totalQtedParcelas;
	}

	/**
	 * @return the totalVlrParcelas
	 */
	public BigDecimal getTotalVlrParcelas() {
		return totalVlrParcelas;
	}

	/**
	 * @param totalVlrParcelas the totalVlrParcelas to set
	 */
	public void setTotalVlrParcelas(BigDecimal totalVlrParcelas) {
		this.totalVlrParcelas = totalVlrParcelas;
	}

	/**
	 * @return the splitBoletoIugu
	 */
	public boolean isSplitBoletoIugu() {
		return splitBoletoIugu;
	}

	/**
	 * @param splitBoletoIugu the splitBoletoIugu to set
	 */
	public void setSplitBoletoIugu(boolean splitBoletoIugu) {
		this.splitBoletoIugu = splitBoletoIugu;
	}

	/**
	 * @return the cedenteIugu
	 */
	public List<PagadorRecebedor> getCedentesIugu() {
		return cedentesIugu;
	}

	/**
	 * @param cedenteIugu the cedenteIugu to set
	 */
	public void setCedenteIugu(List<PagadorRecebedor> cedentesIugu) {
		this.cedentesIugu = cedentesIugu;
	}

	/**
	 * @return the cedenteSelecionado
	 */
	public long getCedenteSelecionado() {
		return cedenteSelecionado;
	}

	/**
	 * @param cedenteSelecionado the cedenteSelecionado to set
	 */
	public void setCedenteSelecionado(long cedenteSelecionado) {
		this.cedenteSelecionado = cedenteSelecionado;
	}

	/**
	 * @return the observacaoContratoDetalhes
	 */
	public String getObservacaoContratoDetalhes() {
		return observacaoContratoDetalhes;
	}

	/**
	 * @param observacaoContratoDetalhes the observacaoContratoDetalhes to set
	 */
	public void setObservacaoContratoDetalhes(String observacaoContratoDetalhes) {
		TimeZone zone = TimeZone.getDefault();
		Locale locale = new Locale("pt", "BR");
		Calendar dataHoje = Calendar.getInstance(zone, locale);

		this.dataObservacao = dataHoje.getTime();

		this.observacao = null;

		this.listContratoCobrancaDetalhesObservacoes = new ArrayList<ContratoCobrancaDetalhesObservacoes>();

		ContratoCobrancaDetalhesDao contratoCobrancaDetalhesDao = new ContratoCobrancaDetalhesDao();

		this.listContratoCobrancaDetalhesObservacoes = contratoCobrancaDetalhesDao
				.listaObservacoesOrdenadas(this.contratoCobrancaDetalhes.getId());
	}

	/**
	 * @return the listContratoCobrancaDetalhesObservacoes
	 */
	public List<ContratoCobrancaDetalhesObservacoes> getListContratoCobrancaDetalhesObservacoes() {
		return listContratoCobrancaDetalhesObservacoes;
	}

	/**
	 * @param listContratoCobrancaDetalhesObservacoes the
	 *                                                listContratoCobrancaDetalhesObservacoes
	 *                                                to set
	 */
	public void setListContratoCobrancaDetalhesObservacoes(
			List<ContratoCobrancaDetalhesObservacoes> listContratoCobrancaDetalhesObservacoes) {
		this.listContratoCobrancaDetalhesObservacoes = listContratoCobrancaDetalhesObservacoes;
	}

	/**
	 * @return the contratoCobrancaDetalhes
	 */
	public ContratoCobrancaDetalhes getContratoCobrancaDetalhes() {
		return contratoCobrancaDetalhes;
	}

	/**
	 * @param contratoCobrancaDetalhes the contratoCobrancaDetalhes to set
	 */
	public void setContratoCobrancaDetalhes(ContratoCobrancaDetalhes contratoCobrancaDetalhes) {
		this.contratoCobrancaDetalhes = contratoCobrancaDetalhes;
	}

	/**
	 * @return the contratoCobrancaDetalhesObservacoes
	 */
	public ContratoCobrancaDetalhesObservacoes getContratoCobrancaDetalhesObservacoes() {
		return contratoCobrancaDetalhesObservacoes;
	}

	/**
	 * @param contratoCobrancaDetalhesObservacoes the
	 *                                            contratoCobrancaDetalhesObservacoes
	 *                                            to set
	 */
	public void setContratoCobrancaDetalhesObservacoes(
			ContratoCobrancaDetalhesObservacoes contratoCobrancaDetalhesObservacoes) {
		this.contratoCobrancaDetalhesObservacoes = contratoCobrancaDetalhesObservacoes;
	}

	public GruposPagadores getSelectedGrupoPagadores() {
		return selectedGrupoPagadores;
	}

	public void setSelectedGrupoPagadores(GruposPagadores selectedGrupoPagadores) {
		this.selectedGrupoPagadores = selectedGrupoPagadores;
	}

	public String getNomeGrupoPagador() {
		return nomeGrupoPagador;
	}

	public void setNomeGrupoPagador(String nomeGrupoPagador) {
		this.nomeGrupoPagador = nomeGrupoPagador;
	}

	public long getIdGrupoPagador() {
		return idGrupoPagador;
	}

	public void setIdGrupoPagador(long idGrupoPagador) {
		this.idGrupoPagador = idGrupoPagador;
	}

	public boolean isGrupoPagadores() {
		return grupoPagadores;
	}

	public void setGrupoPagadores(boolean grupoPagadores) {
		this.grupoPagadores = grupoPagadores;
	}

	public List<GruposPagadores> getListGrupoPagadores() {
		return listGrupoPagadores;
	}

	public void setListGrupoPagadores(List<GruposPagadores> listGrupoPagadores) {
		this.listGrupoPagadores = listGrupoPagadores;
	}

	public Date getDataPromessaPagamento() {
		return dataPromessaPagamento;
	}

	public void setDataPromessaPagamento(Date dataPromessaPagamento) {
		this.dataPromessaPagamento = dataPromessaPagamento;
	}

	public LazyDataModel<Responsavel> getResponsaveisLazy() {
		return responsaveisLazy;
	}

	public void setResponsaveisLazy(LazyDataModel<Responsavel> responsaveisLazy) {
		this.responsaveisLazy = responsaveisLazy;
	}

	public List<FilaInvestidores> getListFilaInvestidores() {
		return listFilaInvestidores;
	}

	public void setListFilaInvestidores(List<FilaInvestidores> listFilaInvestidores) {
		this.listFilaInvestidores = listFilaInvestidores;
	}

	public FilaInvestidores getSelectedInvestidor() {
		return selectedInvestidor;
	}

	public void setSelectedInvestidor(FilaInvestidores selectedInvestidor) {
		this.selectedInvestidor = selectedInvestidor;
	}

	public FilaInvestidores getObjetoFilaInvestidores() {
		return objetoFilaInvestidores;
	}

	public void setObjetoFilaInvestidores(FilaInvestidores objetoFilaInvestidores) {
		this.objetoFilaInvestidores = objetoFilaInvestidores;
	}

	public PagadorRecebedor getSelectedRecebedorFinal6() {
		return selectedRecebedorFinal6;
	}

	public void setSelectedRecebedorFinal6(PagadorRecebedor selectedRecebedorFinal6) {
		this.selectedRecebedorFinal6 = getPagadorRecebedorObjeto(selectedRecebedorFinal6.getId());
	}

	public String getNomeRecebedorFinal6() {
		return nomeRecebedorFinal6;
	}

	public void setNomeRecebedorFinal6(String nomeRecebedorFinal6) {
		this.nomeRecebedorFinal6 = nomeRecebedorFinal6;
	}

	public long getIdRecebedorFinal6() {
		return idRecebedorFinal6;
	}

	public void setIdRecebedorFinal6(long idRecebedorFinal6) {
		this.idRecebedorFinal6 = idRecebedorFinal6;
	}

	public PagadorRecebedor getSelectedRecebedorFinal7() {
		return selectedRecebedorFinal7;
	}

	public void setSelectedRecebedorFinal7(PagadorRecebedor selectedRecebedorFinal7) {
		this.selectedRecebedorFinal7 = getPagadorRecebedorObjeto(selectedRecebedorFinal7.getId());
	}

	public String getNomeRecebedorFinal7() {
		return nomeRecebedorFinal7;
	}

	public void setNomeRecebedorFinal7(String nomeRecebedorFinal7) {
		this.nomeRecebedorFinal7 = nomeRecebedorFinal7;
	}

	public long getIdRecebedorFinal7() {
		return idRecebedorFinal7;
	}

	public void setIdRecebedorFinal7(long idRecebedorFinal7) {
		this.idRecebedorFinal7 = idRecebedorFinal7;
	}

	public PagadorRecebedor getSelectedRecebedorFinal8() {
		return selectedRecebedorFinal8;
	}

	public void setSelectedRecebedorFinal8(PagadorRecebedor selectedRecebedorFinal8) {
		this.selectedRecebedorFinal8 = getPagadorRecebedorObjeto(selectedRecebedorFinal8.getId());
	}

	public String getNomeRecebedorFinal8() {
		return nomeRecebedorFinal8;
	}

	public void setNomeRecebedorFinal8(String nomeRecebedorFinal8) {
		this.nomeRecebedorFinal8 = nomeRecebedorFinal8;
	}

	public long getIdRecebedorFinal8() {
		return idRecebedorFinal8;
	}

	public void setIdRecebedorFinal8(long idRecebedorFinal8) {
		this.idRecebedorFinal8 = idRecebedorFinal8;
	}

	public PagadorRecebedor getSelectedRecebedorFinal9() {
		return selectedRecebedorFinal9;
	}

	public void setSelectedRecebedorFinal9(PagadorRecebedor selectedRecebedorFinal9) {
		this.selectedRecebedorFinal9 = getPagadorRecebedorObjeto(selectedRecebedorFinal9.getId());
	}

	public String getNomeRecebedorFinal9() {
		return nomeRecebedorFinal9;
	}

	public void setNomeRecebedorFinal9(String nomeRecebedorFinal9) {
		this.nomeRecebedorFinal9 = nomeRecebedorFinal9;
	}

	public long getIdRecebedorFinal9() {
		return idRecebedorFinal9;
	}

	public void setIdRecebedorFinal9(long idRecebedorFinal9) {
		this.idRecebedorFinal9 = idRecebedorFinal9;
	}

	public PagadorRecebedor getSelectedRecebedorFinal10() {
		return selectedRecebedorFinal10;
	}

	public void setSelectedRecebedorFinal10(PagadorRecebedor selectedRecebedorFinal10) {
		this.selectedRecebedorFinal10 = getPagadorRecebedorObjeto(selectedRecebedorFinal10.getId());
	}

	public String getNomeRecebedorFinal10() {
		return nomeRecebedorFinal10;
	}

	public void setNomeRecebedorFinal10(String nomeRecebedorFinal10) {
		this.nomeRecebedorFinal10 = nomeRecebedorFinal10;
	}

	public long getIdRecebedorFinal10() {
		return idRecebedorFinal10;
	}

	public void setIdRecebedorFinal10(long idRecebedorFinal10) {
		this.idRecebedorFinal10 = idRecebedorFinal10;
	}

	public ContratoCobrancaParcelasInvestidor getBaixaContratoCobrancaParcelasInvestidor() {
		return baixaContratoCobrancaParcelasInvestidor;
	}

	public void setBaixaContratoCobrancaParcelasInvestidor(
			ContratoCobrancaParcelasInvestidor baixaContratoCobrancaParcelasInvestidor) {
		this.baixaContratoCobrancaParcelasInvestidor = baixaContratoCobrancaParcelasInvestidor;
	}

	public Date getDataPagamentoInvestidor() {
		return dataPagamentoInvestidor;
	}

	public void setDataPagamentoInvestidor(Date dataPagamentoInvestidor) {
		this.dataPagamentoInvestidor = dataPagamentoInvestidor;
	}

	public String getEmpresa() {
		return empresa;
	}

	public void setEmpresa(String empresa) {
		this.empresa = empresa;
	}

	public Date getDataHoje() {
		return dataHoje;
	}

	public void setDataHoje(Date dataHoje) {
		this.dataHoje = dataHoje;
	}

	public List<ContratoCobrancaParcelasInvestidor> getSelectedListContratoCobrancaParcelasInvestidor() {
		return selectedListContratoCobrancaParcelasInvestidor;
	}

	public void setSelectedListContratoCobrancaParcelasInvestidor(
			List<ContratoCobrancaParcelasInvestidor> selectedListContratoCobrancaParcelasInvestidor) {
		this.selectedListContratoCobrancaParcelasInvestidor = selectedListContratoCobrancaParcelasInvestidor;
	}

	public List<ContratoCobrancaParcelasInvestidor> getSelectedListContratoCobrancaParcelasInvestidor2() {
		return selectedListContratoCobrancaParcelasInvestidor2;
	}

	public void setSelectedListContratoCobrancaParcelasInvestidor2(
			List<ContratoCobrancaParcelasInvestidor> selectedListContratoCobrancaParcelasInvestidor2) {
		this.selectedListContratoCobrancaParcelasInvestidor2 = selectedListContratoCobrancaParcelasInvestidor2;
	}

	public List<ContratoCobrancaParcelasInvestidor> getSelectedListContratoCobrancaParcelasInvestidor3() {
		return selectedListContratoCobrancaParcelasInvestidor3;
	}

	public void setSelectedListContratoCobrancaParcelasInvestidor3(
			List<ContratoCobrancaParcelasInvestidor> selectedListContratoCobrancaParcelasInvestidor3) {
		this.selectedListContratoCobrancaParcelasInvestidor3 = selectedListContratoCobrancaParcelasInvestidor3;
	}

	public List<ContratoCobrancaParcelasInvestidor> getSelectedListContratoCobrancaParcelasInvestidor4() {
		return selectedListContratoCobrancaParcelasInvestidor4;
	}

	public void setSelectedListContratoCobrancaParcelasInvestidor4(
			List<ContratoCobrancaParcelasInvestidor> selectedListContratoCobrancaParcelasInvestidor4) {
		this.selectedListContratoCobrancaParcelasInvestidor4 = selectedListContratoCobrancaParcelasInvestidor4;
	}

	public List<ContratoCobrancaParcelasInvestidor> getSelectedListContratoCobrancaParcelasInvestidor5() {
		return selectedListContratoCobrancaParcelasInvestidor5;
	}

	public void setSelectedListContratoCobrancaParcelasInvestidor5(
			List<ContratoCobrancaParcelasInvestidor> selectedListContratoCobrancaParcelasInvestidor5) {
		this.selectedListContratoCobrancaParcelasInvestidor5 = selectedListContratoCobrancaParcelasInvestidor5;
	}

	public List<ContratoCobrancaParcelasInvestidor> getSelectedListContratoCobrancaParcelasInvestidor6() {
		return selectedListContratoCobrancaParcelasInvestidor6;
	}

	public void setSelectedListContratoCobrancaParcelasInvestidor6(
			List<ContratoCobrancaParcelasInvestidor> selectedListContratoCobrancaParcelasInvestidor6) {
		this.selectedListContratoCobrancaParcelasInvestidor6 = selectedListContratoCobrancaParcelasInvestidor6;
	}

	public List<ContratoCobrancaParcelasInvestidor> getSelectedListContratoCobrancaParcelasInvestidor7() {
		return selectedListContratoCobrancaParcelasInvestidor7;
	}

	public void setSelectedListContratoCobrancaParcelasInvestidor7(
			List<ContratoCobrancaParcelasInvestidor> selectedListContratoCobrancaParcelasInvestidor7) {
		this.selectedListContratoCobrancaParcelasInvestidor7 = selectedListContratoCobrancaParcelasInvestidor7;
	}

	public List<ContratoCobrancaParcelasInvestidor> getSelectedListContratoCobrancaParcelasInvestidor8() {
		return selectedListContratoCobrancaParcelasInvestidor8;
	}

	public void setSelectedListContratoCobrancaParcelasInvestidor8(
			List<ContratoCobrancaParcelasInvestidor> selectedListContratoCobrancaParcelasInvestidor8) {
		this.selectedListContratoCobrancaParcelasInvestidor8 = selectedListContratoCobrancaParcelasInvestidor8;
	}

	public List<ContratoCobrancaParcelasInvestidor> getSelectedListContratoCobrancaParcelasInvestidor9() {
		return selectedListContratoCobrancaParcelasInvestidor9;
	}

	public void setSelectedListContratoCobrancaParcelasInvestidor9(
			List<ContratoCobrancaParcelasInvestidor> selectedListContratoCobrancaParcelasInvestidor9) {
		this.selectedListContratoCobrancaParcelasInvestidor9 = selectedListContratoCobrancaParcelasInvestidor9;
	}

	public List<ContratoCobrancaParcelasInvestidor> getSelectedListContratoCobrancaParcelasInvestidor10() {
		return selectedListContratoCobrancaParcelasInvestidor10;
	}

	public void setSelectedListContratoCobrancaParcelasInvestidor10(
			List<ContratoCobrancaParcelasInvestidor> selectedListContratoCobrancaParcelasInvestidor10) {
		this.selectedListContratoCobrancaParcelasInvestidor10 = selectedListContratoCobrancaParcelasInvestidor10;
	}

	public boolean isTipoPessoaIsFisicaCC() {
		return tipoPessoaIsFisicaCC;
	}

	public void setTipoPessoaIsFisicaCC(boolean tipoPessoaIsFisicaCC) {
		this.tipoPessoaIsFisicaCC = tipoPessoaIsFisicaCC;
	}

	public Collection<ContratoCobranca> getContratos() {
		return contratos;
	}

	public void setContratos(Collection<ContratoCobranca> contratos) {
		this.contratos = contratos;
	}

	public boolean isCrmMode() {
		return crmMode;
	}

	public void setCrmMode(boolean crmMode) {
		this.crmMode = crmMode;
	}

	public boolean isPreContratoCustom() {
		return preContratoCustom;
	}

	public void setPreContratoCustom(boolean preContratoCustom) {
		this.preContratoCustom = preContratoCustom;
	}

	public InvestidorMB getInvestidorMB() {
		return investidorMB;
	}

	public void setInvestidorMB(InvestidorMB investidorMB) {
		this.investidorMB = investidorMB;
	}

	public BigDecimal getVlrRepasseNew() {
		return vlrRepasseNew;
	}

	public void setVlrRepasseNew(BigDecimal vlrRepasseNew) {
		this.vlrRepasseNew = vlrRepasseNew;
	}

	public BigDecimal getVlrRetencaoNew() {
		return vlrRetencaoNew;
	}

	public void setVlrRetencaoNew(BigDecimal vlrRetencaoNew) {
		this.vlrRetencaoNew = vlrRetencaoNew;
	}

	public BigDecimal getVlrComissaoNew() {
		return vlrComissaoNew;
	}

	public void setVlrComissaoNew(BigDecimal vlrComissaoNew) {

		this.vlrComissaoNew = vlrComissaoNew;
	}

	public DualListModel<PagadorRecebedor> getDualListModelRecebedores() {
		return dualListModelRecebedores;
	}

	public void setDualListModelRecebedores(DualListModel<PagadorRecebedor> dualListModelRecebedores) {
		this.dualListModelRecebedores = dualListModelRecebedores;
	}

	public List<PagadorRecebedor> getListRecebedoresSeleciodados() {
		return listRecebedoresSeleciodados;
	}

	public void setListRecebedoresSeleciodados(List<PagadorRecebedor> listRecebedoresSeleciodados) {
		this.listRecebedoresSeleciodados = listRecebedoresSeleciodados;
	}

	public List<ContratoCobrancaParcelasInvestidor> getSelectedParcelasInvestidorCorrespondente() {
		return selectedParcelasInvestidorCorrespondente;
	}

	public void setSelectedParcelasInvestidorCorrespondente(
			List<ContratoCobrancaParcelasInvestidor> selectedParcelasInvestidorCorrespondente) {
		this.selectedParcelasInvestidorCorrespondente = selectedParcelasInvestidorCorrespondente;
	}

	public List<ContratoCobrancaParcelasInvestidor> getSelectedParcelasInvestidorSA() {
		return selectedParcelasInvestidorSA;
	}

	public void setSelectedParcelasInvestidorSA(List<ContratoCobrancaParcelasInvestidor> selectedParcelasInvestidorSA) {
		this.selectedParcelasInvestidorSA = selectedParcelasInvestidorSA;
	}

	public List<ContratoCobrancaParcelasInvestidor> getSelectedParcelasInvestidorEnvelope() {
		return selectedParcelasInvestidorEnvelope;
	}

	public void setSelectedParcelasInvestidorEnvelope(
			List<ContratoCobrancaParcelasInvestidor> selectedParcelasInvestidorEnvelope) {
		this.selectedParcelasInvestidorEnvelope = selectedParcelasInvestidorEnvelope;
	}

	public List<ContratoCobrancaFinancerioDiaConsultaVO> getContratoCobrancaFinanceiroDia() {
		return contratoCobrancaFinanceiroDia;
	}

	public void setContratoCobrancaFinanceiroDia(
			List<ContratoCobrancaFinancerioDiaConsultaVO> contratoCobrancaFinanceiroDia) {
		this.contratoCobrancaFinanceiroDia = contratoCobrancaFinanceiroDia;
	}

	public CRMMB getCrmmb() {
		return crmmb;
	}

	public void setCrmmb(CRMMB crmmb) {
		this.crmmb = crmmb;
	}

	public int getIdAntecipacaoInvestidor() {
		return idAntecipacaoInvestidor;
	}

	public void setIdAntecipacaoInvestidor(int idAntecipacaoInvestidor) {
		this.idAntecipacaoInvestidor = idAntecipacaoInvestidor;
	}

	public ContratoCobrancaParcelasInvestidor getAntecipacao() {
		return antecipacao;
	}

	public void setAntecipacao(ContratoCobrancaParcelasInvestidor antecipacao) {
		this.antecipacao = antecipacao;
	}

	public SimulacaoVO getSimuladorParcelas() {
		return simuladorParcelas;
	}

	public void setSimuladorParcelas(SimulacaoVO simuladorParcelas) {
		this.simuladorParcelas = simuladorParcelas;
	}

	public BigInteger getNumeroParcelaReparcelamento() {
		return numeroParcelaReparcelamento;
	}

	public void setNumeroParcelaReparcelamento(BigInteger numeroParcelaReparcelamento) {
		this.numeroParcelaReparcelamento = numeroParcelaReparcelamento;
	}

	public Date getDataParcela() {
		return dataParcela;
	}

	public void setDataParcela(Date dataParcela) {
		this.dataParcela = dataParcela;
	}

	public BigDecimal getSaldoDevedorReparcelamento() {
		return saldoDevedorReparcelamento;
	}

	public void setSaldoDevedorReparcelamento(BigDecimal saldoDevedorReparcelamento) {
		this.saldoDevedorReparcelamento = saldoDevedorReparcelamento;
	}

	public BigInteger getCarenciaReparcelamento() {
		return carenciaReparcelamento;
	}

	public void setCarenciaReparcelamento(BigInteger carenciaReparcelamento) {
		this.carenciaReparcelamento = carenciaReparcelamento;
	}

	public ContratoCobrancaDetalhes getAmortizacao() {
		return amortizacao;
	}

	public void setAmortizacao(ContratoCobrancaDetalhes amortizacao) {
		this.amortizacao = amortizacao;
	}

	public Set<Segurado> getListSegurado() {
		return this.objetoContratoCobranca.getListSegurados();
	}

	public void setListSegurado(Set<Segurado> listSegurado) {
		this.objetoContratoCobranca.setListSegurados(listSegurado);
	}

	public String getTipoPesquisaPagadorRecebedor() {
		return tipoPesquisaPagadorRecebedor;
	}

	public void setTipoPesquisaPagadorRecebedor(String tipoPesquisaPagadorRecebedor) {
		this.tipoPesquisaPagadorRecebedor = tipoPesquisaPagadorRecebedor;
	}

	public Segurado getSeguradoSelecionado() {
		return seguradoSelecionado;
	}

	public void setSeguradoSelecionado(Segurado seguradoSelecionado) {
		this.seguradoSelecionado = seguradoSelecionado;
	}

	public PagadorRecebedorSocio getSocioSelecionado() {
		return socioSelecionado;
	}

	public void setSocioSelecionado(PagadorRecebedorSocio socioSelecionado) {
		this.socioSelecionado = socioSelecionado;
	}

	public boolean isAddSegurador() {
		return addSegurador;
	}

	public void setAddSegurador(boolean addSegurador) {
		this.addSegurador = addSegurador;
	}

	public boolean isAddSocio() {
		return addSocio;
	}

	public void setAddSocio(boolean addSocio) {
		this.addSocio = addSocio;
	}

	public String getUpdatePagadorRecebedor() {
		return updatePagadorRecebedor;
	}

	public void setUpdatePagadorRecebedor(String updatePagadorRecebedor) {
		this.updatePagadorRecebedor = updatePagadorRecebedor;
	}

	public Date getRelDataContratoInicioAtraso() {
		return relDataContratoInicioAtraso;
	}

	public String getUpdateResponsavel() {
		return updateResponsavel;
	}

	public void setUpdateResponsavel(String updateResponsavel) {
		this.updateResponsavel = updateResponsavel;
	}

	public void setRelDataContratoInicioAtraso(Date relDataContratoInicioAtraso) {
		this.relDataContratoInicioAtraso = relDataContratoInicioAtraso;
	}

	public Date getRelDataContratoFimAtraso() {
		return relDataContratoFimAtraso;
	}

	public void setRelDataContratoFimAtraso(Date relDataContratoFimAtraso) {
		this.relDataContratoFimAtraso = relDataContratoFimAtraso;
	}

	public String getTituloTelaConsultaPreStatus() {
		return tituloTelaConsultaPreStatus;
	}

	public void setTituloTelaConsultaPreStatus(String tituloTelaConsultaPreStatus) {
		this.tituloTelaConsultaPreStatus = tituloTelaConsultaPreStatus;
	}

	public int getIndexStepsStatusContrato() {
		return indexStepsStatusContrato;
	}

	public void setIndexStepsStatusContrato(int indexStepsStatusContrato) {
		this.indexStepsStatusContrato = indexStepsStatusContrato;
	}

	public Date getDataPrevistaVistoria() {
		return dataPrevistaVistoria;
	}

	public void setDataPrevistaVistoria(Date dataPrevistaVistoria) {
		this.dataPrevistaVistoria = dataPrevistaVistoria;
	}

	public BigDecimal getValorBoletoPreContrato() {
		return valorBoletoPreContrato;
	}

	public void setValorBoletoPreContrato(BigDecimal valorBoletoPreContrato) {
		this.valorBoletoPreContrato = valorBoletoPreContrato;
	}

	public BigDecimal getTaxaPreAprovada() {
		return taxaPreAprovada;
	}

	public void setTaxaPreAprovada(BigDecimal taxaPreAprovada) {
		this.taxaPreAprovada = taxaPreAprovada;
	}

	public BigDecimal getValorMercadoImovel() {
		return valorMercadoImovel;
	}

	public void setValorMercadoImovel(BigDecimal valorMercadoImovel) {
		this.valorMercadoImovel = valorMercadoImovel;
	}

	public BigDecimal getValorVendaForçadaImóvel() {
		return valorVendaForçadaImóvel;
	}

	public void setValorVendaForçadaImóvel(BigDecimal valorVendaForçadaImóvel) {
		this.valorVendaForçadaImóvel = valorVendaForçadaImóvel;
	}

	public String getComentarioJuridico() {
		return comentarioJuridico;
	}

	public void setComentarioJuridico(String comentarioJuridico) {
		this.comentarioJuridico = comentarioJuridico;
	}

	public void setAddPagadorPreContrato(Boolean addPagadorPreContrato) {
		this.addPagadorPreContrato = addPagadorPreContrato;
	}

	public Boolean getAddPagadorPreContrato() {
		return addPagadorPreContrato;
	}

	public BigInteger getPrazoMaxPreAprovado() {
		return prazoMaxPreAprovado;
	}

	public void setPrazoMaxPreAprovado(BigInteger prazoMaxPreAprovado) {
		this.prazoMaxPreAprovado = prazoMaxPreAprovado;
	}

	public String getValorBoletoStr() {
		return valorBoletoStr;
	}

	public void setValorBoletoStr(String valorBoletoStr) {
		this.valorBoletoStr = valorBoletoStr;
	}

	public String getTituloPagadorRecebedorDialog() {
		return tituloPagadorRecebedorDialog;
	}

	public void setTituloPagadorRecebedorDialog(String tituloPagadorRecebedorDialog) {
		this.tituloPagadorRecebedorDialog = tituloPagadorRecebedorDialog;
	}

	public List<ContratoCobrancaFinancerioDiaConsultaVO> getSelectedContratoCobrancaFinanceiroDia() {
		return selectedContratoCobrancaFinanceiroDia;
	}

	public void setSelectedContratoCobrancaFinanceiroDia(
			List<ContratoCobrancaFinancerioDiaConsultaVO> selectedContratoCobrancaFinanceiroDia) {
		this.selectedContratoCobrancaFinanceiroDia = selectedContratoCobrancaFinanceiroDia;
	}

	public String getTipoContratoCobrancaFinanceiroDia() {
		return tipoContratoCobrancaFinanceiroDia;
	}

	public void setTipoContratoCobrancaFinanceiroDia(String tipoContratoCobrancaFinanceiroDia) {
		this.tipoContratoCobrancaFinanceiroDia = tipoContratoCobrancaFinanceiroDia;
	}

	public int getTotalContratosConsultar() {
		return totalContratosConsultar;
	}

	public void setTotalContratosConsultar(int totalContratosConsultar) {
		this.totalContratosConsultar = totalContratosConsultar;
	}

	public BigDecimal getVolumeCarteira() {
		return volumeCarteira;
	}

	public void setVolumeCarteira(BigDecimal volumeCarteira) {
		this.volumeCarteira = volumeCarteira;
	}

	public BigDecimal getValorUltimaPareclaPaga() {
		return valorUltimaPareclaPaga;
	}

	public void setValorUltimaPareclaPaga(BigDecimal valorUltimaPareclaPaga) {
		this.valorUltimaPareclaPaga = valorUltimaPareclaPaga;
	}

	public BigDecimal getSomaContratos180() {
		return somaContratos180;
	}

	public void setSomaContratos180(BigDecimal somaContratos180) {
		this.somaContratos180 = somaContratos180;
	}

	public BigDecimal getPorcentagem180() {
		return porcentagem180;
	}

	public void setPorcentagem180(BigDecimal porcentagem180) {
		this.porcentagem180 = porcentagem180;
	}

	public BigDecimal getPorcentagem240() {
		return porcentagem240;
	}

	public void setPorcentagem240(BigDecimal porcentagem240) {
		this.porcentagem240 = porcentagem240;
	}

	public BigDecimal getInadimplencia30Porcentagem() {
		return inadimplencia30Porcentagem;
	}

	public void setInadimplencia30Porcentagem(BigDecimal inadimplencia30Porcentagem) {
		this.inadimplencia30Porcentagem = inadimplencia30Porcentagem;
	}

	public BigDecimal getInadimplencia60Porcentagem() {
		return inadimplencia60Porcentagem;
	}

	public void setInadimplencia60Porcentagem(BigDecimal inadimplencia60Porcentagem) {
		this.inadimplencia60Porcentagem = inadimplencia60Porcentagem;
	}

	public BigDecimal getInadimplencia90Porcentagem() {
		return inadimplencia90Porcentagem;
	}

	public void setInadimplencia90Porcentagem(BigDecimal inadimplencia90Porcentagem) {
		this.inadimplencia90Porcentagem = inadimplencia90Porcentagem;
	}

	public Collection<ContratoCobranca> getContratosInadimplencia30() {
		return contratosInadimplencia30;
	}

	public void setContratosInadimplencia30(Collection<ContratoCobranca> contratosInadimplencia30) {
		this.contratosInadimplencia30 = contratosInadimplencia30;
	}

	public Collection<ContratoCobranca> getContratosInadimplencia60() {
		return contratosInadimplencia60;
	}

	public void setContratosInadimplencia60(Collection<ContratoCobranca> contratosInadimplencia60) {
		this.contratosInadimplencia60 = contratosInadimplencia60;
	}

	public Collection<ContratoCobranca> getContratosInadimplencia90() {
		return contratosInadimplencia90;
	}

	public void setContratosInadimplencia90(Collection<ContratoCobranca> contratosInadimplencia90) {
		this.contratosInadimplencia90 = contratosInadimplencia90;
	}

	public PagadorRecebedorAdicionais getPagadorSecundarioSelecionado() {
		return pagadorSecundarioSelecionado;
	}

	public void setPagadorSecundarioSelecionado(PagadorRecebedorAdicionais pagadorSecundarioSelecionado) {
		this.pagadorSecundarioSelecionado = pagadorSecundarioSelecionado;
	}

	public boolean isAddPagador() {
		return addPagador;
	}

	public void setAddPagador(boolean addPagador) {
		this.addPagador = addPagador;
	}

	public ContasPagar getContasPagarSelecionada() {
		return contasPagarSelecionada;
	}

	public void setContasPagarSelecionada(ContasPagar contasPagarSelecionada) {
		this.contasPagarSelecionada = contasPagarSelecionada;
	}

	public boolean isAddContasPagar() {
		return addContasPagar;
	}

	public void setAddContasPagar(boolean addContasPagar) {
		this.addContasPagar = addContasPagar;
	}

	public boolean isAddPessoaAnalise() {
		return addPessoaAnalise;
	}

	public void setAddPessoaAnalise(boolean addPessoaAnalise) {
		this.addPessoaAnalise = addPessoaAnalise;
	}

	public AnaliseComite getObjetoAnaliseComite() {
		return objetoAnaliseComite;
	}

	public void setObjetoAnaliseComite(AnaliseComite objetoAnaliseComite) {
		this.objetoAnaliseComite = objetoAnaliseComite;
	}

	public String getParametroConsultaContrato() {
		return parametroConsultaContrato;
	}

	public void setParametroConsultaContrato(String parametroConsultaContrato) {
		this.parametroConsultaContrato = parametroConsultaContrato;
	}

	public String getTipoParametroConsultaContrato() {
		return tipoParametroConsultaContrato;
	}

	public void setTipoParametroConsultaContrato(String tipoParametroConsultaContrato) {
		this.tipoParametroConsultaContrato = tipoParametroConsultaContrato;
	}

	public boolean isControleWhatsAppAgAssintura() {
		return controleWhatsAppAgAssintura;
	}

	public void setControleWhatsAppAgAssintura(boolean controleWhatsAppAgAssintura) {
		this.controleWhatsAppAgAssintura = controleWhatsAppAgAssintura;
	}

	public BigDecimal getPrazoMax() {
		return prazoMax;
	}

	public void setPrazoMax(BigDecimal prazoMax) {
		this.prazoMax = prazoMax;
	}

	public BigDecimal getPrazoMedio() {
		return prazoMedio;
	}

	public void setPrazoMedio(BigDecimal prazoMedio) {
		this.prazoMedio = prazoMedio;
	}

	public BigDecimal getPrazoMin() {
		return prazoMin;
	}

	public void setPrazoMin(BigDecimal prazoMin) {
		this.prazoMin = prazoMin;
	}

	public BigDecimal getTaxaMax() {
		return taxaMax;
	}

	public void setTaxaMax(BigDecimal taxaMax) {
		this.taxaMax = taxaMax;
	}

	public BigDecimal getTaxaMedia() {
		return taxaMedia;
	}

	public void setTaxaMedia(BigDecimal taxaMedia) {
		this.taxaMedia = taxaMedia;
	}

	public BigDecimal getTaxaMin() {
		return taxaMin;
	}

	public void setTaxaMin(BigDecimal taxaMin) {
		this.taxaMin = taxaMin;
	}

	public BigDecimal getLtvMax() {
		return ltvMax;
	}

	public void setLtvMax(BigDecimal ltvMax) {
		this.ltvMax = ltvMax;
	}

	public BigDecimal getLtvMedio() {
		return ltvMedio;
	}

	public void setLtvMedio(BigDecimal ltvMedio) {
		this.ltvMedio = ltvMedio;
	}

	public BigDecimal getLtvMin() {
		return ltvMin;
	}

	public void setLtvMin(BigDecimal ltvMin) {
		this.ltvMin = ltvMin;
	}

	public BigDecimal getTotalAVencer() {
		return totalAVencer;
	}

	public void setTotalAVencer(BigDecimal totalAVencer) {
		this.totalAVencer = totalAVencer;
	}

	public BigDecimal getTaxaMaxIPCA() {
		return taxaMaxIPCA;
	}

	public void setTaxaMaxIPCA(BigDecimal taxaMaxIPCA) {
		this.taxaMaxIPCA = taxaMaxIPCA;
	}

	public BigDecimal getTaxaMediaIPCA() {
		return taxaMediaIPCA;
	}

	public void setTaxaMediaIPCA(BigDecimal taxaMediaIPCA) {
		this.taxaMediaIPCA = taxaMediaIPCA;
	}

	public BigDecimal getTaxaMinIPCA() {
		return taxaMinIPCA;
	}

	public void setTaxaMinIPCA(BigDecimal taxaMinIPCA) {
		this.taxaMinIPCA = taxaMinIPCA;
	}

	public Date getDataInicio() {
		return dataInicio;
	}

	public void setDataInicio(Date dataInicio) {
		this.dataInicio = dataInicio;
	}

	public Date getDataFim() {
		return dataFim;
	}

	public void setDataFim(Date dataFim) {
		this.dataFim = dataFim;
	}

	public Collection<ContratoCobranca> getListaContratos() {
		return listaContratos;
	}

	public void setListaContratos(Collection<ContratoCobranca> listaContratos) {
		this.listaContratos = listaContratos;
	}

	public List<Responsavel> getListResponsavel() {
		return listResponsavel;
	}

	public void setListResponsavel(List<Responsavel> listResponsavel) {
		this.listResponsavel = listResponsavel;
	}

	public BarChartModel getStackedGroupBarModel() {
		return stackedGroupBarModel;
	}

	public void setStackedGroupBarModel(BarChartModel stackedGroupBarModel) {
		this.stackedGroupBarModel = stackedGroupBarModel;
	}

	public Collection<ContratoCobranca> getContratoPrazoMin() {
		return contratoPrazoMin;
	}

	public void setContratoPrazoMin(Collection<ContratoCobranca> contratoPrazoMin) {
		this.contratoPrazoMin = contratoPrazoMin;
	}

	public long getIdAnalistaGeracaoPAJU() {
		return idAnalistaGeracaoPAJU;
	}

	public void setIdAnalistaGeracaoPAJU(long idAnalistaGeracaoPAJU) {
		this.idAnalistaGeracaoPAJU = idAnalistaGeracaoPAJU;
	}

	public boolean isFinanceiroGalleria() {
		return financeiroGalleria;
	}

	public void setFinanceiroGalleria(boolean financeiroGalleria) {
		this.financeiroGalleria = financeiroGalleria;
	}

	public Collection<FileUploaded> getFilesComite() {
		return filesComite;
	}

	public void setFilesComite(Collection<FileUploaded> filesComite) {
		this.filesComite = filesComite;
	}

	public List<FileUploaded> getDeletefilesComite() {
		return deletefilesComite;
	}

	public void setDeletefilesComite(List<FileUploaded> deletefilesComite) {
		this.deletefilesComite = deletefilesComite;
	}

	public Collection<FileUploaded> getFilesPagar() {
		return filesPagar;
	}

	public void setFilesPagar(Collection<FileUploaded> filesPagar) {
		this.filesPagar = filesPagar;
	}

	public List<FileUploaded> getDeletefilesPagar() {
		return deletefilesPagar;
	}

	public void setDeletefilesPagar(List<FileUploaded> deletefilesPagar) {
		this.deletefilesPagar = deletefilesPagar;
	}

	public BigDecimal getVlrCustosDiversosBaixa() {
		return vlrCustosDiversosBaixa;
	}

	public void setVlrCustosDiversosBaixa(BigDecimal vlrCustosDiversosBaixa) {
		this.vlrCustosDiversosBaixa = vlrCustosDiversosBaixa;
	}

	public boolean isBaixaCustosDiversos() {
		return baixaCustosDiversos;
	}

	public void setBaixaCustosDiversos(boolean baixaCustosDiversos) {
		this.baixaCustosDiversos = baixaCustosDiversos;
	}

	public Collection<ContratosPagadorAnalisadoVO> getContratosPagadorAnalisado() {
		return contratosPagadorAnalisado;
	}

	public void setContratosPagadorAnalisado(Collection<ContratosPagadorAnalisadoVO> contratosPagadorAnalisado) {
		this.contratosPagadorAnalisado = contratosPagadorAnalisado;
	}

	public Collection<ContratoCobranca> getContratosImovelAnalisado() {
		return contratosImovelAnalisado;
	}

	public void setContratosImovelAnalisado(Collection<ContratoCobranca> contratosImovelAnalisado) {
		this.contratosImovelAnalisado = contratosImovelAnalisado;
	}

	public boolean isGerenciaStatus() {
		return gerenciaStatus;
	}

	public void setGerenciaStatus(boolean gerenciaStatus) {
		this.gerenciaStatus = gerenciaStatus;
	}

	/*
	 * public boolean isTipoResponsavelIsFisica() { return tipoResponsavelIsFisica;
	 * }
	 * 
	 * public void setTipoResponsavelIsFisica(boolean tipoResponsavelIsFisica) {
	 * this.tipoResponsavelIsFisica = tipoResponsavelIsFisica; }
	 */

	public String getCpfCCResp() {
		return cpfCCResp;
	}

	public void setCpfCCResp(String cpfCCResp) {
		this.cpfCCResp = cpfCCResp;
	}

	public String getCnpjCCResp() {
		return cnpjCCResp;
	}

	public void setCnpjCCResp(String cnpjCCResp) {
		this.cnpjCCResp = cnpjCCResp;
	}

	public String getCpfCnpjCCResp() {
		return cpfCnpjCCResp;
	}

	public void setCpfCnpjCCResp(String cpfCnpjCCResp) {
		this.cpfCnpjCCResp = cpfCnpjCCResp;
	}

	public String getNomeCCResp() {
		return nomeCCResp;
	}

	public void setNomeCCResp(String nomeCCResp) {
		this.nomeCCResp = nomeCCResp;
	}

	public String getBancoResp() {
		return bancoResp;
	}

	public void setBancoResp(String bancoResp) {
		this.bancoResp = bancoResp;
	}

	public String getAgenciaResp() {
		return agenciaResp;
	}

	public void setAgenciaResp(String agenciaResp) {
		this.agenciaResp = agenciaResp;
	}

	public String getContaResp() {
		return contaResp;
	}

	public void setContaResp(String contaResp) {
		this.contaResp = contaResp;
	}

	public String getPixResp() {
		return pixResp;
	}

	public void setPixResp(String pixResp) {
		this.pixResp = pixResp;
	}

	public void setCallMetodoPorDialogBaixaParcial(boolean callMetodoPorDialogBaixaParcial) {
		clearFieldsBaixar();
	}

	public boolean isBaixaCustasDiversas() {
		return baixaCustasDiversas;
	}

	public void setBaixaCustasDiversas(boolean baixaCustasDiversas) {
		this.baixaCustasDiversas = baixaCustasDiversas;
	}

	public boolean isInserirImovelDisable() {
		return inserirImovelDisable;
	}

	public void setInserirImovelDisable(boolean inserirImovelDisable) {
		this.inserirImovelDisable = inserirImovelDisable;
	}

	public boolean isInserirImovelOcultarValorMercadoImovel() {
		return inserirImovelOcultarValorMercadoImovel;
	}

	public void setInserirImovelOcultarValorMercadoImovel(boolean inserirImovelOcultarValorMercadoImovel) {
		this.inserirImovelOcultarValorMercadoImovel = inserirImovelOcultarValorMercadoImovel;
	}

	public PagadorRecebedor getCedente() {
		return cedente;
	}

	public void setCedente(PagadorRecebedor cedente) {
		this.cedente = cedente;
	}

	public Date getFiltroDataCorteRelatorioDia() {
		return filtroDataCorteRelatorioDia;
	}

	public void setFiltroDataCorteRelatorioDia(Date filtroDataCorteRelatorioDia) {
		this.filtroDataCorteRelatorioDia = filtroDataCorteRelatorioDia;
	}

	public boolean isConsideraDataCorteRelatorioDia() {
		return consideraDataCorteRelatorioDia;
	}

	public void setConsideraDataCorteRelatorioDia(boolean consideraDataCorteRelatorioDia) {
		this.consideraDataCorteRelatorioDia = consideraDataCorteRelatorioDia;
	}

	public ContasPagar getContasPagarArquivos() {
		return contasPagarArquivos;
	}

	public void setContasPagarArquivos(ContasPagar contasPagarArquivos) {
		this.contasPagarArquivos = contasPagarArquivos;
	}

	public List<ContratoCobrancaDetalhes> getSelectedParcelas() {
		return selectedParcelas;
	}

	public void setSelectedParcelas(List<ContratoCobrancaDetalhes> selectedParcelas) {
		this.selectedParcelas = selectedParcelas;
	}

	public String getTituloTelaLead() {
		return tituloTelaLead;
	}

	public void setTituloTelaLead(String tituloTelaLead) {
		this.tituloTelaLead = tituloTelaLead;
	}

	public List<BoletoKobana> getSelectedBoletosKobana() {
		return selectedBoletosKobana;
	}

	public void setSelectedBoletosKobana(List<BoletoKobana> selectedBoletosKobana) {
		this.selectedBoletosKobana = selectedBoletosKobana;
	}

	public DataVistoria getDataVistoriaSelecionada() {
		return dataVistoriaSelecionada;
	}

	public void setDataVistoriaSelecionada(DataVistoria dataVistoriaSelecionada) {
		this.dataVistoriaSelecionada = dataVistoriaSelecionada;
	}

	public CcbProcessosJudiciais getProcessoSelecionado() {
		return processoSelecionado;
	}

	public void setProcessoSelecionado(CcbProcessosJudiciais processoSelecionado) {
		this.processoSelecionado = processoSelecionado;
	}

	public boolean isMostrarTodosProcessos() {
		return mostrarTodosProcessos;
	}

	public void setMostrarTodosProcessos(boolean mostrarTodosProcessos) {
		this.mostrarTodosProcessos = mostrarTodosProcessos;
	}

	public PagadorRecebedor getPagadorProcesso() {
		return pagadorProcesso;
	}

	public void setPagadorProcesso(PagadorRecebedor pagadorProcesso) {
		this.pagadorProcesso = pagadorProcesso;
	}

	public boolean isTipoPagadorProcesso() {
		return tipoPagadorProcesso;
	}

	public void setTipoPagadorProcesso(boolean tipoPagadorProcesso) {
		this.tipoPagadorProcesso = tipoPagadorProcesso;
	}

	public List<PagadorRecebedor> getPessoasProcessos() {
		return pessoasProcessos;
	}

	public void setPessoasProcessos(List<PagadorRecebedor> pessoasProcessos) {
		this.pessoasProcessos = pessoasProcessos;
	}

	public Averbacao getAverbacaoSelecionada() {
		return averbacaoSelecionada;
	}

	public void setAverbacaoSelecionada(Averbacao averbacaoSelecionada) {
		this.averbacaoSelecionada = averbacaoSelecionada;
	}

	public DocumentoAnalise getDocumentoAnaliseAdicionar() {
		return documentoAnaliseAdicionar;
	}

	public void setDocumentoAnaliseAdicionar(DocumentoAnalise documentoAnaliseAdicionar) {
		this.documentoAnaliseAdicionar = documentoAnaliseAdicionar;
	}

	public DocumentoAnalise getDocumentoAnalisePopup() {
		return documentoAnalisePopup;
	}

	public void setDocumentoAnalisePopup(DocumentoAnalise documentoAnalisePopup) {
		this.documentoAnalisePopup = documentoAnalisePopup;
	}

	public boolean isBaixaMultiParcelasComTxADM() {
		return baixaMultiParcelasComTxADM;
	}

	public void setBaixaMultiParcelasComTxADM(boolean baixaMultiParcelasComTxADM) {
		this.baixaMultiParcelasComTxADM = baixaMultiParcelasComTxADM;
	}

	public List<DocumentoAnalise> getListaDeleteAnalise() {
		return listaDeleteAnalise;
	}

	public void setListaDeleteAnalise(List<DocumentoAnalise> listaDeleteAnalise) {

		this.listaDeleteAnalise = listaDeleteAnalise;
	}

	public String getContratosLaudo() {
		return contratosLaudo;
	}

	public void setContratosLaudo(String contratosLaudo) {
		this.contratosLaudo = contratosLaudo;
	}

	public String getContratoDocumentos() {
		return contratoDocumentos;
	}

	public void setContratoDocumentos(String contratoDocumentos) {
		this.contratoDocumentos = contratoDocumentos;
	}

	public String pathComprovanteStarkBank;
	public String nomeComprovanteStarkBank;

	public StreamedContent getDownloadComprovanteStarkBankCartaSplit(ContratoCobranca contrato) {
		FacesContext context = FacesContext.getCurrentInstance();

		StarkBankBaixa baixa = null;

		for (ContasPagar contas : contrato.getListContasPagar()) {
			if (contas.getDescricao().equals("")) {
				if (contas.getListContasPagarBaixas().size() > 0) {
					baixa = contas.getListContasPagarBaixas().get(0);
				}
			}
		}

		if (baixa != null) {
			geraReciboPagamentoStarkBank(baixa);

			String caminho = this.pathComprovanteStarkBank + this.nomeComprovanteStarkBank;
			String arquivo = this.nomeComprovanteStarkBank;
			FileInputStream stream = null;

			try {
				stream = new FileInputStream(caminho);
				downloadComprovanteStarkBank = new DefaultStreamedContent(stream, this.pathComprovanteStarkBank,
						this.nomeComprovanteStarkBank);
			} catch (FileNotFoundException e) {
				// TODO Auto-generated catch block
				System.out.println("StarkBank - Comprovante não encontrado!");
			}

			context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_INFO,
					"[Stark Bank - Recibo de Pagamento] Recibo de pagamento gerado com sucesso!", ""));
		}

		return this.downloadComprovanteStarkBank;
	}

	public StreamedContent getDownloadComprovanteStarkBank(StarkBankBaixa baixaStarkBank) {
		FacesContext context = FacesContext.getCurrentInstance();

		geraReciboPagamentoStarkBank(baixaStarkBank);

		String caminho = this.pathComprovanteStarkBank + this.nomeComprovanteStarkBank;
		String arquivo = this.nomeComprovanteStarkBank;
		FileInputStream stream = null;

		try {
			stream = new FileInputStream(caminho);
			downloadComprovanteStarkBank = new DefaultStreamedContent(stream, this.pathComprovanteStarkBank,
					this.nomeComprovanteStarkBank);
		} catch (FileNotFoundException e) {
			// TODO Auto-generated catch block
			System.out.println("StarkBank - Comprovante não encontrado!");
		}

		context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_INFO,
				"[Stark Bank - Recibo de Pagamento] Recibo de pagamento gerado com sucesso!", ""));

		return this.downloadComprovanteStarkBank;
	}

	public void setDownloadComprovanteStarkBank(StreamedContent downloadComprovanteStarkBank) {
		this.downloadComprovanteStarkBank = downloadComprovanteStarkBank;
	}

	public boolean isComprovanteStarkBankGerado() {
		return comprovanteStarkBankGerado;
	}

	public void setComprovanteStarkBankGerado(boolean comprovanteStarkBankGerado) {
		this.comprovanteStarkBankGerado = comprovanteStarkBankGerado;
	}

	public String getPathComprovanteStarkBank() {
		return pathComprovanteStarkBank;
	}

	public void setPathComprovanteStarkBank(String pathComprovanteStarkBank) {
		this.pathComprovanteStarkBank = pathComprovanteStarkBank;
	}

	public String getNomeComprovanteStarkBank() {
		return nomeComprovanteStarkBank;
	}

	public void setNomeComprovanteStarkBank(String nomeComprovanteStarkBank) {
		this.nomeComprovanteStarkBank = nomeComprovanteStarkBank;
	}

	public List<FileUploaded> getDocumentoConsultarTodos() {
		return documentoConsultarTodos;
	}

	public void setDocumentoConsultarTodos(List<FileUploaded> documentoConsultarTodos) {
		this.documentoConsultarTodos = documentoConsultarTodos;
	}

	public KobanaMB getKobanaMB() {
		return kobanaMB;
	}

	public void setKobanaMB(KobanaMB kobanaMB) {
		this.kobanaMB = kobanaMB;
	}

	public Collection<FileUploaded> getFilesCci() {
		return filesCci;
	}

	public void setFilesCci(Collection<FileUploaded> filesCci) {
		this.filesCci = filesCci;
	}

	public List<FileUploaded> getDeletefilesCci() {
		return deletefilesCci;
	}

	public void setDeletefilesCci(List<FileUploaded> deletefilesCci) {
		this.deletefilesCci = deletefilesCci;
	}

	public List<FileUploaded> getDeleteFilesPagar() {
		return deleteFilesPagar;
	}

	public void setDeleteFilesPagar(List<FileUploaded> deleteFilesPagar) {
		this.deleteFilesPagar = deleteFilesPagar;
	}

	public List<FileUploaded> getDeleteFilesContas() {
		return deleteFilesContas;
	}

	public void setDeleteFilesContas(List<FileUploaded> deleteFilesContas) {
		this.deleteFilesContas = deleteFilesContas;
	}

	public List<StarkBankBaixa> getPagamentosStarkBankPendentes() {
		return pagamentosStarkBankPendentes;
	}

	public void setPagamentosStarkBankPendentes(List<StarkBankBaixa> pagamentosStarkBankPendentes) {
		this.pagamentosStarkBankPendentes = pagamentosStarkBankPendentes;
	}

	public StarkBankBaixa getObjetoBaixaPagamentoStarkBank() {
		return objetoBaixaPagamentoStarkBank;
	}

	public void setObjetoBaixaPagamentoStarkBank(StarkBankBaixa objetoBaixaPagamentoStarkBank) {
		this.objetoBaixaPagamentoStarkBank = objetoBaixaPagamentoStarkBank;
	}

	public DocumentoAnalise getObjetoDocumentoAnalise() {
		return objetoDocumentoAnalise;
	}

	public void setObjetoDocumentoAnalise(DocumentoAnalise objetoDocumentoAnalise) {
		this.objetoDocumentoAnalise = objetoDocumentoAnalise;
	}

	public String getLaudoEndereco() {
		return laudoEndereco;
	}

	public boolean hasLaudo() {
		return (laudoEndereco != "") ? true : false;
	}

	public String getEstadoConsultaAdd() {
		return estadoConsultaAdd;
	}

	public void setEstadoConsultaAdd(String estadoConsultaAdd) {
		this.estadoConsultaAdd = estadoConsultaAdd;
	}

	public void testedDownloadCertidoes(List<DocumentoAnalise> listDocAnalise) {
		try {
			Map<String, byte[]> listaArquivos = new HashMap<String, byte[]>();
			for (DocumentoAnalise documentoAnalise : listDocAnalise) {
				listaArquivos.putAll(documentoAnalise.zipDeCertidoes());
			}

			CompactadorUtil compac = new CompactadorUtil();
			arquivos = compac.compactarZipByte(listaArquivos);
			final GeradorRelatorioDownloadCliente gerador = new GeradorRelatorioDownloadCliente(
					FacesContext.getCurrentInstance());
			String nomeArquivoDownload = String.format(objetoContratoCobranca.getNumeroContrato() + " Certidoes.zip",
					"");
			gerador.open(nomeArquivoDownload);
			gerador.feed(new ByteArrayInputStream(arquivos));
			gerador.close();
		} catch (IOException e) {
			e.printStackTrace();
		}
	}

	public void testedDownloadCertidoesPastas(List<DocumentoAnalise> listDocAnalise) {
		try {
			Map<String[], byte[]> listaTodosArquivos = new HashMap<String[], byte[]>();
			for (DocumentoAnalise documentoAnalise : listDocAnalise) {
				if (CommonsUtil.semValor(documentoAnalise.getPagador()))
					continue;
				Map<String, byte[]> listaArquivos = new HashMap<String, byte[]>();
				listaArquivos.putAll(documentoAnalise.zipDeCertidoes());
				for (Map.Entry<String, byte[]> entry : listaArquivos.entrySet()) {
					String primeiroNome = documentoAnalise.getPagador().getNome().split(" ")[0];
					String nomepagador = documentoAnalise.getId() + "_" + primeiroNome.replace(",", "_") + "_"
							+ CommonsUtil.somenteNumeros(documentoAnalise.getPagador().getCpfCnpj());
					String[] key = new String[] { nomepagador, entry.getKey() };
					listaTodosArquivos.put(key, entry.getValue());
				}
			}

			CompactadorUtil compac = new CompactadorUtil();
			arquivos = compac.compactarZipBytePastas(listaTodosArquivos);
			final GeradorRelatorioDownloadCliente gerador = new GeradorRelatorioDownloadCliente(
					FacesContext.getCurrentInstance());
			String nomeArquivoDownload = String.format(objetoContratoCobranca.getNumeroContrato() + " Certidoes.zip",
					"");
			gerador.open(nomeArquivoDownload);
			gerador.feed(new ByteArrayInputStream(arquivos));
			gerador.close();
		} catch (IOException e) {
			e.printStackTrace();
		}
	}

	public void testeAttCertidoes(List<DocumentoAnalise> listDocAnalise, String key) {
		try {
			ContratoCobranca contratoCobranca = listDocAnalise.get(0).getContratoCobranca();
			SchedulerFactory shedFact = new StdSchedulerFactory();
			Scheduler scheduler = shedFact.getScheduler();
			scheduler.start();
			JobDetail jobDetail = JobBuilder.newJob(CertidoesJob.class)
					.withIdentity("certidoesJOB", key + "_certidoesAtualizar").build();
			User user = loginBean.getUsuarioLogado();
			jobDetail.getJobDataMap().put("listaDocumentoAnalise", listDocAnalise);
			jobDetail.getJobDataMap().put("user", user);
			jobDetail.getJobDataMap().put("objetoContratoCobranca", contratoCobranca);
			jobDetail.getJobDataMap().put("tipoProcesso", "AtualizarPesquisas");
			Trigger trigger = TriggerBuilder.newTrigger().withIdentity("certidoesJOB", key + "_certidoesAtualizar")
					.startNow().build();
			scheduler.scheduleJob(jobDetail, trigger);
			FacesContext context = FacesContext.getCurrentInstance();
			context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_INFO, "Consulta iniciada com sucesso", ""));
		} catch (SchedulerException e) {
			e.printStackTrace();
		}
	}

	public void testeAttCertidoes(List<DocumentoAnalise> listDocAnalise) {
		ContratoCobranca contratoCobranca = listDocAnalise.get(0).getContratoCobranca();
		testeAttCertidoes(listDocAnalise, contratoCobranca.getNumeroContrato());
	}

	public boolean checkAtualizaCertidoes() throws SchedulerException {
		try {
			SchedulerFactory shedFact = new StdSchedulerFactory();
			Scheduler scheduler = shedFact.getScheduler();
			JobKey key = JobKey.jobKey("certidoesJOB",
					objetoContratoCobranca.getNumeroContrato() + "_certidoesAtualizar");
			boolean jobExist = scheduler.checkExists(key);

			return jobExist;
		} catch (SchedulerException e) {
			e.printStackTrace();
			return false;
		}
	}

	public void testeAttTodasCertidoes() {
		System.out.println("AttCertidoes inicio");
		DocumentoAnaliseDao analiseDao = new DocumentoAnaliseDao();
		List<DocumentoAnalise> listDocAnalise = new ArrayList<DocumentoAnalise>();
		for (ContratoCobranca contrato : contratosPendentes) {
			listDocAnalise.addAll(analiseDao.listagemDocumentoAnalise(contrato));
		}
		System.out.println("listagem concluida");
		testeAttCertidoes(listDocAnalise, "ContratosConsulta");
		System.out.println("AttCertidoes Concluido");
	}

	public boolean isVerificaReaProcessado() {
		for (DocumentoAnalise documento : listaDocumentoAnalise) {
			if (documento.isReaProcessado())
				return true;
		}
		return false;
	}

	public void limpaLaudo() {
		laudoEndereco = "";
	}

	public void hasDocAnalise() {
		if (!this.objetoContratoCobranca.isDocumentosAnalisados()) {
			if (this.listaDocumentoAnalise != null && this.listaDocumentoAnalise.size() > 0) {
				List<DocumentoAnalise> compradores = new ArrayList<DocumentoAnalise>();
				List<DocumentoAnalise> proprietarios = new ArrayList<DocumentoAnalise>();
				Set<String> ressalvaPefin = new HashSet<String>();
				Set<String> ressalvaCcf = new HashSet<String>();
				Set<String> ressalvaProtesto = new HashSet<String>();
				Set<String> ressalvaTrabalhista = new HashSet<String>();
				Set<String> ressalvaProcesso = new HashSet<String>();

				boolean isScore450 = false;
				boolean isRisco20k = false;
				boolean nadaConsta = true;

				for (DocumentoAnalise docAnalise : listaDocumentoAnalise) {
					if ((CommonsUtil.mesmoValor(docAnalise.getMotivoAnalise().toLowerCase(), "proprietario atual")
							|| CommonsUtil.mesmoValor(docAnalise.getMotivoAnalise().toLowerCase(),
									"sócio vinculado ao proprietario atual") && docAnalise.isLiberadoAnalise())) {
						proprietarios.add(docAnalise);
					} else if ((CommonsUtil.mesmoValor(docAnalise.getMotivoAnalise().toLowerCase(), "comprador")
							|| CommonsUtil.mesmoValor(docAnalise.getMotivoAnalise().toLowerCase(),
									"sócio vinculado ao comprador") && docAnalise.isLiberadoAnalise())) {
						compradores.add(docAnalise);
					}
				}

				if (compradores.size() > 0) {
					for (DocumentoAnalise docAnalise : compradores) {
						analisaTaxasDocumentos(docAnalise, nadaConsta, isScore450, isRisco20k, ressalvaPefin,
								ressalvaCcf, ressalvaProtesto, ressalvaTrabalhista, ressalvaProcesso);
					}
					this.objetoContratoCobranca.setDocumentosAnalisados(true);
					ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();
					contratoCobrancaDao.merge(objetoContratoCobranca);
				} else if (proprietarios.size() > 0) {
					for (DocumentoAnalise docAnalise : proprietarios) {
						analisaTaxasDocumentos(docAnalise, nadaConsta, isScore450, isRisco20k, ressalvaPefin,
								ressalvaCcf, ressalvaProtesto, ressalvaTrabalhista, ressalvaProcesso);
					}
					this.objetoContratoCobranca.setDocumentosAnalisados(true);
					ContratoCobrancaDao contratoCobrancaDao = new ContratoCobrancaDao();
					contratoCobrancaDao.merge(objetoContratoCobranca);
				}

				this.objetoContratoCobranca.setPefinRefinRessalva(
						this.objetoContratoCobranca.getPefinRefinRessalva() == "" ? String.join(", ", ressalvaPefin)
								: this.objetoContratoCobranca.getPefinRefinRessalva());
				this.objetoContratoCobranca.setChequeDevolvidoRessalva(
						this.objetoContratoCobranca.getChequeDevolvidoRessalva() == "" ? String.join(", ", ressalvaCcf)
								: this.objetoContratoCobranca.getChequeDevolvidoRessalva());
				this.objetoContratoCobranca.setProtestoRessalva(
						this.objetoContratoCobranca.getProtestoRessalva() == "" ? String.join(", ", ressalvaProtesto)
								: this.objetoContratoCobranca.getProtestoRessalva());
				this.objetoContratoCobranca.setProcessosRessalva(
						this.objetoContratoCobranca.getProcessosRessalva() == "" ? String.join(", ", ressalvaProcesso)
								: this.objetoContratoCobranca.getProcessosRessalva());
				this.objetoContratoCobranca
						.setTrabalhistaRessalva(this.objetoContratoCobranca.getTrabalhistaRessalva() == ""
								? String.join(", ", ressalvaTrabalhista)
								: this.objetoContratoCobranca.getTrabalhistaRessalva());
			} else {
				this.objetoContratoCobranca.setNadaConstaTaxa(true);
			}
			this.objetoContratoCobranca.calcularTaxaPreAprovada();
			PrimeFaces current = PrimeFaces.current();
			current.ajax().update("form:PreAprovadoPanel");
		}
	}

	public boolean isEngineProcessados() {
		boolean isAllEngineProcessados = true;

		docList = listaDocumentoAnalise.stream().filter(x -> x.isLiberadoAnalise()).collect(Collectors.toList());
		PagadorRecebedorService pagadorRecebedorService = new PagadorRecebedorService();
		for (DocumentoAnalise docAnalise : docList) {

			if (!CommonsUtil.semValor(docAnalise.getPagador())) {
				List<String> result = pagadorRecebedorService.verificaRestricao(docAnalise.getPagador());
				result.removeAll(this.restricaoOperacao);
				if (!CommonsUtil.semValor(result))
					this.restricaoOperacao.addAll(result);
			}

			if (docAnalise.getEngine() == null) {
				continue;
			}

			if (CommonsUtil.mesmoValorIgnoreCase(docAnalise.getMotivoAnalise().toLowerCase(), "proprietario atual")
					|| CommonsUtil.mesmoValorIgnoreCase(docAnalise.getMotivoAnalise().toLowerCase(), "comprador")) {
				if (docAnalise.getEngine() != null
						&& !CommonsUtil.semValor(docAnalise.getEngine().getIdCallManager())) {
					if (CommonsUtil.semValor(docAnalise.getRetornoEngine())) {
						isAllEngineProcessados = false;
					}
				}
			}
		}
		/*
		if (!pedidoUmEngine) 
			preAprovadoPendencia.add(0, "Não foi consultado nenhum Engine");
		else if (!CommonsUtil.semValor(preAprovadoPendencia))
			preAprovadoPendencia.add(0, "Engine faltando das pessoas abaixo:");
		*/
		if (isAllEngineProcessados
				&& !CommonsUtil.mesmoValor(objetoContratoCobranca.getCadastroAprovadoValor(), "Aprovado")) {
			hasDocAnalise();
		}
		return isAllEngineProcessados;
	}

	public void analisaTaxasDocumentos(DocumentoAnalise docAnalise, boolean nadaConsta, boolean isScore450,
			boolean isRisco20k, Set<String> ressalvaPefin, Set<String> ressalvaCcf, Set<String> ressalvaProtesto,
			Set<String> ressalvaTrabalhista, Set<String> ressalvaProcesso) {

		engineService.salvarDetalheDocumentoEngine(docAnalise);
		docAnalise.getResumoEngine();
		docAnalise.getResumoScr();
		docAnalise.getResumoProcesso();
		docAnalise.getResumoCenprot();

		if (docAnalise.isCcfApontamentosAvailable()) {
			this.objetoContratoCobranca.setChequeDevolvidoTaxa(true);
			nadaConsta = false;
			ressalvaCcf.add(docAnalise.getRessalvaCcfNome());
		}
		if (docAnalise.isPefinRefinAvailable()) {
			this.objetoContratoCobranca.setPefinTaxa(true);
			nadaConsta = false;
			ressalvaPefin.add(docAnalise.getRessalvaPefinNome());
		}
		if (docAnalise.isProtestosAvailable() || docAnalise.isProtestoCenprotAvailable()) {
			this.objetoContratoCobranca.setProtestoTaxa(true);
			nadaConsta = false;
			ressalvaProtesto.add(docAnalise.getRessalvaProtestoNome());
		}
		if (docAnalise.isScoreBaixo450()) {
			this.objetoContratoCobranca.setScoreBaixo450Taxa(true);
			this.objetoContratoCobranca.setScoreBaixo700Taxa(false);
			isScore450 = true;
			nadaConsta = false;
		}
		if (docAnalise.isScoreBaixo700() && !isScore450) {
			this.objetoContratoCobranca.setScoreBaixo700Taxa(true);
			nadaConsta = false;
		}
		if (docAnalise.isDividaVencidaAvailable()) {
			this.objetoContratoCobranca.setDividaVencidaTaxa(true);
			nadaConsta = false;
		}
		if (docAnalise.isPrejuizoBacenAvailable()) {
			this.objetoContratoCobranca.setPrejuizoBacenTaxa(true);
			nadaConsta = false;
		}
		if (this.objetoImovelCobranca.getTipo().contains("Galpão")
				|| this.objetoImovelCobranca.getTipo().contains("Terreno")) {
			this.objetoContratoCobranca.setTerrenoOuBarracaoTaxa(true);
			nadaConsta = false;
		}
		if (docAnalise.isRelacionamentoBacenIniciadoAvailable()) {
			this.objetoContratoCobranca.setRelacionamentoBacenRecenteTaxa(true);
			nadaConsta = false;
		}
		if (docAnalise.isInicioRelacionamentoInexistente()) {
			this.objetoContratoCobranca.setInicioRelacionamentoInexistenteTaxa(true);
			nadaConsta = false;
		}
		if (docAnalise.isRiscoTotal20k()) {
			this.objetoContratoCobranca.setRiscoTotal20kTaxa(true);
			this.objetoContratoCobranca.setRiscoTotal50kTaxa(false);
			isRisco20k = true;
			nadaConsta = false;
		}
		if (docAnalise.isRiscoTotal50k() && !isRisco20k) {
			this.objetoContratoCobranca.setRiscoTotal50kTaxa(true);
			nadaConsta = false;
		}
		if (docAnalise.isContemAcoesEngine() || docAnalise.isContemAcoesProcesso()) {
			if (!docAnalise.getRessalvaProcessosNome().isEmpty()) {
				ressalvaProcesso.add(docAnalise.getRessalvaProcessosNome());
			}
		}
		if (!docAnalise.getRessalvaTrabalhistaNome().isEmpty()) {
			ressalvaTrabalhista.add(docAnalise.getRessalvaTrabalhistaNome());
		}
		this.objetoContratoCobranca.setNadaConstaTaxa(nadaConsta);
	}

	public void setEngineProcessados(boolean engineProcessados) {
		this.engineProcessados = engineProcessados;
	}

	public BoletoKobana getSelectedBoletosKobanaBaixa() {
		return selectedBoletosKobanaBaixa;
	}

	public void setSelectedBoletosKobanaBaixa(BoletoKobana selectedBoletosKobanaBaixa) {
		this.selectedBoletosKobanaBaixa = selectedBoletosKobanaBaixa;
	}

	public BigDecimal getPorcentagemDesconto() {
		return porcentagemDesconto;
	}

	public void setPorcentagemDesconto(BigDecimal porcentagemDesconto) {
		this.porcentagemDesconto = porcentagemDesconto;
	}

	public BigDecimal getValorComDesconto() {
		return valorComDesconto;
	}

	public void setValorComDesconto(BigDecimal valorComDesconto) {
		this.valorComDesconto = valorComDesconto;
	}

	public List<DocumentoAnalise> getListaDocumentoAnaliseRea() {
		return listaDocumentoAnaliseRea;
	}

	public void setListaDocumentoAnaliseRea(List<DocumentoAnalise> listaDocumentoAnaliseRea) {
		this.listaDocumentoAnaliseRea = listaDocumentoAnaliseRea;
	}

	public GravamesRea getGravamePopup() {
		return gravamePopup;
	}

	public void setGravamePopup(GravamesRea gravamePopup) {
		this.gravamePopup = gravamePopup;
	}

	public BigDecimal getValorMercaoImovelPorcento() {
		return valorMercaoImovelPorcento;
	}

	public void setValorMercaoImovelPorcento(BigDecimal valorMercaoImovelPorcento) {
		this.valorMercaoImovelPorcento = valorMercaoImovelPorcento;
	}

	public BigDecimal getValorMercadoImovelDez() {
		return valorMercadoImovelDez;
	}

	public void setValorMercadoImovelDez(BigDecimal valorMercadoImovelDez) {
		this.valorMercadoImovelDez = valorMercadoImovelDez;
	}

	public BigDecimal getValorMercadoImovelVinte() {
		return valorMercadoImovelVinte;
	}

	public void setValorMercadoImovelVinte(BigDecimal valorMercadoImovelVinte) {
		this.valorMercadoImovelVinte = valorMercadoImovelVinte;
	}

	public BigDecimal getValorMercadoImovelTrinta() {
		return valorMercadoImovelTrinta;
	}

	public void setValorMercadoImovelTrinta(BigDecimal valorMercadoImovelTrinta) {
		this.valorMercadoImovelTrinta = valorMercadoImovelTrinta;
	}

	public BigDecimal getValorMercadoImovelQuarenta() {
		return valorMercadoImovelQuarenta;
	}

	public void setValorMercadoImovelQuarenta(BigDecimal valorMercadoImovelQuarenta) {
		this.valorMercadoImovelQuarenta = valorMercadoImovelQuarenta;
	}

	public BigDecimal getValorMercadoImovelCinquenta() {
		return valorMercadoImovelCinquenta;
	}

	public void setValorMercadoImovelCinquenta(BigDecimal valorMercadoImovelCinquenta) {
		this.valorMercadoImovelCinquenta = valorMercadoImovelCinquenta;
	}

	public CcbParticipantes getParticipanteSelecionado() {
		return participanteSelecionado;
	}

	public void setParticipanteSelecionado(CcbParticipantes participanteSelecionado) {
		this.participanteSelecionado = participanteSelecionado;
	}

	public CcbParticipantes getSocioCcbSelecionado() {
		return socioCcbSelecionado;
	}

	public void setSocioCcbSelecionado(CcbParticipantes socioCcbSelecionado) {
		this.socioCcbSelecionado = socioCcbSelecionado;
	}

	public boolean isAddSocioCcb() {
		return addSocioCcb;
	}

	public void setAddSocioCcb(boolean addSocioCcb) {
		this.addSocioCcb = addSocioCcb;
	}

	public BigDecimal getPorcentagemPersonalizada() {
		return porcentagemPersonalizada;
	}

	public void setPorcentagemPersonalizada(BigDecimal porcentagemPersonalizada) {
		this.porcentagemPersonalizada = porcentagemPersonalizada;
	}

	public List<ContratoCobranca> getSelectedContratos() {
		return selectedContratos;
	}

	public void setSelectedContratos(List<ContratoCobranca> selectedContratos) {
		this.selectedContratos = selectedContratos;
	}

	public ImovelCobrancaAdicionais getImovelAdicional() {
		return imovelAdicional;
	}

	public void setImovelAdicional(ImovelCobrancaAdicionais imovelAdicional) {
		this.imovelAdicional = imovelAdicional;
	}

	public List<CcbProcessosJudiciais> getListProcessosSelecionado() {
		return listProcessosSelecionado;
	}
	public Cartorio getObjetoCartorio() {
		return objetoCartorio;
	}

	public void setObjetoCartorio(Cartorio objetoCartorio) {
		this.objetoCartorio = objetoCartorio;
	}
	
	public List<Cartorio> getListaCartorio() {
		return listaCartorio;
	}
	
	public void setListaCartorio(List<Cartorio> listaCartorio) {
		this.listaCartorio = listaCartorio;
	}
	
	public boolean isApagaListaCartorio() {
		return apagaListaCartorio;
	}
	
	public void setApagaListaCartorio(boolean apagaListaCartorio) {
		this.apagaListaCartorio = apagaListaCartorio;
	}
	
	public void setListProcessosSelecionado(List<CcbProcessosJudiciais> listProcessosSelecionado) {
		this.listProcessosSelecionado = listProcessosSelecionado;
	}

	public boolean isPossuiBlackFlag() {
		return !CommonsUtil.semValor(restricaoOperacao) || !CommonsUtil.semValor(restricaoImovel);
	}
	
	public boolean isPossuiBlackFlagImovel() {
		return !CommonsUtil.semValor(restricaoImovel);
	}

	public List<String> getRestricaoOperacao() {
		return restricaoOperacao;
	}

	public void setRestricaoOperacao(List<String> restricaoOperacao) {
		this.restricaoOperacao = restricaoOperacao;
	}

	public List<String> getRestricaoImovel() {
		return restricaoImovel;
	}

	public void setRestricaoImovel(List<String> restricaoImovel) {
		this.restricaoImovel = restricaoImovel;
	}

	public boolean isBlockForm() {
		return blockForm;
	}

	public void setBlockForm(boolean blockForm) {
		this.blockForm = blockForm;
	}

	public List<StarkBankBaixa> getPagamentosStarkBankPendentesCartaSplit() {
		return pagamentosStarkBankPendentesCartaSplit;
	}

	public void setPagamentosStarkBankPendentesCartaSplit(List<StarkBankBaixa> pagamentosStarkBankPendentesCartaSplit) {
		this.pagamentosStarkBankPendentesCartaSplit = pagamentosStarkBankPendentesCartaSplit;
	}
}