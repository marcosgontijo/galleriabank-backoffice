<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:shiro="http://shiro.apache.org/tags"
	xmlns:p="http://primefaces.org/ui">

	<h:form id="formSegurados">
		<p:dialog header="Segurados" widgetVar="seguradosDialog">
			<p:panel id="SeguradoresPanel" header="Segurados"
				style="margin-bottom:10px;"
				rendered="#{contratoCobrancaMB.objetoContratoCobranca.temSeguro}">
				<f:facet name="header"> Segurados 
							<p:outputLabel value="" />
					<p:selectBooleanButton value="#{contratoCobrancaMB.addSegurador}"
						onLabel="Adicionar Segurado" offLabel="Adicionar Segurado">
						<p:ajax update=":formSegurados:SeguradoresPanel" event="change" />
					</p:selectBooleanButton>
				</f:facet>
				
				<p:messages/>

				<p:dataView var="segurado"
					value="#{contratoCobrancaMB.objetoContratoCobranca.listSegurados}"
					paginator="false" layout="list"
					paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}">
					<p:dataViewListItem>
						<p:outputLabel value="Nome: " styleClass="labelBold" />
						<p:outputLabel value="#{segurado.pessoa.nome}"
							styleClass="labelBold" style="FONT-SIZE: 10pt;width:100px;" />
						<p:spacer height="10" />
						<p:outputLabel value="|" styleClass="labelBold" />
						<p:spacer height="10" />
						<p:outputLabel for="SeguradorPorcentagem"
							value="Porcentagem do segurado: " styleClass="labelBold"
							style="width:200px;" />
						<p:inputText id="SeguradorPorcentagem"
							value="#{segurado.porcentagemSegurador}" required="true"
							style="FONT-SIZE: 10pt;width:200px;" />
						<p:commandButton value="Remover"
							action="#{contratoCobrancaMB.removerSegurado(segurado)}"
							ajax="true" update=":formSegurados:SeguradoresPanel" />
					</p:dataViewListItem>
				</p:dataView>

				<h:panelGrid columns="2" id="addSegurado"
					rendered="#{contratoCobrancaMB.addSegurador}">

					<p:spacer height="10" />
					<p:spacer height="10" />
					<p:outputLabel value="Adicionar Segurado" styleClass="labelBold" />
					<p:spacer height="10" />
					<p:outputLabel for="SeguradorNome" value="Nome do segurado: "
						styleClass="labelBold" />
					<h:panelGroup>
						<p:outputLabel id="SeguradorNome"
							value="#{contratoCobrancaMB.seguradoSelecionado.pessoa.nome}"
							required="false" style="FONT-SIZE: 10pt;width:300px;" />
						<p:spacer height="10" />
						<p:commandButton
							action="#{contratoCobrancaMB.pesquisaSeguradoConsulta}"
							icon="ui-icon ui-icon-circle-zoomin"
							oncomplete="PF('pagadorRecebedorDialog').show();"
							update="formReceborPagador" />
					</h:panelGroup>

					<p:outputLabel for="SeguradorPorcentagem"
						value="Porcentagem do segurado: " styleClass="labelBold" />
					<p:inputText id="SeguradorPorcentagem"
						value="#{contratoCobrancaMB.seguradoSelecionado.porcentagemSegurador}"
						required="flase" style="FONT-SIZE: 10pt;width:300px;" />
					<p:spacer height="10" />

					<p:commandButton value="Adicionar" ajax="true"
						action="#{contratoCobrancaMB.concluirSegurado()}"
						update=":formSegurados:SeguradoresPanel" icon="ui-icon ui-icon-check" />
				</h:panelGrid>

				<f:facet name="footer">
					<p:commandButton value="Concluir"
						action="#{contratoCobrancaMB.editarSeguradosConsulta()}"
						icon="ui-icon ui-icon-check" update=":formSegurados:SeguradoresPanel" />
					<p:commandButton value="Cancelar" 
						action="#{contratoCobrancaMB.cancelarSeguradosConsulta()}" icon="ui-icon ui-icon-cancel"
						oncomplete="PF('seguradosDialog').hide();" />

				</f:facet>
			</p:panel>
		</p:dialog>
	</h:form>
	<ui:include src="/Dialog/DialogRecebedorPagador.xhtml">
		<ui:param name="mbean" value="#{contratoCobrancaMB}"></ui:param>
		<ui:param name="titulo" value="#{contratoCobrancaMB.tituloPagadorRecebedorDialog}"></ui:param>
	</ui:include>
</ui:composition>