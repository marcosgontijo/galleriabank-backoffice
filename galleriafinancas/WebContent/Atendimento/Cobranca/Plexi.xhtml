<?xml version="1.0" encoding="UTF-8" ?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:shiro="http://shiro.apache.org/tags"
	template="../MenuAtendimento.xhtml">
	
	<ui:define name="conteudo">
		<h:form id="form">
			<script src="#{request.contextPath}/resources/resources/js/functions.js"></script>
			<script src="#{request.contextPath}/resources/js/locale-primefaces.js" library="javascript"></script>
			<link rel="stylesheet" type="text/css" href="#{request.contextPath}/resources/resources/css/Style.css" title="" media="all" />
			
			<p:panel id="PlexiPanel" header="Plexi"
				style="margin-bottom:10px;">
				<p:focus />
				<p:messages id="msgs" />	
				<shiro:hasAnyRoles name="ROOT">
					<!--  <p:commandButton action="#{plexiMB.teste}"
						update="msgs" value="teste"/> -->
				</shiro:hasAnyRoles>
				
				
				
				<h:panelGroup id="Dados">
					
					<p:dataList id="pagadorList" value="#{plexiMB.listPagador}" var="DocAnalise" style="padding: 0;" type="definition">
						<p:panel id="pagadorPanel" header="#{DocAnalise.pagador.nome}" style="padding: none" 
							toggleable="true" toggleableHeader="true">
							<f:facet name="header" styleClass="ui-accordion-header">
								<p:commandButton icon="ui-icon ui-icon-trash"
									action="#{plexiMB.removerPessoa(DocAnalise)}"
									ajax="true" update=":form:PlexiPanel" />
								<p:outputLabel value="#{DocAnalise.pagador.nome}" style="FONT-SIZE: 15pt;margin-left: 5px" styleClass="ui-panel-title"/>
							</f:facet>
							<h:panelGrid columns="1">
								<h:panelGroup rendered="#{DocAnalise.pagador.cpf != null and DocAnalise.pagador.cpf != ''}">
									<h:panelGrid columns="6">
										<h:panelGrid columns="2">
											<p:outputLabel value="Nome:" styleClass="labelBold"/>
											<p:outputLabel value="#{DocAnalise.pagador.nome}" />  
										</h:panelGrid>		
										<h:panelGrid columns="2">				
											<p:outputLabel value="CPF:"  styleClass="labelBold"/>
											<p:inputMask value="#{DocAnalise.pagador.cpf}" style="width:100px" mask="999.999.999-99" />  
										</h:panelGrid>
										<h:panelGrid columns="2">								
											<p:outputLabel value="Mãe:" styleClass="labelBold"/>
											<p:inputText value="#{DocAnalise.pagador.nomeMae}" /> 	
										</h:panelGrid>
										<h:panelGrid columns="2">						 
											<p:outputLabel value="RG:" styleClass="labelBold"/>
											<p:inputText value="#{DocAnalise.pagador.rg}" /> 	
										</h:panelGrid>
										<h:panelGrid columns="2">							
											<p:outputLabel value="Data Nascimento:" styleClass="labelBold"/>
											<p:calendar value="#{DocAnalise.pagador.dtNascimento}" styleClass="dateTimeField" 
												pattern="dd/MM/yyyy" size="50" inputStyle="margin-right: 5px; width:70px"/>
										</h:panelGrid>
										<h:panelGrid columns="2">
											<p:outputLabel value="Cep:" styleClass="labelBold"/>
											<p:inputMask value="#{DocAnalise.pagador.cep}" mask="99999-999" label="Cep" style="width:75px" />
										</h:panelGrid>
									</h:panelGrid>
									<h:panelGrid columns="6">
										<h:panelGrid columns="2">
											<p:outputLabel value="Endereço:" styleClass="labelBold"/>
											<p:inputText value="#{DocAnalise.pagador.endereco}" />
										</h:panelGrid>
										<h:panelGrid columns="2">
											<p:outputLabel value="Orgão Emissor RG:" styleClass="labelBold"/>
											<p:inputText value="#{DocAnalise.pagador.orgaoEmissorRG}" />
										</h:panelGrid>
										<h:panelGrid columns="2">	
											<p:outputLabel value="Estado RG (uf):" styleClass="labelBold" />
											<p:inputText value="#{DocAnalise.pagador.estado}" style="width:25px" />
										</h:panelGrid>
										<h:panelGrid columns="2">
											<p:outputLabel value=" Sexo: " styleClass="labelBold" />
											<p:selectOneRadio value="#{DocAnalise.pagador.sexo}">
												<f:selectItem itemLabel="MASCULINO" itemValue="MASCULINO" />
												<f:selectItem itemLabel="FEMININO" itemValue="FEMININO" />
											</p:selectOneRadio>
										</h:panelGrid>
									</h:panelGrid>
								</h:panelGroup>	
								<h:panelGrid columns="6" rendered="#{DocAnalise.pagador.cpf eq null or DocAnalise.pagador.cpf eq ''}">
									<h:panelGrid columns="2">
										<p:outputLabel value="Razão Social:" style="FONT-SIZE: 5pt; margin-right: 5px" styleClass="labelBold"/>
										<p:outputLabel value="#{DocAnalise.pagador.nome}" style="FONT-SIZE: 5pt; margin-right: 5px" />  
									</h:panelGrid>
									<h:panelGrid columns="2">						
										<p:outputLabel value="CNPJ:" style="FONT-SIZE: 5pt; margin-right: 5px" styleClass="labelBold"/>
										<p:inputText value="#{DocAnalise.pagador.cnpj}" style="FONT-SIZE: 5pt; margin-right: 5px; width:120px" />
									</h:panelGrid>
									<h:panelGrid columns="2">
										<p:outputLabel value="Cep:" style="FONT-SIZE: 5pt; margin-right: 5px" styleClass="labelBold"/>
										<p:inputMask value="#{DocAnalise.pagador.cep}" mask="99999-999" label="Cep" />
									</h:panelGrid>
									<h:panelGrid columns="2">
										<p:outputLabel value="Endereço:" style="FONT-SIZE: 5pt; margin-right: 5px" styleClass="labelBold"/>
										<p:inputText value="#{DocAnalise.pagador.endereco}" style="FONT-SIZE: 5pt; margin-right: 5px; width:100px" />
									</h:panelGrid>					
								</h:panelGrid> 						    
							</h:panelGrid>	
							<p:panel id="docsPanel" header="" style="padding: 0" toggleable="true" toggleableHeader="true" >
								<f:facet name="header" styleClass="ui-accordion-header">
									<p:outputLabel value="Documentos - #{DocAnalise.plexiConsultas.size()}" 
									style="FONT-SIZE: 15pt;margin-left: 5px" styleClass="ui-panel-title"/>
								</f:facet>
								<p:dataList id="docsList" value="#{DocAnalise.plexiConsultas}" var="docs" style="padding: 0" type="definition">
									<p:panel id="PanelGridDocs" header="Documentos" style="padding: 0" toggleable="true" toggleableHeader="true" collapsed="true" >			
										<f:facet name="header" styleClass="ui-accordion-header">
											<p:commandButton icon="ui-icon ui-icon-trash" ajax="true"
												action="#{plexiMB.removeDoc(DocAnalise, docs)}"
												update="form:pagadorList" />
											<p:outputLabel value="X - " style="FONT-SIZE: 15pt;margin-left: 5px;margin-right: 0px" styleClass="ui-panel-title" rendered="#{docs.requestId eq null}"/>
											<p:outputLabel value="✓ - " style="FONT-SIZE: 15pt;margin-left: 5px;margin-right: 0px" styleClass="ui-panel-title" rendered="#{docs.requestId ne null}"/>
											<p:outputLabel value="#{docs.plexiDocumentos.nome}" style="FONT-SIZE: 15pt;margin-left: 5px" styleClass="ui-panel-title"/>
										</f:facet>
								
										<h:panelGrid columns="2">
											<p:outputLabel value="Nome:" styleClass="labelBold" />
											<p:outputLabel value="#{docs.nome}" />
										</h:panelGrid>
										<h:panelGrid columns="2" rendered="#{docs.tipoCertidao ne null}">
											<p:outputLabel value="tipoCertidao:" styleClass="labelBold" />
											<p:outputLabel value="#{docs.tipoCertidao}" />
										</h:panelGrid>
										<h:panelGrid columns="2" rendered="#{docs.origem ne null}">	
											<p:outputLabel value="origem:" styleClass="labelBold"/>
											<p:outputLabel value="#{docs.origem}" />
										</h:panelGrid>
										<h:panelGrid columns="2" rendered="#{docs.competencia ne null}">	
											<p:outputLabel value="competencia:" styleClass="labelBold"/>
											<p:outputLabel value="#{docs.competencia}" />
										</h:panelGrid>
										<h:panelGrid columns="2" rendered="#{docs.tipo ne null}">	
											<p:outputLabel value="tipo:" styleClass="labelBold"/>
											<p:outputLabel value="#{docs.tipo}" />
										</h:panelGrid>
										<h:panelGrid columns="2" rendered="#{docs.modelo ne null}">	
											<p:outputLabel value="modelo:" styleClass="labelBold"/>
											<p:outputLabel value="#{docs.modelo}" />
										</h:panelGrid>
										<h:panelGrid columns="2" rendered="#{docs.orgaosStr ne null}">	
											<p:outputLabel value="orgaos:" styleClass="labelBold"/>
											<p:outputLabel value="#{docs.orgaosStr}" />
										</h:panelGrid>
										<h:panelGrid columns="2" rendered="#{docs.abrangencia ne null}" >	
											<p:outputLabel value="abrangencia:" styleClass="labelBold"/>
											<p:outputLabel value="#{docs.abrangencia}" />
										</h:panelGrid>
										
									</p:panel>	
								</p:dataList>
							</p:panel>
						</p:panel>
					</p:dataList>
				</h:panelGroup>
			
				<h:panelGrid columns="3">	
					<p:commandButton action="#{plexiMB.criarPedido}" ajax="false"
						icon="ui-icon ui-icon-print" value="Fazer Pedido"  update=":form  msgs" />
						
					<p:commandButton value="Voltar p/ Contrato" action="#{contratoCobrancaMB.clearFieldsEditarPendentesAnalistas}" 
						ajax="false" icon="ui-icon-pencil" title="Editar" rendered="#{plexiMB.contratoCobranca ne null}">
	                	<f:setPropertyActionListener target="#{contratoCobrancaMB.objetoContratoCobranca}" value="#{plexiMB.contratoCobranca}" />
	                	<f:setPropertyActionListener target="#{contratoCobrancaMB.objetoPagadorRecebedor}" value="#{plexiMB.contratoCobranca.pagador}" />
	                	<f:setPropertyActionListener target="#{contratoCobrancaMB.objetoImovelCobranca}" value="#{plexiMB.contratoCobranca.imovel}" />
	                	<f:setPropertyActionListener target="#{contratoCobrancaMB.updateMode}" value="true" />
	                	<f:setPropertyActionListener target="#{contratoCobrancaMB.crmMode}" value="false" />
	                	<f:setPropertyActionListener target="#{contratoCobrancaMB.deleteMode}" value="false" />
	                	<f:setPropertyActionListener target="#{contratoCobrancaMB.baixarMode}" value="false" />
	                </p:commandButton>			
				</h:panelGrid>
			</p:panel>
		</h:form>
		
	</ui:define>
</ui:composition>
