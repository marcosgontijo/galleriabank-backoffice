<?xml version="1.0" encoding="UTF-8" ?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:shiro="http://shiro.apache.org/tags">

	<p:panel id="Imovel" style="margin-bottom:10px;"
		rendered="#{( usuarioMB.objetoUsuario.administrador or contratoCobrancaMB.tituloTelaConsultaPreStatus != 'Ag. Registro')}">
		<f:facet name="header">
			<p:outputLabel value="Imóvel Ofertado Como Garantia" />

			<i style="margin-right: 10px;"
				class="fa font-solid #{contratoCobrancaMB.possuiBlackFlagImovel?'fa-flag':' fa-flag-o'}"
				id="blackFlagImovel"  />
					
			<p:commandButton value="Ativar Black Flag" ajax="true"
				rendered="#{(!contratoCobrancaMB.possuiBlackFlagImovel) and (contratoCobrancaMB.usuarioLogado.profileGerenteAnalise or contratoCobrancaMB.usuarioLogado.administrador)}"
				action="#{contratoCobrancaMB.adicionarBlackFlagImovel}" update="Imovel PanelLocador"
				style="TEXT-DECORATION: bold" />

			<p:commandButton value="Remover Black Flag" ajax="true"
				rendered="#{contratoCobrancaMB.possuiBlackFlagImovel and ( contratoCobrancaMB.usuarioLogado.profileGerenteAnalise or contratoCobrancaMB.usuarioLogado.administrador)}"
				action="#{contratoCobrancaMB.removerBlackFlagImovel}" update="Imovel PanelLocador"
				style="TEXT-DECORATION: bold" />

		</f:facet>
		<h:panelGrid columns="2">
			<p:outputLabel for="NumeroMatricula" value="Numero Matrícula: " />
			<p:inputText id="NumeroMatricula"
				value="#{contratoCobrancaMB.objetoImovelCobranca.numeroMatricula}"
				label="NumeroMatricula" onblur="" style="width:400px;"
				disabled="#{contratoCobrancaMB.inserirImovelDisable}" />

			<p:outputLabel for="Cartorio" value="Cartório de Registro: " />
			<p:inputText id="Cartorio"
				disabled="#{contratoCobrancaMB.inserirImovelDisable}"
				value="#{contratoCobrancaMB.objetoImovelCobranca.cartorio}"
				label="Cartório" onblur="" style="width:400px;" />

			<p:outputLabel for="cartorioEstado" value="Estado Cartório: " />
			<h:panelGroup>
				<p:inputText id="cartorioEstado"
					disabled="#{contratoCobrancaMB.inserirImovelDisable}"
					value="#{contratoCobrancaMB.objetoImovelCobranca.cartorioEstado}" />
				<p:outputLabel for="cartorioMunicipio" value="Município Cartório: " />
				<p:inputText id="cartorioMunicipio"
					disabled="#{contratoCobrancaMB.inserirImovelDisable}"
					value="#{contratoCobrancaMB.objetoImovelCobranca.cartorioMunicipio}" />
			</h:panelGroup>

			<p:outputLabel for="numeroCartorio" value="Numero Cartório: " />
			<p:inputText id="numeroCartorio"
				disabled="#{contratoCobrancaMB.inserirImovelDisable}"
				value="#{contratoCobrancaMB.objetoImovelCobranca.numeroCartorio}" />

			<p:outputLabel for="CepImovel" value="Cep: " />
			<p:inputMask id="CepImovel"
				disabled="#{contratoCobrancaMB.inserirImovelDisable}"
				value="#{contratoCobrancaMB.objetoImovelCobranca.cep}"
				mask="99999-999" label="Cep">
				<p:ajax event="blur"
					update="EnderecoImovel BairroImovel CidadeImovel EstadoImovel"
					listener="#{contratoCobrancaMB.getEnderecoByViaNet()}" />
			</p:inputMask>

			<p:outputLabel value="" />
			<p:outputLabel
				value="O sistema irá preencher automaticamente o endereço de acordo com o CEP informado. " />

			<p:outputLabel for="EnderecoImovel" value="Endereço: " />
			<p:inputText id="EnderecoImovel"
				value="#{contratoCobrancaMB.objetoImovelCobranca.endereco}"
				disabled="#{contratoCobrancaMB.inserirImovelDisable}"
				label="Endereço" onblur="" style="width:400px;" />

			<p:outputLabel for="ComplementoImovel" value="Complemento: " />
			<p:inputText id="ComplementoImovel"
				value="#{contratoCobrancaMB.objetoImovelCobranca.complemento}"
				disabled="#{contratoCobrancaMB.inserirImovelDisable}"
				label="Complemento" onblur="" style="width:400px;" />

			<p:outputLabel for="BairroImovel" value="Bairro: " />
			<p:inputText id="BairroImovel"
				value="#{contratoCobrancaMB.objetoImovelCobranca.bairro}"
				disabled="#{contratoCobrancaMB.inserirImovelDisable}" label="Bairro"
				onblur="" style="width:400px;" />

			<p:outputLabel for="EstadoImovel" value="Estado: " />
			<p:selectOneMenu id="EstadoImovel"
				disabled="#{contratoCobrancaMB.inserirImovelDisable}"
				value="#{contratoCobrancaMB.objetoImovelCobranca.estado}"
				label="Estado" style="width:410px;">
				<f:selectItem itemValue="" itemLabel="Escolha o Estado" />
				<f:selectItem itemValue="AC" itemLabel="Acre" />
				<f:selectItem itemValue="AL" itemLabel="Alagoas" />
				<f:selectItem itemValue="AP" itemLabel="Amapá" />
				<f:selectItem itemValue="AM" itemLabel="Amazonas" />
				<f:selectItem itemValue="BA" itemLabel="Bahia" />
				<f:selectItem itemValue="CE" itemLabel="Ceará" />
				<f:selectItem itemValue="DF" itemLabel="Distrito Federal" />
				<f:selectItem itemValue="ES" itemLabel="Espirito Santo" />
				<f:selectItem itemValue="GO" itemLabel="Goiás" />
				<f:selectItem itemValue="MA" itemLabel="Maranhão" />
				<f:selectItem itemValue="MT" itemLabel="Mato Grosso" />
				<f:selectItem itemValue="MS" itemLabel="Mato Grosso Do Sul" />
				<f:selectItem itemValue="MG" itemLabel="Minas Gerais" />
				<f:selectItem itemValue="PA" itemLabel="Pará" />
				<f:selectItem itemValue="PB" itemLabel="Paraiba" />
				<f:selectItem itemValue="PR" itemLabel="Paraná" />
				<f:selectItem itemValue="PE" itemLabel="Pernambuco" />
				<f:selectItem itemValue="PI" itemLabel="Piauí" />
				<f:selectItem itemValue="RJ" itemLabel="Rio De Janeiro" />
				<f:selectItem itemValue="RN" itemLabel="Rio Grande Do Norte" />
				<f:selectItem itemValue="RS" itemLabel="Rio Grande Do Sul" />
				<f:selectItem itemValue="RO" itemLabel="Rondônia" />
				<f:selectItem itemValue="RR" itemLabel="Roraima" />
				<f:selectItem itemValue="SC" itemLabel="Santa Catarina" />
				<f:selectItem itemValue="SP" itemLabel="São Paulo" />
				<f:selectItem itemValue="SE" itemLabel="Sergipe" />
				<f:selectItem itemValue="TO" itemLabel="Tocantins" />
				<p:ajax event="valueChange" update="CidadeImovel"
					listener="#{contratoCobrancaMB.objetoImovelCobranca.completeCidadesImovel}" />
			</p:selectOneMenu>

			<p:outputLabel for="CidadeImovel" value="Cidade: "
				style="FONT-SIZE: 10pt;" />
			<p:autoComplete id="CidadeImovel"
				disabled="#{contratoCobrancaMB.inserirImovelDisable}"
				value="#{contratoCobrancaMB.objetoImovelCobranca.cidade}"
				completeMethod="#{contratoCobrancaMB.objetoImovelCobranca.completeCidadesImovel}"
				var="cidade" itemLabel="#{cidade}" itemValue="#{cidade}"
				dropdown="true" forceSelection="false" scrollHeight="250">
			</p:autoComplete>

			<!-- <p:outputLabel for="CidadeImovel" value="Cidade: " />
						<p:inputText id="CidadeImovel"
							value="#{contratoCobrancaMB.objetoImovelCobranca.cidade}"
							label="Cidade" onblur="" style="width:400px;" /> -->

			<p:outputLabel for="linkGMapsImovel" value="Link Google Maps: " />
			<p:inputText id="linkGMapsImovel"
				disabled="#{contratoCobrancaMB.inserirImovelDisable}"
				value="#{contratoCobrancaMB.objetoImovelCobranca.linkGMaps}"
				label="Link Google Maps" style="width:400px;">
				<p:ajax event="keyup" update="gerarLinkimovel" />
			</p:inputText>

			<p:commandButton id="gerarLinkimovel" value="Gerar Link"
				action="#{contratoCobrancaMB.getLinkMaps()}"
				disabled="#{contratoCobrancaMB.objetoImovelCobranca.linkGMaps ne null 
								and contratoCobrancaMB.objetoImovelCobranca.linkGMaps ne ''}"
				update="linkGMapsImovel botaoLinkImovel gerarLinkimovel" />

			<h:panelGroup id="botaoLinkImovel">
				<a href="#{contratoCobrancaMB.objetoImovelCobranca.linkGMaps}"
					disabled="#{contratoCobrancaMB.inserirImovelDisable}"
					class="linkPDF" target="_blank"
					style="background: linear-gradient(90deg, rgba(159, 196, 24, 1) 0%, rgba(115, 158, 46, 1) 100%); padding: 5px; -webkit-border-radius: 5px; text-decoration: none; -moz-border-radius: 5px; border-radius: 5px;"><b>Abrir
						link no Google Maps</b></a>
			</h:panelGroup>

			<p:outputLabel for="Tipo" value="Tipo: " />
			<p:autoComplete id="Tipo"
				value="#{contratoCobrancaMB.objetoImovelCobranca.tipo}"
				completeMethod="#{contratoCobrancaMB.objetoImovelCobranca.completeTipoImovel}"
				autocomplete="no" dropdown="true" forceSelection="true" var="tipo"
				itemValue="#{contratoCobrancaMB.objetoImovelCobranca.getValue(tipo)}"
				itemLabel="#{contratoCobrancaMB.objetoImovelCobranca.getLabel(tipo)}"
				scrollHeight="250">
			</p:autoComplete>

			<p:outputLabel for="AreaTotal"
				value="Área Total / Terreno (metros):  " />
			<h:panelGroup>
				<p:inputText id="AreaTotal"
					value="#{contratoCobrancaMB.objetoImovelCobranca.areaTotal}"
					style="width:150px;" />
				<p:spacer width="10px" />
				<p:outputLabel for="valorIptu" value="Valor IPTU: " />
				<p:inputText id="valorIptu"
					value="#{contratoCobrancaMB.objetoImovelCobranca.valorIptu}"
					onkeypress="return isNumberKey(event);"
					onkeydown="FormataValor(this, 13, event, 2);"
					converter="bigDecimalConverter" />
			</h:panelGroup>

			<p:outputLabel for="AreaConstruida"
				value="Área Útil / Construída (metros): " />
			<h:panelGroup>
				<p:inputText id="AreaConstruida"
					value="#{contratoCobrancaMB.objetoImovelCobranca.areaConstruida}"
					style="width:150px;" />
				<p:spacer width="10px" />
				<p:outputLabel for="valorCondominio" value="Valor Condomínio: " />
				<p:inputText id="valorCondominio"
					value="#{contratoCobrancaMB.objetoImovelCobranca.valorCondominio}"
					onkeypress="return isNumberKey(event);"
					onkeydown="FormataValor(this, 13, event, 2);"
					converter="bigDecimalConverter" />
			</h:panelGroup>

			<p:outputLabel for="valorEstimado"
				value="Qual o valor estimado do imóvel? " />
			<p:inputText id="valorEstimado"
				disabled="#{contratoCobrancaMB.inserirImovelDisable}"
				value="#{contratoCobrancaMB.objetoImovelCobranca.valoEstimado}"
				onkeypress="return isNumberKey(event);"
				onkeydown="FormataValor(this, 13, event, 2);"
				converter="bigDecimalConverter" />

			<p:outputLabel for="valorMercadoObjImovel"
				rendered="#{!contratoCobrancaMB.inserirImovelOcultarValorMercadoImovel}"
				value="Valor de mercado do imóvel: " styleClass="labelBold" />
			<p:inputText id="valorMercadoObjImovel"
				rendered="#{!contratoCobrancaMB.inserirImovelOcultarValorMercadoImovel}"
				value="#{contratoCobrancaMB.objetoImovelCobranca.valorMercado}"
				onkeypress="return isNumberKey(event);"
				onkeydown="FormataValor(this, 13, event, 2);"
				converter="bigDecimalConverter" style="FONT-SIZE: 10pt;width:300px;" />
				
			<p:outputLabel for="valorLeilaoObjImovel"
				rendered="#{!contratoCobrancaMB.inserirImovelOcultarValorMercadoImovel}"
				value="Valor de Leilão do imóvel: " styleClass="labelBold" />
			<p:inputText id="valorLeilaoObjImovel"
				rendered="#{!contratoCobrancaMB.inserirImovelOcultarValorMercadoImovel}"
				value="#{contratoCobrancaMB.objetoImovelCobranca.valorLeilao}"
				onkeypress="return isNumberKey(event);"
				onkeydown="FormataValor(this, 13, event, 2);"
				converter="bigDecimalConverter" style="FONT-SIZE: 10pt;width:300px;" />

			<p:outputLabel for="dataCompra" value="Data da compra do Imóvel " />
			<h:panelGroup>
				<p:inputMask id="dataCompra"
					disabled="#{contratoCobrancaMB.inserirImovelDisable}"
					value="#{contratoCobrancaMB.objetoImovelCobranca.dataCompra}"
					mask="99/99/9999" label="Data de Nascimento">
					<p:ajax event="blur" update="idadeCompra"
						listener="#{contratoCobrancaMB.objetoImovelCobranca.calcularDataDeCompra()}" />
					<f:convertDateTime pattern="dd/MM/yyyy" />
				</p:inputMask>
				<p:spacer width="10px" />
				<p:outputLabel for="idadeCompra" value="Idade da Compra:  " />
				<p:inputText id="idadeCompra"
					disabled="#{contratoCobrancaMB.inserirImovelDisable}"
					value="#{contratoCobrancaMB.objetoImovelCobranca.idadeCompra}" />
			</h:panelGroup>

			<p:outputLabel for="nomeProprietario" value="Nome do Proprietario: " />
			<p:inputText id="nomeProprietario"
				disabled="#{contratoCobrancaMB.inserirImovelDisable}"
				value="#{contratoCobrancaMB.objetoImovelCobranca.nomeProprietario}"
				style="width:400px;" />

			<p:outputLabel for="Ocupacao" value="Ocupação: " />
			<p:selectOneMenu id="Ocupacao"
				disabled="#{contratoCobrancaMB.inserirImovelDisable}"
				value="#{contratoCobrancaMB.objetoImovelCobranca.ocupacao}"
				label="Ocupação" style="width:410px;">
				<f:selectItem itemValue="" itemLabel="Selecione" />
				<f:selectItem itemValue="Ocupado" itemLabel="Ocupado" />
				<f:selectItem itemValue="Ocupado por mim"
					itemLabel="Ocupado por mim" />
				<f:selectItem itemValue="Alugado" itemLabel="Alugado" />
				<f:selectItem itemValue="Vazio" itemLabel="Vazio" />
				<f:selectItem itemValue="Não sei" itemLabel="Não sei" />
			</p:selectOneMenu>

			<p:outputLabel for="inscricaoMunicipal" value="Inscrição Municipal: " />
			<p:inputText id="inscricaoMunicipal"
				value="#{contratoCobrancaMB.objetoImovelCobranca.inscricaoMunicipal}" />
				
			<p:outputLabel for="DescricaoImovel" value="Descrição: " styleClass="labelBold" />
			<h:inputTextarea id="DescricaoImovel" rows="5" cols="25" maxlength="3000" onblur=""
				counterTemplate="{0} characters remaining." autoResize="false"
				value="#{contratoCobrancaMB.objetoImovelCobranca.nome}">
				<p:ajax process="@this" partialSubmit="true" />
			</h:inputTextarea>
			
		</h:panelGrid>
	</p:panel>
</ui:composition>