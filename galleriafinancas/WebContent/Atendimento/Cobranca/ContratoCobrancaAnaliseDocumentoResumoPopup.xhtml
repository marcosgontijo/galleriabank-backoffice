<?xml version="1.0" encoding="UTF-8" ?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:shiro="http://shiro.apache.org/tags">


	<p:dialog header="Resumo Consultas" 
			widgetVar="resumoConsutlasDialog" showEffect="fade" hideEffect="fade"
			resizable="false" responsive="false" width="1000"
			positionType="center center" closable="true">
			<h:form id="resumoConsutlasForm">
				<h:panelGrid columns="4" columnClasses="painelResumo,painelResumo,painelResumo,painelResumo">
				
					<p:panel>
						<f:facet name="header">
							<h:outputText value="Engine" />
						</f:facet>
						
						<p:dataTable id="resumocliente" var="engine" rendered="#{contratoCobrancaMB.documentoAnalisePopup != null}"
							value="#{contratoCobrancaMB.documentoAnalisePopup.getResumoEngine()}">
							<p:column>
								<h:outputText value="#{engine.descricao}"></h:outputText>
							</p:column>
							<p:column>
								<h:outputText value="#{engine.valor}"></h:outputText>
							</p:column>
						</p:dataTable>
					</p:panel>

					<p:panel style="justify-content:start;">
						<f:facet name="header">
							<h:outputText value="Serasa" />
							<p:dataTable id="resumoSerasa" var="Serasa" rendered="#{contratoCobrancaMB.documentoAnalisePopup != null}"
							value="#{contratoCobrancaMB.documentoAnalisePopup.getResumoSerasa()}">
								<p:column>
									<h:outputText value="#{Serasa.descricao}"></h:outputText>
								</p:column>
								<p:column>
									<h:outputText value="#{Serasa.valor}"></h:outputText>
								</p:column>
								</p:dataTable>
						</f:facet>
						
					</p:panel>

					<p:panel style="justify-content:start;">
						<f:facet name="header">
							<h:outputText value="Cenprot" />
							<p:dataTable id="resumoCenprot" var="Cenprot" rendered="#{contratoCobrancaMB.documentoAnalisePopup != null}"
							value="#{contratoCobrancaMB.documentoAnalisePopup.getResumoCenprot()}">
								<p:column>
									<h:outputText value="#{Cenprot.descricao}" />
								</p:column>
								<p:column>
									<h:outputText value="#{Cenprot.valor}"/>
								</p:column>
							
							
							</p:dataTable>
						</f:facet>
					</p:panel>

					<p:panel>
						<f:facet name="header">
							<h:outputText value="SCR" />
							<p:dataTable id="resumoScr" var="scr" rendered="#{contratoCobrancaMB.documentoAnalisePopup != null}"
							value="#{contratoCobrancaMB.documentoAnalisePopup.getResumoScr()}">
							<p:column>
								<h:outputText value="#{scr.descricao}"/>
							</p:column>l
							<p:column>
								<h:outputText value="#{scr.valor}"/>
							</p:column>
							</p:dataTable>
						</f:facet>
						
					</p:panel>
					
					
				</h:panelGrid>
				
			</h:form>
		</p:dialog>
		
		<shiro:hasAnyRoles name="ROOT,PRECOBRANCAANALISTA,COBRANCA_FINANCEIRO, PROFILE_ANALISTA_CREDITO">
			<p:dialog header="Adicionar pessoa Analise" overflow="auto"
			rendered="#{contratoCobrancaMB.objetoContratoCobranca.emAnalise}"
				id="dialogAdicionarPessoaAnalise"
				widgetVar="adicionarPessoaAnaliseDlg" resizable="true"
				style="FONT-SIZE: 13pt;" width="800" minWidth="800">
				<h:form id="adicionarPessoaAnaliseForm">
					<div align="center">
						<h:panelGrid columns="2">
							<p:outputLabel for="AnaliseDocumentoPessoaNome"
								value="Nome da pessoa " style="margin-right:10px" />
							<h:panelGroup>
								<p:outputLabel id="AnaliseDocumentoPessoaNome"
									value="#{contratoCobrancaMB.documentoAnaliseAdicionar.pagador.nome}"
									required="false" style="FONT-SIZE: 10pt;width:300px;"
									styleClass="labelBold" />
								<p:spacer height="10" />
								<p:commandButton
									action="#{contratoCobrancaMB.pesquisaPessoaAnaliseDocumento}"
									icon="ui-icon ui-icon-circle-zoomin"
									oncomplete="PF('pagadorRecebedorDialog').show();"
									update="formReceborPagador" />
							</h:panelGroup>
		
							<h:outputText value="CPF"
								rendered="#{contratoCobrancaMB.documentoAnaliseAdicionar.pagador.cpf!= null}" />
							<h:outputText
								value="#{contratoCobrancaMB.documentoAnaliseAdicionar.pagador.cpf}"
								rendered="#{contratoCobrancaMB.documentoAnaliseAdicionar.pagador.cpf!= null}" />
	
							<h:outputText value="CNPJ"
								rendered="#{contratoCobrancaMB.documentoAnaliseAdicionar.pagador.cnpj != null}" />
							<h:outputText
								value="#{contratoCobrancaMB.documentoAnaliseAdicionar.pagador.cnpj}"
								rendered="#{contratoCobrancaMB.documentoAnaliseAdicionar.pagador.cnpj != null}" />
	
							<h:outputText value="Motivo" />
							<p:selectOneMenu
								value="#{contratoCobrancaMB.documentoAnaliseAdicionar.motivoAnalise}"
								label="Tipo" style="width:250px;">
								<f:selectItem itemValue="" itemLabel="Selecione o motivo" />
								<f:selectItem itemLabel="Proprietario Atual"
									itemValue="Proprietario Atual" />
								<f:selectItem itemLabel="Proprietario Anterior"
									itemValue="Proprietario Anterior" />
							</p:selectOneMenu>
						</h:panelGrid>
						<h:panelGrid columns="2" style="text-align:center">
							<p:commandButton value="Salvar" icon="ui-icon ui-icon-cancel"
								action="#{contratoCobrancaMB.adicionarPessoaAnalise}"
								update=":form:dtFilesAnalise"
								oncomplete="PF('adicionarPessoaAnaliseDlg').hide();" />
	
							<p:commandButton value="Cancelar" icon="ui-icon ui-icon-cancel"
								oncomplete="PF('adicionarPessoaAnaliseDlg').hide();" />
						</h:panelGrid>
					</div>
				</h:form>
			</p:dialog>
		</shiro:hasAnyRoles>
		
		
		<shiro:hasAnyRoles name="ROOT,PRECOBRANCAANALISTA,COBRANCA_FINANCEIRO, PROFILE_ANALISTA_CREDITO">
			<p:dialog header="Consultas Plexi" overflow="auto"
				id="dialogConsultasPlexi"
				widgetVar="consultasPlexiDlg" resizable="true"
				style="FONT-SIZE: 13pt;" width="800" minWidth="800">
				<h:form id="ConsultasPlexiForm">
					<div align="center">
					<p:dataTable id="dtConsultasPlexi" var="plexiConsulta"
						value="#{contratoCobrancaMB.documentoAnalisePopup.plexiConsultas}"
						emptyMessage="" rows="20" paginator="true"
		                paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
		                currentPageReportTemplate="{startRecord}-{endRecord} of {totalRecords} records"
		                rowsPerPageTemplate="20,40,100,140">
						
						<p:column style="text-align: center;" headerText="Identificação"
							filterBy="#{plexiConsulta.plexiDocumentos.nome}"
							filterMatchMode="contains" sortBy="#{plexiConsulta.plexiDocumentos.nome}">
							<h:outputText value="#{plexiConsulta.plexiDocumentos.nome}"/>
						</p:column>
						
						<p:column style="text-align: center;" headerText="Identificação"
							filterBy="#{plexiConsulta.plexiDocumentos.nome}"
							filterMatchMode="contains" sortBy="#{plexiConsulta.plexiDocumentos.nome}">
							<p:commandButton
								action="#{plexiMB.decodarBaixarArquivo(plexiConsulta)}"
								icon="ui-icon ui-icon-print" value="Download PDF"
								rendered="#{plexiConsulta.pdf != null}"
								ajax="false" />
						</p:column>
												
						
					</p:dataTable>

				</div>
				</h:form>
			</p:dialog>
		</shiro:hasAnyRoles>
		
</ui:composition>
