<?xml version="1.0" encoding="UTF-8" ?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
			    xmlns:ui="http://java.sun.com/jsf/facelets"
			    xmlns:f="http://java.sun.com/jsf/core"
				xmlns:h="http://java.sun.com/jsf/html"
				xmlns:p="http://primefaces.org/ui"
				xmlns:shiro="http://shiro.apache.org/tags"
			    template="/Menus/Menu.xhtml">
	<ui:define name="conteudo">  
		<h:form id="form">		
		 	<script src="#{request.contextPath}/resources/js/functions.js"></script>
		 	<script src="#{request.contextPath}/resources/js/locale-primefaces.js" library="javascript"></script>			
		 	<link rel="stylesheet" type="text/css" href="#{request.contextPath}/resources/css/Style.css" title="" media="all" /> 	
		 	<script src=".#{request.contextPath}/resources/js/jquery.mask.min.js"></script>	
			<script>
		        function validatePhone() {
		
		            var masks = ['(00) 00000-0000', '(00) 0000-00009'],
		                maskBehavior = function(val, e, field, options) {
		                    return val.length > 14 ? masks[0] : masks[1];
		                };
		
		            $('.phone').mask(maskBehavior, {onKeyPress:
		                        function(val, e, field, options) {
		                            field.mask(maskBehavior(val, e, field, options), options);
		                        }
		            });
		        }
		        $(document).ready(function() {
		            validatePhone();
		        }
		        );
			</script>
			
			<h:outputStylesheet >
			.labelSeguros{
				width: 128px;
			}
			.ValorSeguros{
				width: 100px;
			}
			</h:outputStylesheet>
			<ui:include src="ContratoCobrancaAnaliseDocumento.xhtml"></ui:include>
				
			<p:panel id="PanelLocador" header="Contrato - #{contratoCobrancaMB.tituloPainel}" style="margin-bottom:10px;">
				<p:focus /> 
				<p:messages/>
				
				<h:panelGrid columns="2">	
					<p:outputLabel for="numeroContrato" value="Número do Contrato: " styleClass="labelBold" style="width:250px;font-weight: bold; font-size: 18px;"/>
					<h:outputText id="numeroContrato" value="#{contratoCobrancaMB.objetoContratoCobranca.numeroContrato}"  autocomplete="no" label="Número do Contrato" style="font-weight: bold; font-size: 18px;"/>								
					<p:outputLabel for="dataContrato" value="Data do Contrato: " styleClass="labelBold" style="width:250px;font-weight: bold; font-size: 18px;"/>

					<h:outputText id="dataContrato" value="#{contratoCobrancaMB.objetoContratoCobranca.dataContrato}"  autocomplete="no" style="width:250px;font-weight: bold; font-size: 18px;">			            	
				          <f:convertDateTime locale="pt_BR"  />
				          <f:convertDateTime locale="pt_BR" pattern="dd/MM/yyyy"/>
				    </h:outputText>	
				</h:panelGrid>
				<shiro:hasAnyRoles name="ROOT, PRECOBRANCAANALISTA, PROFILE_AVALIADOR_IMOVEL, PROFILE_LAUDO, PROFILE_GERENTE_ANALISE">
					<h:panelGrid columns="2">   						
						<p:outputLabel value="Código do Responsável: " styleClass="labelBold" />
						<p:outputLabel value="#{contratoCobrancaMB.objetoContratoCobranca.responsavel.codigo}"  
							label="Código do Responsável" style="width:150px;" />
						<p:outputLabel for="NomeResp" value="Nome do Responsável: "
							styleClass="labelBold" />
						<h:panelGroup>
							<h:outputText id="NomeResp" style="width:150px;"
								value="#{contratoCobrancaMB.objetoContratoCobranca.responsavel.nome}"/>
							<h:outputText value="(Lead)" styleClass="labelBold" style="width:150px;"
								rendered="#{contratoCobrancaMB.objetoContratoCobranca.contratoLead}" />
						</h:panelGroup>
						
						<p:outputLabel id="gerenteContaLabel" value="Gerente"
							style="cursor:pointer" styleClass="labelBold"
							rendered="#{contratoCobrancaMB.objetoContratoCobranca.responsavel.donoResponsavel != null}" />
						<p:overlayPanel id="gerenteConta" for="gerenteContaLabel"
							showEffect="blind" hideEffect="blind" showEvent="mouseover"
							hideEvent="mousedown" dismissable="false" showCloseIcon="true">
							<p:panel id="gerenteContaInfo" header="Gerente da Conta"
								style="margin-bottom:10px;">
								<h:panelGrid columns="2">
									<p:outputLabel for="CodigoGerente" value="Código do Gerente: "
										styleClass="labelBold" />
									<h:outputText id="CodigoGerente"
										value="#{contratoCobrancaMB.objetoContratoCobranca.responsavel.donoResponsavel.codigo}"
										label="Código do Gerente" style="width:150px;" />
									<p:outputLabel for="NomeGerente" value="Nome do Gerente: "
										styleClass="labelBold" />
									<h:outputText id="NomeGerente"
										value="#{contratoCobrancaMB.objetoContratoCobranca.responsavel.donoResponsavel.nome}"
										label="Nome do Gerente" style="width:150px;" />
								</h:panelGrid>
							</p:panel>
						</p:overlayPanel>
					</h:panelGrid>
				</shiro:hasAnyRoles>

				<h:panelGroup id="laudoPajuPanel" style="margin-bottom:20px;">
					<p:panel header="Laudo + Paju"
						rendered="#{contratoCobrancaMB.objetoContratoCobranca.cadastroAprovadoValor == 'Aprovado'}">
						<h:panelGrid columns="2">
							<p:outputLabel
								value="Contato de Agendamendo de Laudo de Avaliacao: "
								styleClass="labelBold" style="font-weight: bold;" />
							<p:inputText
								value="#{contratoCobrancaMB.objetoContratoCobranca.contatoAgendamendoLaudoAvaliacao}"
								styleClass="labelBold"
								style="width:250px;font-weight: bold; font-size: 18px !important;" />
								
							<p:outputLabel for="observacaoContatoAgendaLaudoAvaliacao" value="Observação do Contato: "
								styleClass="labelBold" />
							<p:outputLabel id="observacaoContatoAgendaLaudoAvaliacao"
								value="#{contratoCobrancaMB.objetoContratoCobranca.observacaoContatoAgendaLaudoAvaliacao}"
								style="FONT-SIZE: 10pt;width:100px;white-space: pre-wrap;" />
						</h:panelGrid>
					</p:panel>
				</h:panelGroup>

				<h:panelGroup id="RecebidoPajulaudoPanel"
					style="margin-bottom:20px;">
					<p:panel rendered="#{contratoCobrancaMB.objetoContratoCobranca.cadastroAprovadoValor == 'Aprovado'}" header="Recebido PAJU e laudo">
						<h:panelGrid columns="2">
						
							<h:panelGrid columns="2">
							
								<p:outputLabel for="valorPreLaudo"
									value="Valor Pré Laudo: " styleClass="labelBold" />
								<p:inputText id="valorPreLaudo"
									value="#{contratoCobrancaMB.objetoContratoCobranca.valorPreLaudo}"
									onkeypress="return isNumberKey(event);"
									onkeydown="FormataValor(this, 13, event, 2);"
									converter="bigDecimalConverter"
									style="FONT-SIZE: 10pt;width:300px;"
									disabled="#{contratoCobrancaMB.deleteMode}" />
							
								<p:outputLabel for="valorMercadoImovel"
									value="Valor de mercado do imóvel: " styleClass="labelBold" />
								<p:inputText id="valorMercadoImovel"
									value="#{contratoCobrancaMB.objetoContratoCobranca.valorMercadoImovel}"
									onkeypress="return isNumberKey(event);"
									onkeydown="FormataValor(this, 13, event, 2);"
									converter="bigDecimalConverter"
									required="true"
									style="FONT-SIZE: 10pt;width:300px;"
									disabled="#{contratoCobrancaMB.deleteMode}" />
	
								<p:outputLabel for="valorVendaForcadaImovel"
									value="Valor de venda forçada do imóvel: "
									styleClass="labelBold" />
								<p:inputText id="valorVendaForcadaImovel"
									value="#{contratoCobrancaMB.objetoContratoCobranca.valorVendaForcadaImovel}"
									onkeypress="return isNumberKey(event);"
									onkeydown="FormataValor(this, 13, event, 2);"
									converter="bigDecimalConverter"
									style="FONT-SIZE: 10pt;width:300px;"
									disabled="#{contratoCobrancaMB.deleteMode}" />
							</h:panelGrid>
						
							<h:panelGrid columns="2">
								<p:outputLabel for="NumeroMatriculaLaudoPaju" value="Numero Matrícula: " />
								<p:inputText id="NumeroMatriculaLaudoPaju"
									value="#{contratoCobrancaMB.objetoImovelCobranca.numeroMatricula}"
									label="NumeroMatricula" onblur="" style="width:400px;" />

								<p:outputLabel for="EnderecoImovelLaudoPaju" value="Endereço: " />
								<p:inputText id="EnderecoImovelLaudoPaju"
									value="#{contratoCobrancaMB.objetoImovelCobranca.endereco}"
									label="Endereço" onblur="" style="width:400px;" />

								<p:outputLabel for="linkGMapsImovelLaudoPaju" value="Link Google Maps: " />
								<p:inputText id="linkGMapsImovelLaudoPaju"
									value="#{contratoCobrancaMB.objetoImovelCobranca.linkGMaps}"
									label="Link Google Maps" style="width:400px;" />

								<p:outputLabel for="TipoLaudoPaju" value="Tipo: " />
								<p:autoComplete id="TipoLaudoPaju" value="#{contratoCobrancaMB.objetoImovelCobranca.tipo}"
									completeMethod="#{contratoCobrancaMB.objetoImovelCobranca.completeTipoImovel}" 
									autocomplete="no" dropdown="true" forceSelection="true" var="tipo" 
									itemValue="#{contratoCobrancaMB.objetoImovelCobranca.getValue(tipo)}" 
									itemLabel="#{contratoCobrancaMB.objetoImovelCobranca.getLabel(tipo)}" 
									scrollHeight="250">
								</p:autoComplete>

								<p:outputLabel for="AreaTotalLaudoPaju"
									value="Área Total / Terreno (metros):  " />
								<p:inputText id="AreaTotalLaudoPaju"
									value="#{contratoCobrancaMB.objetoImovelCobranca.areaTotal}"
									style="width:150px;" />

								<p:outputLabel for="AreaConstruidaLaudoPaju"
									value="Área Útil / Construída (metros): " />
								<p:inputText id="AreaConstruidaLaudoPaju"
									value="#{contratoCobrancaMB.objetoImovelCobranca.areaConstruida}"
									style="width:150px;" />

							</h:panelGrid>
						
						</h:panelGrid>
						
						<h:panelGrid columns="2"
							rendered="#{contratoCobrancaMB.objetoContratoCobranca.pajurFavoravel == true}">
							<p:outputLabel for="comentarioJuridico"
								value="Comentario Juridico: " styleClass="labelBold" />
							<p:inputTextarea id="comentarioJuridico" rows="10" cols="48"
								counter="display" maxlength="3000" onblur=""
								counterTemplate="{0} characters remaining." autoResize="false"
								value="#{contratoCobrancaMB.objetoContratoCobranca.comentarioJuridico}" />
							<p:outputLabel id="display" />
						</h:panelGrid>
					</p:panel>
				</h:panelGroup>
				
				<ui:repeat value="#{contratoCobrancaMB.listTodosImoveisContrato}" var="objetoImovelCobranca">
					<!-- painel do detalhe imovel-->
					<ui:include src="ContratoCobrancaDetalheImovel.xhtml">
						<ui:param name="objetoImovelCobranca" value="#{objetoImovelCobranca}"/>
					</ui:include>
				</ui:repeat>
				
				<h:panelGroup id="CheckListInformacoesAdicionais">
					<p:panel header="Check-List - Informações Adicionais"
						style="margin-bottom:20px;" rendered="#{contratoCobrancaMB.objetoContratoCobranca.cadastroAprovadoValor == 'Aprovado'}">		
						<p:spacer height="10"></p:spacer>
						<h:panelGrid columns="1">
							<p:panel id="DataVistoriaPanel" style="border: none">
								<h:panelGrid columns="2">
									
									<p:dataView var="data" style="min-width: 150px;"
										value="#{contratoCobrancaMB.objetoContratoCobranca.listDatasVistoria}"
										paginator="false" layout="list">
										<p:dataViewListItem>
											<p:outputLabel value="#{data.dataVistoria}" styleClass="labelBold"
												size="100">
												<f:convertDateTime locale="pt_BR" pattern="dd/MM/yyyy HH:mm"/>
											</p:outputLabel>
											<p:spacer width="10px"></p:spacer>
											
											<shiro:hasAnyRoles name="ROOT,PRECOBRANCAANALISTA,PRECOBRANCA, PROFILE_AVALIADOR_IMOVEL, PROFILE_LAUDO, PROFILE_ANALISTA_COMITE, PROFILE_GERENTE_ANALISE">
												<p:commandButton icon="ui-icon-trash"
													action="#{contratoCobrancaMB.removeDataVistoria(data)}"
													update="form:CheckListInformacoesAdicionais" />
											</shiro:hasAnyRoles>
											
											<shiro:hasAnyRoles name="ROOT, USER_GALACHE, AVALIADORIMOVEL, PROFILE_AVALIADOR_IMOVEL_COMPASS, PROFILE_AVALIADOR_IMOVEL_GALACHE, PROFILE_GERENTE_ANALISE, PROFILE_LAUDO">
												<p:commandButton icon="ui-icon-check" 
													rendered="#{contratoCobrancaMB.objetoContratoCobranca.dataPrevistaVistoria == null 
													|| contratoCobrancaMB.objetoContratoCobranca.dataPrevistaVistoria == ''}"
													action="#{contratoCobrancaMB.selecionaDataVistoria(data)}"
													update="form:CheckListInformacoesAdicionais" />
											</shiro:hasAnyRoles>
										</p:dataViewListItem>
									</p:dataView>								
									<p:spacer></p:spacer>	
									
									<p:outputLabel for="dataVistoria"
										value="Data Vistoria Imóvel: " styleClass="labelBold" />
									<p:outputLabel id="dataVistoria" value="#{contratoCobrancaMB.objetoContratoCobranca.dataPrevistaVistoria}" styleClass="labelBold" size="100">
										<f:convertDateTime pattern="dd/MM/yyyy HH:mm"/>
									</p:outputLabel>
									
									<p:outputLabel for="nomeVistoriador"
										value="Nome Vistoriador: " styleClass="labelBold" />
									<p:inputText id="nomeVistoriador"
										value="#{contratoCobrancaMB.objetoContratoCobranca.nomeVistoriador}"
										style="FONT-SIZE: 10pt;width:300px;"/>																							
																																															
									<p:outputLabel for="avaliacaoLaudoObservacao"
										value="Observação Avaliação: " styleClass="labelBold" />
									<p:inputTextarea id="avaliacaoLaudoObservacao" rows="5"
										cols="84" maxlength="3000" onblur=""
										counterTemplate="{0} characters remaining." autoResize="false"
										value="#{contratoCobrancaMB.objetoContratoCobranca.avaliacaoLaudoObservacao}" />	
										
									<p:outputLabel styleClass="labelBold">Geração Laudo Iniciada? </p:outputLabel>									
									<p:selectBooleanButton value="#{contratoCobrancaMB.objetoContratoCobranca.iniciouGeracaoLaudo}" 
											onLabel="Iniciado" offLabel="Não Iniciado" onIcon="ui-icon-check" offIcon="ui-icon-close" style="width:=80px"/>													
										
									<shiro:hasAnyRoles name="ROOT, AVALIADORIMOVEL, PROFILE_AVALIADOR_IMOVEL_COMPASS">				
										<p:outputLabel for="avaliacaoEngenharia"
											value="O Imovel é: " styleClass="labelBold" />
										<p:selectOneMenu id="avaliacaoEngenharia"
											value="#{contratoCobrancaMB.objetoContratoCobranca.avaliacaoEngenharia}" style="width:100px;">
											<f:selectItem itemValue="" itemLabel="" />
											<f:selectItem itemValue="Bom" itemLabel="Bom" />
											<f:selectItem itemValue="Ruim" itemLabel="Ruim" />
											<p:ajax update="pedirLaudoBtn" event="valueChange" />
										</p:selectOneMenu>
									</shiro:hasAnyRoles>
								
								</h:panelGrid>
								<h:panelGrid columns="3">
									<p:outputLabel styleClass="labelBold"
										rendered="#{contratoCobrancaMB.objetoContratoCobranca.pedidoLaudoPajuComercial and contratoCobrancaMB.objetoContratoCobranca.avaliacaoLaudo eq 'Compass'}">Laudo Pedido: </p:outputLabel>								
									<p:selectBooleanButton id="pedirLaudoBtn" value="#{contratoCobrancaMB.objetoContratoCobranca.laudoRecebido}" 
										onLabel="Laudo Pronto" offLabel="Laudo Pendente" onIcon="ui-icon-check" offIcon="ui-icon-close" style="width:=80px"
										disabled="#{contratoCobrancaMB.objetoContratoCobranca.avaliacaoEngenharia eq null or contratoCobrancaMB.objetoContratoCobranca.avaliacaoEngenharia eq ''}"
										rendered="#{contratoCobrancaMB.objetoContratoCobranca.pedidoLaudo
										and contratoCobrancaMB.objetoContratoCobranca.avaliacaoLaudo eq 'Compass'}"/>			
									<p:commandButton value="Atualizar Check-List" ajax="false" icon="ui-icon-check" action="#{contratoCobrancaMB.atualizaContratoAvaliacaoImovel}" style="TEXT-DECORATION: bold; width: 170px; height: 55px;" rendered="#{contratoCobrancaMB.updateMode}">
										<f:setPropertyActionListener target="#{contratoCobrancaMB.preContratoCustom}" value="false" />			
									</p:commandButton>
								</h:panelGrid>	
							</p:panel>
						</h:panelGrid>
					</p:panel>
				</h:panelGroup>
								

				<p:panel id="Infos" header="Outras Informações"
					style="margin-bottom:10px;">
					<h:panelGrid columns="2">
						<h:panelGrid columns="2">
							<p:outputLabel for="quantoPrecisa" value="Qual valor precisa? "
								styleClass="labelBold" />
							<p:inputText id="quantoPrecisa"
								value="#{contratoCobrancaMB.objetoContratoCobranca.quantoPrecisa}"
								onkeypress="return isNumberKey(event);"
								onkeydown="FormataValor(this, 13, event, 2);" required="true"
								converter="bigDecimalConverter" />
								
							<p:outputLabel for="tipoOperacao" value="Tipo da Operação" styleClass="labelBold" />
							<p:selectOneRadio id="tipoOperacao" unselectable="true" required="true" columns="1"
								layout="responsive" value="#{contratoCobrancaMB.objetoContratoCobranca.tipoOperacao}">
								<f:selectItem itemLabel="Home Equity" itemValue="Home Equity" />
								<f:selectItem itemLabel="Financiamento com aquisição imóvel" itemValue="Emprestimo" />
								<p:ajax update="compraVenda" event="change"/>
							</p:selectOneRadio>
						</h:panelGrid>
						
						<h:panelGroup id="compraVenda">
							<h:panelGrid columns="2" rendered="#{contratoCobrancaMB.objetoContratoCobranca.tipoOperacao == 'Emprestimo'}">
								<p:outputLabel for="valorCompraVenda" value="Valor de Compra e Venda"
									styleClass="labelBold" />
								<p:inputText id="valorCompraVenda" 
									value="#{contratoCobrancaMB.objetoContratoCobranca.valorCompraVenda}"
									onkeypress="return isNumberKey(event);"
									onkeydown="FormataValor(this, 13, event, 2);" 
									converter="bigDecimalConverter" />
									
								<p:outputLabel for="recebedorCompraVenda" value="Recebedor"
									styleClass="labelBold" />							
								<p:selectOneMenu id="recebedorCompraVenda"
									value="#{contratoCobrancaMB.objetoContratoCobranca.recebedorCompraVenda}" ajax="true">
									<f:selectItem itemValue="Vendedor" itemLabel="Vendedor" />							
									<f:selectItem itemValue="Comprador" itemLabel="Comprador" />	
								</p:selectOneMenu>
							</h:panelGrid>
						</h:panelGroup>
					</h:panelGrid>
				</p:panel>																																																			
			</p:panel>
			
			<p:messages id="msgArquivo"/>
			
			<p:panel id="UploadArquivosInternos" header="" style="margin-bottom:10px;">										
				<p:dialog modal="true" widgetVar="statusDialog" header="Status Downloading" draggable="false" closable="false" resizable="false">
				    <p:graphicImage name="image/ajaxloadingbar.gif" />
				</p:dialog>

				<p:panel id="ArquivosInternosSalvos" header="Arquivo(s) Salvo(s) no Contrato" style="margin-bottom:10px;">							
					<h:panelGrid columns="1">			                      								
						<p:dataTable id="dtFilesInterno" var="filesInterno" value="#{contratoCobrancaMB.filesInterno}" rowKey="#{filesInterno.name}" selection="#{contratoCobrancaMB.deletefilesInterno}" emptyMessage="" sortBy="#{filesInterno.name}" >	
							<p:column selectionMode="multiple" style="width:16px;text-align:center"/>
							 <f:facet name="header">
								<p:commandButton value="Download Selecionado(s)" ajax="false"  icon="ui-icon-arrowthick-1-s">						       	 	
						       	 	<p:fileDownload value="#{contratoCobrancaMB.downloadAllFilesInterno}" />
						    	</p:commandButton>								 							
					        </f:facet>	        
					        <p:column style="text-align: center;"
								headerText="Nome do Arquivo" filterBy="#{filesInterno.name}"
								filterMatchMode="contains" sortBy="#{filesInterno.name}">
								<h:outputText
								
										value="#{filesInterno.name}" />
								<p:spacer height="10" />
								<p:commandButton value="Abrir" ajax="false" action="#{contratoCobrancaMB.viewFile(filesInterno)}"
									immediate="true" icon="ui-icon-search" onclick="target='_blank'" onblur="target='_self'">
								</p:commandButton>
							</p:column>  
					        
					        <p:column style="width:100px;">
								<p:commandButton value="Download" ajax="false"  icon="ui-icon-arrowthick-1-s">						       	 	
						       	 	<f:setPropertyActionListener target="#{contratoCobrancaMB.selectedFile}" value="#{filesInterno}" />
						       	 	<p:fileDownload value="#{contratoCobrancaMB.downloadFile}" />
						    	</p:commandButton>	
				            </p:column>						        

				             <f:facet name="footer">
								<p:commandButton value="Download Selecionado(s)" ajax="false"  icon="ui-icon-arrowthick-1-s">						       	 	
						       	 	<p:fileDownload value="#{contratoCobrancaMB.downloadAllFilesInterno}" />
						    	</p:commandButton>					             								
					        </f:facet>             	        		               		        			        			           			 		
						</p:dataTable>								
					</h:panelGrid>  
				</p:panel>
				<script type="text/javascript">
					function start() {
					    PF('statusDialog').show();
					}
					 
					function stop() {
					    PF('statusDialog').hide();
					}
				</script>
			</p:panel>		
			
			<p:panel id="UploadArquivosJuridico" header="Upload de Arquivo Juridico(s)" style="margin-bottom:10px;" >						
				<p:panel id="ArquivosJuridico" header="Selecionar Arquivo Juridico(s)" style="margin-bottom:10px;text-align: center;">							
					<h:panelGrid columns="1">		
						<p:fileUpload label="Selecionar Arquivo(s)" uploadLabel="Salvar Arquivo(s)" multiple="true" cancelLabel="Cancelar" fileUploadListener="#{contratoCobrancaMB.handleFileJuridicoUpload}" mode="advanced" dragDropSupport="true"
                          update="ArquivosJuridicoSalvos msgArquivo" />								
					</h:panelGrid>  
				</p:panel>	
				
				<p:dialog modal="true" widgetVar="statusDialog" header="Status Downloading" draggable="false" closable="false" resizable="false">
				    <p:graphicImage name="image/ajaxloadingbar.gif" />
				</p:dialog>

				<p:panel id="ArquivosJuridicoSalvos" header="Arquivo(s) Juridico Salvo(s) no Contrato" style="margin-bottom:10px;">							
					<h:panelGrid columns="1">			                      								
						<p:dataTable id="dtFilesJuridico" var="filesJuridico" value="#{contratoCobrancaMB.filesJuridico}" rowKey="#{filesJuridico.name}" selection="#{contratoCobrancaMB.deletefilesJuridico}" emptyMessage="" sortBy="#{filesJuridico.name}" >	
							<p:column selectionMode="multiple" style="width:16px;text-align:center"/>
							 <f:facet name="header">							 
								<p:commandButton value="Excluir Selecionado(s)" ajax="false" icon="ui-icon-trash" action="#{contratoCobrancaMB.deleteFileJuridico}"/>
								<p:commandButton value="Download Selecionado(s)" ajax="false"
									icon="ui-icon-arrowthick-1-s" immediate="true"
									action="#{contratoCobrancaMB.getDownloadAllFilesJuridico()}">
								</p:commandButton>	
					        </f:facet>	        
					        <p:column style="text-align: center;"
								headerText="Nome do Arquivo" filterBy="#{filesJuridico.name}"
								filterMatchMode="contains" sortBy="#{filesJuridico.name}">
								<h:outputText
								
										value="#{filesJuridico.name}" />
								<p:spacer height="10" />
								<p:commandButton value="Abrir" ajax="false" action="#{contratoCobrancaMB.viewFile(filesJuridico)}"
									immediate="true" icon="ui-icon-search" onclick="target='_blank'" onblur="target='_self'">
								</p:commandButton>
							</p:column>  
					        
					        <p:column style="width:100px;">
								<p:commandButton value="Download" ajax="false"  icon="ui-icon-arrowthick-1-s">						       	 	
						       	 	<f:setPropertyActionListener target="#{contratoCobrancaMB.selectedFile}" value="#{filesJuridico}" />
						       	 	<p:fileDownload value="#{contratoCobrancaMB.downloadFile}" />
						    	</p:commandButton>	
				            </p:column>						        

				             <f:facet name="footer">	             
								<p:commandButton value="Excluir Selecionado(s)" ajax="false" icon="ui-icon-trash" action="#{contratoCobrancaMB.deleteFileJuridico}"/>								
					        </f:facet>     
				       		<p:ajax event="rowSelectCheckbox" process="@this"
								listener="#{contratoCobrancaMB.fileSelectionListener()}" />
							<p:ajax event="rowUnselectCheckbox" process="@this"
								listener="#{contratoCobrancaMB.fileSelectionListener()}" />
							<p:ajax event="toggleSelect" process="@this"
								listener="#{contratoCobrancaMB.fileSelectionListener()}" />        	        		               		        			        			           			 		
						</p:dataTable>								
					</h:panelGrid>  
				</p:panel>
				<script type="text/javascript">
					function start() {
					    PF('statusDialog').show();
					}
					 
					function stop() {
					    PF('statusDialog').hide();
					}
				</script>
			</p:panel>	
					
			<div align="center">
				<p:commandButton value="Atualizar" ajax="false" icon="ui-icon-check" action="#{contratoCobrancaMB.atualizaContratoAvaliacaoImovel()}" style="TEXT-DECORATION: bold;" rendered="#{contratoCobrancaMB.updateMode}">
					<f:setPropertyActionListener target="#{contratoCobrancaMB.preContratoCustom}" value="false" />	
				</p:commandButton>		 						
				<p:commandButton value="Cancelar" immediate="true" icon="ui-icon-cancel" onclick="window.history.back();" style="TEXT-DECORATION: bold; "/>								
			</div>			
		</h:form>	
		<ui:include src="ContratoCobrancaAnaliseDocumentoResumoPopup.xhtml"></ui:include>
		
		<ui:include src="../../Dialog/DialogRecebedorPagador.xhtml">
				<ui:param name="mbean" value="#{contratoCobrancaMB}"></ui:param>
				<ui:param name="titulo" value="#{contratoCobrancaMB.tituloPagadorRecebedorDialog}"></ui:param>
				<ui:param name="permiteAdicionarPessoa" value="false"></ui:param>			
			</ui:include>
	</ui:define>
</ui:composition>