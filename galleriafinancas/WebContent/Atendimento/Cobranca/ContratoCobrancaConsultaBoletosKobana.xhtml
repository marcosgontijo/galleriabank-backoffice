<?xml version="1.0" encoding="UTF-8" ?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:shiro="http://shiro.apache.org/tags"
	xmlns:p="http://primefaces.org/ui" template="../MenuAtendimento.xhtml">

	<ui:define name="conteudo">
		<h:form id="form" style="margin-bottom:10px;">
			<script src="#{request.contextPath}/resources/js/functions.js"></script>
			<script src="#{request.contextPath}/resources/js/locale-primefaces.js" library="javascript"></script>
			<p:messages id="mensagens" showDetail="true" />		
			<p:focus />
			<p:messages />	
			<p:growl id="msgs" showDetail="true" />
			<p:panel id="ConsultaBoletosKobana" header="Consulta Boletos Kobana"
				style="margin-bottom:10px;">
				
				<h:panelGrid columns="2">
					<p:outputLabel for="FiltroStatus" value="Status: "
						styleClass="labelBold" style="margin-right: 59px;" />
					<p:selectOneRadio id="FiltroStatus"
						value="#{kobanaMB.filtroStatus}" required="true">
						<f:selectItem itemLabel="Todos" itemValue="Todos" />
						<f:selectItem itemLabel="Pagos" itemValue="paid" />
						<f:selectItem itemLabel="Registrados" itemValue="opened" />
						<f:selectItem itemLabel="Cancelados" itemValue="canceled" />
					</p:selectOneRadio>
					
					<p:outputLabel for="FiltroData" value="Data: "
						styleClass="labelBold" style="margin-right: 59px;" />
					<p:selectOneRadio id="FiltroData"
						value="#{kobanaMB.filtroData}" required="true">
						<f:selectItem itemLabel="Todos" itemValue="Todos" />
						<f:selectItem itemLabel="Registro" itemValue="Registro" />
						<f:selectItem itemLabel="Vencimento" itemValue="Vencimento" />
						<f:selectItem itemLabel="Pagamento" itemValue="Pagamento" />
						<p:ajax update=":form:panelDatas" event="change" />
					</p:selectOneRadio>
				</h:panelGrid>
				
				<h:panelGroup id="panelDatas">
					<p:panel header="Período Consulta"
						style="margin-bottom:10px;margin-top:20px !important;" rendered="#{kobanaMB.filtroData ne 'Todos'}">
						<h:panelGrid columns="2">									
							<p:outputLabel for="dataInicio" value="Data Inicio: "
								styleClass="labelBold" style="margin-right: 59px;" />
							<p:calendar id="dataInicio"
								value="#{kobanaMB.dtInicioConsulta}"
								required="true" label="Data Inicio" size="100"
								pattern="dd/MM/yyyy" locale="pt" styleClass="dateTimeField"/>
							<p:outputLabel for="dataFim" value="Data Fim "
								styleClass="labelBold" style="margin-right: 59px;"/>
							<p:calendar id="dataFim"
								value="#{kobanaMB.dtFimConsulta}" required="true"
								label="Data Fim" size="100" pattern="dd/MM/yyyy" locale="pt"
								styleClass="dateTimeField"/>
						</h:panelGrid>
					</p:panel>
				</h:panelGroup>

				<p:commandButton value="Consultar Boletos"
					action="#{kobanaMB.consultarBoletosKobana}"
					icon="ui-icon ui-icon-check"
					update="mensagens ConsultaBoletosKobanaResultado"
					
					style="TEXT-DECORATION: bold; margin-top: 15px;" />
			</p:panel>
			<p:panel id="ConsultaBoletosKobanaResultado" header="Consulta Boletos Kobana - Resultados"
				style="margin-bottom:10px;">
				<p:dataTable id="dtBoletosKobana" var="boleto" 
					value="#{kobanaMB.listBoletosKobana}"
					emptyMessage="" sortBy="#{boleto.createdAt}"
					rowStyleClass="#{(boleto.status eq 'Pago' and boleto.parcela.parcelaPaga eq true) ? 'parcelaPaga' : (boleto.status eq 'Pago' and boleto.parcela.parcelaPaga eq false) ? 'parcelaBoletoPago' : null}"
					sortOrder="descending"
					rowKey="#{boleto.id}"
					selection="#{contratoCobrancaMB.selectedBoletosKobana}">

					<f:facet name="header">
						<p:commandButton onclick="PF('baixaParcelasLoteDialog').show();"
							title="Baixar Parcela(s) Lote" value="Baixar Parcela(s) Lote" icon="ui-icon-transferthick-e-w"
							update=":formBaixaParcelasLote" style="">
						</p:commandButton>
			        </f:facet>
			        
					<p:column selectionMode="multiple" style="width:16px;text-align:center" rendered="#{boleto.parcela.parcelaPaga ne true}"/>
					<p:column  rendered="#{boleto.parcela.parcelaPaga eq true}"/>
					
					<p:column style="text-align: center;"
						headerText="Registro" sortBy="#{boleto.createdAt}">
						<h:outputText value="#{boleto.createdAt}">
							<f:convertDateTime locale="pt_BR" />
							<f:convertDateTime locale="pt_BR" pattern="dd/MM/yyyy" />
						</h:outputText>
					</p:column>
					<p:column style="text-align: center;"
						headerText="Vencimento" sortBy="#{boleto.expireAt}">
						<h:outputText value="#{boleto.expireAt}">
							<f:convertDateTime locale="pt_BR" />
							<f:convertDateTime locale="pt_BR" pattern="dd/MM/yyyy" />
						</h:outputText>
					</p:column>
					<p:column style="text-align: center;"
						headerText="Pagamento" sortBy="#{boleto.paidAt}">
						<h:outputText value="#{boleto.paidAt}">
							<f:convertDateTime locale="pt_BR" />
							<f:convertDateTime locale="pt_BR" pattern="dd/MM/yyyy" />
						</h:outputText>
					</p:column>					
					<p:column style="text-align: center;"
						headerText="Status" filterMatchMode="contains"
						sortBy="#{boleto.status}">
						<h:outputText value="#{boleto.status}" />
					</p:column>	
					<p:column style="text-align: center;"
						headerText="Empresa" filterMatchMode="contains"
						sortBy="#{boleto.contrato.empresa}">
						<h:outputText value="#{boleto.contrato.empresa}" />
					</p:column>
					<p:column style="text-align: center;"
						headerText="Cedente" filterMatchMode="contains"
						sortBy="#{boleto.beneficiaryName}">
						<h:outputText value="#{boleto.beneficiaryName}" />
					</p:column>
					<p:column style="text-align: center;"
						headerText="Contrato" filterMatchMode="contains"
						sortBy="#{boleto.documentNumber}">
						<h:outputText value="#{boleto.documentNumber}" />
					</p:column>
					<p:column style="text-align: center;"
						headerText="Cliente" filterMatchMode="contains"
						sortBy="#{boleto.customerPersonName}">
						<h:outputText value="#{boleto.customerPersonName}" />
					</p:column>
					<p:column style="text-align: center;"
						headerText="Valor Parcela (R$)">
						<h:outputText value="#{boleto.vlrParcela}"
							converter="bigDecimalConverter">
						</h:outputText>
					</p:column>
					<p:column style="text-align: center;"
						headerText="Valor Pago (R$)">
						<h:outputText value="#{boleto.paidAmount}"
							converter="bigDecimalConverter">
						</h:outputText>
					</p:column>
					<p:column style="text-align: center;"
						headerText="# Parcela / Baixada?">
						<ui:fragment rendered="#{boleto.parcela ne null}">
							<ui:fragment rendered="#{boleto.parcela.parcelaPaga eq true}">
								<h:outputText value="#{boleto.parcela.numeroParcela} / Sim" />
							</ui:fragment>
							<ui:fragment rendered="#{boleto.parcela.parcelaPaga eq false}">
								<h:outputText value="#{boleto.parcela.numeroParcela} / Não" />
							</ui:fragment>
						</ui:fragment>
						<ui:fragment rendered="#{boleto.parcela eq null}">
							<h:outputText value="Multi-Parcelas" />
						</ui:fragment>						
					</p:column>
					<p:column style="text-align: center;width: 130px;"
						headerText="Baixar Parcela" styleClass="colunaHiddenRelFinanceiro">
						<p:commandButton action="#{contratoCobrancaMB.updateDialogBaixaKobana(boleto)}" oncomplete="PF('baixaParcialDialog').show();"
							title="Baixar Parcela" icon="ui-icon-transferthick-e-w"
							update=":formBaixaParcial" style="height: 25px;width: 30px;" rendered="#{boleto.status eq 'Pago' and boleto.parcela.id gt 0}">
							<f:setPropertyActionListener
								target="#{contratoCobrancaMB.callMetodoPorDialogBaixaParcial}" value="true" />	
							<f:setPropertyActionListener
								target="#{contratoCobrancaMB.objetoContratoCobranca}"
								value="#{boleto.contrato}" />							
							<f:setPropertyActionListener
								target="#{contratoCobrancaMB.bpContratoCobrancaDetalhesCustom}"
								value="#{boleto.parcela}" />
							<f:setPropertyActionListener
								target="#{contratoCobrancaMB.reciboGerado}" value="false" />
							<f:setPropertyActionListener
								target="#{contratoCobrancaMB.txZero}" value="true" />
							<f:setPropertyActionListener 
								target="#{contratoCobrancaMB.rowEditNewDate}"
								value="#{boleto.paidAt}" />
						</p:commandButton>
						<p:commandButton onclick="PF('baixaParcialMultiParcelasDialog').show();"
							title="Baixar Parcela - MultiParcelas" icon="ui-icon-circle-plus"
							update=":formBaixaParcialMultiParcelas" style="height: 25px;width: 30px;" rendered="#{boleto.status eq 'Pago' and boleto.parcela eq null}">
							<f:setPropertyActionListener
								target="#{contratoCobrancaMB.callMetodoPorDialogBaixaParcial}" value="true" />	
							<f:setPropertyActionListener
								target="#{contratoCobrancaMB.objetoContratoCobranca}"
								value="#{boleto.contrato}" />	
							<f:setPropertyActionListener
								target="#{contratoCobrancaMB.rowEditNewDate}"
								value="#{boleto.paidAt}" />		
							<f:setPropertyActionListener
								target="#{contratoCobrancaMB.selectedParcelas}"
								value="#{boleto.multiParcelas}" />			
							<f:setPropertyActionListener
								target="#{contratoCobrancaMB.reciboGerado}" value="false" />
							<f:setPropertyActionListener
								target="#{contratoCobrancaMB.txZero}" value="true" />
							<f:setPropertyActionListener
								target="#{contratoCobrancaMB.vlrRecebido}"
								value="#{boleto.paidAmount}" />
						</p:commandButton>
					</p:column>
					<p:column style="text-align: center;width: 130px;"
						headerText="Link Boleto" styleClass="colunaHiddenRelFinanceiro">
						<ui:fragment rendered="#{boleto.urlBoleto ne null}">
							<h:outputLink value="#{boleto.urlBoleto}" target="_blank" styleClass="botaoBoletoKobana">#{boleto.urlBoleto}</h:outputLink>
						</ui:fragment>
					</p:column>
					<p:column style="text-align: center;width: 130px;"
						headerText="Cancelar Boleto" styleClass="colunaHiddenRelFinanceiro">
						<p:commandButton 
							title="Cancelar Boleto"
							icon="ui-icon-trash"
							action="#{kobanaMB.cancelarBoleto}"
							update=":form:msgs"
							style="height: 25px;width: 30px;">
							<p:confirm header="Confirmação"
								message="Deseja realmente cancelar este boleto?"
								icon="ui-icon-alert" />	
							<f:setPropertyActionListener
								target="#{kobanaMB.selectedBoletoKobana}"
								value="#{boleto}" />
							<f:setPropertyActionListener
								target="#{kobanaMB.parcela}"
								value="#{boleto.parcela}" />
						</p:commandButton>
					</p:column>	
					<f:facet name="footer">
						<p:commandButton onclick="PF('baixaParcelasLoteDialog').show();"
							title="Baixar Parcela(s) Lote" value="Baixar Parcela(s) Lote" icon="ui-icon-transferthick-e-w"
							update=":formBaixaParcelasLote" style="">
						</p:commandButton>
			        </f:facet>										
				</p:dataTable>
			</p:panel>
		</h:form>
		<p:dialog header="Baixa Parcelas - Lote" widgetVar="baixaParcelasLoteDialog"
			resizable="false" style="FONT-SIZE: 10pt;" responsive="true"
			height="650" width="500">
			<h:form id="formBaixaParcelasLote">
				<h:panelGrid columns="1">			
					<p:dataTable id="dtParcelasSelecionadas" var="parcelasSelecionadas"
								value="#{contratoCobrancaMB.selectedBoletosKobana}"
								rowStyleClass="#{parcelasSelecionadas.parcela.parcelaPaga eq true ? 'parcelaPaga' : 'parcelaVencendo'}"
								emptyMessage="Nenhuma parcela selecionada!!!" style="margin-top: 20px;" sortBy="#{parcelasSelecionadas.id}">
						<p:column style="text-align: center;"
							headerText="Parcela">
							<h:outputText value="#{parcelasSelecionadas.parcela.numeroParcela}"/>
						</p:column>		
						<p:column style="text-align: center;"
							headerText="Valor da Parcela">
							<h:outputText value="#{parcelasSelecionadas.vlrParcela}" converter="bigDecimalConverter" />
						</p:column>	
						<p:column style="text-align: center;"
							headerText="Valor Pago">
							<h:outputText value="#{parcelasSelecionadas.paidAmount}" converter="bigDecimalConverter" />
						</p:column>	
						<p:column style="text-align: center;"
							headerText="Baixada?">
							<ui:fragment rendered="#{parcelasSelecionadas.parcela.parcelaPaga}">
								<h:outputText value="Sim" />
							</ui:fragment>
							<ui:fragment rendered="#{!parcelasSelecionadas.parcela.parcelaPaga}">
								<h:outputText value="Não" />
							</ui:fragment>
						</p:column>			
					</p:dataTable>
				</h:panelGrid>

				<p:panel id="ConsultaObservacores" header="Detalhes do Pagamento"
					style="margin-bottom:10px;margin-top:10px;">
					<h:panelGrid columns="2">
						<p:outputLabel for="Observacao" value="Observação: " />
						<p:inputTextarea rows="10" cols="50" id="Observacao"
							value="#{contratoCobrancaMB.observacao}" label="Observação"
							onblur="" style="width:300px;" />
						<p:spacer width="10" />
					</h:panelGrid>
				</p:panel>

				<div align="center" style="margin-top: 20px;">
					<shiro:hasAnyRoles name="ROOT">
						<p:commandButton
							action="#{contratoCobrancaMB.baixarParcelasKobanaLote()}" ajax="false" 
							icon="ui-icon-transferthick-e-w" value="Baixar"
							update=":form:DetalheParcelas" />
						<p:spacer width="10" />
					</shiro:hasAnyRoles>
					<p:commandButton value="Cancelar" icon="ui-icon ui-icon-cancel"
						oncomplete="PF('baixaParcelasLoteDialog').hide();" />
				</div>
			</h:form>
		</p:dialog>
	
		<p:dialog header="Baixa Parcial - MultiParcelas" widgetVar="baixaParcialMultiParcelasDialog"
			resizable="false" style="FONT-SIZE: 10pt;" responsive="true"
			height="650" width="500">
			<h:form id="formBaixaParcialMultiParcelas">
				<h:panelGrid columns="2">
					<p:outputLabel for="numeroContrato" value="Número do Contrato:"
						styleClass="labelBold" style="margin-right: 59px;" />
					<h:outputText id="numeroContrato"
						value="#{contratoCobrancaMB.objetoContratoCobranca.numeroContrato}"
						label="Número do Contrato"
						style="font-weight: bold; font-size: 18px;" />
					<p:outputLabel for="dataPagamento" value="Data do Pagamento: "
						styleClass="labelBold" style="margin-right: 59px;" />
					<p:calendar id="dataPagamento"
						value="#{contratoCobrancaMB.rowEditNewDate}" required="true"
						label="Data do Pagamento" size="100" pattern="dd/MM/yyyy"
						styleClass="dateTimeField">
					</p:calendar>
				</h:panelGrid>
				<h:panelGrid columns="1">			
					<p:dataTable id="dtParcelasSelecionadas" var="parcelasSelecionadas"
								value="#{contratoCobrancaMB.selectedParcelas}"
								rowStyleClass="#{parcelas.parcelaPaga eq true ? 'parcelaPaga' : 'parcelaVencendo'}"
								emptyMessage="Nenhuma parcela selecionada!!!" style="margin-top: 20px;" sortBy="#{parcelasSelecionadas.id}">
						<p:column style="text-align: center;"
							headerText="Parcela">
							<h:outputText value="#{parcelasSelecionadas.numeroParcela}"/>
						</p:column>		
						<p:column style="text-align: center;"
							headerText="Valor da Parcela">
							<h:outputText value="#{parcelasSelecionadas.vlrParcela}" converter="bigDecimalConverter" />
						</p:column>	
						<p:column style="text-align: center;"
							headerText="Baixada?">
							<ui:fragment rendered="#{parcelasSelecionadas.parcelaPaga}">
								<h:outputText value="Sim" />
							</ui:fragment>
							<ui:fragment rendered="#{!parcelasSelecionadas.parcelaPaga}">
								<h:outputText value="Não" />
							</ui:fragment>
						</p:column>			
					</p:dataTable>
				</h:panelGrid>
					
				<p:panel id="ValoresAtualizados" header="Valores Atualizados"
					style="margin-top:20px;margin-bottom:20px;">
					<h:panelGrid columns="3">
						<p:outputLabel for="valorRecebido" value="Valor Recebido: "
							styleClass="labelBold" style="margin-right: 59px;" />
						<h:outputText value="R$"
							style="font-weight: bold; font-size: 18px;" />
						<p:inputText id="valorRecebido"
							value="#{contratoCobrancaMB.vlrRecebido}"
							onkeypress="return isNumberKey(event);"
							onkeydown="FormataValor(this, 13, event, 2);" required="true"
							converter="bigDecimalConverter" />
					</h:panelGrid>
				</p:panel>

				<p:panel id="ConsultaObservacores" header="Detalhes do Pagamento"
					style="margin-bottom:10px;margin-top:10px;">
					<h:panelGrid columns="2">
						<p:outputLabel for="Observacao" value="Observação: " />
						<p:inputTextarea rows="10" cols="50" id="Observacao"
							value="#{contratoCobrancaMB.observacao}" label="Observação"
							onblur="" style="width:300px;" />
						<p:spacer width="10" />
					</h:panelGrid>
				</p:panel>

				<div align="center" style="margin-top: 20px;">
					<shiro:hasAnyRoles name="ROOT">
						<p:commandButton
							action="#{contratoCobrancaMB.baixarMultiParcelaParcial()}" ajax="false" 
							icon="ui-icon-transferthick-e-w" value="Baixar"
							update=":form:DetalheParcelas" />
						<p:spacer width="10" />
					</shiro:hasAnyRoles>
					<p:commandButton value="Cancelar" icon="ui-icon ui-icon-cancel"
						oncomplete="PF('baixaParcialMultiParcelasDialog').hide();" />
				</div>
			</h:form>
		</p:dialog>
		<p:dialog header="Baixa Parcial" widgetVar="baixaParcialDialog"
			resizable="false" style="FONT-SIZE: 10pt;" responsive="true"
			height="650" width="500">
			<h:form id="formBaixaParcial">
				<h:panelGrid columns="2">
					<p:outputLabel for="numeroContrato" value="Número do Contrato:"
						styleClass="labelBold" style="margin-right: 59px;" />
					<h:outputText id="numeroContrato"
						value="#{contratoCobrancaMB.objetoContratoCobranca.numeroContrato}"
						label="Número do Contrato"
						style="font-weight: bold; font-size: 18px;" />
					<p:outputLabel for="numeroParcela" value="Número da Parcela: "
						styleClass="labelBold" style="margin-right: 59px;" />
					<h:outputText id="numeroParcela"
						value="#{contratoCobrancaMB.bpContratoCobrancaDetalhes.numeroParcela}"
						label="Número da Parcela:"
						style="font-weight: bold; font-size: 18px;" />
					<p:outputLabel for="dataPagamento" value="Data do Pagamento: "
						styleClass="labelBold" style="margin-right: 59px;" />
					<h:outputText id="dataPagamento" value="#{contratoCobrancaMB.rowEditNewDate}" style="font-weight: bold; font-size: 18px;">
						<f:convertDateTime locale="pt_BR" />
						<f:convertDateTime locale="pt_BR" pattern="dd/MM/yyyy"  />
					</h:outputText>
				</h:panelGrid>
				<p:panel id="ValoresAtualizados" header="Valores Atualizados"
					style="margin-top:20px;margin-bottom:20px;">
					<h:panelGrid columns="3">
						<p:outputLabel for="saldoParcela" value="Valor da Parcela:"
							styleClass="labelBold" style="margin-right: 59px;" />
						<h:outputText value="R$"
							style="font-weight: bold; font-size: 18px;" />
						<p:inputText id="saldoParcela"
							value="#{contratoCobrancaMB.vlrParcelaNew}"
							onkeypress="return isNumberKey(event);"
							onkeydown="FormataValor(this, 13, event, 2);" required="true"
							converter="bigDecimalConverter" />
						<p:outputLabel value="Saldo Atualizado: " styleClass="labelBold"
							style="margin-right: 59px;" />
						<h:outputText value="R$"
							style="font-weight: bold; font-size: 18px;" />
						<h:outputText id="valorAt"
							value="#{contratoCobrancaMB.vlrParcelaAtualizadaNew}"
							style="font-weight: bold; font-size: 18px;"
							converter="bigDecimalConverter" />
						<p:outputLabel for="valorRecebido" value="Valor Recebido: "
							styleClass="labelBold" style="margin-right: 59px;" />
						<h:outputText value="R$"
							style="font-weight: bold; font-size: 18px;" />
						<p:inputText id="valorRecebido"
							value="#{contratoCobrancaMB.vlrRecebido}"
							onkeypress="return isNumberKey(event);"
							onkeydown="FormataValor(this, 13, event, 2);" required="true"
							converter="bigDecimalConverter" />
					</h:panelGrid>
				</p:panel>

				<p:panel id="Pessoas" header="Recebedor" style="margin-bottom:10px;">
					<h:panelGrid columns="3">
						<p:outputLabel for="Recebedor" value="Favorecido: "
							styleClass="labelBold" />
						<p:inputText id="Recebedor"
							value="#{contratoCobrancaMB.selectedRecebedor.nome}" label="Recebedor"
							readonly="TRUE" required="true"
							style="FONT-SIZE: 10pt;width:290px;" />
						<p:commandButton id="botaoRecebedor" type="button"
							onclick="PF('recebedorDialog').show();"
							icon="ui-icon ui-icon-circle-zoomin" />
					</h:panelGrid>
					<p:panel id="ConsultaFinanceiroResultados"
						header="Dados para Pagamento"
						style="margin-bottom:10px;margin-top:10px;">
						<h:panelGrid columns="2">
							<p:outputLabel value="Banco: " styleClass="labelBold" />
							<p:outputLabel
								value="#{contratoCobrancaMB.selectedRecebedor.banco}" />
							<p:outputLabel value="Agência: " styleClass="labelBold" />
							<p:outputLabel
								value="#{contratoCobrancaMB.selectedRecebedor.agencia}" />
							<p:outputLabel value="C/C: " styleClass="labelBold" />
							<p:outputLabel
								value="#{contratoCobrancaMB.selectedRecebedor.conta}" />
							<p:outputLabel value="Favorecido: " styleClass="labelBold" />
							<p:outputLabel
								value="#{contratoCobrancaMB.selectedRecebedor.nomeCC}" />
							<p:outputLabel value="CPF: " styleClass="labelBold"
								rendered="#{contratoCobrancaMB.selectedRecebedor.cpfCC != null}" />
							<p:outputLabel value="CNPJ: " styleClass="labelBold"
								rendered="#{contratoCobrancaMB.selectedRecebedor.cnpjCC != null}" />
							<p:outputLabel
								value="#{contratoCobrancaMB.selectedRecebedor.cpfCC}#{contratoCobrancaMB.selectedRecebedor.cnpjCC}" />
						</h:panelGrid>
						<h:panelGrid columns="3">
							<p:outputLabel value="Saldo Atualizado: " styleClass="labelBold"
								style="" />
							<h:outputText value="R$" style="" />
							<h:outputText
								value="#{contratoCobrancaMB.vlrParcelaAtualizadaNew}" style=""
								converter="bigDecimalConverter" />
						</h:panelGrid>
						<h:panelGrid columns="2">
							<p:outputLabel value="Data do Pagamento: " styleClass="labelBold"
								style="" />
							<h:outputText value="#{contratoCobrancaMB.rowEditNewDate}"
								style="">
								<f:convertDateTime locale="pt_BR" />
								<f:convertDateTime locale="pt_BR" pattern="dd/MM/yyyy" />
							</h:outputText>
						</h:panelGrid>
					</p:panel>
					<p:panel id="ConsultaObservacores" header="Detalhes do Pagamento"
						style="margin-bottom:10px;margin-top:10px;">
						<h:panelGrid columns="2">
							<p:outputLabel for="Observacao" value="Observação: " />
							<p:inputTextarea rows="10" cols="50" id="Observacao"
								value="#{contratoCobrancaMB.observacao}" label="Observação"
								onblur="" style="width:300px;" />
							<p:spacer width="10" />
						</h:panelGrid>
					</p:panel>
				</p:panel>

				<div align="center" style="margin-top: 20px;">
					<shiro:hasAnyRoles name="ROOT">
						<p:commandButton
							action="#{contratoCobrancaMB.baixarParcelaParcial}" ajax="false"
							icon="ui-icon-transferthick-e-w" value="Baixar"
							update=":form:DetalheParcelas" />
						<p:spacer width="10" />
					</shiro:hasAnyRoles>
					<p:commandButton value="Cancelar" icon="ui-icon ui-icon-cancel"
						oncomplete="PF('baixaParcialDialog').hide();" />
				</div>
			</h:form>
		</p:dialog>
	    <p:dialog header="Recebedores" widgetVar="recebedorDialog"
			resizable="false" style="FONT-SIZE: 10pt;" width="600">
			<h:form id="formRecebedores">
				<p:dataTable id="recebedorDialogdlg" var="recebedorDialogdlg"
					value="#{contratoCobrancaMB.listRecebedores}" paginator="true"
					rows="10" selectionMode="single"
					paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
					rowsPerPageTemplate="5,10,15"
					selection="#{contratoCobrancaMB.selectedRecebedor}"
					style="FONT-SIZE: 10pt;" emptyMessage=""
					rowKey="#{recebedorDialogdlg.id}">

					<p:column style="text-align: center;"
						sortBy="#{recebedorDialogdlg.cnpj}"
						filterBy="#{recebedorDialogdlg.cnpj}" filterMatchMode="contains">
						<f:facet name="header">
							<h:outputText value="CNPJ" />
						</f:facet>
						<h:outputText value="#{recebedorDialogdlg.cnpj}" />
					</p:column>

					<p:column style="text-align: center;"
						sortBy="#{recebedorDialogdlg.cpf}"
						filterBy="#{recebedorDialogdlg.cpf}" filterMatchMode="contains">
						<f:facet name="header">
							<h:outputText value="CPF" />
						</f:facet>
						<h:outputText value="#{recebedorDialogdlg.cpf}" />
					</p:column>

					<p:column style="text-align: center;"
						sortBy="#{recebedorDialogdlg.nome}"
						filterBy="#{recebedorDialogdlg.nome}" filterMatchMode="contains">
						<f:facet name="header">
							<h:outputText value="Nome" />
						</f:facet>
						<h:outputText value="#{recebedorDialogdlg.nome}" />
					</p:column>

					<f:facet name="footer">
						<p:commandButton value="Selecionar"
							action="#{contratoCobrancaMB.populateSelectedRecebedor}"
							icon="ui-icon ui-icon-check"
							update=":formBaixaParcial:Recebedor :formBaixaParcial:Pessoas"
							oncomplete="PF('recebedorDialog').hide();" />
						<p:commandButton value="Limpar Seleção"
							action="#{contratoCobrancaMB.clearRecebedor}"
							icon="ui-icon ui-icon-trash"
							update=":formBaixaParcial:Recebedor recebedorDialogdlg :formBaixaParcial:Pessoas"
							oncomplete="PF('recebedorDialog').hide();" />
						<p:commandButton value="Cancelar" icon="ui-icon ui-icon-cancel"
							oncomplete="PF('recebedorDialog').hide();" />
					</f:facet>
				</p:dataTable>
			</h:form>
		</p:dialog>		
	</ui:define>
</ui:composition>