<?xml version="1.0" encoding="UTF-8" ?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:shiro="http://shiro.apache.org/tags"
	template="../MenuAtendimento.xhtml">
	
	<ui:define name="conteudo">
		<h:form id="form">
			<script src="#{request.contextPath}/resources/resources/js/functions.js"></script>
			<script src="#{request.contextPath}/resources/js/locale-primefaces.js" library="javascript"></script>
			<link rel="stylesheet" type="text/css" href="#{request.contextPath}/resources/resources/css/Style.css" title="" media="all" />
			
			<p:panel id="DocketPanel" header="Docket"
				style="margin-bottom:10px;">
				<p:focus />
				<p:messages id="msgs" />	
				<h:panelGrid columns="3">		
					
				</h:panelGrid>	
				
				<h:panelGroup id="Dados">
					<p:dataList id="pagadorList" value="#{docketMB.listPagador}" var="DocAnalise" style="padding: 0;" type="definition">
						<p:panel id="pagadorPanel" header="#{DocAnalise.pagador.nome}" style="padding: none" 
							toggleable="true" toggleableHeader="true">
							<f:facet name="header" styleClass="ui-accordion-header">
								<p:commandButton icon="ui-icon ui-icon-trash"
									action="#{docketMB.removerPessoa(DocAnalise)}"
									ajax="true" update=":form:DocketPanel" />
								<p:outputLabel value="#{DocAnalise.pagador.nome}" style="FONT-SIZE: 15pt;margin-left: 5px" styleClass="ui-panel-title"/>
							</f:facet>
							<h:panelGrid columns="1">
								<h:panelGroup rendered="#{DocAnalise.pagador.cpf != null and DocAnalise.pagador.cpf != ''}">
									<h:panelGrid columns="6">
										<h:panelGrid columns="2">
											<p:outputLabel value="Nome:" styleClass="labelBold"/>
											<p:outputLabel value="#{DocAnalise.pagador.nome}" />  
										</h:panelGrid>		
										<h:panelGrid columns="2">				
											<p:outputLabel value="CPF:"  styleClass="labelBold"/>
											<p:inputMask value="#{DocAnalise.pagador.cpf}" style="width:100px" mask="999.999.999-99" />  
										</h:panelGrid>
										<h:panelGrid columns="2">								
											<p:outputLabel value="Mãe:" styleClass="labelBold"/>
											<p:inputText value="#{DocAnalise.pagador.nomeMae}" /> 	
										</h:panelGrid>
										<h:panelGrid columns="2">						 
											<p:outputLabel value="RG:" styleClass="labelBold"/>
											<p:inputText value="#{DocAnalise.pagador.rg}" /> 	
										</h:panelGrid>
										<h:panelGrid columns="2">							
											<p:outputLabel value="Data Nascimento:" styleClass="labelBold"/>
											<p:calendar value="#{DocAnalise.pagador.dtNascimento}" styleClass="dateTimeField" 
												pattern="dd/MM/yyyy" size="50" inputStyle="margin-right: 5px; width:70px"/>
										</h:panelGrid>
									</h:panelGrid>
								</h:panelGroup>	
								<h:panelGrid columns="6" rendered="#{DocAnalise.pagador.cpf eq null or DocAnalise.pagador.cpf eq ''}">
										<h:panelGrid columns="2">
										<p:outputLabel value="Razão Social:" style="FONT-SIZE: 5pt; margin-right: 5px" styleClass="labelBold"/>
										<p:outputLabel value="#{DocAnalise.pagador.nome}" style="FONT-SIZE: 5pt; margin-right: 5px" />  
									</h:panelGrid>
									<h:panelGrid columns="2">						
										<p:outputLabel value="CNPJ:" style="FONT-SIZE: 5pt; margin-right: 5px" styleClass="labelBold"/>
										<p:inputText value="#{DocAnalise.pagador.cnpj}" style="FONT-SIZE: 5pt; margin-right: 5px; width:120px" />
									</h:panelGrid>					
								</h:panelGrid> 						    
								<h:panelGrid columns="2">
									<p:outputLabel value="UF:" styleClass="labelBold" />
									<p:outputLabel value="#{DocAnalise.estadosConsultaStr}" />
								</h:panelGrid>
							</h:panelGrid>	
							<p:panel id="docsPanel" header="" style="padding: 0" toggleable="true" toggleableHeader="true" >
								<f:facet name="header" styleClass="ui-accordion-header">
									<p:outputLabel value="Documentos - #{DocAnalise.docketConsultas.size()}" 
									style="FONT-SIZE: 15pt;margin-left: 5px" styleClass="ui-panel-title"/>
								</f:facet>
								<p:dataList id="docsList" value="#{DocAnalise.docketConsultas}" var="docs" style="padding: 0" type="definition">
									<p:panel id="PanelGridDocs" header="Documentos" style="padding: 0" toggleable="true" toggleableHeader="true" collapsed="true" >			
										<f:facet name="header" styleClass="ui-accordion-header">
											<p:commandButton icon="ui-icon ui-icon-trash" ajax="true"
												action="#{docketMB.removeDoc(DocAnalise, docs)}"
												update="form:pagadorList"
												disabled="#{docs.retorno ne null}" />
											<p:outputLabel value="X - " style="FONT-SIZE: 15pt;margin-left: 5px;margin-right: 0px" styleClass="ui-panel-title" rendered="#{docs.idDocket eq null}"/>
											<p:outputLabel value="✓ - " style="FONT-SIZE: 15pt;margin-left: 5px;margin-right: 0px" styleClass="ui-panel-title" rendered="#{docs.idDocket ne null}"/>
											<p:outputLabel value="#{docs.docketDocumentos.documentoNome}" style="FONT-SIZE: 15pt;margin-left: 5px" styleClass="ui-panel-title"/>
											<p:outputLabel value="#{docs.uf}" style="FONT-SIZE: 15pt;margin-left: 5px" styleClass="ui-panel-title"/>
										</f:facet>
								
										<h:panelGrid columns="2">
											<p:outputLabel value="Nome:" styleClass="labelBold" />
											<p:outputLabel value="#{DocAnalise.pagador.nome}" />
										</h:panelGrid>
									</p:panel>	
								</p:dataList>
							</p:panel>
						</p:panel>
					</p:dataList>
				</h:panelGroup>
			
				<h:panelGrid columns="3">	
					<p:commandButton action="#{docketMB.criarPedido}"
						icon="ui-icon ui-icon-print" value="Fazer Pedido"  update=":form  msgs" />		
						
					<p:commandButton value="Voltar p/ Contrato" action="#{contratoCobrancaMB.clearFieldsEditarPendentesAnalistas}" 
						ajax="false" icon="ui-icon-pencil" title="Editar" rendered="#{docketMB.contratoCobranca ne null}">
	                	<f:setPropertyActionListener target="#{contratoCobrancaMB.objetoContratoCobranca}" value="#{docketMB.contratoCobranca}" />
	                	<f:setPropertyActionListener target="#{contratoCobrancaMB.objetoPagadorRecebedor}" value="#{docketMB.contratoCobranca.pagador}" />
	                	<f:setPropertyActionListener target="#{contratoCobrancaMB.objetoImovelCobranca}" value="#{docketMB.contratoCobranca.imovel}" />
	                	<f:setPropertyActionListener target="#{contratoCobrancaMB.updateMode}" value="true" />
	                	<f:setPropertyActionListener target="#{contratoCobrancaMB.crmMode}" value="false" />
	                	<f:setPropertyActionListener target="#{contratoCobrancaMB.deleteMode}" value="false" />
	                	<f:setPropertyActionListener target="#{contratoCobrancaMB.baixarMode}" value="false" />
	                </p:commandButton>	
				</h:panelGrid>
			</p:panel>
				
		</h:form>
		
	</ui:define>
</ui:composition>
