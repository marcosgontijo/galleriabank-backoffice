<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:shiro="http://shiro.apache.org/tags"
	xmlns:p="http://primefaces.org/ui">
<h:head>
	<title>Galleria Finanças</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<link rel="shortcut icon" type="image/x-icon"
		href="#{resource['image/Commons/icon.ico']}"></link>
	<link rel="stylesheet" type="text/css"
		href="#{resource['css/Style.css']}" title="" media="all" />
	<link rel="stylesheet" type="text/css"
		href="#{resource['css/InvestidorPageBootstrap.min.css']}" title=""
		media="all" />
	<link rel="stylesheet" type="text/css"
		href="#{resource['css/InvestidorPageStyle.css']}" title="" media="all" />
	<h:outputScript name="#{resource['js/functions.js']}"
		library="javascript" />
	<h:outputScript name="#{resource['js/locale-primefaces.js']}"
		library="javascript" />
</h:head>
<h:body onload="#{investidorMB.getContratosInvestidor()}">

	
	<p:messages id="mensagens" showDetail="true" />
	<div class="navbar-area dashboard-navBar">
		<div class="ui-g">
			<div class="ui-g-12 ui-md-4 ui-lg-4 responsiveIcons">
				<a class="navbar-brand" href="#"><img
					src="#{resource['image/LogoSiscoat.png']}" alt="" /></a>
			</div>
			<div class="ui-g-12 ui-md-6 ui-lg-6">
				<h:outputText value="OLÁ " styleClass="investidorLogin"
					style="color: #fff !important;padding-right: 7px;" />
				<h:outputText value="#{investidorMB.usuarioLogado.name}"
					styleClass="investidorLogin" style="color: #dfdfdf !important;" />
			</div>

			<div class="ui-g-12 ui-md-1 ui-lg-1 responsiveIcons">
				<h:form id="formRefresh">
					<p:commandLink title="Atualizar Portal"
						actionListener="#{investidorMB.getContratosInvestidor()}"
						style="padding-top: 7%;" update="@all">
						<img src="#{resource['image/AtualizacaoPortalInvestidor.png']}"
							alt="" />
					</p:commandLink>
				</h:form>
			</div>

			<div class="ui-g-12 ui-md-1 ui-lg-1 responsiveIcons">
				<h:form id="formLogout">
					<p:commandLink title="Sair" actionListener="#{logoutBean.logout}"
						style="padding-top: 7%;">
						<img src="#{resource['image/InvestidorPageExit.png']}" alt="" />
					</p:commandLink>
				</h:form>
			</div>
		</div>
		<div class="ui-g dashboard-area">
			<div
				class="ui-g-12 ui-md-12 ui-lg-12 dashboard-resumo bgCardConciliacao">
				<p:dataTable id="dtResumo" var="resumo" styleClass="dashboard-table"
					style="width:90%" value="#{investidorMB.investidorResumosTela}">

					<p:columnGroup type="header">
						<p:column
							headerText="Contratos #{investidorMB.labelSituacaoResumo}"
							styleClass="titulo #{investidorMB.getCssStatus(investidorMB.situacaoSelecionada)}" />
						<p:column headerText="Valor Investido" styleClass="titulo" />
						<p:column headerText="Valor Recebido" styleClass="titulo" />
					</p:columnGroup>

					<p:column styleClass="dashboard-texto">
						<h:outputText value="#{resumo.qtdeContratos}" />
					</p:column>
					<p:column styleClass="dashboard-texto">
						<h:outputText value="#{resumo.valorInvestido}"
							converter="bigDecimalConverter">
							<f:convertNumber type="currency" currencySymbol="R$" />
						</h:outputText>
					</p:column>
					<p:column styleClass="dashboard-texto">
						<h:outputText value="#{resumo.valorRecebido}"
							converter="bigDecimalConverter">
							<f:convertNumber type="currency" currencySymbol="R$" />
						</h:outputText>
					</p:column>
				</p:dataTable>
				<div class="responsiveIcons" style="margin: auto">
					<h:form id="detalhaResumo">
						<p:commandLink title="Detalhar Resumo"
							oncomplete="PF('resumo').show()" icon="fa fa-fw fa-search"
							style="padding-top: 7%;">
							<img src="#{resource['image/detalharResumo.png']}"
								style="height: 62px" alt="" />
						</p:commandLink>
					</h:form>
				</div>
			</div>
		</div>
	</div>


	<div class="slider-area">
		<h:form id="formDashboard">
		
			<div style="width: 100%; padding-top: 5px;">
				<div
					style="width: 96%; margin: 10px auto; height: 92px; display: flex; justify-content: center;">


					<h:panelGrid columns="1" styleClass="dashboard-bloco-menu">
						<p:commandLink title="Contratos Ativos" disabled="#{!investidorMB.existeContratoAtivo}"
							styleClass="dashboard-icone-menu" ajax="true"
							update="formDashboard dtResumo"
							action="#{investidorMB.filtrarSituacaoAtivos()}">
							<img src="#{resource['image/ContratosAtivos.png']}"
								style="height: 62px" alt="" />
						</p:commandLink>
						<h:outputText value="Contratos Ativos" />
					</h:panelGrid>

					<h:panelGrid columns="1" styleClass="dashboard-bloco-menu">
						<p:commandLink title="Contratos Quitados"  disabled="#{!investidorMB.existeContratoQuitado}"
							styleClass="dashboard-icone-menu" ajax="true"
							update="formDashboard dtResumo"
							action="#{investidorMB.filtrarSituacaoQuitados()}">
							<img src="
							#{resource['image/ContratosQuitados.png']}"
								style="height: 62px" alt="" />
						</p:commandLink>
						<h:outputText value="Contratos Quitados" />
					</h:panelGrid>

					<h:panelGrid columns="1" styleClass="dashboard-bloco-menu">
						<p:commandLink title="Extrato Detalhado"
							styleClass="dashboard-icone-menu"
							oncomplete="PF('extrato').show()">
							<img src="
							#{resource['image/ExtratoDetalhado.png']}"
								style="height: 62px" alt="" />
						</p:commandLink>
						<h:outputText value="Extrato Completo" />
					</h:panelGrid>

					<h:panelGrid columns="1" styleClass="dashboard-bloco-menu">

						<p:commandLink title="Documentos" disabled="true"
							styleClass="dashboard-icone-menu" ajax="false"
							onclick="#{investidorMB.downloadInformeRendimentosPortalInvestidor()}">
							<img src="
							#{resource['image/Documentos.png']}"
								style="height: 62px" alt="" />
						</p:commandLink>
						<h:outputText value="Documentos" />
					</h:panelGrid>

					<h:panelGrid columns="1" styleClass="dashboard-bloco-menu">
						<p:commandLink title="Gerar PDF - Informe de Rendimentos 2020"
							ajax="false" styleClass="dashboard-icone-menu"
							onclick="PrimeFaces.monitorDownload(start, stop);"
							icon="ui-icon-arrowthick-1-s">
							<img src="
							#{resource['image/informeRendimentos.png']}"
								style="height: 62px" alt="" />
							<p:fileDownload
								value="#{investidorMB.processInformeRendimentosPortalInvestidor()}" />
						</p:commandLink>

						<h:outputText value="Informe de Rendimentos" />
					</h:panelGrid>

				</div>
			</div>
			<h:panelGrid columns="2" style="width:100%"
				columnClasses="dashboard-extrato, dashboard-contratos">

				<p:panel id="extratoInvestidor" styleClass="dashboard-center"
					header="Extrato de Pagamentos"
					style="margin-bottom:10px;height: 535px;margin-top: 25px;">
					<br />
					<p:panel style="text-align:center;height: 443px;">
						<h:panelGrid columns="1">
							<p:dataTable id="dtExtratoUltimosLancmentos" var="extrato"
								styleClass="dashboard-extrato-table" sortOrder="ascending"
								sortBy="#{extrato.dataMovimento}" expandableRowGroups="true"
								value="#{investidorMB.extratoUltimosLancamentos}">
								<p:headerRow>
									<p:column colspan="3"
										style="color: #b87b2a; font-size: 14px; font-weight: bold;text-align: left;">
										<h:outputText value="#{extrato.dataMovimento}">
											<f:convertDateTime locale="pt_BR" />
											<f:convertDateTime locale="pt_BR" pattern="dd/MM/yy" />
										</h:outputText>
									</p:column>
									<p:column colspan="2" />
								</p:headerRow>

								<p:columnGroup type="header">
									<p:column headerText="Data Pgto"
										style="color: #b87b2a; font-size: 14px; font-weight: bold;width:80px;" />
									<p:column headerText="Referência"
										style="color: #b87b2a; font-size: 14px; font-weight: bold;" />
									<p:column headerText="Valor"
										style="color: #b87b2a; font-size: 14px; font-weight: bold;width:100px;" />
								</p:columnGroup>

								<p:column>
									<h:outputText value="" />
								</p:column>
								<p:column
									style="color: #b87b2a; font-size: 12px; font-weight: bold;text-align:left;">
									<h:outputText escape="false" value="#{extrato.descricao}" />
								</p:column>
								<p:column
									style="color: #b87b2a; font-size: 12px; font-weight: bold;text-align:right;">
									<h:outputText value="#{extrato.valor}"
										converter="bigDecimalConverter">
										<f:convertNumber type="currency" currencySymbol="R$" />
									</h:outputText>
								</p:column>
							</p:dataTable>
							<br />

						</h:panelGrid>
					</p:panel>
				</p:panel>
				<p:panel id="saldoSubConta" styleClass="dashboard-center"
					header="Contratos"
					style="margin-bottom:10px;height: 535px;margin-top: 25px; ">
					<br />
					<p:dataView var="contratos" value="#{investidorMB.contratosVOTela}"
						rows="12" paginator="false" rowsPerPageTemplate="6,12,16"
						paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
						layout="grid" style="height:900px !important;"
						styleClass="dashboard-dataview-grid">

						<p:dataViewGridItem>
							<p:panel style="text-align:center">
								<f:facet name="header" style="text-align:center">
									<h:outputText value="Contrato - #{contratos.numeroContrato}" />
									<br />
									<h:outputText
										styleClass="#{investidorMB.getCssStatus(contratos.situacao)}"
										value="#{contratos.situacao}" />
								</f:facet>
								<h:panelGrid columns="1" style="width:100%">
									<br />
									<h:outputText value="Data do Contrato"
										style="color: #b87b2a; font-size: 18px; font-weight: bold;" />
									<h:outputText value="#{contratos.dataContrato}"
										style="color: #b87b2a; font-size: 18px;">
										<f:convertDateTime locale="pt_BR" />
										<f:convertDateTime locale="pt_BR" pattern="dd/MM/yyyy" />
									</h:outputText>
									<h:outputText value="Pagador"
										style="color: #b87b2a; font-size: 18px; font-weight: bold;" />
									<h:outputText value="#{contratos.pagador}"
										style="color: #b87b2a; font-size: 18px;" />
									<br />
									<h:outputText value="Valor Investido"
										style="color: #b87b2a; font-size: 18px; font-weight: bold;" />
									<h:outputText value="#{contratos.valorInvestido}"
										converter="bigDecimalConverter"
										style="color: #b87b2a; font-size: 18px;">
										<f:convertNumber type="currency" currencySymbol="R$" />
									</h:outputText>
									<h:outputText value="Valor Recebido"
										style="color: #b87b2a; font-size: 18px; font-weight: bold;" />
									<h:outputText value="#{contratos.valorRecebido}"
										converter="bigDecimalConverter"
										style="color: #b87b2a; font-size: 18px;">
										<f:convertNumber type="currency" currencySymbol="R$" />
									</h:outputText>
									<br />
									<p:commandButton value="Financeiro"
										update=":formDetalhes:dtParcelas"
										oncomplete="PF('detalheContrato').show()"
										icon="fa fa-fw fa-search"
										action="#{investidorMB.getInformacoesDoInvestidorNoContrato(contratos)}"
										style="padding-left: 10px;">
										<f:setPropertyActionListener
											target="#{investidorMB.selectedContrato.numeroContrato}"
											value="#{contratos.numeroContrato}" />
									</p:commandButton>
									<p:spacer width="10" />
									<p:commandButton value="Envelope"
										update=":formDetalhesEnvelope:dtParcelasEnvelope"
										oncomplete="PF('detalheContratoEnvelope').show()"
										icon="fa fa-fw fa-search"
										action="#{investidorMB.getInformacoesDoInvestidorNoContrato(contratos)}"
										style="padding-left: 10px;"
										rendered="#{investidorMB.selectedContrato.listContratoCobrancaParcelasInvestidorSelecionadoEnvelope.size() gt 0}">
										<f:setPropertyActionListener
											target="#{investidorMB.selectedContrato.numeroContrato}"
											value="#{contratos.numeroContrato}" />
									</p:commandButton>
								</h:panelGrid>
							</p:panel>
						</p:dataViewGridItem>


					</p:dataView>
				</p:panel>
			</h:panelGrid>

			<p:panel id="informeRendimentos2020" rendered="false"
				header="Informe de Rendimentos - 2020"
				style="padding-top:20px; padding-bottom:20px;">
				<h:panelGrid columns="1">
					<p:outputLabel
						value="Para gerar o informe de rendimentos 2020, clique no botão e faça download do PDF."
						styleClass="labelBold" />
					<p:commandButton value="Gerar PDF - Informe de Rendimentos"
						ajax="false" icon="ui-icon-print"
						action="#{investidorMB.processInformeRendimentosPortalInvestidor}"/>
				</h:panelGrid>				
			</p:panel>
		</h:form>
	</div>


	<ui:include
		src="/Util/StatusDialog.xhtml"></ui:include>
	<ui:include
		src="/Investidor/Dashboard-DetalhesInvestidorEnvelope.xhtml"></ui:include>
	<ui:include src="/Investidor/Dashboard-DetalhesInvestidor.xhtml"></ui:include>
	<ui:include src="/Investidor/Dashboard-Observacoes.xhtml"></ui:include>
	<ui:include src="/Investidor/Dashboard-ExtratoCompleto.xhtml"></ui:include>
	<ui:include src="/Investidor/Dashboard-Resumo.xhtml"></ui:include>
	<footer id="footer" class="footer-area">
	<div class="footer-copyright">
		<div class="container">
			<p style="color: #fff; text-align: center !important;">
				<a href="http://www.galleriafinancas.com.br" target="_blank">Galleria
					Finanças</a>
			</p>
		</div>
		<!-- container -->
	</div>
	<!-- footer copyright --> </footer>


</h:body>
</html>